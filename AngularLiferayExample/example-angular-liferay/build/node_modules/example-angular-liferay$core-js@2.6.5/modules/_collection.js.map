{"version":3,"sources":["_collection.js"],"names":["global","require","$export","redefine","redefineAll","meta","forOf","anInstance","isObject","fails","$iterDetect","setToStringTag","inheritIfRequired","module","exports","NAME","wrapper","methods","common","IS_MAP","IS_WEAK","Base","C","ADDER","proto","prototype","O","fixMethod","KEY","fn","a","call","has","get","undefined","add","set","b","forEach","entries","next","getConstructor","NEED","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","iter","BUGGY_ZERO","$instance","index","target","iterable","that","constructor","clear","G","W","F","setStrong"],"mappings":"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","file":"_collection.js","sourcesContent":["'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar redefineAll = require('./_redefine-all');\nvar meta = require('./_meta');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar fails = require('./_fails');\nvar $iterDetect = require('./_iter-detect');\nvar setToStringTag = require('./_set-to-string-tag');\nvar inheritIfRequired = require('./_inherit-if-required');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  var fixMethod = function (KEY) {\n    var fn = proto[KEY];\n    redefine(proto, KEY,\n      KEY == 'delete' ? function (a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'has' ? function has(a) {\n        return IS_WEAK && !isObject(a) ? false : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'get' ? function get(a) {\n        return IS_WEAK && !isObject(a) ? undefined : fn.call(this, a === 0 ? 0 : a);\n      } : KEY == 'add' ? function add(a) { fn.call(this, a === 0 ? 0 : a); return this; }\n        : function set(a, b) { fn.call(this, a === 0 ? 0 : a, b); return this; }\n    );\n  };\n  if (typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    var instance = new C();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~  Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    var ACCEPT_ITERABLES = $iterDetect(function (iter) { new C(iter); }); // eslint-disable-line no-new\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new C();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n    if (!ACCEPT_ITERABLES) {\n      C = wrapper(function (target, iterable) {\n        anInstance(target, C, NAME);\n        var that = inheritIfRequired(new Base(), target, C);\n        if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n        return that;\n      });\n      C.prototype = proto;\n      proto.constructor = C;\n    }\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n    // weak collections should not contains .clear method\n    if (IS_WEAK && proto.clear) delete proto.clear;\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F * (C != Base), O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n"]}