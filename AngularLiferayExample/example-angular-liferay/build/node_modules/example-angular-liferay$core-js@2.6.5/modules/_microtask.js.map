{"version":3,"sources":["_microtask.js"],"names":["global","require","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","process","Promise","isNode","module","exports","head","last","notify","flush","parent","fn","domain","exit","next","e","undefined","enter","nextTick","navigator","standalone","toggle","node","document","createTextNode","observe","characterData","data","resolve","promise","then","call","task"],"mappings":";;AAAA,MAAIA,SAASC,QAAQ,WAAR,CAAb;AACA,MAAIC,YAAYD,QAAQ,SAAR,EAAmBE,GAAnC;AACA,MAAIC,WAAWJ,OAAOK,gBAAP,IAA2BL,OAAOM,sBAAjD;AACA,MAAIC,UAAUP,OAAOO,OAArB;AACA,MAAIC,UAAUR,OAAOQ,OAArB;AACA,MAAIC,SAASR,QAAQ,QAAR,EAAkBM,OAAlB,KAA8B,SAA3C;;AAEAG,SAAOC,OAAP,GAAiB,YAAY;AAC3B,QAAIC,IAAJ,EAAUC,IAAV,EAAgBC,MAAhB;;AAEA,QAAIC,QAAQ,YAAY;AACtB,UAAIC,MAAJ,EAAYC,EAAZ;AACA,UAAIR,WAAWO,SAAST,QAAQW,MAA5B,CAAJ,EAAyCF,OAAOG,IAAP;AACzC,aAAOP,IAAP,EAAa;AACXK,aAAKL,KAAKK,EAAV;AACAL,eAAOA,KAAKQ,IAAZ;AACA,YAAI;AACFH;AACD,SAFD,CAEE,OAAOI,CAAP,EAAU;AACV,cAAIT,IAAJ,EAAUE,SAAV,KACKD,OAAOS,SAAP;AACL,gBAAMD,CAAN;AACD;AACF,OAACR,OAAOS,SAAP;AACF,UAAIN,MAAJ,EAAYA,OAAOO,KAAP;AACb,KAfD;;AAiBA;AACA,QAAId,MAAJ,EAAY;AACVK,eAAS,YAAY;AACnBP,gBAAQiB,QAAR,CAAiBT,KAAjB;AACD,OAFD;AAGF;AACC,KALD,MAKO,IAAIX,YAAY,EAAEJ,OAAOyB,SAAP,IAAoBzB,OAAOyB,SAAP,CAAiBC,UAAvC,CAAhB,EAAoE;AACzE,UAAIC,SAAS,IAAb;AACA,UAAIC,OAAOC,SAASC,cAAT,CAAwB,EAAxB,CAAX;AACA,UAAI1B,QAAJ,CAAaW,KAAb,EAAoBgB,OAApB,CAA4BH,IAA5B,EAAkC,EAAEI,eAAe,IAAjB,EAAlC,EAHyE,CAGb;AAC5DlB,eAAS,YAAY;AACnBc,aAAKK,IAAL,GAAYN,SAAS,CAACA,MAAtB;AACD,OAFD;AAGF;AACC,KARM,MAQA,IAAInB,WAAWA,QAAQ0B,OAAvB,EAAgC;AACrC;AACA,UAAIC,UAAU3B,QAAQ0B,OAAR,CAAgBZ,SAAhB,CAAd;AACAR,eAAS,YAAY;AACnBqB,gBAAQC,IAAR,CAAarB,KAAb;AACD,OAFD;AAGF;AACA;AACA;AACA;AACA;AACA;AACC,KAZM,MAYA;AACLD,eAAS,YAAY;AACnB;AACAZ,kBAAUmC,IAAV,CAAerC,MAAf,EAAuBe,KAAvB;AACD,OAHD;AAID;;AAED,WAAO,UAAUE,EAAV,EAAc;AACnB,UAAIqB,OAAO,EAAErB,IAAIA,EAAN,EAAUG,MAAME,SAAhB,EAAX;AACA,UAAIT,IAAJ,EAAUA,KAAKO,IAAL,GAAYkB,IAAZ;AACV,UAAI,CAAC1B,IAAL,EAAW;AACTA,eAAO0B,IAAP;AACAxB;AACD,OAACD,OAAOyB,IAAP;AACH,KAPD;AAQD,GA7DD","file":"_microtask.js","sourcesContent":["var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n"]}