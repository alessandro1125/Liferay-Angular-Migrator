{"version":3,"sources":["../../../../../../../packages/common/src/directives/ng_style.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAQA,aAAQ,SAAR,EAA4B,UAA5B,EAAwC,KAAxC,EAAgF,eAAhF,EAAiG,SAAjG,QAAiH,eAAjH;;;;;;;;;;;;;;;;;;;;;;;AAyBA,WAAM,MAAA,OAAA,CAAA;;;;;;AAMJ,oBACY,QADZ,EAC+C,KAD/C,EAC0E,SAD1E,EAC8F;AAAlF,iBAAA,QAAA,GAAA,QAAA;AAAmC,iBAAA,KAAA,GAAA,KAAA;AAA2B,iBAAA,SAAA,GAAA,SAAA;AAAwB;;;;;AAElG,YACI,OADJ,CACY,MADZ,EAC2C;AACzC,iBAAK,QAAL,GAAgB,MAAhB;AACA,gBAAI,CAAC,KAAK,OAAN,IAAiB,MAArB,EAA6B;AAC3B,qBAAK,OAAL,GAAe,KAAK,QAAL,CAAc,IAAd,CAAmB,MAAnB,EAA2B,MAA3B,EAAf;AACD;AACF;;;;AAED,oBAAS;AACP,gBAAI,KAAK,OAAT,EAAkB;;AAChB,sBAAM,UAAU,KAAK,OAAL,CAAa,IAAb,CAAkB,KAAK,QAAvB,CAAhB;AACA,oBAAI,OAAJ,EAAa;AACX,yBAAK,aAAL,CAAmB,OAAnB;AACD;AACF;AACF;;;;;AAEO,sBAAc,OAAd,EAA6D;AACnE,oBAAQ,kBAAR,CAA4B,MAAD,IAAY,KAAK,SAAL,CAAe,OAAO,GAAtB,EAA2B,IAA3B,CAAvC;AACA,oBAAQ,gBAAR,CAA0B,MAAD,IAAY,KAAK,SAAL,CAAe,OAAO,GAAtB,EAA2B,OAAO,YAAlC,CAArC;AACA,oBAAQ,kBAAR,CAA4B,MAAD,IAAY,KAAK,SAAL,CAAe,OAAO,GAAtB,EAA2B,OAAO,YAAlC,CAAvC;;;;;;;AAGM,kBAAU,WAAV,EAA+B,KAA/B,EAAkE;AACxE,kBAAM,CAAC,IAAD,EAAO,IAAP,IAAe,YAAY,KAAZ,CAAkB,GAAlB,CAArB;AACA,oBAAQ,SAAS,IAAT,IAAiB,IAAjB,GAAwB,GAAG,KAAK,GAAG,IAAI,EAAvC,GAA4C,KAApD;AAEA,gBAAI,SAAS,IAAb,EAAmB;AACjB,qBAAK,SAAL,CAAe,QAAf,CAAwB,KAAK,KAAL,CAAW,aAAnC,EAAkD,IAAlD,EAAsD,gBAAE,KAAxD;AACD,aAFD,MAEO;AACL,qBAAK,SAAL,CAAe,WAAf,CAA2B,KAAK,KAAL,CAAW,aAAtC,EAAqD,IAArD;AACD;;AAxCC;kCADL,S,EAAS,MAAA,CAAC,EAAC,UAAU,WAAX,EAAD,C;;4CAxBsE,e,YAApD,U,YAAqE,S;;0BAkC9F,K","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Directive, DoCheck, ElementRef, Input, KeyValueChanges, KeyValueDiffer, KeyValueDiffers, Renderer2} from '@angular/core';\n\n/**\n * @ngModule CommonModule\n *\n * @usageNotes\n * ```\n * <some-element [ngStyle]=\"{'font-style': styleExp}\">...</some-element>\n *\n * <some-element [ngStyle]=\"{'max-width.px': widthExp}\">...</some-element>\n *\n * <some-element [ngStyle]=\"objExp\">...</some-element>\n * ```\n *\n * @description\n *\n * Update an HTML element styles.\n *\n * The styles are updated according to the value of the expression evaluation:\n * - keys are style names with an optional `.<unit>` suffix (ie 'top.px', 'font-style.em'),\n * - values are the values assigned to those properties (expressed in the given unit).\n *\n *\n */\n@Directive({selector: '[ngStyle]'})\nexport class NgStyle implements DoCheck {\n  // TODO(issue/24571): remove '!'.\n  private _ngStyle !: {[key: string]: string};\n  // TODO(issue/24571): remove '!'.\n  private _differ !: KeyValueDiffer<string, string|number>;\n\n  constructor(\n      private _differs: KeyValueDiffers, private _ngEl: ElementRef, private _renderer: Renderer2) {}\n\n  @Input()\n  set ngStyle(values: {[key: string]: string}) {\n    this._ngStyle = values;\n    if (!this._differ && values) {\n      this._differ = this._differs.find(values).create();\n    }\n  }\n\n  ngDoCheck() {\n    if (this._differ) {\n      const changes = this._differ.diff(this._ngStyle);\n      if (changes) {\n        this._applyChanges(changes);\n      }\n    }\n  }\n\n  private _applyChanges(changes: KeyValueChanges<string, string|number>): void {\n    changes.forEachRemovedItem((record) => this._setStyle(record.key, null));\n    changes.forEachAddedItem((record) => this._setStyle(record.key, record.currentValue));\n    changes.forEachChangedItem((record) => this._setStyle(record.key, record.currentValue));\n  }\n\n  private _setStyle(nameAndUnit: string, value: string|number|null|undefined): void {\n    const [name, unit] = nameAndUnit.split('.');\n    value = value != null && unit ? `${value}${unit}` : value;\n\n    if (value != null) {\n      this._renderer.setStyle(this._ngEl.nativeElement, name, value as string);\n    } else {\n      this._renderer.removeStyle(this._ngEl.nativeElement, name);\n    }\n  }\n}\n"],"sourceRoot":""}