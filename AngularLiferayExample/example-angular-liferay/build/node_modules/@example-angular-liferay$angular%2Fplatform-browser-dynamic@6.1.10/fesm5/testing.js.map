{"version":3,"sources":["testing.js"],"names":["__decorate","__extends","__param","__metadata","Inject","Injectable","ɵstringify","Component","Directive","NgModule","Pipe","COMPILER_OPTIONS","CompilerFactory","Injector","createPlatformFactory","TestComponentRenderer","ɵTestingCompilerFactory","DOCUMENT","ɵgetDOM","CompileReflector","DirectiveResolver","ERROR_COMPONENT_TYPE","NgModuleResolver","PipeResolver","MockDirectiveResolver","MockNgModuleResolver","MockPipeResolver","ɵplatformCoreDynamic","ɵINTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS","BrowserTestingModule","DOMTestComponentRenderer","_super","_doc","_this","call","prototype","insertRootElement","rootElId","rootEl","firstChild","content","createTemplate","oldRoots","querySelectorAll","i","length","remove","appendChild","body","Object","_nextReferenceId","MetadataOverrider","_references","Map","overrideMetadata","metadataClass","oldMetadata","override","props","_valueProps","forEach","prop","set","add","Error","setMetadata","removeMetadata","addMetadata","metadata","references","removeObjects","Set","_loop_1","removeValue","Array","value","_propHashKey","_loop_2","propValue","filter","has","undefined","addValue","concat","propName","replacer","key","_serializeReference","JSON","stringify","ref","id","get","obj","keys","startsWith","push","proto","getPrototypeOf","protoProp","desc","getOwnPropertyDescriptor","COMPILER_PROVIDERS","provide","deps","useExisting","TestingCompilerFactoryImpl","_injector","_compilerFactory","createTestingCompiler","options","compiler","createCompiler","TestingCompilerImpl","injector","_compiler","_directiveResolver","_pipeResolver","_moduleResolver","_overrider","defineProperty","enumerable","configurable","compileModuleSync","moduleType","compileModuleAsync","compileModuleAndAllComponentsSync","compileModuleAndAllComponentsAsync","getComponentFactory","component","checkOverrideAllowed","type","hasAotSummary","overrideModule","ngModule","resolve","setNgModule","clearCacheFor","overrideDirective","directive","setDirective","overrideComponent","overridePipe","pipe","setPipe","loadAotSummaries","summaries","clearCache","getComponentFromError","error","getModuleId","platformCoreDynamicTesting","useValue","providers","multi","useClass","platformBrowserDynamicTesting","BrowserDynamicTestingModule","exports","ɵangular_packages_platform_browser_dynamic_testing_testing_a","ɵangular_packages_platform_browser_dynamic_testing_testing_b","ɵDOMTestComponentRenderer","ɵplatformCoreDynamicTesting"],"mappings":"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","file":"testing.js","sourcesContent":["/**\n * @license Angular v6.1.10\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\nimport { __decorate, __extends, __param, __metadata } from 'tslib';\nimport { Inject, Injectable, ɵstringify, Component, Directive, NgModule, Pipe, COMPILER_OPTIONS, CompilerFactory, Injector, createPlatformFactory } from '@angular/core';\nimport { TestComponentRenderer, ɵTestingCompilerFactory } from '@angular/core/testing';\nimport { DOCUMENT, ɵgetDOM } from '@angular/platform-browser';\nimport { CompileReflector, DirectiveResolver, ERROR_COMPONENT_TYPE, NgModuleResolver, PipeResolver } from '@angular/compiler';\nimport { MockDirectiveResolver, MockNgModuleResolver, MockPipeResolver } from '@angular/compiler/testing';\nimport { ɵplatformCoreDynamic, ɵINTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS } from '@angular/platform-browser-dynamic';\nimport { BrowserTestingModule } from '@angular/platform-browser/testing';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * A DOM based implementation of the TestComponentRenderer.\n */\nvar DOMTestComponentRenderer = /** @class */ (function (_super) {\n    __extends(DOMTestComponentRenderer, _super);\n    function DOMTestComponentRenderer(_doc /** TODO #9100 */) {\n        var _this = _super.call(this) || this;\n        _this._doc = _doc;\n        return _this;\n    }\n    DOMTestComponentRenderer.prototype.insertRootElement = function (rootElId) {\n        var rootEl = ɵgetDOM().firstChild(ɵgetDOM().content(ɵgetDOM().createTemplate(\"<div id=\\\"\" + rootElId + \"\\\"></div>\")));\n        // TODO(juliemr): can/should this be optional?\n        var oldRoots = ɵgetDOM().querySelectorAll(this._doc, '[id^=root]');\n        for (var i = 0; i < oldRoots.length; i++) {\n            ɵgetDOM().remove(oldRoots[i]);\n        }\n        ɵgetDOM().appendChild(this._doc.body, rootEl);\n    };\n    DOMTestComponentRenderer = __decorate([\n        Injectable(),\n        __param(0, Inject(DOCUMENT)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], DOMTestComponentRenderer);\n    return DOMTestComponentRenderer;\n}(TestComponentRenderer));\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar _nextReferenceId = 0;\nvar MetadataOverrider = /** @class */ (function () {\n    function MetadataOverrider() {\n        this._references = new Map();\n    }\n    /**\n     * Creates a new instance for the given metadata class\n     * based on an old instance and overrides.\n     */\n    MetadataOverrider.prototype.overrideMetadata = function (metadataClass, oldMetadata, override) {\n        var props = {};\n        if (oldMetadata) {\n            _valueProps(oldMetadata).forEach(function (prop) { return props[prop] = oldMetadata[prop]; });\n        }\n        if (override.set) {\n            if (override.remove || override.add) {\n                throw new Error(\"Cannot set and add/remove \" + ɵstringify(metadataClass) + \" at the same time!\");\n            }\n            setMetadata(props, override.set);\n        }\n        if (override.remove) {\n            removeMetadata(props, override.remove, this._references);\n        }\n        if (override.add) {\n            addMetadata(props, override.add);\n        }\n        return new metadataClass(props);\n    };\n    return MetadataOverrider;\n}());\nfunction removeMetadata(metadata, remove, references) {\n    var removeObjects = new Set();\n    var _loop_1 = function (prop) {\n        var removeValue = remove[prop];\n        if (removeValue instanceof Array) {\n            removeValue.forEach(function (value) { removeObjects.add(_propHashKey(prop, value, references)); });\n        }\n        else {\n            removeObjects.add(_propHashKey(prop, removeValue, references));\n        }\n    };\n    for (var prop in remove) {\n        _loop_1(prop);\n    }\n    var _loop_2 = function (prop) {\n        var propValue = metadata[prop];\n        if (propValue instanceof Array) {\n            metadata[prop] = propValue.filter(function (value) { return !removeObjects.has(_propHashKey(prop, value, references)); });\n        }\n        else {\n            if (removeObjects.has(_propHashKey(prop, propValue, references))) {\n                metadata[prop] = undefined;\n            }\n        }\n    };\n    for (var prop in metadata) {\n        _loop_2(prop);\n    }\n}\nfunction addMetadata(metadata, add) {\n    for (var prop in add) {\n        var addValue = add[prop];\n        var propValue = metadata[prop];\n        if (propValue != null && propValue instanceof Array) {\n            metadata[prop] = propValue.concat(addValue);\n        }\n        else {\n            metadata[prop] = addValue;\n        }\n    }\n}\nfunction setMetadata(metadata, set) {\n    for (var prop in set) {\n        metadata[prop] = set[prop];\n    }\n}\nfunction _propHashKey(propName, propValue, references) {\n    var replacer = function (key, value) {\n        if (typeof value === 'function') {\n            value = _serializeReference(value, references);\n        }\n        return value;\n    };\n    return propName + \":\" + JSON.stringify(propValue, replacer);\n}\nfunction _serializeReference(ref, references) {\n    var id = references.get(ref);\n    if (!id) {\n        id = \"\" + ɵstringify(ref) + _nextReferenceId++;\n        references.set(ref, id);\n    }\n    return id;\n}\nfunction _valueProps(obj) {\n    var props = [];\n    // regular public props\n    Object.keys(obj).forEach(function (prop) {\n        if (!prop.startsWith('_')) {\n            props.push(prop);\n        }\n    });\n    // getters\n    var proto = obj;\n    while (proto = Object.getPrototypeOf(proto)) {\n        Object.keys(proto).forEach(function (protoProp) {\n            var desc = Object.getOwnPropertyDescriptor(proto, protoProp);\n            if (!protoProp.startsWith('_') && desc && 'get' in desc) {\n                props.push(protoProp);\n            }\n        });\n    }\n    return props;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar COMPILER_PROVIDERS = [\n    { provide: MockPipeResolver, deps: [CompileReflector] },\n    { provide: PipeResolver, useExisting: MockPipeResolver },\n    { provide: MockDirectiveResolver, deps: [CompileReflector] },\n    { provide: DirectiveResolver, useExisting: MockDirectiveResolver },\n    { provide: MockNgModuleResolver, deps: [CompileReflector] },\n    { provide: NgModuleResolver, useExisting: MockNgModuleResolver },\n];\nvar TestingCompilerFactoryImpl = /** @class */ (function () {\n    function TestingCompilerFactoryImpl(_injector, _compilerFactory) {\n        this._injector = _injector;\n        this._compilerFactory = _compilerFactory;\n    }\n    TestingCompilerFactoryImpl.prototype.createTestingCompiler = function (options) {\n        var compiler = this._compilerFactory.createCompiler(options);\n        return new TestingCompilerImpl(compiler, compiler.injector.get(MockDirectiveResolver), compiler.injector.get(MockPipeResolver), compiler.injector.get(MockNgModuleResolver));\n    };\n    return TestingCompilerFactoryImpl;\n}());\nvar TestingCompilerImpl = /** @class */ (function () {\n    function TestingCompilerImpl(_compiler, _directiveResolver, _pipeResolver, _moduleResolver) {\n        this._compiler = _compiler;\n        this._directiveResolver = _directiveResolver;\n        this._pipeResolver = _pipeResolver;\n        this._moduleResolver = _moduleResolver;\n        this._overrider = new MetadataOverrider();\n    }\n    Object.defineProperty(TestingCompilerImpl.prototype, \"injector\", {\n        get: function () { return this._compiler.injector; },\n        enumerable: true,\n        configurable: true\n    });\n    TestingCompilerImpl.prototype.compileModuleSync = function (moduleType) {\n        return this._compiler.compileModuleSync(moduleType);\n    };\n    TestingCompilerImpl.prototype.compileModuleAsync = function (moduleType) {\n        return this._compiler.compileModuleAsync(moduleType);\n    };\n    TestingCompilerImpl.prototype.compileModuleAndAllComponentsSync = function (moduleType) {\n        return this._compiler.compileModuleAndAllComponentsSync(moduleType);\n    };\n    TestingCompilerImpl.prototype.compileModuleAndAllComponentsAsync = function (moduleType) {\n        return this._compiler.compileModuleAndAllComponentsAsync(moduleType);\n    };\n    TestingCompilerImpl.prototype.getComponentFactory = function (component) {\n        return this._compiler.getComponentFactory(component);\n    };\n    TestingCompilerImpl.prototype.checkOverrideAllowed = function (type) {\n        if (this._compiler.hasAotSummary(type)) {\n            throw new Error(ɵstringify(type) + \" was AOT compiled, so its metadata cannot be changed.\");\n        }\n    };\n    TestingCompilerImpl.prototype.overrideModule = function (ngModule, override) {\n        this.checkOverrideAllowed(ngModule);\n        var oldMetadata = this._moduleResolver.resolve(ngModule, false);\n        this._moduleResolver.setNgModule(ngModule, this._overrider.overrideMetadata(NgModule, oldMetadata, override));\n        this.clearCacheFor(ngModule);\n    };\n    TestingCompilerImpl.prototype.overrideDirective = function (directive, override) {\n        this.checkOverrideAllowed(directive);\n        var oldMetadata = this._directiveResolver.resolve(directive, false);\n        this._directiveResolver.setDirective(directive, this._overrider.overrideMetadata(Directive, oldMetadata, override));\n        this.clearCacheFor(directive);\n    };\n    TestingCompilerImpl.prototype.overrideComponent = function (component, override) {\n        this.checkOverrideAllowed(component);\n        var oldMetadata = this._directiveResolver.resolve(component, false);\n        this._directiveResolver.setDirective(component, this._overrider.overrideMetadata(Component, oldMetadata, override));\n        this.clearCacheFor(component);\n    };\n    TestingCompilerImpl.prototype.overridePipe = function (pipe, override) {\n        this.checkOverrideAllowed(pipe);\n        var oldMetadata = this._pipeResolver.resolve(pipe, false);\n        this._pipeResolver.setPipe(pipe, this._overrider.overrideMetadata(Pipe, oldMetadata, override));\n        this.clearCacheFor(pipe);\n    };\n    TestingCompilerImpl.prototype.loadAotSummaries = function (summaries) { this._compiler.loadAotSummaries(summaries); };\n    TestingCompilerImpl.prototype.clearCache = function () { this._compiler.clearCache(); };\n    TestingCompilerImpl.prototype.clearCacheFor = function (type) { this._compiler.clearCacheFor(type); };\n    TestingCompilerImpl.prototype.getComponentFromError = function (error) { return error[ERROR_COMPONENT_TYPE] || null; };\n    TestingCompilerImpl.prototype.getModuleId = function (moduleType) {\n        return this._moduleResolver.resolve(moduleType, true).id;\n    };\n    return TestingCompilerImpl;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Platform for dynamic tests\n *\n * @experimental\n */\nvar platformCoreDynamicTesting = createPlatformFactory(ɵplatformCoreDynamic, 'coreDynamicTesting', [\n    { provide: COMPILER_OPTIONS, useValue: { providers: COMPILER_PROVIDERS }, multi: true }, {\n        provide: ɵTestingCompilerFactory,\n        useClass: TestingCompilerFactoryImpl,\n        deps: [Injector, CompilerFactory]\n    }\n]);\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar platformBrowserDynamicTesting = createPlatformFactory(platformCoreDynamicTesting, 'browserDynamicTesting', ɵINTERNAL_BROWSER_DYNAMIC_PLATFORM_PROVIDERS);\n/**\n * NgModule for testing.\n *\n *\n */\nvar BrowserDynamicTestingModule = /** @class */ (function () {\n    function BrowserDynamicTestingModule() {\n    }\n    BrowserDynamicTestingModule = __decorate([\n        NgModule({\n            exports: [BrowserTestingModule],\n            providers: [\n                { provide: TestComponentRenderer, useClass: DOMTestComponentRenderer },\n            ]\n        })\n    ], BrowserDynamicTestingModule);\n    return BrowserDynamicTestingModule;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { COMPILER_PROVIDERS as ɵangular_packages_platform_browser_dynamic_testing_testing_a, TestingCompilerFactoryImpl as ɵangular_packages_platform_browser_dynamic_testing_testing_b, platformBrowserDynamicTesting, BrowserDynamicTestingModule, DOMTestComponentRenderer as ɵDOMTestComponentRenderer, platformCoreDynamicTesting as ɵplatformCoreDynamicTesting };\n//# sourceMappingURL=testing.js.map\n"]}