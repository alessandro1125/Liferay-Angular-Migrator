{"version":3,"sources":["../../../../../../../packages/platform-browser/src/dom/dom_renderer.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injectable, Renderer2, RendererFactory2, RendererStyleFlags2, RendererType2, ViewEncapsulation} from '@angular/core';\n\nimport {EventManager} from './events/event_manager';\nimport {DomSharedStylesHost} from './shared_styles_host';\n\nexport const NAMESPACE_URIS: {[ns: string]: string} = {\n  'svg': 'http://www.w3.org/2000/svg',\n  'xhtml': 'http://www.w3.org/1999/xhtml',\n  'xlink': 'http://www.w3.org/1999/xlink',\n  'xml': 'http://www.w3.org/XML/1998/namespace',\n  'xmlns': 'http://www.w3.org/2000/xmlns/',\n};\n\nconst COMPONENT_REGEX = /%COMP%/g;\nexport const COMPONENT_VARIABLE = '%COMP%';\nexport const HOST_ATTR = `_nghost-${COMPONENT_VARIABLE}`;\nexport const CONTENT_ATTR = `_ngcontent-${COMPONENT_VARIABLE}`;\n\nexport function shimContentAttribute(componentShortId: string): string {\n  return CONTENT_ATTR.replace(COMPONENT_REGEX, componentShortId);\n}\n\nexport function shimHostAttribute(componentShortId: string): string {\n  return HOST_ATTR.replace(COMPONENT_REGEX, componentShortId);\n}\n\nexport function flattenStyles(\n    compId: string, styles: Array<any|any[]>, target: string[]): string[] {\n  for (let i = 0; i < styles.length; i++) {\n    let style = styles[i];\n\n    if (Array.isArray(style)) {\n      flattenStyles(compId, style, target);\n    } else {\n      style = style.replace(COMPONENT_REGEX, compId);\n      target.push(style);\n    }\n  }\n  return target;\n}\n\nfunction decoratePreventDefault(eventHandler: Function): Function {\n  return (event: any) => {\n    const allowDefaultBehavior = eventHandler(event);\n    if (allowDefaultBehavior === false) {\n      // TODO(tbosch): move preventDefault into event plugins...\n      event.preventDefault();\n      event.returnValue = false;\n    }\n  };\n}\n\n@Injectable()\nexport class DomRendererFactory2 implements RendererFactory2 {\n  private rendererByCompId = new Map<string, Renderer2>();\n  private defaultRenderer: Renderer2;\n\n  constructor(private eventManager: EventManager, private sharedStylesHost: DomSharedStylesHost) {\n    this.defaultRenderer = new DefaultDomRenderer2(eventManager);\n  }\n\n  createRenderer(element: any, type: RendererType2|null): Renderer2 {\n    if (!element || !type) {\n      return this.defaultRenderer;\n    }\n    switch (type.encapsulation) {\n      case ViewEncapsulation.Emulated: {\n        let renderer = this.rendererByCompId.get(type.id);\n        if (!renderer) {\n          renderer =\n              new EmulatedEncapsulationDomRenderer2(this.eventManager, this.sharedStylesHost, type);\n          this.rendererByCompId.set(type.id, renderer);\n        }\n        (<EmulatedEncapsulationDomRenderer2>renderer).applyToHost(element);\n        return renderer;\n      }\n      case ViewEncapsulation.Native:\n      case ViewEncapsulation.ShadowDom:\n        return new ShadowDomRenderer(this.eventManager, this.sharedStylesHost, element, type);\n      default: {\n        if (!this.rendererByCompId.has(type.id)) {\n          const styles = flattenStyles(type.id, type.styles, []);\n          this.sharedStylesHost.addStyles(styles);\n          this.rendererByCompId.set(type.id, this.defaultRenderer);\n        }\n        return this.defaultRenderer;\n      }\n    }\n  }\n\n  begin() {}\n  end() {}\n}\n\nclass DefaultDomRenderer2 implements Renderer2 {\n  data: {[key: string]: any} = Object.create(null);\n\n  constructor(private eventManager: EventManager) {}\n\n  destroy(): void {}\n\n  destroyNode: null;\n\n  createElement(name: string, namespace?: string): any {\n    if (namespace) {\n      return document.createElementNS(NAMESPACE_URIS[namespace], name);\n    }\n\n    return document.createElement(name);\n  }\n\n  createComment(value: string): any { return document.createComment(value); }\n\n  createText(value: string): any { return document.createTextNode(value); }\n\n  appendChild(parent: any, newChild: any): void { parent.appendChild(newChild); }\n\n  insertBefore(parent: any, newChild: any, refChild: any): void {\n    if (parent) {\n      parent.insertBefore(newChild, refChild);\n    }\n  }\n\n  removeChild(parent: any, oldChild: any): void {\n    if (parent) {\n      parent.removeChild(oldChild);\n    }\n  }\n\n  selectRootElement(selectorOrNode: string|any): any {\n    let el: any = typeof selectorOrNode === 'string' ? document.querySelector(selectorOrNode) :\n                                                       selectorOrNode;\n    if (!el) {\n      throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);\n    }\n    el.textContent = '';\n    return el;\n  }\n\n  parentNode(node: any): any { return node.parentNode; }\n\n  nextSibling(node: any): any { return node.nextSibling; }\n\n  setAttribute(el: any, name: string, value: string, namespace?: string): void {\n    if (namespace) {\n      name = `${namespace}:${name}`;\n      const namespaceUri = NAMESPACE_URIS[namespace];\n      if (namespaceUri) {\n        el.setAttributeNS(namespaceUri, name, value);\n      } else {\n        el.setAttribute(name, value);\n      }\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n\n  removeAttribute(el: any, name: string, namespace?: string): void {\n    if (namespace) {\n      const namespaceUri = NAMESPACE_URIS[namespace];\n      if (namespaceUri) {\n        el.removeAttributeNS(namespaceUri, name);\n      } else {\n        el.removeAttribute(`${namespace}:${name}`);\n      }\n    } else {\n      el.removeAttribute(name);\n    }\n  }\n\n  addClass(el: any, name: string): void { el.classList.add(name); }\n\n  removeClass(el: any, name: string): void { el.classList.remove(name); }\n\n  setStyle(el: any, style: string, value: any, flags: RendererStyleFlags2): void {\n    if (flags & RendererStyleFlags2.DashCase) {\n      el.style.setProperty(\n          style, value, !!(flags & RendererStyleFlags2.Important) ? 'important' : '');\n    } else {\n      el.style[style] = value;\n    }\n  }\n\n  removeStyle(el: any, style: string, flags: RendererStyleFlags2): void {\n    if (flags & RendererStyleFlags2.DashCase) {\n      el.style.removeProperty(style);\n    } else {\n      // IE requires '' instead of null\n      // see https://github.com/angular/angular/issues/7916\n      el.style[style] = '';\n    }\n  }\n\n  setProperty(el: any, name: string, value: any): void {\n    checkNoSyntheticProp(name, 'property');\n    el[name] = value;\n  }\n\n  setValue(node: any, value: string): void { node.nodeValue = value; }\n\n  listen(target: 'window'|'document'|'body'|any, event: string, callback: (event: any) => boolean):\n      () => void {\n    checkNoSyntheticProp(event, 'listener');\n    if (typeof target === 'string') {\n      return <() => void>this.eventManager.addGlobalEventListener(\n          target, event, decoratePreventDefault(callback));\n    }\n    return <() => void>this.eventManager.addEventListener(\n               target, event, decoratePreventDefault(callback)) as() => void;\n  }\n}\n\nconst AT_CHARCODE = '@'.charCodeAt(0);\nfunction checkNoSyntheticProp(name: string, nameKind: string) {\n  if (name.charCodeAt(0) === AT_CHARCODE) {\n    throw new Error(\n        `Found the synthetic ${nameKind} ${name}. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.`);\n  }\n}\n\nclass EmulatedEncapsulationDomRenderer2 extends DefaultDomRenderer2 {\n  private contentAttr: string;\n  private hostAttr: string;\n\n  constructor(\n      eventManager: EventManager, sharedStylesHost: DomSharedStylesHost,\n      private component: RendererType2) {\n    super(eventManager);\n    const styles = flattenStyles(component.id, component.styles, []);\n    sharedStylesHost.addStyles(styles);\n\n    this.contentAttr = shimContentAttribute(component.id);\n    this.hostAttr = shimHostAttribute(component.id);\n  }\n\n  applyToHost(element: any) { super.setAttribute(element, this.hostAttr, ''); }\n\n  createElement(parent: any, name: string): Element {\n    const el = super.createElement(parent, name);\n    super.setAttribute(el, this.contentAttr, '');\n    return el;\n  }\n}\n\nclass ShadowDomRenderer extends DefaultDomRenderer2 {\n  private shadowRoot: any;\n\n  constructor(\n      eventManager: EventManager, private sharedStylesHost: DomSharedStylesHost,\n      private hostEl: any, private component: RendererType2) {\n    super(eventManager);\n    if (component.encapsulation === ViewEncapsulation.ShadowDom) {\n      this.shadowRoot = (hostEl as any).attachShadow({mode: 'open'});\n    } else {\n      this.shadowRoot = (hostEl as any).createShadowRoot();\n    }\n    this.sharedStylesHost.addHost(this.shadowRoot);\n    const styles = flattenStyles(component.id, component.styles, []);\n    for (let i = 0; i < styles.length; i++) {\n      const styleEl = document.createElement('style');\n      styleEl.textContent = styles[i];\n      this.shadowRoot.appendChild(styleEl);\n    }\n  }\n\n  private nodeOrShadowRoot(node: any): any { return node === this.hostEl ? this.shadowRoot : node; }\n\n  destroy() { this.sharedStylesHost.removeHost(this.shadowRoot); }\n\n  appendChild(parent: any, newChild: any): void {\n    return super.appendChild(this.nodeOrShadowRoot(parent), newChild);\n  }\n  insertBefore(parent: any, newChild: any, refChild: any): void {\n    return super.insertBefore(this.nodeOrShadowRoot(parent), newChild, refChild);\n  }\n  removeChild(parent: any, oldChild: any): void {\n    return super.removeChild(this.nodeOrShadowRoot(parent), oldChild);\n  }\n  parentNode(node: any): any {\n    return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(node)));\n  }\n}\n"],"sourceRoot":""}