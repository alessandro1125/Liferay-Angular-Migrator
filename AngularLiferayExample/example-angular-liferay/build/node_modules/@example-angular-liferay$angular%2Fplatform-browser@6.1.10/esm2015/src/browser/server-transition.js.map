{"version":3,"sources":["../../../../../../../packages/platform-browser/src/browser/server-transition.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAQA,aAAQ,eAAR,EAAyB,qBAAzB,EAAwD,cAAxD,EAAwE,QAAxE,QAAuG,eAAvG;AAEA,aAAQ,MAAR,QAAqB,oBAArB;AACA,aAAQ,QAAR,QAAuB,mBAAvB;;;;;AAMA,WAAA,MAAa,gBAAgB,IAAI,cAAJ,CAAmB,eAAnB,CAA7B;;;;;;;AAEA,WAAM,SAAA,qBAAA,CAAgC,YAAhC,EAAsD,QAAtD,EAAqE,QAArE,EAAuF;AAC3F,eAAO,MAAK;;;AAGV,qBAAS,GAAT,CAAa,qBAAb,EAAoC,WAApC,CAAgD,IAAhD,CAAqD,MAAK;;AACxD,sBAAM,MAAM,QAAZ;;AACA,sBAAM,SACF,MAAM,SAAN,CAAgB,KAAhB,CAAsB,KAAtB,CAA4B,IAAI,gBAAJ,CAAqB,QAArB,EAA+B,sBAA/B,CAA5B,CADJ;AAEA,uBAAO,MAAP,CAAc,MAAM,IAAI,YAAJ,CAAiB,EAAjB,EAAqB,eAArB,MAA0C,YAA9D,EACK,OADL,CACa,MAAM,IAAI,MAAJ,CAAW,EAAX,CADnB;AAED,aAND;AAOD,SAVD;AAWD;;AAED,WAAA,MAAa,8BAAgD,CAC3D;AACE,iBAAS,eADX;AAEE,oBAAY,qBAFd;AAGE,cAAM,CAAC,aAAD,EAAgB,QAAhB,EAA0B,QAA1B,CAHR;AAIE,eAAO;AAJT,KAD2D,CAA7D","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {APP_INITIALIZER, ApplicationInitStatus, Inject, InjectionToken, Injector, StaticProvider} from '@angular/core';\n\nimport {getDOM} from '../dom/dom_adapter';\nimport {DOCUMENT} from '../dom/dom_tokens';\n\n/**\n * An id that identifies a particular application being bootstrapped, that should\n * match across the client/server boundary.\n */\nexport const TRANSITION_ID = new InjectionToken('TRANSITION_ID');\n\nexport function appInitializerFactory(transitionId: string, document: any, injector: Injector) {\n  return () => {\n    // Wait for all application initializers to be completed before removing the styles set by\n    // the server.\n    injector.get(ApplicationInitStatus).donePromise.then(() => {\n      const dom = getDOM();\n      const styles: any[] =\n          Array.prototype.slice.apply(dom.querySelectorAll(document, `style[ng-transition]`));\n      styles.filter(el => dom.getAttribute(el, 'ng-transition') === transitionId)\n          .forEach(el => dom.remove(el));\n    });\n  };\n}\n\nexport const SERVER_TRANSITION_PROVIDERS: StaticProvider[] = [\n  {\n    provide: APP_INITIALIZER,\n    useFactory: appInitializerFactory,\n    deps: [TRANSITION_ID, DOCUMENT, Injector],\n    multi: true\n  },\n];\n"],"sourceRoot":""}