{"version":3,"sources":["router.js"],"names":["__values","__decorate","__param","__metadata","__extends","__assign","__spread","Component","ɵisObservable","ɵisPromise","NgModuleRef","InjectionToken","NgModuleFactory","NgZone","isDevMode","ɵConsole","Attribute","Directive","ElementRef","HostBinding","HostListener","Input","Renderer2","ChangeDetectorRef","ContentChildren","QueryList","ComponentFactoryResolver","EventEmitter","Output","ViewContainerRef","Compiler","Injectable","Injector","NgModuleFactoryLoader","ANALYZE_FOR_ENTRY_COMPONENTS","APP_BOOTSTRAP_LISTENER","APP_INITIALIZER","ApplicationRef","Inject","NgModule","NgProbeToken","Optional","SkipSelf","SystemJsNgModuleLoader","Version","from","of","EmptyError","Observable","BehaviorSubject","Subject","concatAll","every","last","map","mergeAll","catchError","first","mergeMap","concatMap","reduce","filter","LocationStrategy","APP_BASE_HREF","HashLocationStrategy","LOCATION_INITIALIZED","Location","PathLocationStrategy","PlatformLocation","ViewportScroller","ɵgetDOM","RouterEvent","id","url","NavigationStart","_super","navigationTrigger","restoredState","_this","call","prototype","toString","NavigationEnd","urlAfterRedirects","NavigationCancel","reason","NavigationError","error","RoutesRecognized","state","GuardsCheckStart","GuardsCheckEnd","shouldActivate","ResolveStart","ResolveEnd","RouteConfigLoadStart","route","path","RouteConfigLoadEnd","ChildActivationStart","snapshot","routeConfig","ChildActivationEnd","ActivationStart","ActivationEnd","Scroll","routerEvent","position","anchor","pos","EmptyOutletComponent","template","PRIMARY_OUTLET","ParamsAsMap","params","has","name","hasOwnProperty","get","v","Array","isArray","getAll","Object","defineProperty","keys","enumerable","configurable","convertToParamMap","NAVIGATION_CANCELING_ERROR","navigationCancelingError","message","Error","isNavigationCancelingError","defaultUrlMatcher","segments","segmentGroup","parts","split","length","pathMatch","hasChildren","posParams","index","part","segment","isParameter","startsWith","substring","consumed","slice","LoadedRouterConfig","routes","module","validateConfig","config","parentPath","i","fullPath","getFullPath","validateNode","component","children","loadChildren","outlet","redirectTo","matcher","charAt","exp","currentRoute","standardizeConfig","r","c","shallowEqualArrays","a","b","shallowEqual","k1","k2","key","flatten","arr","concat","apply","last$1","forEach","map$$1","callback","prop","waitForMap","obj","fn","waitHead","waitTail","res","k","mapped","pipe","push","andObservables","observables","result","wrapIntoObservable","value","Promise","resolve","createEmptyUrlTree","UrlTree","UrlSegmentGroup","containsTree","container","containee","exact","equalQueryParams","queryParams","equalSegmentGroups","root","containsQueryParams","containsSegmentGroup","equalPath","numberOfChildren","containsSegmentGroupHelper","containeePaths","current","next","fragment","_queryParamMap","DEFAULT_SERIALIZER","serialize","parent","serializePaths","UrlSegment","parameters","_parameterMap","serializePath","equalSegments","as","bs","mapChildrenIntoArray","child","childOutlet","UrlSerializer","DefaultUrlSerializer","parse","p","UrlParser","parseRootSegment","parseQueryParams","parseFragment","tree","serializeSegment","query","serializeQueryParams","encodeUriFragment","join","primary","children_1","encodeUriString","s","encodeURIComponent","replace","encodeUriQuery","encodeURI","encodeUriSegment","decode","decodeURIComponent","decodeQuery","serializeMatrixParams","strParams","SEGMENT_RE","matchSegments","str","match","QUERY_PARAM_RE","matchQueryParams","QUERY_PARAM_VALUE_RE","matchUrlQueryParamValue","remaining","consumeOptional","peekStartsWith","parseChildren","parseQueryParam","parseSegment","capture","parseParens","parseMatrixParams","parseParam","valueMatch","decodedKey","decodedVal","currentVal","allowPrimary","outletName","undefined","indexOf","substr","NoMatch","AbsoluteRedirect","urlTree","noMatch","obs","absoluteRedirect","newTree","namedOutletsRedirect","canLoadFails","applyRedirects","moduleInjector","configLoader","urlSerializer","ApplyRedirects","allowRedirects","ngModule","expanded$","expandSegmentGroup","urlTrees$","rootSegmentGroup","createUrlTree","e","noMatchError","mapped$","rootCandidate","_a","expandChildren","expandSegment","expandSegmentAgainstRoute","_","noLeftoversInUrl","paths","getOutlet","matchSegmentAgainstRoute","expandSegmentAgainstRouteUsingRedirect","expandWildCardWithParamsAgainstRouteUsingRedirect","expandRegularSegmentAgainstRouteUsingRedirect","applyRedirectCommands","lineralizeSegments","newSegments","group","matched","consumedSegments","lastChild","positionalParamSegments","rawSegmentGroup","load","injector","cfg","_loadedConfig","rawSlicedSegments","childConfig$","getChildConfig","routerConfig","childModule","childConfig","slicedSegments","expanded$_1","cs","runCanLoadGuard","shouldLoad","applyRedirectCreatreUrlTree","newRoot","createSegmentGroup","createQueryParams","redirectToParams","actualParams","copySourceValue","sourceName","updatedSegments","createSegments","redirectToSegments","actualSegments","findPosParam","findOrReturn","redirectToUrlSegment","e_1","idx","actualSegments_1","actualSegments_1_1","done","splice","e_1_1","return","canLoad","injectionToken","guard","containsEmptyPathRedirectsWithNamedOutlets","createChildrenForEmptySegments","mergeTrivialChildren","containsEmptyPathRedirects","addEmptySegmentsToChildrenIfNeeded","e_2","routes_1","routes_1_1","isEmptyPathRedirect","e_2_1","primarySegmentGroup","e_3","routes_2","routes_2_1","e_3_1","some","Tree","_root","t","pathFromRoot","n","findNode","firstChild","siblings","findPath","cc","node","_b","_c","node_1","unshift","TreeNode","nodeChildrenAsMap","RouterState","setRouterState","createEmptyState","rootComponent","createEmptyStateSnapshot","emptyUrl","emptyParams","emptyData","emptyQueryParams","activated","ActivatedRoute","ActivatedRouteSnapshot","RouterStateSnapshot","data","futureSnapshot","_futureSnapshot","_routerState","_paramMap","inheritedParamsDataResolve","paramsInheritanceStrategy","inheritingStartingFrom","parent_1","flattenInherited","curr","_resolvedData","urlSegment","lastPathIndex","_urlSegment","_lastPathIndex","_resolve","serializeNode","advanceActivatedRoute","currentSnapshot","nextSnapshot","equalParamsAndUrlSegments","equalUrlParams","parentsMismatch","createRouterState","routeReuseStrategy","prevState","createNode","shouldReuseRoute","createOrReuseChildren","detachedRouteHandle","retrieve","setFutureSnapshotsOfActivatedRoutes","createActivatedRoute","commands","nav","computeNavigation","toRoot","startingPosition","findStartingPosition","processChildren","updateSegmentGroupChildren","updateSegmentGroup","isMatrixParams","command","outlets","segmentPath","oldSegmentGroup","newSegmentGroup","qp","replaceSegment","oldSegment","newSegment","Navigation","isAbsolute","numberOfDoubleDots","cmdWithOutlet","find","cmd","cmdIdx","outlets_1","urlPart","partIndex","Position","modifier","createPositionApplyingDoubleDots","g","ci","dd","getPath","getOutlets","startIndex","m","prefixedWith","slicedCommands","commandIndex","pathIndex","createNewSegmentGroup","outlets_2","currentCommandIndex","currentPathIndex","compare","createNewSegmentChildren","stringify","CanActivate","CanDeactivate","PreActivation","future","forwardEvent","canActivateChecks","canDeactivateChecks","initialize","parentContexts","futureRoot","currRoot","setupChildRouteGuards","checkGuards","isDeactivating","isActivating","canDeactivate$","runCanDeactivateChecks","canDeactivate","runCanActivateChecks","resolveData","check","runResolve","__","futureNode","currNode","contexts","futurePath","prevChildren","setupRouteGuards","deactivateRouteAndItsChildren","getContext","context","shouldRunGuardsAndResolvers","runGuardsAndResolvers","mode","childName","isActivated","runCanDeactivate","fireChildActivationStart","fireActivationStart","runCanActivateChild","runCanActivate","canActivate","getToken","observable","canActivateChildGuards","reverse","extractCanActivateChild","d","guards","canActivateChild","resolveNode","resolvedData","key_1","getResolver","runningResolvers$","resolver","token","closestLoadedConfig","NoMatch$1","recognize","rootComponentType","relativeLinkResolution","Recognizer","split$1","processSegmentGroup","freeze","rootNode","routeState","inheritParamsAndData","routeNode","processSegment","checkOutletNameUniqueness","sortActivatedRouteSnapshots","config_1","config_1_1","processSegmentAgainstRoute","rawSegment","getData","getSourceSegmentGroup","getPathIndexShift","getResolve","match$1","nodes","sort","localeCompare","names","routeWithSameOutletName","_sourceSegment","_segmentIndexShift","containsEmptyPathMatchesWithNamedOutlets","s_1","createChildrenForEmptyPaths","containsEmptyPathMatches","s_2","addEmptyPathsToChildrenIfNeeded","emptyPathMatch","getOutlet$1","primarySegment","RouteReuseStrategy","DefaultRouteReuseStrategy","shouldDetach","store","detachedTree","shouldAttach","ROUTES","RouterConfigLoader","loader","compiler","onLoadStartListener","onLoadEndListener","parentInjector","moduleFactory$","loadModuleFactory","factory","create","compileModuleAsync","UrlHandlingStrategy","DefaultUrlHandlingStrategy","shouldProcessUrl","extract","merge","newUrlPart","wholeUrl","defaultErrorHandler","defaultMalformedUriErrorHandler","defaultRouterHook","runExtras","Router","rootContexts","location","navigations","navigationId","isNgZoneEnabled","events","errorHandler","malformedUriErrorHandler","navigated","lastSuccessfulId","hooks","beforePreactivation","afterPreactivation","urlHandlingStrategy","onSameUrlNavigation","urlUpdateStrategy","onLoadStart","triggerEvent","onLoadEnd","console","ngZone","resetConfig","currentUrlTree","rawUrlTree","routerState","processNavigations","resetRootComponentType","initialNavigation","setUpLocationChangeListener","navigateByUrl","replaceUrl","locationSubscription","subscribe","change","parseUrl","source","setTimeout","scheduleNavigation","serializeUrl","event","ngOnDestroy","dispose","unsubscribe","navigationExtras","relativeTo","preserveQueryParams","queryParamsHandling","preserveFragment","warn","f","q","removeEmptyProps","extras","skipLocationChange","isInAngularZone","mergedTree","navigate","validateCommands","isActive","executeScheduledNavigation","promise","catch","rawUrl","lastNavigation","reject","rej","urlTransition","setBrowserUrl","then","runNavigate","precreatedState","resolvePromise","rejectPromise","urlAndSnapshot$","redirectsApplied$","appliedUrl","beforePreactivationDone$","appliedUrlTree","preActivation","preactivationSetup$","evt","preactivationCheckGuards$","preactivationResolveData$","preactivationDone$","routerState$","activateRoutes","storedState","storedUrl","navigationIsSuccessful","ActivateRoutes","activate","resetUrlToCurrentUrlTree","resetStateAndUrl","ee","isCurrentPathEqualTo","replaceState","go","futureState","currState","deactivateChildRoutes","activateChildRoutes","futureChild","childOutletName","deactivateRoutes","parentContext","detachAndStoreRouteSubtree","deactivateRouteAndOutlet","componentRef","detach","onOutletDeactivated","contexts_1","deactivate","getOrCreateContext","stored","onOutletReAttached","attachRef","attach","advanceActivatedRouteNodeAndItsChildren","parentLoadedConfig","cmpFactoryResolver","componentFactoryResolver","activateWith","RouterLink","router","tabIndex","renderer","el","setAttribute","nativeElement","set","preserve","onClick","attrBoolValue","String","Boolean","Function","selector","RouterLinkWithHref","locationStrategy","subscription","updateTargetUrlAndHref","ngOnChanges","changes","button","ctrlKey","metaKey","shiftKey","target","href","prepareExternalUrl","Number","RouterLinkActive","element","cdr","classes","routerLinkActiveOptions","update","ngAfterContentInit","links","linksWithHrefs","hasActiveLinks","addClass","removeClass","isLinkActive","link","descendants","exportAs","OutletContext","ChildrenOutletContexts","Map","onChildOutletCreated","onChildOutletDestroyed","RouterOutlet","changeDetector","_activatedRoute","activateEvents","deactivateEvents","ngOnInit","instance","cmp","ref","activatedRoute","insert","hostView","destroy","emit","resolveComponentFactory","childContexts","OutletInjector","createComponent","markForCheck","notFoundValue","PreloadingStrategy","PreloadAllModules","preload","NoPreloading","RouterPreloader","moduleLoader","preloadingStrategy","onStartLoad","onEndLoad","setUpPreloading","processRoutes","preloadConfig","loaded$","RouterScroller","viewportScroller","options","lastId","lastSource","restoredId","scrollPositionRestoration","anchorScrolling","init","setHistoryScrollRestoration","routerEventsSubscription","createScrollEvents","scrollEventsSubscription","consumeScrollEvents","getScrollPosition","scheduleScrollEvent","scrollToPosition","scrollToAnchor","ROUTER_DIRECTIVES","ROUTER_CONFIGURATION","ROUTER_FORROOT_GUARD","ROUTER_PROVIDERS","provide","useClass","useFactory","setupRouter","deps","rootRoute","useValue","enableTracing","routerNgProbeToken","RouterModule","RouterModule_1","forRoot","providers","provideRoutes","provideForRootGuard","provideLocationStrategy","createRouterScroller","useExisting","multi","provideRouterInitializer","forChild","declarations","exports","entryComponents","scrollOffset","setOffset","platformLocationStrategy","baseHref","useHash","opts","dom_1","logGroup","constructor","log","logGroupEnd","RouterInitializer","initNavigation","resultOfPreactivationDone","appInitializer","isLegacyDisabled","isLegacyEnabled","bootstrapListener","bootstrappedComponentRef","preloader","routerScroller","components","componentTypes","complete","getAppInitializer","bind","getBootstrapListener","ROUTER_INITIALIZER","VERSION","ɵangular_packages_router_router_a","ɵangular_packages_router_router_h","ɵangular_packages_router_router_c","ɵangular_packages_router_router_i","ɵangular_packages_router_router_j","ɵangular_packages_router_router_e","ɵangular_packages_router_router_d","ɵangular_packages_router_router_k","ɵangular_packages_router_router_g","ɵangular_packages_router_router_b","ɵangular_packages_router_router_f","ɵangular_packages_router_router_n","ɵangular_packages_router_router_l","ɵangular_packages_router_router_m","ɵEmptyOutletComponent","ɵROUTER_PROVIDERS","ɵflatten"],"mappings":"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","file":"router.js","sourcesContent":["/**\n * @license Angular v6.1.10\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\nimport { __values, __decorate, __param, __metadata, __extends, __assign, __spread } from 'tslib';\nimport { Component, ɵisObservable, ɵisPromise, NgModuleRef, InjectionToken, NgModuleFactory, NgZone, isDevMode, ɵConsole, Attribute, Directive, ElementRef, HostBinding, HostListener, Input, Renderer2, ChangeDetectorRef, ContentChildren, QueryList, ComponentFactoryResolver, EventEmitter, Output, ViewContainerRef, Compiler, Injectable, Injector, NgModuleFactoryLoader, ANALYZE_FOR_ENTRY_COMPONENTS, APP_BOOTSTRAP_LISTENER, APP_INITIALIZER, ApplicationRef, Inject, NgModule, NgProbeToken, Optional, SkipSelf, SystemJsNgModuleLoader, Version } from '@angular/core';\nimport { from, of, EmptyError, Observable, BehaviorSubject, Subject } from 'rxjs';\nimport { concatAll, every, last, map, mergeAll, catchError, first, mergeMap, concatMap, reduce, filter } from 'rxjs/operators';\nimport { LocationStrategy, APP_BASE_HREF, HashLocationStrategy, LOCATION_INITIALIZED, Location, PathLocationStrategy, PlatformLocation, ViewportScroller } from '@angular/common';\nimport { ɵgetDOM } from '@angular/platform-browser';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Base for events the Router goes through, as opposed to events tied to a specific\n * Route. `RouterEvent`s will only be fired one time for any given navigation.\n *\n * Example:\n *\n * ```\n * class MyService {\n *   constructor(public router: Router, logger: Logger) {\n *     router.events.filter(e => e instanceof RouterEvent).subscribe(e => {\n *       logger.log(e.id, e.url);\n *     });\n *   }\n * }\n * ```\n *\n * @experimental\n */\nvar RouterEvent = /** @class */ (function () {\n    function RouterEvent(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url) {\n        this.id = id;\n        this.url = url;\n    }\n    return RouterEvent;\n}());\n/**\n * @description\n *\n * Represents an event triggered when a navigation starts.\n *\n *\n */\nvar NavigationStart = /** @class */ (function (_super) {\n    __extends(NavigationStart, _super);\n    function NavigationStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    navigationTrigger, \n    /** @docsNotRequired */\n    restoredState) {\n        if (navigationTrigger === void 0) { \n        /** @docsNotRequired */\n        navigationTrigger = 'imperative'; }\n        if (restoredState === void 0) { \n        /** @docsNotRequired */\n        restoredState = null; }\n        var _this = _super.call(this, id, url) || this;\n        _this.navigationTrigger = navigationTrigger;\n        _this.restoredState = restoredState;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationStart.prototype.toString = function () { return \"NavigationStart(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n    return NavigationStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation ends successfully.\n *\n *\n */\nvar NavigationEnd = /** @class */ (function (_super) {\n    __extends(NavigationEnd, _super);\n    function NavigationEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationEnd.prototype.toString = function () {\n        return \"NavigationEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"')\";\n    };\n    return NavigationEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation is canceled.\n *\n *\n */\nvar NavigationCancel = /** @class */ (function (_super) {\n    __extends(NavigationCancel, _super);\n    function NavigationCancel(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    reason) {\n        var _this = _super.call(this, id, url) || this;\n        _this.reason = reason;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationCancel.prototype.toString = function () { return \"NavigationCancel(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n    return NavigationCancel;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when a navigation fails due to an unexpected error.\n *\n *\n */\nvar NavigationError = /** @class */ (function (_super) {\n    __extends(NavigationError, _super);\n    function NavigationError(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    error) {\n        var _this = _super.call(this, id, url) || this;\n        _this.error = error;\n        return _this;\n    }\n    /** @docsNotRequired */\n    NavigationError.prototype.toString = function () {\n        return \"NavigationError(id: \" + this.id + \", url: '\" + this.url + \"', error: \" + this.error + \")\";\n    };\n    return NavigationError;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered when routes are recognized.\n *\n *\n */\nvar RoutesRecognized = /** @class */ (function (_super) {\n    __extends(RoutesRecognized, _super);\n    function RoutesRecognized(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    /** @docsNotRequired */\n    RoutesRecognized.prototype.toString = function () {\n        return \"RoutesRecognized(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return RoutesRecognized;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the start of the Guard phase of routing.\n *\n * @experimental\n */\nvar GuardsCheckStart = /** @class */ (function (_super) {\n    __extends(GuardsCheckStart, _super);\n    function GuardsCheckStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    GuardsCheckStart.prototype.toString = function () {\n        return \"GuardsCheckStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return GuardsCheckStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the end of the Guard phase of routing.\n *\n * @experimental\n */\nvar GuardsCheckEnd = /** @class */ (function (_super) {\n    __extends(GuardsCheckEnd, _super);\n    function GuardsCheckEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state, \n    /** @docsNotRequired */\n    shouldActivate) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        _this.shouldActivate = shouldActivate;\n        return _this;\n    }\n    GuardsCheckEnd.prototype.toString = function () {\n        return \"GuardsCheckEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \", shouldActivate: \" + this.shouldActivate + \")\";\n    };\n    return GuardsCheckEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the start of the Resolve phase of routing. The timing of this\n * event may change, thus it's experimental. In the current iteration it will run\n * in the \"resolve\" phase whether there's things to resolve or not. In the future this\n * behavior may change to only run when there are things to be resolved.\n *\n * @experimental\n */\nvar ResolveStart = /** @class */ (function (_super) {\n    __extends(ResolveStart, _super);\n    function ResolveStart(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    ResolveStart.prototype.toString = function () {\n        return \"ResolveStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return ResolveStart;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents the end of the Resolve phase of routing. See note on\n * `ResolveStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ResolveEnd = /** @class */ (function (_super) {\n    __extends(ResolveEnd, _super);\n    function ResolveEnd(\n    /** @docsNotRequired */\n    id, \n    /** @docsNotRequired */\n    url, \n    /** @docsNotRequired */\n    urlAfterRedirects, \n    /** @docsNotRequired */\n    state) {\n        var _this = _super.call(this, id, url) || this;\n        _this.urlAfterRedirects = urlAfterRedirects;\n        _this.state = state;\n        return _this;\n    }\n    ResolveEnd.prototype.toString = function () {\n        return \"ResolveEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n    };\n    return ResolveEnd;\n}(RouterEvent));\n/**\n * @description\n *\n * Represents an event triggered before lazy loading a route config.\n *\n * @experimental\n */\nvar RouteConfigLoadStart = /** @class */ (function () {\n    function RouteConfigLoadStart(\n    /** @docsNotRequired */\n    route) {\n        this.route = route;\n    }\n    RouteConfigLoadStart.prototype.toString = function () { return \"RouteConfigLoadStart(path: \" + this.route.path + \")\"; };\n    return RouteConfigLoadStart;\n}());\n/**\n * @description\n *\n * Represents an event triggered when a route has been lazy loaded.\n *\n * @experimental\n */\nvar RouteConfigLoadEnd = /** @class */ (function () {\n    function RouteConfigLoadEnd(\n    /** @docsNotRequired */\n    route) {\n        this.route = route;\n    }\n    RouteConfigLoadEnd.prototype.toString = function () { return \"RouteConfigLoadEnd(path: \" + this.route.path + \")\"; };\n    return RouteConfigLoadEnd;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ChildActivationEnd` for use of this experimental API.\n *\n * @experimental\n */\nvar ChildActivationStart = /** @class */ (function () {\n    function ChildActivationStart(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ChildActivationStart.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ChildActivationStart(path: '\" + path + \"')\";\n    };\n    return ChildActivationStart;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ChildActivationStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ChildActivationEnd = /** @class */ (function () {\n    function ChildActivationEnd(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ChildActivationEnd.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ChildActivationEnd(path: '\" + path + \"')\";\n    };\n    return ChildActivationEnd;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ActivationEnd` for use of this experimental API.\n *\n * @experimental\n */\nvar ActivationStart = /** @class */ (function () {\n    function ActivationStart(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ActivationStart.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ActivationStart(path: '\" + path + \"')\";\n    };\n    return ActivationStart;\n}());\n/**\n * @description\n *\n * Represents the start of end of the Resolve phase of routing. See note on\n * `ActivationStart` for use of this experimental API.\n *\n * @experimental\n */\nvar ActivationEnd = /** @class */ (function () {\n    function ActivationEnd(\n    /** @docsNotRequired */\n    snapshot) {\n        this.snapshot = snapshot;\n    }\n    ActivationEnd.prototype.toString = function () {\n        var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n        return \"ActivationEnd(path: '\" + path + \"')\";\n    };\n    return ActivationEnd;\n}());\n/**\n * @description\n *\n * Represents a scrolling event.\n */\nvar Scroll = /** @class */ (function () {\n    function Scroll(\n    /** @docsNotRequired */\n    routerEvent, \n    /** @docsNotRequired */\n    position, \n    /** @docsNotRequired */\n    anchor) {\n        this.routerEvent = routerEvent;\n        this.position = position;\n        this.anchor = anchor;\n    }\n    Scroll.prototype.toString = function () {\n        var pos = this.position ? this.position[0] + \", \" + this.position[1] : null;\n        return \"Scroll(anchor: '\" + this.anchor + \"', position: '\" + pos + \"')\";\n    };\n    return Scroll;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * This component is used internally within the router to be a placeholder when an empty\n * router-outlet is needed. For example, with a config such as:\n *\n * `{path: 'parent', outlet: 'nav', children: [...]}`\n *\n * In order to render, there needs to be a component on this config, which will default\n * to this `EmptyOutletComponent`.\n */\nvar EmptyOutletComponent = /** @class */ (function () {\n    function EmptyOutletComponent() {\n    }\n    EmptyOutletComponent = __decorate([\n        Component({ template: \"<router-outlet></router-outlet>\" })\n    ], EmptyOutletComponent);\n    return EmptyOutletComponent;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Name of the primary outlet.\n *\n *\n */\nvar PRIMARY_OUTLET = 'primary';\nvar ParamsAsMap = /** @class */ (function () {\n    function ParamsAsMap(params) {\n        this.params = params || {};\n    }\n    ParamsAsMap.prototype.has = function (name) { return this.params.hasOwnProperty(name); };\n    ParamsAsMap.prototype.get = function (name) {\n        if (this.has(name)) {\n            var v = this.params[name];\n            return Array.isArray(v) ? v[0] : v;\n        }\n        return null;\n    };\n    ParamsAsMap.prototype.getAll = function (name) {\n        if (this.has(name)) {\n            var v = this.params[name];\n            return Array.isArray(v) ? v : [v];\n        }\n        return [];\n    };\n    Object.defineProperty(ParamsAsMap.prototype, \"keys\", {\n        get: function () { return Object.keys(this.params); },\n        enumerable: true,\n        configurable: true\n    });\n    return ParamsAsMap;\n}());\n/**\n * Convert a `Params` instance to a `ParamMap`.\n *\n *\n */\nfunction convertToParamMap(params) {\n    return new ParamsAsMap(params);\n}\nvar NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';\nfunction navigationCancelingError(message) {\n    var error = Error('NavigationCancelingError: ' + message);\n    error[NAVIGATION_CANCELING_ERROR] = true;\n    return error;\n}\nfunction isNavigationCancelingError(error) {\n    return error && error[NAVIGATION_CANCELING_ERROR];\n}\n// Matches the route configuration (`route`) against the actual URL (`segments`).\nfunction defaultUrlMatcher(segments, segmentGroup, route) {\n    var parts = route.path.split('/');\n    if (parts.length > segments.length) {\n        // The actual URL is shorter than the config, no match\n        return null;\n    }\n    if (route.pathMatch === 'full' &&\n        (segmentGroup.hasChildren() || parts.length < segments.length)) {\n        // The config is longer than the actual URL but we are looking for a full match, return null\n        return null;\n    }\n    var posParams = {};\n    // Check each config part against the actual URL\n    for (var index = 0; index < parts.length; index++) {\n        var part = parts[index];\n        var segment = segments[index];\n        var isParameter = part.startsWith(':');\n        if (isParameter) {\n            posParams[part.substring(1)] = segment;\n        }\n        else if (part !== segment.path) {\n            // The actual URL part does not match the config, no match\n            return null;\n        }\n    }\n    return { consumed: segments.slice(0, parts.length), posParams: posParams };\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar LoadedRouterConfig = /** @class */ (function () {\n    function LoadedRouterConfig(routes, module) {\n        this.routes = routes;\n        this.module = module;\n    }\n    return LoadedRouterConfig;\n}());\nfunction validateConfig(config, parentPath) {\n    if (parentPath === void 0) { parentPath = ''; }\n    // forEach doesn't iterate undefined values\n    for (var i = 0; i < config.length; i++) {\n        var route = config[i];\n        var fullPath = getFullPath(parentPath, route);\n        validateNode(route, fullPath);\n    }\n}\nfunction validateNode(route, fullPath) {\n    if (!route) {\n        throw new Error(\"\\n      Invalid configuration of route '\" + fullPath + \"': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    \");\n    }\n    if (Array.isArray(route)) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': Array cannot be specified\");\n    }\n    if (!route.component && !route.children && !route.loadChildren &&\n        (route.outlet && route.outlet !== PRIMARY_OUTLET)) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': a componentless route without children or loadChildren cannot have a named outlet set\");\n    }\n    if (route.redirectTo && route.children) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and children cannot be used together\");\n    }\n    if (route.redirectTo && route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and loadChildren cannot be used together\");\n    }\n    if (route.children && route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': children and loadChildren cannot be used together\");\n    }\n    if (route.redirectTo && route.component) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and component cannot be used together\");\n    }\n    if (route.path && route.matcher) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path and matcher cannot be used together\");\n    }\n    if (route.redirectTo === void 0 && !route.component && !route.children && !route.loadChildren) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"'. One of the following must be provided: component, redirectTo, children or loadChildren\");\n    }\n    if (route.path === void 0 && route.matcher === void 0) {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': routes must have either a path or a matcher specified\");\n    }\n    if (typeof route.path === 'string' && route.path.charAt(0) === '/') {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path cannot start with a slash\");\n    }\n    if (route.path === '' && route.redirectTo !== void 0 && route.pathMatch === void 0) {\n        var exp = \"The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.\";\n        throw new Error(\"Invalid configuration of route '{path: \\\"\" + fullPath + \"\\\", redirectTo: \\\"\" + route.redirectTo + \"\\\"}': please provide 'pathMatch'. \" + exp);\n    }\n    if (route.pathMatch !== void 0 && route.pathMatch !== 'full' && route.pathMatch !== 'prefix') {\n        throw new Error(\"Invalid configuration of route '\" + fullPath + \"': pathMatch can only be set to 'prefix' or 'full'\");\n    }\n    if (route.children) {\n        validateConfig(route.children, fullPath);\n    }\n}\nfunction getFullPath(parentPath, currentRoute) {\n    if (!currentRoute) {\n        return parentPath;\n    }\n    if (!parentPath && !currentRoute.path) {\n        return '';\n    }\n    else if (parentPath && !currentRoute.path) {\n        return parentPath + \"/\";\n    }\n    else if (!parentPath && currentRoute.path) {\n        return currentRoute.path;\n    }\n    else {\n        return parentPath + \"/\" + currentRoute.path;\n    }\n}\n/**\n * Makes a copy of the config and adds any default required properties.\n */\nfunction standardizeConfig(r) {\n    var children = r.children && r.children.map(standardizeConfig);\n    var c = children ? __assign({}, r, { children: children }) : __assign({}, r);\n    if (!c.component && (children || c.loadChildren) && (c.outlet && c.outlet !== PRIMARY_OUTLET)) {\n        c.component = EmptyOutletComponent;\n    }\n    return c;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction shallowEqualArrays(a, b) {\n    if (a.length !== b.length)\n        return false;\n    for (var i = 0; i < a.length; ++i) {\n        if (!shallowEqual(a[i], b[i]))\n            return false;\n    }\n    return true;\n}\nfunction shallowEqual(a, b) {\n    var k1 = Object.keys(a);\n    var k2 = Object.keys(b);\n    if (k1.length != k2.length) {\n        return false;\n    }\n    var key;\n    for (var i = 0; i < k1.length; i++) {\n        key = k1[i];\n        if (a[key] !== b[key]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Flattens single-level nested arrays.\n */\nfunction flatten(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\n/**\n * Return the last element of an array.\n */\nfunction last$1(a) {\n    return a.length > 0 ? a[a.length - 1] : null;\n}\nfunction forEach(map$$1, callback) {\n    for (var prop in map$$1) {\n        if (map$$1.hasOwnProperty(prop)) {\n            callback(map$$1[prop], prop);\n        }\n    }\n}\nfunction waitForMap(obj, fn) {\n    if (Object.keys(obj).length === 0) {\n        return of({});\n    }\n    var waitHead = [];\n    var waitTail = [];\n    var res = {};\n    forEach(obj, function (a, k) {\n        var mapped = fn(k, a).pipe(map(function (r) { return res[k] = r; }));\n        if (k === PRIMARY_OUTLET) {\n            waitHead.push(mapped);\n        }\n        else {\n            waitTail.push(mapped);\n        }\n    });\n    // Closure compiler has problem with using spread operator here. So just using Array.concat.\n    return of.apply(null, waitHead.concat(waitTail)).pipe(concatAll(), last(), map(function () { return res; }));\n}\n/**\n * ANDs Observables by merging all input observables, reducing to an Observable verifying all\n * input Observables return `true`.\n */\nfunction andObservables(observables) {\n    return observables.pipe(mergeAll(), every(function (result) { return result === true; }));\n}\nfunction wrapIntoObservable(value) {\n    if (ɵisObservable(value)) {\n        return value;\n    }\n    if (ɵisPromise(value)) {\n        // Use `Promise.resolve()` to wrap promise-like instances.\n        // Required ie when a Resolver returns a AngularJS `$q` promise to correctly trigger the\n        // change detection.\n        return from(Promise.resolve(value));\n    }\n    return of(value);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createEmptyUrlTree() {\n    return new UrlTree(new UrlSegmentGroup([], {}), {}, null);\n}\nfunction containsTree(container, containee, exact) {\n    if (exact) {\n        return equalQueryParams(container.queryParams, containee.queryParams) &&\n            equalSegmentGroups(container.root, containee.root);\n    }\n    return containsQueryParams(container.queryParams, containee.queryParams) &&\n        containsSegmentGroup(container.root, containee.root);\n}\nfunction equalQueryParams(container, containee) {\n    // TODO: This does not handle array params correctly.\n    return shallowEqual(container, containee);\n}\nfunction equalSegmentGroups(container, containee) {\n    if (!equalPath(container.segments, containee.segments))\n        return false;\n    if (container.numberOfChildren !== containee.numberOfChildren)\n        return false;\n    for (var c in containee.children) {\n        if (!container.children[c])\n            return false;\n        if (!equalSegmentGroups(container.children[c], containee.children[c]))\n            return false;\n    }\n    return true;\n}\nfunction containsQueryParams(container, containee) {\n    // TODO: This does not handle array params correctly.\n    return Object.keys(containee).length <= Object.keys(container).length &&\n        Object.keys(containee).every(function (key) { return containee[key] === container[key]; });\n}\nfunction containsSegmentGroup(container, containee) {\n    return containsSegmentGroupHelper(container, containee, containee.segments);\n}\nfunction containsSegmentGroupHelper(container, containee, containeePaths) {\n    if (container.segments.length > containeePaths.length) {\n        var current = container.segments.slice(0, containeePaths.length);\n        if (!equalPath(current, containeePaths))\n            return false;\n        if (containee.hasChildren())\n            return false;\n        return true;\n    }\n    else if (container.segments.length === containeePaths.length) {\n        if (!equalPath(container.segments, containeePaths))\n            return false;\n        for (var c in containee.children) {\n            if (!container.children[c])\n                return false;\n            if (!containsSegmentGroup(container.children[c], containee.children[c]))\n                return false;\n        }\n        return true;\n    }\n    else {\n        var current = containeePaths.slice(0, container.segments.length);\n        var next = containeePaths.slice(container.segments.length);\n        if (!equalPath(container.segments, current))\n            return false;\n        if (!container.children[PRIMARY_OUTLET])\n            return false;\n        return containsSegmentGroupHelper(container.children[PRIMARY_OUTLET], containee, next);\n    }\n}\n/**\n * @description\n *\n * Represents the parsed URL.\n *\n * Since a router state is a tree, and the URL is nothing but a serialized state, the URL is a\n * serialized tree.\n * UrlTree is a data structure that provides a lot of affordances in dealing with URLs\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree =\n *       router.parseUrl('/team/33/(user/victor//support:help)?debug=true#fragment');\n *     const f = tree.fragment; // return 'fragment'\n *     const q = tree.queryParams; // returns {debug: 'true'}\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments; // returns 2 segments 'team' and '33'\n *     g.children[PRIMARY_OUTLET].segments; // returns 2 segments 'user' and 'victor'\n *     g.children['support'].segments; // return 1 segment 'help'\n *   }\n * }\n * ```\n *\n *\n */\nvar UrlTree = /** @class */ (function () {\n    /** @internal */\n    function UrlTree(\n    /** The root segment group of the URL tree */\n    root, \n    /** The query params of the URL */\n    queryParams, \n    /** The fragment of the URL */\n    fragment) {\n        this.root = root;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n    }\n    Object.defineProperty(UrlTree.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap = convertToParamMap(this.queryParams);\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlTree.prototype.toString = function () { return DEFAULT_SERIALIZER.serialize(this); };\n    return UrlTree;\n}());\n/**\n * @description\n *\n * Represents the parsed URL segment group.\n *\n * See `UrlTree` for more information.\n *\n *\n */\nvar UrlSegmentGroup = /** @class */ (function () {\n    function UrlSegmentGroup(\n    /** The URL segments of this group. See `UrlSegment` for more information */\n    segments, \n    /** The list of children of this group */\n    children) {\n        var _this = this;\n        this.segments = segments;\n        this.children = children;\n        /** The parent node in the url tree */\n        this.parent = null;\n        forEach(children, function (v, k) { return v.parent = _this; });\n    }\n    /** Whether the segment has child segments */\n    UrlSegmentGroup.prototype.hasChildren = function () { return this.numberOfChildren > 0; };\n    Object.defineProperty(UrlSegmentGroup.prototype, \"numberOfChildren\", {\n        /** Number of child segments */\n        get: function () { return Object.keys(this.children).length; },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlSegmentGroup.prototype.toString = function () { return serializePaths(this); };\n    return UrlSegmentGroup;\n}());\n/**\n * @description\n *\n * Represents a single URL segment.\n *\n * A UrlSegment is a part of a URL between the two slashes. It contains a path and the matrix\n * parameters associated with the segment.\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const tree: UrlTree = router.parseUrl('/team;id=33');\n *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n *     const s: UrlSegment[] = g.segments;\n *     s[0].path; // returns 'team'\n *     s[0].parameters; // returns {id: 33}\n *   }\n * }\n * ```\n *\n *\n */\nvar UrlSegment = /** @class */ (function () {\n    function UrlSegment(\n    /** The path part of a URL segment */\n    path, \n    /** The matrix parameters associated with a segment */\n    parameters) {\n        this.path = path;\n        this.parameters = parameters;\n    }\n    Object.defineProperty(UrlSegment.prototype, \"parameterMap\", {\n        get: function () {\n            if (!this._parameterMap) {\n                this._parameterMap = convertToParamMap(this.parameters);\n            }\n            return this._parameterMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /** @docsNotRequired */\n    UrlSegment.prototype.toString = function () { return serializePath(this); };\n    return UrlSegment;\n}());\nfunction equalSegments(as, bs) {\n    return equalPath(as, bs) && as.every(function (a, i) { return shallowEqual(a.parameters, bs[i].parameters); });\n}\nfunction equalPath(as, bs) {\n    if (as.length !== bs.length)\n        return false;\n    return as.every(function (a, i) { return a.path === bs[i].path; });\n}\nfunction mapChildrenIntoArray(segment, fn) {\n    var res = [];\n    forEach(segment.children, function (child, childOutlet) {\n        if (childOutlet === PRIMARY_OUTLET) {\n            res = res.concat(fn(child, childOutlet));\n        }\n    });\n    forEach(segment.children, function (child, childOutlet) {\n        if (childOutlet !== PRIMARY_OUTLET) {\n            res = res.concat(fn(child, childOutlet));\n        }\n    });\n    return res;\n}\n/**\n * @description\n *\n * Serializes and deserializes a URL string into a URL tree.\n *\n * The url serialization strategy is customizable. You can\n * make all URLs case insensitive by providing a custom UrlSerializer.\n *\n * See `DefaultUrlSerializer` for an example of a URL serializer.\n *\n *\n */\nvar UrlSerializer = /** @class */ (function () {\n    function UrlSerializer() {\n    }\n    return UrlSerializer;\n}());\n/**\n * @description\n *\n * A default implementation of the `UrlSerializer`.\n *\n * Example URLs:\n *\n * ```\n * /inbox/33(popup:compose)\n * /inbox/33;open=true/messages/44\n * ```\n *\n * DefaultUrlSerializer uses parentheses to serialize secondary segments (e.g., popup:compose), the\n * colon syntax to specify the outlet, and the ';parameter=value' syntax (e.g., open=true) to\n * specify route specific parameters.\n *\n *\n */\nvar DefaultUrlSerializer = /** @class */ (function () {\n    function DefaultUrlSerializer() {\n    }\n    /** Parses a url into a `UrlTree` */\n    DefaultUrlSerializer.prototype.parse = function (url) {\n        var p = new UrlParser(url);\n        return new UrlTree(p.parseRootSegment(), p.parseQueryParams(), p.parseFragment());\n    };\n    /** Converts a `UrlTree` into a url */\n    DefaultUrlSerializer.prototype.serialize = function (tree) {\n        var segment = \"/\" + serializeSegment(tree.root, true);\n        var query = serializeQueryParams(tree.queryParams);\n        var fragment = typeof tree.fragment === \"string\" ? \"#\" + encodeUriFragment(tree.fragment) : '';\n        return \"\" + segment + query + fragment;\n    };\n    return DefaultUrlSerializer;\n}());\nvar DEFAULT_SERIALIZER = new DefaultUrlSerializer();\nfunction serializePaths(segment) {\n    return segment.segments.map(function (p) { return serializePath(p); }).join('/');\n}\nfunction serializeSegment(segment, root) {\n    if (!segment.hasChildren()) {\n        return serializePaths(segment);\n    }\n    if (root) {\n        var primary = segment.children[PRIMARY_OUTLET] ?\n            serializeSegment(segment.children[PRIMARY_OUTLET], false) :\n            '';\n        var children_1 = [];\n        forEach(segment.children, function (v, k) {\n            if (k !== PRIMARY_OUTLET) {\n                children_1.push(k + \":\" + serializeSegment(v, false));\n            }\n        });\n        return children_1.length > 0 ? primary + \"(\" + children_1.join('//') + \")\" : primary;\n    }\n    else {\n        var children = mapChildrenIntoArray(segment, function (v, k) {\n            if (k === PRIMARY_OUTLET) {\n                return [serializeSegment(segment.children[PRIMARY_OUTLET], false)];\n            }\n            return [k + \":\" + serializeSegment(v, false)];\n        });\n        return serializePaths(segment) + \"/(\" + children.join('//') + \")\";\n    }\n}\n/**\n * Encodes a URI string with the default encoding. This function will only ever be called from\n * `encodeUriQuery` or `encodeUriSegment` as it's the base set of encodings to be used. We need\n * a custom encoding because encodeURIComponent is too aggressive and encodes stuff that doesn't\n * have to be encoded per https://url.spec.whatwg.org.\n */\nfunction encodeUriString(s) {\n    return encodeURIComponent(s)\n        .replace(/%40/g, '@')\n        .replace(/%3A/gi, ':')\n        .replace(/%24/g, '$')\n        .replace(/%2C/gi, ',');\n}\n/**\n * This function should be used to encode both keys and values in a query string key/value. In\n * the following URL, you need to call encodeUriQuery on \"k\" and \"v\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriQuery(s) {\n    return encodeUriString(s).replace(/%3B/gi, ';');\n}\n/**\n * This function should be used to encode a URL fragment. In the following URL, you need to call\n * encodeUriFragment on \"f\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriFragment(s) {\n    return encodeURI(s);\n}\n/**\n * This function should be run on any URI segment as well as the key and value in a key/value\n * pair for matrix params. In the following URL, you need to call encodeUriSegment on \"html\",\n * \"mk\", and \"mv\":\n *\n * http://www.site.org/html;mk=mv?k=v#f\n */\nfunction encodeUriSegment(s) {\n    return encodeUriString(s).replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/%26/gi, '&');\n}\nfunction decode(s) {\n    return decodeURIComponent(s);\n}\n// Query keys/values should have the \"+\" replaced first, as \"+\" in a query string is \" \".\n// decodeURIComponent function will not decode \"+\" as a space.\nfunction decodeQuery(s) {\n    return decode(s.replace(/\\+/g, '%20'));\n}\nfunction serializePath(path) {\n    return \"\" + encodeUriSegment(path.path) + serializeMatrixParams(path.parameters);\n}\nfunction serializeMatrixParams(params) {\n    return Object.keys(params)\n        .map(function (key) { return \";\" + encodeUriSegment(key) + \"=\" + encodeUriSegment(params[key]); })\n        .join('');\n}\nfunction serializeQueryParams(params) {\n    var strParams = Object.keys(params).map(function (name) {\n        var value = params[name];\n        return Array.isArray(value) ?\n            value.map(function (v) { return encodeUriQuery(name) + \"=\" + encodeUriQuery(v); }).join('&') :\n            encodeUriQuery(name) + \"=\" + encodeUriQuery(value);\n    });\n    return strParams.length ? \"?\" + strParams.join(\"&\") : '';\n}\nvar SEGMENT_RE = /^[^\\/()?;=#]+/;\nfunction matchSegments(str) {\n    var match = str.match(SEGMENT_RE);\n    return match ? match[0] : '';\n}\nvar QUERY_PARAM_RE = /^[^=?&#]+/;\n// Return the name of the query param at the start of the string or an empty string\nfunction matchQueryParams(str) {\n    var match = str.match(QUERY_PARAM_RE);\n    return match ? match[0] : '';\n}\nvar QUERY_PARAM_VALUE_RE = /^[^?&#]+/;\n// Return the value of the query param at the start of the string or an empty string\nfunction matchUrlQueryParamValue(str) {\n    var match = str.match(QUERY_PARAM_VALUE_RE);\n    return match ? match[0] : '';\n}\nvar UrlParser = /** @class */ (function () {\n    function UrlParser(url) {\n        this.url = url;\n        this.remaining = url;\n    }\n    UrlParser.prototype.parseRootSegment = function () {\n        this.consumeOptional('/');\n        if (this.remaining === '' || this.peekStartsWith('?') || this.peekStartsWith('#')) {\n            return new UrlSegmentGroup([], {});\n        }\n        // The root segment group never has segments\n        return new UrlSegmentGroup([], this.parseChildren());\n    };\n    UrlParser.prototype.parseQueryParams = function () {\n        var params = {};\n        if (this.consumeOptional('?')) {\n            do {\n                this.parseQueryParam(params);\n            } while (this.consumeOptional('&'));\n        }\n        return params;\n    };\n    UrlParser.prototype.parseFragment = function () {\n        return this.consumeOptional('#') ? decodeURIComponent(this.remaining) : null;\n    };\n    UrlParser.prototype.parseChildren = function () {\n        if (this.remaining === '') {\n            return {};\n        }\n        this.consumeOptional('/');\n        var segments = [];\n        if (!this.peekStartsWith('(')) {\n            segments.push(this.parseSegment());\n        }\n        while (this.peekStartsWith('/') && !this.peekStartsWith('//') && !this.peekStartsWith('/(')) {\n            this.capture('/');\n            segments.push(this.parseSegment());\n        }\n        var children = {};\n        if (this.peekStartsWith('/(')) {\n            this.capture('/');\n            children = this.parseParens(true);\n        }\n        var res = {};\n        if (this.peekStartsWith('(')) {\n            res = this.parseParens(false);\n        }\n        if (segments.length > 0 || Object.keys(children).length > 0) {\n            res[PRIMARY_OUTLET] = new UrlSegmentGroup(segments, children);\n        }\n        return res;\n    };\n    // parse a segment with its matrix parameters\n    // ie `name;k1=v1;k2`\n    UrlParser.prototype.parseSegment = function () {\n        var path = matchSegments(this.remaining);\n        if (path === '' && this.peekStartsWith(';')) {\n            throw new Error(\"Empty path url segment cannot have parameters: '\" + this.remaining + \"'.\");\n        }\n        this.capture(path);\n        return new UrlSegment(decode(path), this.parseMatrixParams());\n    };\n    UrlParser.prototype.parseMatrixParams = function () {\n        var params = {};\n        while (this.consumeOptional(';')) {\n            this.parseParam(params);\n        }\n        return params;\n    };\n    UrlParser.prototype.parseParam = function (params) {\n        var key = matchSegments(this.remaining);\n        if (!key) {\n            return;\n        }\n        this.capture(key);\n        var value = '';\n        if (this.consumeOptional('=')) {\n            var valueMatch = matchSegments(this.remaining);\n            if (valueMatch) {\n                value = valueMatch;\n                this.capture(value);\n            }\n        }\n        params[decode(key)] = decode(value);\n    };\n    // Parse a single query parameter `name[=value]`\n    UrlParser.prototype.parseQueryParam = function (params) {\n        var key = matchQueryParams(this.remaining);\n        if (!key) {\n            return;\n        }\n        this.capture(key);\n        var value = '';\n        if (this.consumeOptional('=')) {\n            var valueMatch = matchUrlQueryParamValue(this.remaining);\n            if (valueMatch) {\n                value = valueMatch;\n                this.capture(value);\n            }\n        }\n        var decodedKey = decodeQuery(key);\n        var decodedVal = decodeQuery(value);\n        if (params.hasOwnProperty(decodedKey)) {\n            // Append to existing values\n            var currentVal = params[decodedKey];\n            if (!Array.isArray(currentVal)) {\n                currentVal = [currentVal];\n                params[decodedKey] = currentVal;\n            }\n            currentVal.push(decodedVal);\n        }\n        else {\n            // Create a new value\n            params[decodedKey] = decodedVal;\n        }\n    };\n    // parse `(a/b//outlet_name:c/d)`\n    UrlParser.prototype.parseParens = function (allowPrimary) {\n        var segments = {};\n        this.capture('(');\n        while (!this.consumeOptional(')') && this.remaining.length > 0) {\n            var path = matchSegments(this.remaining);\n            var next = this.remaining[path.length];\n            // if is is not one of these characters, then the segment was unescaped\n            // or the group was not closed\n            if (next !== '/' && next !== ')' && next !== ';') {\n                throw new Error(\"Cannot parse url '\" + this.url + \"'\");\n            }\n            var outletName = undefined;\n            if (path.indexOf(':') > -1) {\n                outletName = path.substr(0, path.indexOf(':'));\n                this.capture(outletName);\n                this.capture(':');\n            }\n            else if (allowPrimary) {\n                outletName = PRIMARY_OUTLET;\n            }\n            var children = this.parseChildren();\n            segments[outletName] = Object.keys(children).length === 1 ? children[PRIMARY_OUTLET] :\n                new UrlSegmentGroup([], children);\n            this.consumeOptional('//');\n        }\n        return segments;\n    };\n    UrlParser.prototype.peekStartsWith = function (str) { return this.remaining.startsWith(str); };\n    // Consumes the prefix when it is present and returns whether it has been consumed\n    UrlParser.prototype.consumeOptional = function (str) {\n        if (this.peekStartsWith(str)) {\n            this.remaining = this.remaining.substring(str.length);\n            return true;\n        }\n        return false;\n    };\n    UrlParser.prototype.capture = function (str) {\n        if (!this.consumeOptional(str)) {\n            throw new Error(\"Expected \\\"\" + str + \"\\\".\");\n        }\n    };\n    return UrlParser;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NoMatch = /** @class */ (function () {\n    function NoMatch(segmentGroup) {\n        this.segmentGroup = segmentGroup || null;\n    }\n    return NoMatch;\n}());\nvar AbsoluteRedirect = /** @class */ (function () {\n    function AbsoluteRedirect(urlTree) {\n        this.urlTree = urlTree;\n    }\n    return AbsoluteRedirect;\n}());\nfunction noMatch(segmentGroup) {\n    return new Observable(function (obs) { return obs.error(new NoMatch(segmentGroup)); });\n}\nfunction absoluteRedirect(newTree) {\n    return new Observable(function (obs) { return obs.error(new AbsoluteRedirect(newTree)); });\n}\nfunction namedOutletsRedirect(redirectTo) {\n    return new Observable(function (obs) { return obs.error(new Error(\"Only absolute redirects can have named outlets. redirectTo: '\" + redirectTo + \"'\")); });\n}\nfunction canLoadFails(route) {\n    return new Observable(function (obs) { return obs.error(navigationCancelingError(\"Cannot load children because the guard of the route \\\"path: '\" + route.path + \"'\\\" returned false\")); });\n}\n/**\n * Returns the `UrlTree` with the redirection applied.\n *\n * Lazy modules are loaded along the way.\n */\nfunction applyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n    return new ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config).apply();\n}\nvar ApplyRedirects = /** @class */ (function () {\n    function ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n        this.configLoader = configLoader;\n        this.urlSerializer = urlSerializer;\n        this.urlTree = urlTree;\n        this.config = config;\n        this.allowRedirects = true;\n        this.ngModule = moduleInjector.get(NgModuleRef);\n    }\n    ApplyRedirects.prototype.apply = function () {\n        var _this = this;\n        var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, PRIMARY_OUTLET);\n        var urlTrees$ = expanded$.pipe(map(function (rootSegmentGroup) { return _this.createUrlTree(rootSegmentGroup, _this.urlTree.queryParams, _this.urlTree.fragment); }));\n        return urlTrees$.pipe(catchError(function (e) {\n            if (e instanceof AbsoluteRedirect) {\n                // after an absolute redirect we do not apply any more redirects!\n                _this.allowRedirects = false;\n                // we need to run matching, so we can fetch all lazy-loaded modules\n                return _this.match(e.urlTree);\n            }\n            if (e instanceof NoMatch) {\n                throw _this.noMatchError(e);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.match = function (tree) {\n        var _this = this;\n        var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, tree.root, PRIMARY_OUTLET);\n        var mapped$ = expanded$.pipe(map(function (rootSegmentGroup) {\n            return _this.createUrlTree(rootSegmentGroup, tree.queryParams, tree.fragment);\n        }));\n        return mapped$.pipe(catchError(function (e) {\n            if (e instanceof NoMatch) {\n                throw _this.noMatchError(e);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.noMatchError = function (e) {\n        return new Error(\"Cannot match any routes. URL Segment: '\" + e.segmentGroup + \"'\");\n    };\n    ApplyRedirects.prototype.createUrlTree = function (rootCandidate, queryParams, fragment) {\n        var _a;\n        var root = rootCandidate.segments.length > 0 ?\n            new UrlSegmentGroup([], (_a = {}, _a[PRIMARY_OUTLET] = rootCandidate, _a)) :\n            rootCandidate;\n        return new UrlTree(root, queryParams, fragment);\n    };\n    ApplyRedirects.prototype.expandSegmentGroup = function (ngModule, routes, segmentGroup, outlet) {\n        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n            return this.expandChildren(ngModule, routes, segmentGroup)\n                .pipe(map(function (children) { return new UrlSegmentGroup([], children); }));\n        }\n        return this.expandSegment(ngModule, segmentGroup, routes, segmentGroup.segments, outlet, true);\n    };\n    // Recursively expand segment groups for all the child outlets\n    ApplyRedirects.prototype.expandChildren = function (ngModule, routes, segmentGroup) {\n        var _this = this;\n        return waitForMap(segmentGroup.children, function (childOutlet, child) { return _this.expandSegmentGroup(ngModule, routes, child, childOutlet); });\n    };\n    ApplyRedirects.prototype.expandSegment = function (ngModule, segmentGroup, routes, segments, outlet, allowRedirects) {\n        var _this = this;\n        return of.apply(void 0, __spread(routes)).pipe(map(function (r) {\n            var expanded$ = _this.expandSegmentAgainstRoute(ngModule, segmentGroup, routes, r, segments, outlet, allowRedirects);\n            return expanded$.pipe(catchError(function (e) {\n                if (e instanceof NoMatch) {\n                    // TODO(i): this return type doesn't match the declared Observable<UrlSegmentGroup> -\n                    // talk to Jason\n                    return of(null);\n                }\n                throw e;\n            }));\n        }), concatAll(), first(function (s) { return !!s; }), catchError(function (e, _) {\n            if (e instanceof EmptyError || e.name === 'EmptyError') {\n                if (_this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n                    return of(new UrlSegmentGroup([], {}));\n                }\n                throw new NoMatch(segmentGroup);\n            }\n            throw e;\n        }));\n    };\n    ApplyRedirects.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n        return segments.length === 0 && !segmentGroup.children[outlet];\n    };\n    ApplyRedirects.prototype.expandSegmentAgainstRoute = function (ngModule, segmentGroup, routes, route, paths, outlet, allowRedirects) {\n        if (getOutlet(route) !== outlet) {\n            return noMatch(segmentGroup);\n        }\n        if (route.redirectTo === undefined) {\n            return this.matchSegmentAgainstRoute(ngModule, segmentGroup, route, paths);\n        }\n        if (allowRedirects && this.allowRedirects) {\n            return this.expandSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, paths, outlet);\n        }\n        return noMatch(segmentGroup);\n    };\n    ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n        if (route.path === '**') {\n            return this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule, routes, route, outlet);\n        }\n        return this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, segments, outlet);\n    };\n    ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (ngModule, routes, route, outlet) {\n        var _this = this;\n        var newTree = this.applyRedirectCommands([], route.redirectTo, {});\n        if (route.redirectTo.startsWith('/')) {\n            return absoluteRedirect(newTree);\n        }\n        return this.lineralizeSegments(route, newTree).pipe(mergeMap(function (newSegments) {\n            var group = new UrlSegmentGroup(newSegments, {});\n            return _this.expandSegment(ngModule, group, routes, newSegments, outlet, false);\n        }));\n    };\n    ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n        var _this = this;\n        var _a = match(segmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild, positionalParamSegments = _a.positionalParamSegments;\n        if (!matched)\n            return noMatch(segmentGroup);\n        var newTree = this.applyRedirectCommands(consumedSegments, route.redirectTo, positionalParamSegments);\n        if (route.redirectTo.startsWith('/')) {\n            return absoluteRedirect(newTree);\n        }\n        return this.lineralizeSegments(route, newTree).pipe(mergeMap(function (newSegments) {\n            return _this.expandSegment(ngModule, segmentGroup, routes, newSegments.concat(segments.slice(lastChild)), outlet, false);\n        }));\n    };\n    ApplyRedirects.prototype.matchSegmentAgainstRoute = function (ngModule, rawSegmentGroup, route, segments) {\n        var _this = this;\n        if (route.path === '**') {\n            if (route.loadChildren) {\n                return this.configLoader.load(ngModule.injector, route)\n                    .pipe(map(function (cfg) {\n                    route._loadedConfig = cfg;\n                    return new UrlSegmentGroup(segments, {});\n                }));\n            }\n            return of(new UrlSegmentGroup(segments, {}));\n        }\n        var _a = match(rawSegmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild;\n        if (!matched)\n            return noMatch(rawSegmentGroup);\n        var rawSlicedSegments = segments.slice(lastChild);\n        var childConfig$ = this.getChildConfig(ngModule, route);\n        return childConfig$.pipe(mergeMap(function (routerConfig) {\n            var childModule = routerConfig.module;\n            var childConfig = routerConfig.routes;\n            var _a = split(rawSegmentGroup, consumedSegments, rawSlicedSegments, childConfig), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n            if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n                var expanded$_1 = _this.expandChildren(childModule, childConfig, segmentGroup);\n                return expanded$_1.pipe(map(function (children) { return new UrlSegmentGroup(consumedSegments, children); }));\n            }\n            if (childConfig.length === 0 && slicedSegments.length === 0) {\n                return of(new UrlSegmentGroup(consumedSegments, {}));\n            }\n            var expanded$ = _this.expandSegment(childModule, segmentGroup, childConfig, slicedSegments, PRIMARY_OUTLET, true);\n            return expanded$.pipe(map(function (cs) {\n                return new UrlSegmentGroup(consumedSegments.concat(cs.segments), cs.children);\n            }));\n        }));\n    };\n    ApplyRedirects.prototype.getChildConfig = function (ngModule, route) {\n        var _this = this;\n        if (route.children) {\n            // The children belong to the same module\n            return of(new LoadedRouterConfig(route.children, ngModule));\n        }\n        if (route.loadChildren) {\n            // lazy children belong to the loaded module\n            if (route._loadedConfig !== undefined) {\n                return of(route._loadedConfig);\n            }\n            return runCanLoadGuard(ngModule.injector, route).pipe(mergeMap(function (shouldLoad) {\n                if (shouldLoad) {\n                    return _this.configLoader.load(ngModule.injector, route)\n                        .pipe(map(function (cfg) {\n                        route._loadedConfig = cfg;\n                        return cfg;\n                    }));\n                }\n                return canLoadFails(route);\n            }));\n        }\n        return of(new LoadedRouterConfig([], ngModule));\n    };\n    ApplyRedirects.prototype.lineralizeSegments = function (route, urlTree) {\n        var res = [];\n        var c = urlTree.root;\n        while (true) {\n            res = res.concat(c.segments);\n            if (c.numberOfChildren === 0) {\n                return of(res);\n            }\n            if (c.numberOfChildren > 1 || !c.children[PRIMARY_OUTLET]) {\n                return namedOutletsRedirect(route.redirectTo);\n            }\n            c = c.children[PRIMARY_OUTLET];\n        }\n    };\n    ApplyRedirects.prototype.applyRedirectCommands = function (segments, redirectTo, posParams) {\n        return this.applyRedirectCreatreUrlTree(redirectTo, this.urlSerializer.parse(redirectTo), segments, posParams);\n    };\n    ApplyRedirects.prototype.applyRedirectCreatreUrlTree = function (redirectTo, urlTree, segments, posParams) {\n        var newRoot = this.createSegmentGroup(redirectTo, urlTree.root, segments, posParams);\n        return new UrlTree(newRoot, this.createQueryParams(urlTree.queryParams, this.urlTree.queryParams), urlTree.fragment);\n    };\n    ApplyRedirects.prototype.createQueryParams = function (redirectToParams, actualParams) {\n        var res = {};\n        forEach(redirectToParams, function (v, k) {\n            var copySourceValue = typeof v === 'string' && v.startsWith(':');\n            if (copySourceValue) {\n                var sourceName = v.substring(1);\n                res[k] = actualParams[sourceName];\n            }\n            else {\n                res[k] = v;\n            }\n        });\n        return res;\n    };\n    ApplyRedirects.prototype.createSegmentGroup = function (redirectTo, group, segments, posParams) {\n        var _this = this;\n        var updatedSegments = this.createSegments(redirectTo, group.segments, segments, posParams);\n        var children = {};\n        forEach(group.children, function (child, name) {\n            children[name] = _this.createSegmentGroup(redirectTo, child, segments, posParams);\n        });\n        return new UrlSegmentGroup(updatedSegments, children);\n    };\n    ApplyRedirects.prototype.createSegments = function (redirectTo, redirectToSegments, actualSegments, posParams) {\n        var _this = this;\n        return redirectToSegments.map(function (s) { return s.path.startsWith(':') ? _this.findPosParam(redirectTo, s, posParams) :\n            _this.findOrReturn(s, actualSegments); });\n    };\n    ApplyRedirects.prototype.findPosParam = function (redirectTo, redirectToUrlSegment, posParams) {\n        var pos = posParams[redirectToUrlSegment.path.substring(1)];\n        if (!pos)\n            throw new Error(\"Cannot redirect to '\" + redirectTo + \"'. Cannot find '\" + redirectToUrlSegment.path + \"'.\");\n        return pos;\n    };\n    ApplyRedirects.prototype.findOrReturn = function (redirectToUrlSegment, actualSegments) {\n        var e_1, _a;\n        var idx = 0;\n        try {\n            for (var actualSegments_1 = __values(actualSegments), actualSegments_1_1 = actualSegments_1.next(); !actualSegments_1_1.done; actualSegments_1_1 = actualSegments_1.next()) {\n                var s = actualSegments_1_1.value;\n                if (s.path === redirectToUrlSegment.path) {\n                    actualSegments.splice(idx);\n                    return s;\n                }\n                idx++;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (actualSegments_1_1 && !actualSegments_1_1.done && (_a = actualSegments_1.return)) _a.call(actualSegments_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return redirectToUrlSegment;\n    };\n    return ApplyRedirects;\n}());\nfunction runCanLoadGuard(moduleInjector, route) {\n    var canLoad = route.canLoad;\n    if (!canLoad || canLoad.length === 0)\n        return of(true);\n    var obs = from(canLoad).pipe(map(function (injectionToken) {\n        var guard = moduleInjector.get(injectionToken);\n        return wrapIntoObservable(guard.canLoad ? guard.canLoad(route) : guard(route));\n    }));\n    return andObservables(obs);\n}\nfunction match(segmentGroup, route, segments) {\n    if (route.path === '') {\n        if ((route.pathMatch === 'full') && (segmentGroup.hasChildren() || segments.length > 0)) {\n            return { matched: false, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n        }\n        return { matched: true, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n    }\n    var matcher = route.matcher || defaultUrlMatcher;\n    var res = matcher(segments, segmentGroup, route);\n    if (!res) {\n        return {\n            matched: false,\n            consumedSegments: [],\n            lastChild: 0,\n            positionalParamSegments: {},\n        };\n    }\n    return {\n        matched: true,\n        consumedSegments: res.consumed,\n        lastChild: res.consumed.length,\n        positionalParamSegments: res.posParams,\n    };\n}\nfunction split(segmentGroup, consumedSegments, slicedSegments, config) {\n    if (slicedSegments.length > 0 &&\n        containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n        var s = new UrlSegmentGroup(consumedSegments, createChildrenForEmptySegments(config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n        return { segmentGroup: mergeTrivialChildren(s), slicedSegments: [] };\n    }\n    if (slicedSegments.length === 0 &&\n        containsEmptyPathRedirects(segmentGroup, slicedSegments, config)) {\n        var s = new UrlSegmentGroup(segmentGroup.segments, addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, config, segmentGroup.children));\n        return { segmentGroup: mergeTrivialChildren(s), slicedSegments: slicedSegments };\n    }\n    return { segmentGroup: segmentGroup, slicedSegments: slicedSegments };\n}\nfunction mergeTrivialChildren(s) {\n    if (s.numberOfChildren === 1 && s.children[PRIMARY_OUTLET]) {\n        var c = s.children[PRIMARY_OUTLET];\n        return new UrlSegmentGroup(s.segments.concat(c.segments), c.children);\n    }\n    return s;\n}\nfunction addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, routes, children) {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n            var r = routes_1_1.value;\n            if (isEmptyPathRedirect(segmentGroup, slicedSegments, r) && !children[getOutlet(r)]) {\n                res[getOutlet(r)] = new UrlSegmentGroup([], {});\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return __assign({}, children, res);\n}\nfunction createChildrenForEmptySegments(routes, primarySegmentGroup) {\n    var e_3, _a;\n    var res = {};\n    res[PRIMARY_OUTLET] = primarySegmentGroup;\n    try {\n        for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n            var r = routes_2_1.value;\n            if (r.path === '' && getOutlet(r) !== PRIMARY_OUTLET) {\n                res[getOutlet(r)] = new UrlSegmentGroup([], {});\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return res;\n}\nfunction containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, segments, routes) {\n    return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r) && getOutlet(r) !== PRIMARY_OUTLET; });\n}\nfunction containsEmptyPathRedirects(segmentGroup, segments, routes) {\n    return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r); });\n}\nfunction isEmptyPathRedirect(segmentGroup, segments, r) {\n    if ((segmentGroup.hasChildren() || segments.length > 0) && r.pathMatch === 'full') {\n        return false;\n    }\n    return r.path === '' && r.redirectTo !== undefined;\n}\nfunction getOutlet(route) {\n    return route.outlet || PRIMARY_OUTLET;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar Tree = /** @class */ (function () {\n    function Tree(root) {\n        this._root = root;\n    }\n    Object.defineProperty(Tree.prototype, \"root\", {\n        get: function () { return this._root.value; },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @internal\n     */\n    Tree.prototype.parent = function (t) {\n        var p = this.pathFromRoot(t);\n        return p.length > 1 ? p[p.length - 2] : null;\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.children = function (t) {\n        var n = findNode(t, this._root);\n        return n ? n.children.map(function (t) { return t.value; }) : [];\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.firstChild = function (t) {\n        var n = findNode(t, this._root);\n        return n && n.children.length > 0 ? n.children[0].value : null;\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.siblings = function (t) {\n        var p = findPath(t, this._root);\n        if (p.length < 2)\n            return [];\n        var c = p[p.length - 2].children.map(function (c) { return c.value; });\n        return c.filter(function (cc) { return cc !== t; });\n    };\n    /**\n     * @internal\n     */\n    Tree.prototype.pathFromRoot = function (t) { return findPath(t, this._root).map(function (s) { return s.value; }); };\n    return Tree;\n}());\n// DFS for the node matching the value\nfunction findNode(value, node) {\n    var e_1, _a;\n    if (value === node.value)\n        return node;\n    try {\n        for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var child = _c.value;\n            var node_1 = findNode(value, child);\n            if (node_1)\n                return node_1;\n        }\n    }\n    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_1) throw e_1.error; }\n    }\n    return null;\n}\n// Return the path to the node with the given value using DFS\nfunction findPath(value, node) {\n    var e_2, _a;\n    if (value === node.value)\n        return [node];\n    try {\n        for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n            var child = _c.value;\n            var path = findPath(value, child);\n            if (path.length) {\n                path.unshift(node);\n                return path;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return [];\n}\nvar TreeNode = /** @class */ (function () {\n    function TreeNode(value, children) {\n        this.value = value;\n        this.children = children;\n    }\n    TreeNode.prototype.toString = function () { return \"TreeNode(\" + this.value + \")\"; };\n    return TreeNode;\n}());\n// Return the list of T indexed by outlet name\nfunction nodeChildrenAsMap(node) {\n    var map$$1 = {};\n    if (node) {\n        node.children.forEach(function (child) { return map$$1[child.value.outlet] = child; });\n    }\n    return map$$1;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Represents the state of the router.\n *\n * RouterState is a tree of activated routes. Every node in this tree knows about the \"consumed\" URL\n * segments, the extracted parameters, and the resolved data.\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const root: ActivatedRoute = state.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n * See `ActivatedRoute` for more information.\n *\n *\n */\nvar RouterState = /** @class */ (function (_super) {\n    __extends(RouterState, _super);\n    /** @internal */\n    function RouterState(root, \n    /** The current snapshot of the router state */\n    snapshot) {\n        var _this = _super.call(this, root) || this;\n        _this.snapshot = snapshot;\n        setRouterState(_this, root);\n        return _this;\n    }\n    RouterState.prototype.toString = function () { return this.snapshot.toString(); };\n    return RouterState;\n}(Tree));\nfunction createEmptyState(urlTree, rootComponent) {\n    var snapshot = createEmptyStateSnapshot(urlTree, rootComponent);\n    var emptyUrl = new BehaviorSubject([new UrlSegment('', {})]);\n    var emptyParams = new BehaviorSubject({});\n    var emptyData = new BehaviorSubject({});\n    var emptyQueryParams = new BehaviorSubject({});\n    var fragment = new BehaviorSubject('');\n    var activated = new ActivatedRoute(emptyUrl, emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, snapshot.root);\n    activated.snapshot = snapshot.root;\n    return new RouterState(new TreeNode(activated, []), snapshot);\n}\nfunction createEmptyStateSnapshot(urlTree, rootComponent) {\n    var emptyParams = {};\n    var emptyData = {};\n    var emptyQueryParams = {};\n    var fragment = '';\n    var activated = new ActivatedRouteSnapshot([], emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, null, urlTree.root, -1, {});\n    return new RouterStateSnapshot('', new TreeNode(activated, []));\n}\n/**\n * @description\n *\n * Contains the information about a route associated with a component loaded in an\n * outlet.  An `ActivatedRoute` can also be used to traverse the router state tree.\n *\n * ```\n * @Component({...})\n * class MyComponent {\n *   constructor(route: ActivatedRoute) {\n *     const id: Observable<string> = route.params.map(p => p.id);\n *     const url: Observable<string> = route.url.map(segments => segments.join(''));\n *     // route.data includes both `data` and `resolve`\n *     const user = route.data.map(d => d.user);\n *   }\n * }\n * ```\n *\n *\n */\nvar ActivatedRoute = /** @class */ (function () {\n    /** @internal */\n    function ActivatedRoute(\n    /** An observable of the URL segments matched by this route */\n    url, \n    /** An observable of the matrix parameters scoped to this route */\n    params, \n    /** An observable of the query parameters shared by all the routes */\n    queryParams, \n    /** An observable of the URL fragment shared by all the routes */\n    fragment, \n    /** An observable of the static and resolved data of this route. */\n    data, \n    /** The outlet name of the route. It's a constant */\n    outlet, \n    /** The component of the route. It's a constant */\n    // TODO(vsavkin): remove |string\n    component, futureSnapshot) {\n        this.url = url;\n        this.params = params;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n        this.data = data;\n        this.outlet = outlet;\n        this.component = component;\n        this._futureSnapshot = futureSnapshot;\n    }\n    Object.defineProperty(ActivatedRoute.prototype, \"routeConfig\", {\n        /** The configuration used to match this route */\n        get: function () { return this._futureSnapshot.routeConfig; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"root\", {\n        /** The root of the router state */\n        get: function () { return this._routerState.root; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"parent\", {\n        /** The parent of this route in the router state tree */\n        get: function () { return this._routerState.parent(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"firstChild\", {\n        /** The first child of this route in the router state tree */\n        get: function () { return this._routerState.firstChild(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"children\", {\n        /** The children of this route in the router state tree */\n        get: function () { return this._routerState.children(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"pathFromRoot\", {\n        /** The path from the root of the router state tree to this route */\n        get: function () { return this._routerState.pathFromRoot(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"paramMap\", {\n        get: function () {\n            if (!this._paramMap) {\n                this._paramMap = this.params.pipe(map(function (p) { return convertToParamMap(p); }));\n            }\n            return this._paramMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRoute.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap =\n                    this.queryParams.pipe(map(function (p) { return convertToParamMap(p); }));\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActivatedRoute.prototype.toString = function () {\n        return this.snapshot ? this.snapshot.toString() : \"Future(\" + this._futureSnapshot + \")\";\n    };\n    return ActivatedRoute;\n}());\n/**\n * Returns the inherited params, data, and resolve for a given route.\n * By default, this only inherits values up to the nearest path-less or component-less route.\n * @internal\n */\nfunction inheritedParamsDataResolve(route, paramsInheritanceStrategy) {\n    if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n    var pathFromRoot = route.pathFromRoot;\n    var inheritingStartingFrom = 0;\n    if (paramsInheritanceStrategy !== 'always') {\n        inheritingStartingFrom = pathFromRoot.length - 1;\n        while (inheritingStartingFrom >= 1) {\n            var current = pathFromRoot[inheritingStartingFrom];\n            var parent_1 = pathFromRoot[inheritingStartingFrom - 1];\n            // current route is an empty path => inherits its parent's params and data\n            if (current.routeConfig && current.routeConfig.path === '') {\n                inheritingStartingFrom--;\n                // parent is componentless => current route should inherit its params and data\n            }\n            else if (!parent_1.component) {\n                inheritingStartingFrom--;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    return flattenInherited(pathFromRoot.slice(inheritingStartingFrom));\n}\n/** @internal */\nfunction flattenInherited(pathFromRoot) {\n    return pathFromRoot.reduce(function (res, curr) {\n        var params = __assign({}, res.params, curr.params);\n        var data = __assign({}, res.data, curr.data);\n        var resolve = __assign({}, res.resolve, curr._resolvedData);\n        return { params: params, data: data, resolve: resolve };\n    }, { params: {}, data: {}, resolve: {} });\n}\n/**\n * @description\n *\n * Contains the information about a route associated with a component loaded in an\n * outlet at a particular moment in time. ActivatedRouteSnapshot can also be used to\n * traverse the router state tree.\n *\n * ```\n * @Component({templateUrl:'./my-component.html'})\n * class MyComponent {\n *   constructor(route: ActivatedRoute) {\n *     const id: string = route.snapshot.params.id;\n *     const url: string = route.snapshot.url.join('');\n *     const user = route.snapshot.data.user;\n *   }\n * }\n * ```\n *\n *\n */\nvar ActivatedRouteSnapshot = /** @class */ (function () {\n    /** @internal */\n    function ActivatedRouteSnapshot(\n    /** The URL segments matched by this route */\n    url, \n    /** The matrix parameters scoped to this route */\n    params, \n    /** The query parameters shared by all the routes */\n    queryParams, \n    /** The URL fragment shared by all the routes */\n    fragment, \n    /** The static and resolved data of this route */\n    data, \n    /** The outlet name of the route */\n    outlet, \n    /** The component of the route */\n    component, routeConfig, urlSegment, lastPathIndex, resolve) {\n        this.url = url;\n        this.params = params;\n        this.queryParams = queryParams;\n        this.fragment = fragment;\n        this.data = data;\n        this.outlet = outlet;\n        this.component = component;\n        this.routeConfig = routeConfig;\n        this._urlSegment = urlSegment;\n        this._lastPathIndex = lastPathIndex;\n        this._resolve = resolve;\n    }\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"root\", {\n        /** The root of the router state */\n        get: function () { return this._routerState.root; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"parent\", {\n        /** The parent of this route in the router state tree */\n        get: function () { return this._routerState.parent(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"firstChild\", {\n        /** The first child of this route in the router state tree */\n        get: function () { return this._routerState.firstChild(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"children\", {\n        /** The children of this route in the router state tree */\n        get: function () { return this._routerState.children(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"pathFromRoot\", {\n        /** The path from the root of the router state tree to this route */\n        get: function () { return this._routerState.pathFromRoot(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"paramMap\", {\n        get: function () {\n            if (!this._paramMap) {\n                this._paramMap = convertToParamMap(this.params);\n            }\n            return this._paramMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ActivatedRouteSnapshot.prototype, \"queryParamMap\", {\n        get: function () {\n            if (!this._queryParamMap) {\n                this._queryParamMap = convertToParamMap(this.queryParams);\n            }\n            return this._queryParamMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ActivatedRouteSnapshot.prototype.toString = function () {\n        var url = this.url.map(function (segment) { return segment.toString(); }).join('/');\n        var matched = this.routeConfig ? this.routeConfig.path : '';\n        return \"Route(url:'\" + url + \"', path:'\" + matched + \"')\";\n    };\n    return ActivatedRouteSnapshot;\n}());\n/**\n * @description\n *\n * Represents the state of the router at a moment in time.\n *\n * This is a tree of activated route snapshots. Every node in this tree knows about\n * the \"consumed\" URL segments, the extracted parameters, and the resolved data.\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @Component({templateUrl:'template.html'})\n * class MyComponent {\n *   constructor(router: Router) {\n *     const state: RouterState = router.routerState;\n *     const snapshot: RouterStateSnapshot = state.snapshot;\n *     const root: ActivatedRouteSnapshot = snapshot.root;\n *     const child = root.firstChild;\n *     const id: Observable<string> = child.params.map(p => p.id);\n *     //...\n *   }\n * }\n * ```\n *\n *\n */\nvar RouterStateSnapshot = /** @class */ (function (_super) {\n    __extends(RouterStateSnapshot, _super);\n    /** @internal */\n    function RouterStateSnapshot(\n    /** The url from which this snapshot was created */\n    url, root) {\n        var _this = _super.call(this, root) || this;\n        _this.url = url;\n        setRouterState(_this, root);\n        return _this;\n    }\n    RouterStateSnapshot.prototype.toString = function () { return serializeNode(this._root); };\n    return RouterStateSnapshot;\n}(Tree));\nfunction setRouterState(state, node) {\n    node.value._routerState = state;\n    node.children.forEach(function (c) { return setRouterState(state, c); });\n}\nfunction serializeNode(node) {\n    var c = node.children.length > 0 ? \" { \" + node.children.map(serializeNode).join(', ') + \" } \" : '';\n    return \"\" + node.value + c;\n}\n/**\n * The expectation is that the activate route is created with the right set of parameters.\n * So we push new values into the observables only when they are not the initial values.\n * And we detect that by checking if the snapshot field is set.\n */\nfunction advanceActivatedRoute(route) {\n    if (route.snapshot) {\n        var currentSnapshot = route.snapshot;\n        var nextSnapshot = route._futureSnapshot;\n        route.snapshot = nextSnapshot;\n        if (!shallowEqual(currentSnapshot.queryParams, nextSnapshot.queryParams)) {\n            route.queryParams.next(nextSnapshot.queryParams);\n        }\n        if (currentSnapshot.fragment !== nextSnapshot.fragment) {\n            route.fragment.next(nextSnapshot.fragment);\n        }\n        if (!shallowEqual(currentSnapshot.params, nextSnapshot.params)) {\n            route.params.next(nextSnapshot.params);\n        }\n        if (!shallowEqualArrays(currentSnapshot.url, nextSnapshot.url)) {\n            route.url.next(nextSnapshot.url);\n        }\n        if (!shallowEqual(currentSnapshot.data, nextSnapshot.data)) {\n            route.data.next(nextSnapshot.data);\n        }\n    }\n    else {\n        route.snapshot = route._futureSnapshot;\n        // this is for resolved data\n        route.data.next(route._futureSnapshot.data);\n    }\n}\nfunction equalParamsAndUrlSegments(a, b) {\n    var equalUrlParams = shallowEqual(a.params, b.params) && equalSegments(a.url, b.url);\n    var parentsMismatch = !a.parent !== !b.parent;\n    return equalUrlParams && !parentsMismatch &&\n        (!a.parent || equalParamsAndUrlSegments(a.parent, b.parent));\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createRouterState(routeReuseStrategy, curr, prevState) {\n    var root = createNode(routeReuseStrategy, curr._root, prevState ? prevState._root : undefined);\n    return new RouterState(root, curr);\n}\nfunction createNode(routeReuseStrategy, curr, prevState) {\n    // reuse an activated route that is currently displayed on the screen\n    if (prevState && routeReuseStrategy.shouldReuseRoute(curr.value, prevState.value.snapshot)) {\n        var value = prevState.value;\n        value._futureSnapshot = curr.value;\n        var children = createOrReuseChildren(routeReuseStrategy, curr, prevState);\n        return new TreeNode(value, children);\n        // retrieve an activated route that is used to be displayed, but is not currently displayed\n    }\n    else {\n        var detachedRouteHandle = routeReuseStrategy.retrieve(curr.value);\n        if (detachedRouteHandle) {\n            var tree = detachedRouteHandle.route;\n            setFutureSnapshotsOfActivatedRoutes(curr, tree);\n            return tree;\n        }\n        else {\n            var value = createActivatedRoute(curr.value);\n            var children = curr.children.map(function (c) { return createNode(routeReuseStrategy, c); });\n            return new TreeNode(value, children);\n        }\n    }\n}\nfunction setFutureSnapshotsOfActivatedRoutes(curr, result) {\n    if (curr.value.routeConfig !== result.value.routeConfig) {\n        throw new Error('Cannot reattach ActivatedRouteSnapshot created from a different route');\n    }\n    if (curr.children.length !== result.children.length) {\n        throw new Error('Cannot reattach ActivatedRouteSnapshot with a different number of children');\n    }\n    result.value._futureSnapshot = curr.value;\n    for (var i = 0; i < curr.children.length; ++i) {\n        setFutureSnapshotsOfActivatedRoutes(curr.children[i], result.children[i]);\n    }\n}\nfunction createOrReuseChildren(routeReuseStrategy, curr, prevState) {\n    return curr.children.map(function (child) {\n        var e_1, _a;\n        try {\n            for (var _b = __values(prevState.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var p = _c.value;\n                if (routeReuseStrategy.shouldReuseRoute(p.value.snapshot, child.value)) {\n                    return createNode(routeReuseStrategy, child, p);\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return createNode(routeReuseStrategy, child);\n    });\n}\nfunction createActivatedRoute(c) {\n    return new ActivatedRoute(new BehaviorSubject(c.url), new BehaviorSubject(c.params), new BehaviorSubject(c.queryParams), new BehaviorSubject(c.fragment), new BehaviorSubject(c.data), c.outlet, c.component, c);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction createUrlTree(route, urlTree, commands, queryParams, fragment) {\n    if (commands.length === 0) {\n        return tree(urlTree.root, urlTree.root, urlTree, queryParams, fragment);\n    }\n    var nav = computeNavigation(commands);\n    if (nav.toRoot()) {\n        return tree(urlTree.root, new UrlSegmentGroup([], {}), urlTree, queryParams, fragment);\n    }\n    var startingPosition = findStartingPosition(nav, urlTree, route);\n    var segmentGroup = startingPosition.processChildren ?\n        updateSegmentGroupChildren(startingPosition.segmentGroup, startingPosition.index, nav.commands) :\n        updateSegmentGroup(startingPosition.segmentGroup, startingPosition.index, nav.commands);\n    return tree(startingPosition.segmentGroup, segmentGroup, urlTree, queryParams, fragment);\n}\nfunction isMatrixParams(command) {\n    return typeof command === 'object' && command != null && !command.outlets && !command.segmentPath;\n}\nfunction tree(oldSegmentGroup, newSegmentGroup, urlTree, queryParams, fragment) {\n    var qp = {};\n    if (queryParams) {\n        forEach(queryParams, function (value, name) {\n            qp[name] = Array.isArray(value) ? value.map(function (v) { return \"\" + v; }) : \"\" + value;\n        });\n    }\n    if (urlTree.root === oldSegmentGroup) {\n        return new UrlTree(newSegmentGroup, qp, fragment);\n    }\n    return new UrlTree(replaceSegment(urlTree.root, oldSegmentGroup, newSegmentGroup), qp, fragment);\n}\nfunction replaceSegment(current, oldSegment, newSegment) {\n    var children = {};\n    forEach(current.children, function (c, outletName) {\n        if (c === oldSegment) {\n            children[outletName] = newSegment;\n        }\n        else {\n            children[outletName] = replaceSegment(c, oldSegment, newSegment);\n        }\n    });\n    return new UrlSegmentGroup(current.segments, children);\n}\nvar Navigation = /** @class */ (function () {\n    function Navigation(isAbsolute, numberOfDoubleDots, commands) {\n        this.isAbsolute = isAbsolute;\n        this.numberOfDoubleDots = numberOfDoubleDots;\n        this.commands = commands;\n        if (isAbsolute && commands.length > 0 && isMatrixParams(commands[0])) {\n            throw new Error('Root segment cannot have matrix parameters');\n        }\n        var cmdWithOutlet = commands.find(function (c) { return typeof c === 'object' && c != null && c.outlets; });\n        if (cmdWithOutlet && cmdWithOutlet !== last$1(commands)) {\n            throw new Error('{outlets:{}} has to be the last command');\n        }\n    }\n    Navigation.prototype.toRoot = function () {\n        return this.isAbsolute && this.commands.length === 1 && this.commands[0] == '/';\n    };\n    return Navigation;\n}());\n/** Transforms commands to a normalized `Navigation` */\nfunction computeNavigation(commands) {\n    if ((typeof commands[0] === 'string') && commands.length === 1 && commands[0] === '/') {\n        return new Navigation(true, 0, commands);\n    }\n    var numberOfDoubleDots = 0;\n    var isAbsolute = false;\n    var res = commands.reduce(function (res, cmd, cmdIdx) {\n        if (typeof cmd === 'object' && cmd != null) {\n            if (cmd.outlets) {\n                var outlets_1 = {};\n                forEach(cmd.outlets, function (commands, name) {\n                    outlets_1[name] = typeof commands === 'string' ? commands.split('/') : commands;\n                });\n                return __spread(res, [{ outlets: outlets_1 }]);\n            }\n            if (cmd.segmentPath) {\n                return __spread(res, [cmd.segmentPath]);\n            }\n        }\n        if (!(typeof cmd === 'string')) {\n            return __spread(res, [cmd]);\n        }\n        if (cmdIdx === 0) {\n            cmd.split('/').forEach(function (urlPart, partIndex) {\n                if (partIndex == 0 && urlPart === '.') ;\n                else if (partIndex == 0 && urlPart === '') { //  '/a'\n                    isAbsolute = true;\n                }\n                else if (urlPart === '..') { //  '../a'\n                    numberOfDoubleDots++;\n                }\n                else if (urlPart != '') {\n                    res.push(urlPart);\n                }\n            });\n            return res;\n        }\n        return __spread(res, [cmd]);\n    }, []);\n    return new Navigation(isAbsolute, numberOfDoubleDots, res);\n}\nvar Position = /** @class */ (function () {\n    function Position(segmentGroup, processChildren, index) {\n        this.segmentGroup = segmentGroup;\n        this.processChildren = processChildren;\n        this.index = index;\n    }\n    return Position;\n}());\nfunction findStartingPosition(nav, tree, route) {\n    if (nav.isAbsolute) {\n        return new Position(tree.root, true, 0);\n    }\n    if (route.snapshot._lastPathIndex === -1) {\n        return new Position(route.snapshot._urlSegment, true, 0);\n    }\n    var modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;\n    var index = route.snapshot._lastPathIndex + modifier;\n    return createPositionApplyingDoubleDots(route.snapshot._urlSegment, index, nav.numberOfDoubleDots);\n}\nfunction createPositionApplyingDoubleDots(group, index, numberOfDoubleDots) {\n    var g = group;\n    var ci = index;\n    var dd = numberOfDoubleDots;\n    while (dd > ci) {\n        dd -= ci;\n        g = g.parent;\n        if (!g) {\n            throw new Error('Invalid number of \\'../\\'');\n        }\n        ci = g.segments.length;\n    }\n    return new Position(g, false, ci - dd);\n}\nfunction getPath(command) {\n    if (typeof command === 'object' && command != null && command.outlets) {\n        return command.outlets[PRIMARY_OUTLET];\n    }\n    return \"\" + command;\n}\nfunction getOutlets(commands) {\n    var _a, _b;\n    if (!(typeof commands[0] === 'object'))\n        return _a = {}, _a[PRIMARY_OUTLET] = commands, _a;\n    if (commands[0].outlets === undefined)\n        return _b = {}, _b[PRIMARY_OUTLET] = commands, _b;\n    return commands[0].outlets;\n}\nfunction updateSegmentGroup(segmentGroup, startIndex, commands) {\n    if (!segmentGroup) {\n        segmentGroup = new UrlSegmentGroup([], {});\n    }\n    if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n        return updateSegmentGroupChildren(segmentGroup, startIndex, commands);\n    }\n    var m = prefixedWith(segmentGroup, startIndex, commands);\n    var slicedCommands = commands.slice(m.commandIndex);\n    if (m.match && m.pathIndex < segmentGroup.segments.length) {\n        var g = new UrlSegmentGroup(segmentGroup.segments.slice(0, m.pathIndex), {});\n        g.children[PRIMARY_OUTLET] =\n            new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex), segmentGroup.children);\n        return updateSegmentGroupChildren(g, 0, slicedCommands);\n    }\n    else if (m.match && slicedCommands.length === 0) {\n        return new UrlSegmentGroup(segmentGroup.segments, {});\n    }\n    else if (m.match && !segmentGroup.hasChildren()) {\n        return createNewSegmentGroup(segmentGroup, startIndex, commands);\n    }\n    else if (m.match) {\n        return updateSegmentGroupChildren(segmentGroup, 0, slicedCommands);\n    }\n    else {\n        return createNewSegmentGroup(segmentGroup, startIndex, commands);\n    }\n}\nfunction updateSegmentGroupChildren(segmentGroup, startIndex, commands) {\n    if (commands.length === 0) {\n        return new UrlSegmentGroup(segmentGroup.segments, {});\n    }\n    else {\n        var outlets_2 = getOutlets(commands);\n        var children_1 = {};\n        forEach(outlets_2, function (commands, outlet) {\n            if (commands !== null) {\n                children_1[outlet] = updateSegmentGroup(segmentGroup.children[outlet], startIndex, commands);\n            }\n        });\n        forEach(segmentGroup.children, function (child, childOutlet) {\n            if (outlets_2[childOutlet] === undefined) {\n                children_1[childOutlet] = child;\n            }\n        });\n        return new UrlSegmentGroup(segmentGroup.segments, children_1);\n    }\n}\nfunction prefixedWith(segmentGroup, startIndex, commands) {\n    var currentCommandIndex = 0;\n    var currentPathIndex = startIndex;\n    var noMatch = { match: false, pathIndex: 0, commandIndex: 0 };\n    while (currentPathIndex < segmentGroup.segments.length) {\n        if (currentCommandIndex >= commands.length)\n            return noMatch;\n        var path = segmentGroup.segments[currentPathIndex];\n        var curr = getPath(commands[currentCommandIndex]);\n        var next = currentCommandIndex < commands.length - 1 ? commands[currentCommandIndex + 1] : null;\n        if (currentPathIndex > 0 && curr === undefined)\n            break;\n        if (curr && next && (typeof next === 'object') && next.outlets === undefined) {\n            if (!compare(curr, next, path))\n                return noMatch;\n            currentCommandIndex += 2;\n        }\n        else {\n            if (!compare(curr, {}, path))\n                return noMatch;\n            currentCommandIndex++;\n        }\n        currentPathIndex++;\n    }\n    return { match: true, pathIndex: currentPathIndex, commandIndex: currentCommandIndex };\n}\nfunction createNewSegmentGroup(segmentGroup, startIndex, commands) {\n    var paths = segmentGroup.segments.slice(0, startIndex);\n    var i = 0;\n    while (i < commands.length) {\n        if (typeof commands[i] === 'object' && commands[i].outlets !== undefined) {\n            var children = createNewSegmentChildren(commands[i].outlets);\n            return new UrlSegmentGroup(paths, children);\n        }\n        // if we start with an object literal, we need to reuse the path part from the segment\n        if (i === 0 && isMatrixParams(commands[0])) {\n            var p = segmentGroup.segments[startIndex];\n            paths.push(new UrlSegment(p.path, commands[0]));\n            i++;\n            continue;\n        }\n        var curr = getPath(commands[i]);\n        var next = (i < commands.length - 1) ? commands[i + 1] : null;\n        if (curr && next && isMatrixParams(next)) {\n            paths.push(new UrlSegment(curr, stringify(next)));\n            i += 2;\n        }\n        else {\n            paths.push(new UrlSegment(curr, {}));\n            i++;\n        }\n    }\n    return new UrlSegmentGroup(paths, {});\n}\nfunction createNewSegmentChildren(outlets) {\n    var children = {};\n    forEach(outlets, function (commands, outlet) {\n        if (commands !== null) {\n            children[outlet] = createNewSegmentGroup(new UrlSegmentGroup([], {}), 0, commands);\n        }\n    });\n    return children;\n}\nfunction stringify(params) {\n    var res = {};\n    forEach(params, function (v, k) { return res[k] = \"\" + v; });\n    return res;\n}\nfunction compare(path, params, segment) {\n    return path == segment.path && shallowEqual(params, segment.parameters);\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar CanActivate = /** @class */ (function () {\n    function CanActivate(path) {\n        this.path = path;\n        this.route = this.path[this.path.length - 1];\n    }\n    return CanActivate;\n}());\nvar CanDeactivate = /** @class */ (function () {\n    function CanDeactivate(component, route) {\n        this.component = component;\n        this.route = route;\n    }\n    return CanDeactivate;\n}());\n/**\n * This class bundles the actions involved in preactivation of a route.\n */\nvar PreActivation = /** @class */ (function () {\n    function PreActivation(future, curr, moduleInjector, forwardEvent) {\n        this.future = future;\n        this.curr = curr;\n        this.moduleInjector = moduleInjector;\n        this.forwardEvent = forwardEvent;\n        this.canActivateChecks = [];\n        this.canDeactivateChecks = [];\n    }\n    PreActivation.prototype.initialize = function (parentContexts) {\n        var futureRoot = this.future._root;\n        var currRoot = this.curr ? this.curr._root : null;\n        this.setupChildRouteGuards(futureRoot, currRoot, parentContexts, [futureRoot.value]);\n    };\n    PreActivation.prototype.checkGuards = function () {\n        var _this = this;\n        if (!this.isDeactivating() && !this.isActivating()) {\n            return of(true);\n        }\n        var canDeactivate$ = this.runCanDeactivateChecks();\n        return canDeactivate$.pipe(mergeMap(function (canDeactivate) { return canDeactivate ? _this.runCanActivateChecks() : of(false); }));\n    };\n    PreActivation.prototype.resolveData = function (paramsInheritanceStrategy) {\n        var _this = this;\n        if (!this.isActivating())\n            return of(null);\n        return from(this.canActivateChecks)\n            .pipe(concatMap(function (check) { return _this.runResolve(check.route, paramsInheritanceStrategy); }), reduce(function (_, __) { return _; }));\n    };\n    PreActivation.prototype.isDeactivating = function () { return this.canDeactivateChecks.length !== 0; };\n    PreActivation.prototype.isActivating = function () { return this.canActivateChecks.length !== 0; };\n    /**\n     * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n     * proper state to run `checkGuards()` method.\n     */\n    PreActivation.prototype.setupChildRouteGuards = function (futureNode, currNode, contexts, futurePath) {\n        var _this = this;\n        var prevChildren = nodeChildrenAsMap(currNode);\n        // Process the children of the future route\n        futureNode.children.forEach(function (c) {\n            _this.setupRouteGuards(c, prevChildren[c.value.outlet], contexts, futurePath.concat([c.value]));\n            delete prevChildren[c.value.outlet];\n        });\n        // Process any children left from the current route (not active for the future route)\n        forEach(prevChildren, function (v, k) {\n            return _this.deactivateRouteAndItsChildren(v, contexts.getContext(k));\n        });\n    };\n    /**\n     * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n     * proper state to run `checkGuards()` method.\n     */\n    PreActivation.prototype.setupRouteGuards = function (futureNode, currNode, parentContexts, futurePath) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        var context = parentContexts ? parentContexts.getContext(futureNode.value.outlet) : null;\n        // reusing the node\n        if (curr && future.routeConfig === curr.routeConfig) {\n            var shouldRunGuardsAndResolvers = this.shouldRunGuardsAndResolvers(curr, future, future.routeConfig.runGuardsAndResolvers);\n            if (shouldRunGuardsAndResolvers) {\n                this.canActivateChecks.push(new CanActivate(futurePath));\n            }\n            else {\n                // we need to set the data\n                future.data = curr.data;\n                future._resolvedData = curr._resolvedData;\n            }\n            // If we have a component, we need to go through an outlet.\n            if (future.component) {\n                this.setupChildRouteGuards(futureNode, currNode, context ? context.children : null, futurePath);\n                // if we have a componentless route, we recurse but keep the same outlet map.\n            }\n            else {\n                this.setupChildRouteGuards(futureNode, currNode, parentContexts, futurePath);\n            }\n            if (shouldRunGuardsAndResolvers) {\n                var outlet = context.outlet;\n                this.canDeactivateChecks.push(new CanDeactivate(outlet.component, curr));\n            }\n        }\n        else {\n            if (curr) {\n                this.deactivateRouteAndItsChildren(currNode, context);\n            }\n            this.canActivateChecks.push(new CanActivate(futurePath));\n            // If we have a component, we need to go through an outlet.\n            if (future.component) {\n                this.setupChildRouteGuards(futureNode, null, context ? context.children : null, futurePath);\n                // if we have a componentless route, we recurse but keep the same outlet map.\n            }\n            else {\n                this.setupChildRouteGuards(futureNode, null, parentContexts, futurePath);\n            }\n        }\n    };\n    PreActivation.prototype.shouldRunGuardsAndResolvers = function (curr, future, mode) {\n        switch (mode) {\n            case 'always':\n                return true;\n            case 'paramsOrQueryParamsChange':\n                return !equalParamsAndUrlSegments(curr, future) ||\n                    !shallowEqual(curr.queryParams, future.queryParams);\n            case 'paramsChange':\n            default:\n                return !equalParamsAndUrlSegments(curr, future);\n        }\n    };\n    PreActivation.prototype.deactivateRouteAndItsChildren = function (route, context) {\n        var _this = this;\n        var children = nodeChildrenAsMap(route);\n        var r = route.value;\n        forEach(children, function (node, childName) {\n            if (!r.component) {\n                _this.deactivateRouteAndItsChildren(node, context);\n            }\n            else if (context) {\n                _this.deactivateRouteAndItsChildren(node, context.children.getContext(childName));\n            }\n            else {\n                _this.deactivateRouteAndItsChildren(node, null);\n            }\n        });\n        if (!r.component) {\n            this.canDeactivateChecks.push(new CanDeactivate(null, r));\n        }\n        else if (context && context.outlet && context.outlet.isActivated) {\n            this.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, r));\n        }\n        else {\n            this.canDeactivateChecks.push(new CanDeactivate(null, r));\n        }\n    };\n    PreActivation.prototype.runCanDeactivateChecks = function () {\n        var _this = this;\n        return from(this.canDeactivateChecks)\n            .pipe(mergeMap(function (check) { return _this.runCanDeactivate(check.component, check.route); }), every(function (result) { return result === true; }));\n    };\n    PreActivation.prototype.runCanActivateChecks = function () {\n        var _this = this;\n        return from(this.canActivateChecks)\n            .pipe(concatMap(function (check) { return andObservables(from([\n            _this.fireChildActivationStart(check.route.parent),\n            _this.fireActivationStart(check.route), _this.runCanActivateChild(check.path),\n            _this.runCanActivate(check.route)\n        ])); }), every(function (result) { return result === true; }));\n        // this.fireChildActivationStart(check.path),\n    };\n    /**\n     * This should fire off `ActivationStart` events for each route being activated at this\n     * level.\n     * In other words, if you're activating `a` and `b` below, `path` will contain the\n     * `ActivatedRouteSnapshot`s for both and we will fire `ActivationStart` for both. Always\n     * return\n     * `true` so checks continue to run.\n     */\n    PreActivation.prototype.fireActivationStart = function (snapshot) {\n        if (snapshot !== null && this.forwardEvent) {\n            this.forwardEvent(new ActivationStart(snapshot));\n        }\n        return of(true);\n    };\n    /**\n     * This should fire off `ChildActivationStart` events for each route being activated at this\n     * level.\n     * In other words, if you're activating `a` and `b` below, `path` will contain the\n     * `ActivatedRouteSnapshot`s for both and we will fire `ChildActivationStart` for both. Always\n     * return\n     * `true` so checks continue to run.\n     */\n    PreActivation.prototype.fireChildActivationStart = function (snapshot) {\n        if (snapshot !== null && this.forwardEvent) {\n            this.forwardEvent(new ChildActivationStart(snapshot));\n        }\n        return of(true);\n    };\n    PreActivation.prototype.runCanActivate = function (future) {\n        var _this = this;\n        var canActivate = future.routeConfig ? future.routeConfig.canActivate : null;\n        if (!canActivate || canActivate.length === 0)\n            return of(true);\n        var obs = from(canActivate).pipe(map(function (c) {\n            var guard = _this.getToken(c, future);\n            var observable;\n            if (guard.canActivate) {\n                observable = wrapIntoObservable(guard.canActivate(future, _this.future));\n            }\n            else {\n                observable = wrapIntoObservable(guard(future, _this.future));\n            }\n            return observable.pipe(first());\n        }));\n        return andObservables(obs);\n    };\n    PreActivation.prototype.runCanActivateChild = function (path) {\n        var _this = this;\n        var future = path[path.length - 1];\n        var canActivateChildGuards = path.slice(0, path.length - 1)\n            .reverse()\n            .map(function (p) { return _this.extractCanActivateChild(p); })\n            .filter(function (_) { return _ !== null; });\n        return andObservables(from(canActivateChildGuards).pipe(map(function (d) {\n            var obs = from(d.guards).pipe(map(function (c) {\n                var guard = _this.getToken(c, d.node);\n                var observable;\n                if (guard.canActivateChild) {\n                    observable = wrapIntoObservable(guard.canActivateChild(future, _this.future));\n                }\n                else {\n                    observable = wrapIntoObservable(guard(future, _this.future));\n                }\n                return observable.pipe(first());\n            }));\n            return andObservables(obs);\n        })));\n    };\n    PreActivation.prototype.extractCanActivateChild = function (p) {\n        var canActivateChild = p.routeConfig ? p.routeConfig.canActivateChild : null;\n        if (!canActivateChild || canActivateChild.length === 0)\n            return null;\n        return { node: p, guards: canActivateChild };\n    };\n    PreActivation.prototype.runCanDeactivate = function (component, curr) {\n        var _this = this;\n        var canDeactivate = curr && curr.routeConfig ? curr.routeConfig.canDeactivate : null;\n        if (!canDeactivate || canDeactivate.length === 0)\n            return of(true);\n        var canDeactivate$ = from(canDeactivate).pipe(mergeMap(function (c) {\n            var guard = _this.getToken(c, curr);\n            var observable;\n            if (guard.canDeactivate) {\n                observable =\n                    wrapIntoObservable(guard.canDeactivate(component, curr, _this.curr, _this.future));\n            }\n            else {\n                observable = wrapIntoObservable(guard(component, curr, _this.curr, _this.future));\n            }\n            return observable.pipe(first());\n        }));\n        return canDeactivate$.pipe(every(function (result) { return result === true; }));\n    };\n    PreActivation.prototype.runResolve = function (future, paramsInheritanceStrategy) {\n        var resolve = future._resolve;\n        return this.resolveNode(resolve, future).pipe(map(function (resolvedData) {\n            future._resolvedData = resolvedData;\n            future.data = __assign({}, future.data, inheritedParamsDataResolve(future, paramsInheritanceStrategy).resolve);\n            return null;\n        }));\n    };\n    PreActivation.prototype.resolveNode = function (resolve, future) {\n        var _this = this;\n        var keys = Object.keys(resolve);\n        if (keys.length === 0) {\n            return of({});\n        }\n        if (keys.length === 1) {\n            var key_1 = keys[0];\n            return this.getResolver(resolve[key_1], future).pipe(map(function (value) {\n                var _a;\n                return _a = {}, _a[key_1] = value, _a;\n            }));\n        }\n        var data = {};\n        var runningResolvers$ = from(keys).pipe(mergeMap(function (key) {\n            return _this.getResolver(resolve[key], future).pipe(map(function (value) {\n                data[key] = value;\n                return value;\n            }));\n        }));\n        return runningResolvers$.pipe(last(), map(function () { return data; }));\n    };\n    PreActivation.prototype.getResolver = function (injectionToken, future) {\n        var resolver = this.getToken(injectionToken, future);\n        return resolver.resolve ? wrapIntoObservable(resolver.resolve(future, this.future)) :\n            wrapIntoObservable(resolver(future, this.future));\n    };\n    PreActivation.prototype.getToken = function (token, snapshot) {\n        var config = closestLoadedConfig(snapshot);\n        var injector = config ? config.module.injector : this.moduleInjector;\n        return injector.get(token);\n    };\n    return PreActivation;\n}());\nfunction closestLoadedConfig(snapshot) {\n    if (!snapshot)\n        return null;\n    for (var s = snapshot.parent; s; s = s.parent) {\n        var route = s.routeConfig;\n        if (route && route._loadedConfig)\n            return route._loadedConfig;\n    }\n    return null;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar NoMatch$1 = /** @class */ (function () {\n    function NoMatch() {\n    }\n    return NoMatch;\n}());\nfunction recognize(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {\n    if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n    if (relativeLinkResolution === void 0) { relativeLinkResolution = 'legacy'; }\n    return new Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution)\n        .recognize();\n}\nvar Recognizer = /** @class */ (function () {\n    function Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {\n        this.rootComponentType = rootComponentType;\n        this.config = config;\n        this.urlTree = urlTree;\n        this.url = url;\n        this.paramsInheritanceStrategy = paramsInheritanceStrategy;\n        this.relativeLinkResolution = relativeLinkResolution;\n    }\n    Recognizer.prototype.recognize = function () {\n        try {\n            var rootSegmentGroup = split$1(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup;\n            var children = this.processSegmentGroup(this.config, rootSegmentGroup, PRIMARY_OUTLET);\n            var root = new ActivatedRouteSnapshot([], Object.freeze({}), Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, PRIMARY_OUTLET, this.rootComponentType, null, this.urlTree.root, -1, {});\n            var rootNode = new TreeNode(root, children);\n            var routeState = new RouterStateSnapshot(this.url, rootNode);\n            this.inheritParamsAndData(routeState._root);\n            return of(routeState);\n        }\n        catch (e) {\n            return new Observable(function (obs) { return obs.error(e); });\n        }\n    };\n    Recognizer.prototype.inheritParamsAndData = function (routeNode) {\n        var _this = this;\n        var route = routeNode.value;\n        var i = inheritedParamsDataResolve(route, this.paramsInheritanceStrategy);\n        route.params = Object.freeze(i.params);\n        route.data = Object.freeze(i.data);\n        routeNode.children.forEach(function (n) { return _this.inheritParamsAndData(n); });\n    };\n    Recognizer.prototype.processSegmentGroup = function (config, segmentGroup, outlet) {\n        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n            return this.processChildren(config, segmentGroup);\n        }\n        return this.processSegment(config, segmentGroup, segmentGroup.segments, outlet);\n    };\n    Recognizer.prototype.processChildren = function (config, segmentGroup) {\n        var _this = this;\n        var children = mapChildrenIntoArray(segmentGroup, function (child, childOutlet) { return _this.processSegmentGroup(config, child, childOutlet); });\n        checkOutletNameUniqueness(children);\n        sortActivatedRouteSnapshots(children);\n        return children;\n    };\n    Recognizer.prototype.processSegment = function (config, segmentGroup, segments, outlet) {\n        var e_1, _a;\n        try {\n            for (var config_1 = __values(config), config_1_1 = config_1.next(); !config_1_1.done; config_1_1 = config_1.next()) {\n                var r = config_1_1.value;\n                try {\n                    return this.processSegmentAgainstRoute(r, segmentGroup, segments, outlet);\n                }\n                catch (e) {\n                    if (!(e instanceof NoMatch$1))\n                        throw e;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (config_1_1 && !config_1_1.done && (_a = config_1.return)) _a.call(config_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        if (this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n            return [];\n        }\n        throw new NoMatch$1();\n    };\n    Recognizer.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n        return segments.length === 0 && !segmentGroup.children[outlet];\n    };\n    Recognizer.prototype.processSegmentAgainstRoute = function (route, rawSegment, segments, outlet) {\n        if (route.redirectTo)\n            throw new NoMatch$1();\n        if ((route.outlet || PRIMARY_OUTLET) !== outlet)\n            throw new NoMatch$1();\n        var snapshot;\n        var consumedSegments = [];\n        var rawSlicedSegments = [];\n        if (route.path === '**') {\n            var params = segments.length > 0 ? last$1(segments).parameters : {};\n            snapshot = new ActivatedRouteSnapshot(segments, params, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + segments.length, getResolve(route));\n        }\n        else {\n            var result = match$1(rawSegment, route, segments);\n            consumedSegments = result.consumedSegments;\n            rawSlicedSegments = segments.slice(result.lastChild);\n            snapshot = new ActivatedRouteSnapshot(consumedSegments, result.parameters, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + consumedSegments.length, getResolve(route));\n        }\n        var childConfig = getChildConfig(route);\n        var _a = split$1(rawSegment, consumedSegments, rawSlicedSegments, childConfig, this.relativeLinkResolution), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n        if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n            var children_1 = this.processChildren(childConfig, segmentGroup);\n            return [new TreeNode(snapshot, children_1)];\n        }\n        if (childConfig.length === 0 && slicedSegments.length === 0) {\n            return [new TreeNode(snapshot, [])];\n        }\n        var children = this.processSegment(childConfig, segmentGroup, slicedSegments, PRIMARY_OUTLET);\n        return [new TreeNode(snapshot, children)];\n    };\n    return Recognizer;\n}());\nfunction sortActivatedRouteSnapshots(nodes) {\n    nodes.sort(function (a, b) {\n        if (a.value.outlet === PRIMARY_OUTLET)\n            return -1;\n        if (b.value.outlet === PRIMARY_OUTLET)\n            return 1;\n        return a.value.outlet.localeCompare(b.value.outlet);\n    });\n}\nfunction getChildConfig(route) {\n    if (route.children) {\n        return route.children;\n    }\n    if (route.loadChildren) {\n        return route._loadedConfig.routes;\n    }\n    return [];\n}\nfunction match$1(segmentGroup, route, segments) {\n    if (route.path === '') {\n        if (route.pathMatch === 'full' && (segmentGroup.hasChildren() || segments.length > 0)) {\n            throw new NoMatch$1();\n        }\n        return { consumedSegments: [], lastChild: 0, parameters: {} };\n    }\n    var matcher = route.matcher || defaultUrlMatcher;\n    var res = matcher(segments, segmentGroup, route);\n    if (!res)\n        throw new NoMatch$1();\n    var posParams = {};\n    forEach(res.posParams, function (v, k) { posParams[k] = v.path; });\n    var parameters = res.consumed.length > 0 ? __assign({}, posParams, res.consumed[res.consumed.length - 1].parameters) :\n        posParams;\n    return { consumedSegments: res.consumed, lastChild: res.consumed.length, parameters: parameters };\n}\nfunction checkOutletNameUniqueness(nodes) {\n    var names = {};\n    nodes.forEach(function (n) {\n        var routeWithSameOutletName = names[n.value.outlet];\n        if (routeWithSameOutletName) {\n            var p = routeWithSameOutletName.url.map(function (s) { return s.toString(); }).join('/');\n            var c = n.value.url.map(function (s) { return s.toString(); }).join('/');\n            throw new Error(\"Two segments cannot have the same outlet name: '\" + p + \"' and '\" + c + \"'.\");\n        }\n        names[n.value.outlet] = n.value;\n    });\n}\nfunction getSourceSegmentGroup(segmentGroup) {\n    var s = segmentGroup;\n    while (s._sourceSegment) {\n        s = s._sourceSegment;\n    }\n    return s;\n}\nfunction getPathIndexShift(segmentGroup) {\n    var s = segmentGroup;\n    var res = (s._segmentIndexShift ? s._segmentIndexShift : 0);\n    while (s._sourceSegment) {\n        s = s._sourceSegment;\n        res += (s._segmentIndexShift ? s._segmentIndexShift : 0);\n    }\n    return res - 1;\n}\nfunction split$1(segmentGroup, consumedSegments, slicedSegments, config, relativeLinkResolution) {\n    if (slicedSegments.length > 0 &&\n        containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n        var s_1 = new UrlSegmentGroup(consumedSegments, createChildrenForEmptyPaths(segmentGroup, consumedSegments, config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n        s_1._sourceSegment = segmentGroup;\n        s_1._segmentIndexShift = consumedSegments.length;\n        return { segmentGroup: s_1, slicedSegments: [] };\n    }\n    if (slicedSegments.length === 0 &&\n        containsEmptyPathMatches(segmentGroup, slicedSegments, config)) {\n        var s_2 = new UrlSegmentGroup(segmentGroup.segments, addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, config, segmentGroup.children, relativeLinkResolution));\n        s_2._sourceSegment = segmentGroup;\n        s_2._segmentIndexShift = consumedSegments.length;\n        return { segmentGroup: s_2, slicedSegments: slicedSegments };\n    }\n    var s = new UrlSegmentGroup(segmentGroup.segments, segmentGroup.children);\n    s._sourceSegment = segmentGroup;\n    s._segmentIndexShift = consumedSegments.length;\n    return { segmentGroup: s, slicedSegments: slicedSegments };\n}\nfunction addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, routes, children, relativeLinkResolution) {\n    var e_2, _a;\n    var res = {};\n    try {\n        for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n            var r = routes_1_1.value;\n            if (emptyPathMatch(segmentGroup, slicedSegments, r) && !children[getOutlet$1(r)]) {\n                var s = new UrlSegmentGroup([], {});\n                s._sourceSegment = segmentGroup;\n                if (relativeLinkResolution === 'legacy') {\n                    s._segmentIndexShift = segmentGroup.segments.length;\n                }\n                else {\n                    s._segmentIndexShift = consumedSegments.length;\n                }\n                res[getOutlet$1(r)] = s;\n            }\n        }\n    }\n    catch (e_2_1) { e_2 = { error: e_2_1 }; }\n    finally {\n        try {\n            if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n        }\n        finally { if (e_2) throw e_2.error; }\n    }\n    return __assign({}, children, res);\n}\nfunction createChildrenForEmptyPaths(segmentGroup, consumedSegments, routes, primarySegment) {\n    var e_3, _a;\n    var res = {};\n    res[PRIMARY_OUTLET] = primarySegment;\n    primarySegment._sourceSegment = segmentGroup;\n    primarySegment._segmentIndexShift = consumedSegments.length;\n    try {\n        for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n            var r = routes_2_1.value;\n            if (r.path === '' && getOutlet$1(r) !== PRIMARY_OUTLET) {\n                var s = new UrlSegmentGroup([], {});\n                s._sourceSegment = segmentGroup;\n                s._segmentIndexShift = consumedSegments.length;\n                res[getOutlet$1(r)] = s;\n            }\n        }\n    }\n    catch (e_3_1) { e_3 = { error: e_3_1 }; }\n    finally {\n        try {\n            if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n        }\n        finally { if (e_3) throw e_3.error; }\n    }\n    return res;\n}\nfunction containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, routes) {\n    return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r) && getOutlet$1(r) !== PRIMARY_OUTLET; });\n}\nfunction containsEmptyPathMatches(segmentGroup, slicedSegments, routes) {\n    return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r); });\n}\nfunction emptyPathMatch(segmentGroup, slicedSegments, r) {\n    if ((segmentGroup.hasChildren() || slicedSegments.length > 0) && r.pathMatch === 'full') {\n        return false;\n    }\n    return r.path === '' && r.redirectTo === undefined;\n}\nfunction getOutlet$1(route) {\n    return route.outlet || PRIMARY_OUTLET;\n}\nfunction getData(route) {\n    return route.data || {};\n}\nfunction getResolve(route) {\n    return route.resolve || {};\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Provides a way to customize when activated routes get reused.\n *\n * @experimental\n */\nvar RouteReuseStrategy = /** @class */ (function () {\n    function RouteReuseStrategy() {\n    }\n    return RouteReuseStrategy;\n}());\n/**\n * Does not detach any subtrees. Reuses routes as long as their route config is the same.\n */\nvar DefaultRouteReuseStrategy = /** @class */ (function () {\n    function DefaultRouteReuseStrategy() {\n    }\n    DefaultRouteReuseStrategy.prototype.shouldDetach = function (route) { return false; };\n    DefaultRouteReuseStrategy.prototype.store = function (route, detachedTree) { };\n    DefaultRouteReuseStrategy.prototype.shouldAttach = function (route) { return false; };\n    DefaultRouteReuseStrategy.prototype.retrieve = function (route) { return null; };\n    DefaultRouteReuseStrategy.prototype.shouldReuseRoute = function (future, curr) {\n        return future.routeConfig === curr.routeConfig;\n    };\n    return DefaultRouteReuseStrategy;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @docsNotRequired\n * @experimental\n */\nvar ROUTES = new InjectionToken('ROUTES');\nvar RouterConfigLoader = /** @class */ (function () {\n    function RouterConfigLoader(loader, compiler, onLoadStartListener, onLoadEndListener) {\n        this.loader = loader;\n        this.compiler = compiler;\n        this.onLoadStartListener = onLoadStartListener;\n        this.onLoadEndListener = onLoadEndListener;\n    }\n    RouterConfigLoader.prototype.load = function (parentInjector, route) {\n        var _this = this;\n        if (this.onLoadStartListener) {\n            this.onLoadStartListener(route);\n        }\n        var moduleFactory$ = this.loadModuleFactory(route.loadChildren);\n        return moduleFactory$.pipe(map(function (factory) {\n            if (_this.onLoadEndListener) {\n                _this.onLoadEndListener(route);\n            }\n            var module = factory.create(parentInjector);\n            return new LoadedRouterConfig(flatten(module.injector.get(ROUTES)).map(standardizeConfig), module);\n        }));\n    };\n    RouterConfigLoader.prototype.loadModuleFactory = function (loadChildren) {\n        var _this = this;\n        if (typeof loadChildren === 'string') {\n            return from(this.loader.load(loadChildren));\n        }\n        else {\n            return wrapIntoObservable(loadChildren()).pipe(mergeMap(function (t) {\n                if (t instanceof NgModuleFactory) {\n                    return of(t);\n                }\n                else {\n                    return from(_this.compiler.compileModuleAsync(t));\n                }\n            }));\n        }\n    };\n    return RouterConfigLoader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Provides a way to migrate AngularJS applications to Angular.\n *\n * @experimental\n */\nvar UrlHandlingStrategy = /** @class */ (function () {\n    function UrlHandlingStrategy() {\n    }\n    return UrlHandlingStrategy;\n}());\n/**\n * @experimental\n */\nvar DefaultUrlHandlingStrategy = /** @class */ (function () {\n    function DefaultUrlHandlingStrategy() {\n    }\n    DefaultUrlHandlingStrategy.prototype.shouldProcessUrl = function (url) { return true; };\n    DefaultUrlHandlingStrategy.prototype.extract = function (url) { return url; };\n    DefaultUrlHandlingStrategy.prototype.merge = function (newUrlPart, wholeUrl) { return newUrlPart; };\n    return DefaultUrlHandlingStrategy;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nfunction defaultErrorHandler(error) {\n    throw error;\n}\nfunction defaultMalformedUriErrorHandler(error, urlSerializer, url) {\n    return urlSerializer.parse('/');\n}\n/**\n * @internal\n */\nfunction defaultRouterHook(snapshot, runExtras) {\n    return of(null);\n}\n/**\n * @description\n *\n * Provides the navigation and url manipulation capabilities.\n *\n * See `Routes` for more details and examples.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar Router = /** @class */ (function () {\n    /**\n     * Creates the router service.\n     */\n    // TODO: vsavkin make internal after the final is out.\n    function Router(rootComponentType, urlSerializer, rootContexts, location, injector, loader, compiler, config) {\n        var _this = this;\n        this.rootComponentType = rootComponentType;\n        this.urlSerializer = urlSerializer;\n        this.rootContexts = rootContexts;\n        this.location = location;\n        this.config = config;\n        this.navigations = new BehaviorSubject(null);\n        this.navigationId = 0;\n        this.isNgZoneEnabled = false;\n        this.events = new Subject();\n        /**\n         * Error handler that is invoked when a navigation errors.\n         *\n         * See `ErrorHandler` for more information.\n         */\n        this.errorHandler = defaultErrorHandler;\n        /**\n         * Malformed uri error handler is invoked when `Router.parseUrl(url)` throws an\n         * error due to containing an invalid character. The most common case would be a `%` sign\n         * that's not encoded and is not part of a percent encoded sequence.\n         */\n        this.malformedUriErrorHandler = defaultMalformedUriErrorHandler;\n        /**\n         * Indicates if at least one navigation happened.\n         */\n        this.navigated = false;\n        this.lastSuccessfulId = -1;\n        /**\n         * Used by RouterModule. This allows us to\n         * pause the navigation either before preactivation or after it.\n         * @internal\n         */\n        this.hooks = {\n            beforePreactivation: defaultRouterHook,\n            afterPreactivation: defaultRouterHook\n        };\n        /**\n         * Extracts and merges URLs. Used for AngularJS to Angular migrations.\n         */\n        this.urlHandlingStrategy = new DefaultUrlHandlingStrategy();\n        this.routeReuseStrategy = new DefaultRouteReuseStrategy();\n        /**\n         * Define what the router should do if it receives a navigation request to the current URL.\n         * By default, the router will ignore this navigation. However, this prevents features such\n         * as a \"refresh\" button. Use this option to configure the behavior when navigating to the\n         * current URL. Default is 'ignore'.\n         */\n        this.onSameUrlNavigation = 'ignore';\n        /**\n         * Defines how the router merges params, data and resolved data from parent to child\n         * routes. Available options are:\n         *\n         * - `'emptyOnly'`, the default, only inherits parent params for path-less or component-less\n         *   routes.\n         * - `'always'`, enables unconditional inheritance of parent params.\n         */\n        this.paramsInheritanceStrategy = 'emptyOnly';\n        /**\n         * Defines when the router updates the browser URL. The default behavior is to update after\n         * successful navigation. However, some applications may prefer a mode where the URL gets\n         * updated at the beginning of navigation. The most common use case would be updating the\n         * URL early so if navigation fails, you can show an error message with the URL that failed.\n         * Available options are:\n         *\n         * - `'deferred'`, the default, updates the browser URL after navigation has finished.\n         * - `'eager'`, updates browser URL at the beginning of navigation.\n         */\n        this.urlUpdateStrategy = 'deferred';\n        /**\n         * See {@link RouterModule} for more information.\n         */\n        this.relativeLinkResolution = 'legacy';\n        var onLoadStart = function (r) { return _this.triggerEvent(new RouteConfigLoadStart(r)); };\n        var onLoadEnd = function (r) { return _this.triggerEvent(new RouteConfigLoadEnd(r)); };\n        this.ngModule = injector.get(NgModuleRef);\n        this.console = injector.get(ɵConsole);\n        var ngZone = injector.get(NgZone);\n        this.isNgZoneEnabled = ngZone instanceof NgZone;\n        this.resetConfig(config);\n        this.currentUrlTree = createEmptyUrlTree();\n        this.rawUrlTree = this.currentUrlTree;\n        this.configLoader = new RouterConfigLoader(loader, compiler, onLoadStart, onLoadEnd);\n        this.routerState = createEmptyState(this.currentUrlTree, this.rootComponentType);\n        this.processNavigations();\n    }\n    /**\n     * @internal\n     * TODO: this should be removed once the constructor of the router made internal\n     */\n    Router.prototype.resetRootComponentType = function (rootComponentType) {\n        this.rootComponentType = rootComponentType;\n        // TODO: vsavkin router 4.0 should make the root component set to null\n        // this will simplify the lifecycle of the router.\n        this.routerState.root.component = this.rootComponentType;\n    };\n    /**\n     * Sets up the location change listener and performs the initial navigation.\n     */\n    Router.prototype.initialNavigation = function () {\n        this.setUpLocationChangeListener();\n        if (this.navigationId === 0) {\n            this.navigateByUrl(this.location.path(true), { replaceUrl: true });\n        }\n    };\n    /**\n     * Sets up the location change listener.\n     */\n    Router.prototype.setUpLocationChangeListener = function () {\n        var _this = this;\n        // Don't need to use Zone.wrap any more, because zone.js\n        // already patch onPopState, so location change callback will\n        // run into ngZone\n        if (!this.locationSubscription) {\n            this.locationSubscription = this.location.subscribe(function (change) {\n                var rawUrlTree = _this.parseUrl(change['url']);\n                var source = change['type'] === 'popstate' ? 'popstate' : 'hashchange';\n                var state = change.state && change.state.navigationId ?\n                    { navigationId: change.state.navigationId } :\n                    null;\n                setTimeout(function () { _this.scheduleNavigation(rawUrlTree, source, state, { replaceUrl: true }); }, 0);\n            });\n        }\n    };\n    Object.defineProperty(Router.prototype, \"url\", {\n        /** The current url */\n        get: function () { return this.serializeUrl(this.currentUrlTree); },\n        enumerable: true,\n        configurable: true\n    });\n    /** @internal */\n    Router.prototype.triggerEvent = function (event) { this.events.next(event); };\n    /**\n     * Resets the configuration used for navigation and generating links.\n     *\n     * @usageNotes\n     *\n     * ### Example\n     *\n     * ```\n     * router.resetConfig([\n     *  { path: 'team/:id', component: TeamCmp, children: [\n     *    { path: 'simple', component: SimpleCmp },\n     *    { path: 'user/:name', component: UserCmp }\n     *  ]}\n     * ]);\n     * ```\n     */\n    Router.prototype.resetConfig = function (config) {\n        validateConfig(config);\n        this.config = config.map(standardizeConfig);\n        this.navigated = false;\n        this.lastSuccessfulId = -1;\n    };\n    /** @docsNotRequired */\n    Router.prototype.ngOnDestroy = function () { this.dispose(); };\n    /** Disposes of the router */\n    Router.prototype.dispose = function () {\n        if (this.locationSubscription) {\n            this.locationSubscription.unsubscribe();\n            this.locationSubscription = null;\n        }\n    };\n    /**\n     * Applies an array of commands to the current url tree and creates a new url tree.\n     *\n     * When given an activate route, applies the given commands starting from the route.\n     * When not given a route, applies the given command starting from the root.\n     *\n     * @usageNotes\n     *\n     * ### Example\n     *\n     * ```\n     * // create /team/33/user/11\n     * router.createUrlTree(['/team', 33, 'user', 11]);\n     *\n     * // create /team/33;expand=true/user/11\n     * router.createUrlTree(['/team', 33, {expand: true}, 'user', 11]);\n     *\n     * // you can collapse static segments like this (this works only with the first passed-in value):\n     * router.createUrlTree(['/team/33/user', userId]);\n     *\n     * // If the first segment can contain slashes, and you do not want the router to split it, you\n     * // can do the following:\n     *\n     * router.createUrlTree([{segmentPath: '/one/two'}]);\n     *\n     * // create /team/33/(user/11//right:chat)\n     * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: 'chat'}}]);\n     *\n     * // remove the right secondary node\n     * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: null}}]);\n     *\n     * // assuming the current url is `/team/33/user/11` and the route points to `user/11`\n     *\n     * // navigate to /team/33/user/11/details\n     * router.createUrlTree(['details'], {relativeTo: route});\n     *\n     * // navigate to /team/33/user/22\n     * router.createUrlTree(['../22'], {relativeTo: route});\n     *\n     * // navigate to /team/44/user/22\n     * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});\n     * ```\n     */\n    Router.prototype.createUrlTree = function (commands, navigationExtras) {\n        if (navigationExtras === void 0) { navigationExtras = {}; }\n        var relativeTo = navigationExtras.relativeTo, queryParams = navigationExtras.queryParams, fragment = navigationExtras.fragment, preserveQueryParams = navigationExtras.preserveQueryParams, queryParamsHandling = navigationExtras.queryParamsHandling, preserveFragment = navigationExtras.preserveFragment;\n        if (isDevMode() && preserveQueryParams && console && console.warn) {\n            console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n        }\n        var a = relativeTo || this.routerState.root;\n        var f = preserveFragment ? this.currentUrlTree.fragment : fragment;\n        var q = null;\n        if (queryParamsHandling) {\n            switch (queryParamsHandling) {\n                case 'merge':\n                    q = __assign({}, this.currentUrlTree.queryParams, queryParams);\n                    break;\n                case 'preserve':\n                    q = this.currentUrlTree.queryParams;\n                    break;\n                default:\n                    q = queryParams || null;\n            }\n        }\n        else {\n            q = preserveQueryParams ? this.currentUrlTree.queryParams : queryParams || null;\n        }\n        if (q !== null) {\n            q = this.removeEmptyProps(q);\n        }\n        return createUrlTree(a, this.currentUrlTree, commands, q, f);\n    };\n    /**\n     * Navigate based on the provided url. This navigation is always absolute.\n     *\n     * Returns a promise that:\n     * - resolves to 'true' when navigation succeeds,\n     * - resolves to 'false' when navigation fails,\n     * - is rejected when an error happens.\n     *\n     * @usageNotes\n     *\n     * ### Example\n     *\n     * ```\n     * router.navigateByUrl(\"/team/33/user/11\");\n     *\n     * // Navigate without updating the URL\n     * router.navigateByUrl(\"/team/33/user/11\", { skipLocationChange: true });\n     * ```\n     *\n     * Since `navigateByUrl()` takes an absolute URL as the first parameter,\n     * it will not apply any delta to the current URL and ignores any properties\n     * in the second parameter (the `NavigationExtras`) that would change the\n     * provided URL.\n     */\n    Router.prototype.navigateByUrl = function (url, extras) {\n        if (extras === void 0) { extras = { skipLocationChange: false }; }\n        if (isDevMode() && this.isNgZoneEnabled && !NgZone.isInAngularZone()) {\n            this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");\n        }\n        var urlTree = url instanceof UrlTree ? url : this.parseUrl(url);\n        var mergedTree = this.urlHandlingStrategy.merge(urlTree, this.rawUrlTree);\n        return this.scheduleNavigation(mergedTree, 'imperative', null, extras);\n    };\n    /**\n     * Navigate based on the provided array of commands and a starting point.\n     * If no starting route is provided, the navigation is absolute.\n     *\n     * Returns a promise that:\n     * - resolves to 'true' when navigation succeeds,\n     * - resolves to 'false' when navigation fails,\n     * - is rejected when an error happens.\n     *\n     * @usageNotes\n     *\n     * ### Example\n     *\n     * ```\n     * router.navigate(['team', 33, 'user', 11], {relativeTo: route});\n     *\n     * // Navigate without updating the URL\n     * router.navigate(['team', 33, 'user', 11], {relativeTo: route, skipLocationChange: true});\n     * ```\n     *\n     * The first parameter of `navigate()` is a delta to be applied to the current URL\n     * or the one provided in the `relativeTo` property of the second parameter (the\n     * `NavigationExtras`).\n     */\n    Router.prototype.navigate = function (commands, extras) {\n        if (extras === void 0) { extras = { skipLocationChange: false }; }\n        validateCommands(commands);\n        return this.navigateByUrl(this.createUrlTree(commands, extras), extras);\n    };\n    /** Serializes a `UrlTree` into a string */\n    Router.prototype.serializeUrl = function (url) { return this.urlSerializer.serialize(url); };\n    /** Parses a string into a `UrlTree` */\n    Router.prototype.parseUrl = function (url) {\n        var urlTree;\n        try {\n            urlTree = this.urlSerializer.parse(url);\n        }\n        catch (e) {\n            urlTree = this.malformedUriErrorHandler(e, this.urlSerializer, url);\n        }\n        return urlTree;\n    };\n    /** Returns whether the url is activated */\n    Router.prototype.isActive = function (url, exact) {\n        if (url instanceof UrlTree) {\n            return containsTree(this.currentUrlTree, url, exact);\n        }\n        var urlTree = this.parseUrl(url);\n        return containsTree(this.currentUrlTree, urlTree, exact);\n    };\n    Router.prototype.removeEmptyProps = function (params) {\n        return Object.keys(params).reduce(function (result, key) {\n            var value = params[key];\n            if (value !== null && value !== undefined) {\n                result[key] = value;\n            }\n            return result;\n        }, {});\n    };\n    Router.prototype.processNavigations = function () {\n        var _this = this;\n        this.navigations\n            .pipe(concatMap(function (nav) {\n            if (nav) {\n                _this.executeScheduledNavigation(nav);\n                // a failed navigation should not stop the router from processing\n                // further navigations => the catch\n                return nav.promise.catch(function () { });\n            }\n            else {\n                return of(null);\n            }\n        }))\n            .subscribe(function () { });\n    };\n    Router.prototype.scheduleNavigation = function (rawUrl, source, state, extras) {\n        var lastNavigation = this.navigations.value;\n        // If the user triggers a navigation imperatively (e.g., by using navigateByUrl),\n        // and that navigation results in 'replaceState' that leads to the same URL,\n        // we should skip those.\n        if (lastNavigation && source !== 'imperative' && lastNavigation.source === 'imperative' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        // Because of a bug in IE and Edge, the location class fires two events (popstate and\n        // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n        // flicker. Handles the case when a popstate was emitted first.\n        if (lastNavigation && source == 'hashchange' && lastNavigation.source === 'popstate' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        // Because of a bug in IE and Edge, the location class fires two events (popstate and\n        // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n        // flicker. Handles the case when a hashchange was emitted first.\n        if (lastNavigation && source == 'popstate' && lastNavigation.source === 'hashchange' &&\n            lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n            return Promise.resolve(true); // return value is not used\n        }\n        var resolve = null;\n        var reject = null;\n        var promise = new Promise(function (res, rej) {\n            resolve = res;\n            reject = rej;\n        });\n        var id = ++this.navigationId;\n        this.navigations.next({ id: id, source: source, state: state, rawUrl: rawUrl, extras: extras, resolve: resolve, reject: reject, promise: promise });\n        // Make sure that the error is propagated even though `processNavigations` catch\n        // handler does not rethrow\n        return promise.catch(function (e) { return Promise.reject(e); });\n    };\n    Router.prototype.executeScheduledNavigation = function (_a) {\n        var _this = this;\n        var id = _a.id, rawUrl = _a.rawUrl, extras = _a.extras, resolve = _a.resolve, reject = _a.reject, source = _a.source, state = _a.state;\n        var url = this.urlHandlingStrategy.extract(rawUrl);\n        var urlTransition = !this.navigated || url.toString() !== this.currentUrlTree.toString();\n        if ((this.onSameUrlNavigation === 'reload' ? true : urlTransition) &&\n            this.urlHandlingStrategy.shouldProcessUrl(rawUrl)) {\n            if (this.urlUpdateStrategy === 'eager' && !extras.skipLocationChange) {\n                this.setBrowserUrl(rawUrl, !!extras.replaceUrl, id);\n            }\n            this.events\n                .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n            Promise.resolve()\n                .then(function (_) { return _this.runNavigate(url, rawUrl, !!extras.skipLocationChange, !!extras.replaceUrl, id, null); })\n                .then(resolve, reject);\n            // we cannot process the current URL, but we could process the previous one =>\n            // we need to do some cleanup\n        }\n        else if (urlTransition && this.rawUrlTree &&\n            this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)) {\n            this.events\n                .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n            Promise.resolve()\n                .then(function (_) { return _this.runNavigate(url, rawUrl, false, false, id, createEmptyState(url, _this.rootComponentType).snapshot); })\n                .then(resolve, reject);\n        }\n        else {\n            this.rawUrlTree = rawUrl;\n            resolve(null);\n        }\n    };\n    Router.prototype.runNavigate = function (url, rawUrl, skipLocationChange, replaceUrl, id, precreatedState) {\n        var _this = this;\n        if (id !== this.navigationId) {\n            this.events\n                .next(new NavigationCancel(id, this.serializeUrl(url), \"Navigation ID \" + id + \" is not equal to the current navigation id \" + this.navigationId));\n            return Promise.resolve(false);\n        }\n        return new Promise(function (resolvePromise, rejectPromise) {\n            // create an observable of the url and route state snapshot\n            // this operation do not result in any side effects\n            var urlAndSnapshot$;\n            if (!precreatedState) {\n                var moduleInjector = _this.ngModule.injector;\n                var redirectsApplied$ = applyRedirects(moduleInjector, _this.configLoader, _this.urlSerializer, url, _this.config);\n                urlAndSnapshot$ = redirectsApplied$.pipe(mergeMap(function (appliedUrl) {\n                    return recognize(_this.rootComponentType, _this.config, appliedUrl, _this.serializeUrl(appliedUrl), _this.paramsInheritanceStrategy, _this.relativeLinkResolution)\n                        .pipe(map(function (snapshot) {\n                        _this.events\n                            .next(new RoutesRecognized(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                        return { appliedUrl: appliedUrl, snapshot: snapshot };\n                    }));\n                }));\n            }\n            else {\n                urlAndSnapshot$ = of({ appliedUrl: url, snapshot: precreatedState });\n            }\n            var beforePreactivationDone$ = urlAndSnapshot$.pipe(mergeMap(function (p) {\n                if (typeof p === 'boolean')\n                    return of(p);\n                return _this.hooks\n                    .beforePreactivation(p.snapshot, {\n                    navigationId: id,\n                    appliedUrlTree: url,\n                    rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                })\n                    .pipe(map(function () { return p; }));\n            }));\n            // run preactivation: guards and data resolvers\n            var preActivation;\n            var preactivationSetup$ = beforePreactivationDone$.pipe(map(function (p) {\n                if (typeof p === 'boolean')\n                    return p;\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                var moduleInjector = _this.ngModule.injector;\n                preActivation = new PreActivation(snapshot, _this.routerState.snapshot, moduleInjector, function (evt) { return _this.triggerEvent(evt); });\n                preActivation.initialize(_this.rootContexts);\n                return { appliedUrl: appliedUrl, snapshot: snapshot };\n            }));\n            var preactivationCheckGuards$ = preactivationSetup$.pipe(mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return of(false);\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                _this.triggerEvent(new GuardsCheckStart(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                return preActivation.checkGuards().pipe(map(function (shouldActivate) {\n                    _this.triggerEvent(new GuardsCheckEnd(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot, shouldActivate));\n                    return { appliedUrl: appliedUrl, snapshot: snapshot, shouldActivate: shouldActivate };\n                }));\n            }));\n            var preactivationResolveData$ = preactivationCheckGuards$.pipe(mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return of(false);\n                if (p.shouldActivate && preActivation.isActivating()) {\n                    _this.triggerEvent(new ResolveStart(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                    return preActivation.resolveData(_this.paramsInheritanceStrategy).pipe(map(function () {\n                        _this.triggerEvent(new ResolveEnd(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                        return p;\n                    }));\n                }\n                else {\n                    return of(p);\n                }\n            }));\n            var preactivationDone$ = preactivationResolveData$.pipe(mergeMap(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return of(false);\n                return _this.hooks\n                    .afterPreactivation(p.snapshot, {\n                    navigationId: id,\n                    appliedUrlTree: url,\n                    rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                })\n                    .pipe(map(function () { return p; }));\n            }));\n            // create router state\n            // this operation has side effects => route state is being affected\n            var routerState$ = preactivationDone$.pipe(map(function (p) {\n                if (typeof p === 'boolean' || _this.navigationId !== id)\n                    return false;\n                var appliedUrl = p.appliedUrl, snapshot = p.snapshot, shouldActivate = p.shouldActivate;\n                if (shouldActivate) {\n                    var state = createRouterState(_this.routeReuseStrategy, snapshot, _this.routerState);\n                    return { appliedUrl: appliedUrl, state: state, shouldActivate: shouldActivate };\n                }\n                else {\n                    return { appliedUrl: appliedUrl, state: null, shouldActivate: shouldActivate };\n                }\n            }));\n            _this.activateRoutes(routerState$, _this.routerState, _this.currentUrlTree, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise);\n        });\n    };\n    /**\n     * Performs the logic of activating routes. This is a synchronous process by default. While this\n     * is a private method, it could be overridden to make activation asynchronous.\n     */\n    Router.prototype.activateRoutes = function (state, storedState, storedUrl, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise) {\n        var _this = this;\n        // applied the new router state\n        // this operation has side effects\n        var navigationIsSuccessful;\n        state\n            .forEach(function (p) {\n            if (typeof p === 'boolean' || !p.shouldActivate || id !== _this.navigationId || !p.state) {\n                navigationIsSuccessful = false;\n                return;\n            }\n            var appliedUrl = p.appliedUrl, state = p.state;\n            _this.currentUrlTree = appliedUrl;\n            _this.rawUrlTree = _this.urlHandlingStrategy.merge(_this.currentUrlTree, rawUrl);\n            _this.routerState = state;\n            if (_this.urlUpdateStrategy === 'deferred' && !skipLocationChange) {\n                _this.setBrowserUrl(_this.rawUrlTree, replaceUrl, id);\n            }\n            new ActivateRoutes(_this.routeReuseStrategy, state, storedState, function (evt) { return _this.triggerEvent(evt); })\n                .activate(_this.rootContexts);\n            navigationIsSuccessful = true;\n        })\n            .then(function () {\n            if (navigationIsSuccessful) {\n                _this.navigated = true;\n                _this.lastSuccessfulId = id;\n                _this.events\n                    .next(new NavigationEnd(id, _this.serializeUrl(url), _this.serializeUrl(_this.currentUrlTree)));\n                resolvePromise(true);\n            }\n            else {\n                _this.resetUrlToCurrentUrlTree();\n                _this.events\n                    .next(new NavigationCancel(id, _this.serializeUrl(url), ''));\n                resolvePromise(false);\n            }\n        }, function (e) {\n            if (isNavigationCancelingError(e)) {\n                _this.navigated = true;\n                _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                _this.events\n                    .next(new NavigationCancel(id, _this.serializeUrl(url), e.message));\n                resolvePromise(false);\n            }\n            else {\n                _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                _this.events\n                    .next(new NavigationError(id, _this.serializeUrl(url), e));\n                try {\n                    resolvePromise(_this.errorHandler(e));\n                }\n                catch (ee) {\n                    rejectPromise(ee);\n                }\n            }\n        });\n    };\n    Router.prototype.setBrowserUrl = function (url, replaceUrl, id) {\n        var path = this.urlSerializer.serialize(url);\n        if (this.location.isCurrentPathEqualTo(path) || replaceUrl) {\n            this.location.replaceState(path, '', { navigationId: id });\n        }\n        else {\n            this.location.go(path, '', { navigationId: id });\n        }\n    };\n    Router.prototype.resetStateAndUrl = function (storedState, storedUrl, rawUrl) {\n        this.routerState = storedState;\n        this.currentUrlTree = storedUrl;\n        this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, rawUrl);\n        this.resetUrlToCurrentUrlTree();\n    };\n    Router.prototype.resetUrlToCurrentUrlTree = function () {\n        this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), '', { navigationId: this.lastSuccessfulId });\n    };\n    return Router;\n}());\nvar ActivateRoutes = /** @class */ (function () {\n    function ActivateRoutes(routeReuseStrategy, futureState, currState, forwardEvent) {\n        this.routeReuseStrategy = routeReuseStrategy;\n        this.futureState = futureState;\n        this.currState = currState;\n        this.forwardEvent = forwardEvent;\n    }\n    ActivateRoutes.prototype.activate = function (parentContexts) {\n        var futureRoot = this.futureState._root;\n        var currRoot = this.currState ? this.currState._root : null;\n        this.deactivateChildRoutes(futureRoot, currRoot, parentContexts);\n        advanceActivatedRoute(this.futureState.root);\n        this.activateChildRoutes(futureRoot, currRoot, parentContexts);\n    };\n    // De-activate the child route that are not re-used for the future state\n    ActivateRoutes.prototype.deactivateChildRoutes = function (futureNode, currNode, contexts) {\n        var _this = this;\n        var children = nodeChildrenAsMap(currNode);\n        // Recurse on the routes active in the future state to de-activate deeper children\n        futureNode.children.forEach(function (futureChild) {\n            var childOutletName = futureChild.value.outlet;\n            _this.deactivateRoutes(futureChild, children[childOutletName], contexts);\n            delete children[childOutletName];\n        });\n        // De-activate the routes that will not be re-used\n        forEach(children, function (v, childName) {\n            _this.deactivateRouteAndItsChildren(v, contexts);\n        });\n    };\n    ActivateRoutes.prototype.deactivateRoutes = function (futureNode, currNode, parentContext) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        if (future === curr) {\n            // Reusing the node, check to see if the children need to be de-activated\n            if (future.component) {\n                // If we have a normal route, we need to go through an outlet.\n                var context = parentContext.getContext(future.outlet);\n                if (context) {\n                    this.deactivateChildRoutes(futureNode, currNode, context.children);\n                }\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.deactivateChildRoutes(futureNode, currNode, parentContext);\n            }\n        }\n        else {\n            if (curr) {\n                // Deactivate the current route which will not be re-used\n                this.deactivateRouteAndItsChildren(currNode, parentContext);\n            }\n        }\n    };\n    ActivateRoutes.prototype.deactivateRouteAndItsChildren = function (route, parentContexts) {\n        if (this.routeReuseStrategy.shouldDetach(route.value.snapshot)) {\n            this.detachAndStoreRouteSubtree(route, parentContexts);\n        }\n        else {\n            this.deactivateRouteAndOutlet(route, parentContexts);\n        }\n    };\n    ActivateRoutes.prototype.detachAndStoreRouteSubtree = function (route, parentContexts) {\n        var context = parentContexts.getContext(route.value.outlet);\n        if (context && context.outlet) {\n            var componentRef = context.outlet.detach();\n            var contexts = context.children.onOutletDeactivated();\n            this.routeReuseStrategy.store(route.value.snapshot, { componentRef: componentRef, route: route, contexts: contexts });\n        }\n    };\n    ActivateRoutes.prototype.deactivateRouteAndOutlet = function (route, parentContexts) {\n        var _this = this;\n        var context = parentContexts.getContext(route.value.outlet);\n        if (context) {\n            var children = nodeChildrenAsMap(route);\n            var contexts_1 = route.value.component ? context.children : parentContexts;\n            forEach(children, function (v, k) { return _this.deactivateRouteAndItsChildren(v, contexts_1); });\n            if (context.outlet) {\n                // Destroy the component\n                context.outlet.deactivate();\n                // Destroy the contexts for all the outlets that were in the component\n                context.children.onOutletDeactivated();\n            }\n        }\n    };\n    ActivateRoutes.prototype.activateChildRoutes = function (futureNode, currNode, contexts) {\n        var _this = this;\n        var children = nodeChildrenAsMap(currNode);\n        futureNode.children.forEach(function (c) {\n            _this.activateRoutes(c, children[c.value.outlet], contexts);\n            _this.forwardEvent(new ActivationEnd(c.value.snapshot));\n        });\n        if (futureNode.children.length) {\n            this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot));\n        }\n    };\n    ActivateRoutes.prototype.activateRoutes = function (futureNode, currNode, parentContexts) {\n        var future = futureNode.value;\n        var curr = currNode ? currNode.value : null;\n        advanceActivatedRoute(future);\n        // reusing the node\n        if (future === curr) {\n            if (future.component) {\n                // If we have a normal route, we need to go through an outlet.\n                var context = parentContexts.getOrCreateContext(future.outlet);\n                this.activateChildRoutes(futureNode, currNode, context.children);\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.activateChildRoutes(futureNode, currNode, parentContexts);\n            }\n        }\n        else {\n            if (future.component) {\n                // if we have a normal route, we need to place the component into the outlet and recurse.\n                var context = parentContexts.getOrCreateContext(future.outlet);\n                if (this.routeReuseStrategy.shouldAttach(future.snapshot)) {\n                    var stored = this.routeReuseStrategy.retrieve(future.snapshot);\n                    this.routeReuseStrategy.store(future.snapshot, null);\n                    context.children.onOutletReAttached(stored.contexts);\n                    context.attachRef = stored.componentRef;\n                    context.route = stored.route.value;\n                    if (context.outlet) {\n                        // Attach right away when the outlet has already been instantiated\n                        // Otherwise attach from `RouterOutlet.ngOnInit` when it is instantiated\n                        context.outlet.attach(stored.componentRef, stored.route.value);\n                    }\n                    advanceActivatedRouteNodeAndItsChildren(stored.route);\n                }\n                else {\n                    var config = parentLoadedConfig(future.snapshot);\n                    var cmpFactoryResolver = config ? config.module.componentFactoryResolver : null;\n                    context.attachRef = null;\n                    context.route = future;\n                    context.resolver = cmpFactoryResolver;\n                    if (context.outlet) {\n                        // Activate the outlet when it has already been instantiated\n                        // Otherwise it will get activated from its `ngOnInit` when instantiated\n                        context.outlet.activateWith(future, cmpFactoryResolver);\n                    }\n                    this.activateChildRoutes(futureNode, null, context.children);\n                }\n            }\n            else {\n                // if we have a componentless route, we recurse but keep the same outlet map.\n                this.activateChildRoutes(futureNode, null, parentContexts);\n            }\n        }\n    };\n    return ActivateRoutes;\n}());\nfunction advanceActivatedRouteNodeAndItsChildren(node) {\n    advanceActivatedRoute(node.value);\n    node.children.forEach(advanceActivatedRouteNodeAndItsChildren);\n}\nfunction parentLoadedConfig(snapshot) {\n    for (var s = snapshot.parent; s; s = s.parent) {\n        var route = s.routeConfig;\n        if (route && route._loadedConfig)\n            return route._loadedConfig;\n        if (route && route.component)\n            return null;\n    }\n    return null;\n}\nfunction validateCommands(commands) {\n    for (var i = 0; i < commands.length; i++) {\n        var cmd = commands[i];\n        if (cmd == null) {\n            throw new Error(\"The requested path contains \" + cmd + \" segment at index \" + i);\n        }\n    }\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Lets you link to specific routes in your app.\n *\n * Consider the following route configuration:\n * `[{ path: 'user/:name', component: UserCmp }]`.\n * When linking to this `user/:name` route, you use the `RouterLink` directive.\n *\n * If the link is static, you can use the directive as follows:\n * `<a routerLink=\"/user/bob\">link to user component</a>`\n *\n * If you use dynamic values to generate the link, you can pass an array of path\n * segments, followed by the params for each segment.\n *\n * For instance `['/team', teamId, 'user', userName, {details: true}]`\n * means that we want to generate a link to `/team/11/user/bob;details=true`.\n *\n * Multiple static segments can be merged into one\n * (e.g., `['/team/11/user', userName, {details: true}]`).\n *\n * The first segment name can be prepended with `/`, `./`, or `../`:\n * * If the first segment begins with `/`, the router will look up the route from the root of the\n *   app.\n * * If the first segment begins with `./`, or doesn't begin with a slash, the router will\n *   instead look in the children of the current activated route.\n * * And if the first segment begins with `../`, the router will go up one level.\n *\n * You can set query params and fragment as follows:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" fragment=\"education\">\n *   link to user component\n * </a>\n * ```\n * RouterLink will use these to generate this link: `/user/bob#education?debug=true`.\n *\n * (Deprecated in v4.0.0 use `queryParamsHandling` instead) You can also tell the\n * directive to preserve the current query params and fragment:\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" preserveQueryParams preserveFragment>\n *   link to user component\n * </a>\n * ```\n *\n * You can tell the directive to how to handle queryParams, available options are:\n *  - `'merge'`: merge the queryParams into the current queryParams\n *  - `'preserve'`: preserve the current queryParams\n *  - default/`''`: use the queryParams only\n *\n * Same options for {@link NavigationExtras#queryParamsHandling\n * NavigationExtras#queryParamsHandling}.\n *\n * ```\n * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" queryParamsHandling=\"merge\">\n *   link to user component\n * </a>\n * ```\n *\n * The router link directive always treats the provided input as a delta to the current url.\n *\n * For instance, if the current url is `/user/(box//aux:team)`.\n *\n * Then the following link `<a [routerLink]=\"['/user/jim']\">Jim</a>` will generate the link\n * `/user/(jim//aux:team)`.\n *\n * See {@link Router#createUrlTree createUrlTree} for more information.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLink = /** @class */ (function () {\n    function RouterLink(router, route, tabIndex, renderer, el) {\n        this.router = router;\n        this.route = route;\n        this.commands = [];\n        if (tabIndex == null) {\n            renderer.setAttribute(el.nativeElement, 'tabindex', '0');\n        }\n    }\n    Object.defineProperty(RouterLink.prototype, \"routerLink\", {\n        set: function (commands) {\n            if (commands != null) {\n                this.commands = Array.isArray(commands) ? commands : [commands];\n            }\n            else {\n                this.commands = [];\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterLink.prototype, \"preserveQueryParams\", {\n        /**\n         * @deprecated 4.0.0 use `queryParamsHandling` instead.\n         */\n        set: function (value) {\n            if (isDevMode() && console && console.warn) {\n                console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');\n            }\n            this.preserve = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLink.prototype.onClick = function () {\n        var extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        this.router.navigateByUrl(this.urlTree, extras);\n        return true;\n    };\n    Object.defineProperty(RouterLink.prototype, \"urlTree\", {\n        get: function () {\n            return this.router.createUrlTree(this.commands, {\n                relativeTo: this.route,\n                queryParams: this.queryParams,\n                fragment: this.fragment,\n                preserveQueryParams: attrBoolValue(this.preserve),\n                queryParamsHandling: this.queryParamsHandling,\n                preserveFragment: attrBoolValue(this.preserveFragment),\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLink.prototype, \"queryParams\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLink.prototype, \"fragment\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLink.prototype, \"queryParamsHandling\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"preserveFragment\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"skipLocationChange\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLink.prototype, \"replaceUrl\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLink.prototype, \"routerLink\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], RouterLink.prototype, \"preserveQueryParams\", null);\n    __decorate([\n        HostListener('click'),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", Boolean)\n    ], RouterLink.prototype, \"onClick\", null);\n    RouterLink = __decorate([\n        Directive({ selector: ':not(a)[routerLink]' }),\n        __param(2, Attribute('tabindex')),\n        __metadata(\"design:paramtypes\", [Router, ActivatedRoute, String, Renderer2, ElementRef])\n    ], RouterLink);\n    return RouterLink;\n}());\n/**\n * @description\n *\n * Lets you link to specific routes in your app.\n *\n * See `RouterLink` for more information.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLinkWithHref = /** @class */ (function () {\n    function RouterLinkWithHref(router, route, locationStrategy) {\n        var _this = this;\n        this.router = router;\n        this.route = route;\n        this.locationStrategy = locationStrategy;\n        this.commands = [];\n        this.subscription = router.events.subscribe(function (s) {\n            if (s instanceof NavigationEnd) {\n                _this.updateTargetUrlAndHref();\n            }\n        });\n    }\n    Object.defineProperty(RouterLinkWithHref.prototype, \"routerLink\", {\n        set: function (commands) {\n            if (commands != null) {\n                this.commands = Array.isArray(commands) ? commands : [commands];\n            }\n            else {\n                this.commands = [];\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterLinkWithHref.prototype, \"preserveQueryParams\", {\n        set: function (value) {\n            if (isDevMode() && console && console.warn) {\n                console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n            }\n            this.preserve = value;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLinkWithHref.prototype.ngOnChanges = function (changes) { this.updateTargetUrlAndHref(); };\n    RouterLinkWithHref.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterLinkWithHref.prototype.onClick = function (button, ctrlKey, metaKey, shiftKey) {\n        if (button !== 0 || ctrlKey || metaKey || shiftKey) {\n            return true;\n        }\n        if (typeof this.target === 'string' && this.target != '_self') {\n            return true;\n        }\n        var extras = {\n            skipLocationChange: attrBoolValue(this.skipLocationChange),\n            replaceUrl: attrBoolValue(this.replaceUrl),\n        };\n        this.router.navigateByUrl(this.urlTree, extras);\n        return false;\n    };\n    RouterLinkWithHref.prototype.updateTargetUrlAndHref = function () {\n        this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree));\n    };\n    Object.defineProperty(RouterLinkWithHref.prototype, \"urlTree\", {\n        get: function () {\n            return this.router.createUrlTree(this.commands, {\n                relativeTo: this.route,\n                queryParams: this.queryParams,\n                fragment: this.fragment,\n                preserveQueryParams: attrBoolValue(this.preserve),\n                queryParamsHandling: this.queryParamsHandling,\n                preserveFragment: attrBoolValue(this.preserveFragment),\n            });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    __decorate([\n        HostBinding('attr.target'), Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"target\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLinkWithHref.prototype, \"queryParams\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"fragment\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"queryParamsHandling\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"preserveFragment\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"skipLocationChange\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean)\n    ], RouterLinkWithHref.prototype, \"replaceUrl\", void 0);\n    __decorate([\n        HostBinding(),\n        __metadata(\"design:type\", String)\n    ], RouterLinkWithHref.prototype, \"href\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLinkWithHref.prototype, \"routerLink\", null);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Boolean),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], RouterLinkWithHref.prototype, \"preserveQueryParams\", null);\n    __decorate([\n        HostListener('click', ['$event.button', '$event.ctrlKey', '$event.metaKey', '$event.shiftKey']),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", [Number, Boolean, Boolean, Boolean]),\n        __metadata(\"design:returntype\", Boolean)\n    ], RouterLinkWithHref.prototype, \"onClick\", null);\n    RouterLinkWithHref = __decorate([\n        Directive({ selector: 'a[routerLink]' }),\n        __metadata(\"design:paramtypes\", [Router, ActivatedRoute,\n            LocationStrategy])\n    ], RouterLinkWithHref);\n    return RouterLinkWithHref;\n}());\nfunction attrBoolValue(s) {\n    return s === '' || !!s;\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n *\n * @description\n *\n * Lets you add a CSS class to an element when the link's route becomes active.\n *\n * This directive lets you add a CSS class to an element when the link's route\n * becomes active.\n *\n * Consider the following example:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\">Bob</a>\n * ```\n *\n * When the url is either '/user' or '/user/bob', the active-link class will\n * be added to the `a` tag. If the url changes, the class will be removed.\n *\n * You can set more than one class, as follows:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"class1 class2\">Bob</a>\n * <a routerLink=\"/user/bob\" [routerLinkActive]=\"['class1', 'class2']\">Bob</a>\n * ```\n *\n * You can configure RouterLinkActive by passing `exact: true`. This will add the classes\n * only when the url matches the link exactly.\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n * true}\">Bob</a>\n * ```\n *\n * You can assign the RouterLinkActive instance to a template variable and directly check\n * the `isActive` status.\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive #rla=\"routerLinkActive\">\n *   Bob {{ rla.isActive ? '(already open)' : ''}}\n * </a>\n * ```\n *\n * Finally, you can apply the RouterLinkActive directive to an ancestor of a RouterLink.\n *\n * ```\n * <div routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact: true}\">\n *   <a routerLink=\"/user/jim\">Jim</a>\n *   <a routerLink=\"/user/bob\">Bob</a>\n * </div>\n * ```\n *\n * This will set the active-link class on the div tag if the url is either '/user/jim' or\n * '/user/bob'.\n *\n * @ngModule RouterModule\n *\n *\n */\nvar RouterLinkActive = /** @class */ (function () {\n    function RouterLinkActive(router, element, renderer, cdr) {\n        var _this = this;\n        this.router = router;\n        this.element = element;\n        this.renderer = renderer;\n        this.cdr = cdr;\n        this.classes = [];\n        this.isActive = false;\n        this.routerLinkActiveOptions = { exact: false };\n        this.subscription = router.events.subscribe(function (s) {\n            if (s instanceof NavigationEnd) {\n                _this.update();\n            }\n        });\n    }\n    RouterLinkActive.prototype.ngAfterContentInit = function () {\n        var _this = this;\n        this.links.changes.subscribe(function (_) { return _this.update(); });\n        this.linksWithHrefs.changes.subscribe(function (_) { return _this.update(); });\n        this.update();\n    };\n    Object.defineProperty(RouterLinkActive.prototype, \"routerLinkActive\", {\n        set: function (data) {\n            var classes = Array.isArray(data) ? data : data.split(' ');\n            this.classes = classes.filter(function (c) { return !!c; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RouterLinkActive.prototype.ngOnChanges = function (changes) { this.update(); };\n    RouterLinkActive.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterLinkActive.prototype.update = function () {\n        var _this = this;\n        if (!this.links || !this.linksWithHrefs || !this.router.navigated)\n            return;\n        Promise.resolve().then(function () {\n            var hasActiveLinks = _this.hasActiveLinks();\n            if (_this.isActive !== hasActiveLinks) {\n                _this.isActive = hasActiveLinks;\n                _this.classes.forEach(function (c) {\n                    if (hasActiveLinks) {\n                        _this.renderer.addClass(_this.element.nativeElement, c);\n                    }\n                    else {\n                        _this.renderer.removeClass(_this.element.nativeElement, c);\n                    }\n                });\n            }\n        });\n    };\n    RouterLinkActive.prototype.isLinkActive = function (router) {\n        var _this = this;\n        return function (link) {\n            return router.isActive(link.urlTree, _this.routerLinkActiveOptions.exact);\n        };\n    };\n    RouterLinkActive.prototype.hasActiveLinks = function () {\n        return this.links.some(this.isLinkActive(this.router)) ||\n            this.linksWithHrefs.some(this.isLinkActive(this.router));\n    };\n    __decorate([\n        ContentChildren(RouterLink, { descendants: true }),\n        __metadata(\"design:type\", QueryList)\n    ], RouterLinkActive.prototype, \"links\", void 0);\n    __decorate([\n        ContentChildren(RouterLinkWithHref, { descendants: true }),\n        __metadata(\"design:type\", QueryList)\n    ], RouterLinkActive.prototype, \"linksWithHrefs\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object)\n    ], RouterLinkActive.prototype, \"routerLinkActiveOptions\", void 0);\n    __decorate([\n        Input(),\n        __metadata(\"design:type\", Object),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RouterLinkActive.prototype, \"routerLinkActive\", null);\n    RouterLinkActive = __decorate([\n        Directive({\n            selector: '[routerLinkActive]',\n            exportAs: 'routerLinkActive',\n        }),\n        __metadata(\"design:paramtypes\", [Router, ElementRef, Renderer2,\n            ChangeDetectorRef])\n    ], RouterLinkActive);\n    return RouterLinkActive;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * Store contextual information about a `RouterOutlet`\n *\n *\n */\nvar OutletContext = /** @class */ (function () {\n    function OutletContext() {\n        this.outlet = null;\n        this.route = null;\n        this.resolver = null;\n        this.children = new ChildrenOutletContexts();\n        this.attachRef = null;\n    }\n    return OutletContext;\n}());\n/**\n * Store contextual information about the children (= nested) `RouterOutlet`\n *\n *\n */\nvar ChildrenOutletContexts = /** @class */ (function () {\n    function ChildrenOutletContexts() {\n        // contexts for child outlets, by name.\n        this.contexts = new Map();\n    }\n    /** Called when a `RouterOutlet` directive is instantiated */\n    ChildrenOutletContexts.prototype.onChildOutletCreated = function (childName, outlet) {\n        var context = this.getOrCreateContext(childName);\n        context.outlet = outlet;\n        this.contexts.set(childName, context);\n    };\n    /**\n     * Called when a `RouterOutlet` directive is destroyed.\n     * We need to keep the context as the outlet could be destroyed inside a NgIf and might be\n     * re-created later.\n     */\n    ChildrenOutletContexts.prototype.onChildOutletDestroyed = function (childName) {\n        var context = this.getContext(childName);\n        if (context) {\n            context.outlet = null;\n        }\n    };\n    /**\n     * Called when the corresponding route is deactivated during navigation.\n     * Because the component get destroyed, all children outlet are destroyed.\n     */\n    ChildrenOutletContexts.prototype.onOutletDeactivated = function () {\n        var contexts = this.contexts;\n        this.contexts = new Map();\n        return contexts;\n    };\n    ChildrenOutletContexts.prototype.onOutletReAttached = function (contexts) { this.contexts = contexts; };\n    ChildrenOutletContexts.prototype.getOrCreateContext = function (childName) {\n        var context = this.getContext(childName);\n        if (!context) {\n            context = new OutletContext();\n            this.contexts.set(childName, context);\n        }\n        return context;\n    };\n    ChildrenOutletContexts.prototype.getContext = function (childName) { return this.contexts.get(childName) || null; };\n    return ChildrenOutletContexts;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Acts as a placeholder that Angular dynamically fills based on the current router state.\n *\n * ```\n * <router-outlet></router-outlet>\n * <router-outlet name='left'></router-outlet>\n * <router-outlet name='right'></router-outlet>\n * ```\n *\n * A router outlet will emit an activate event any time a new component is being instantiated,\n * and a deactivate event when it is being destroyed.\n *\n * ```\n * <router-outlet\n *   (activate)='onActivate($event)'\n *   (deactivate)='onDeactivate($event)'></router-outlet>\n * ```\n * @ngModule RouterModule\n *\n *\n */\nvar RouterOutlet = /** @class */ (function () {\n    function RouterOutlet(parentContexts, location, resolver, name, changeDetector) {\n        this.parentContexts = parentContexts;\n        this.location = location;\n        this.resolver = resolver;\n        this.changeDetector = changeDetector;\n        this.activated = null;\n        this._activatedRoute = null;\n        this.activateEvents = new EventEmitter();\n        this.deactivateEvents = new EventEmitter();\n        this.name = name || PRIMARY_OUTLET;\n        parentContexts.onChildOutletCreated(this.name, this);\n    }\n    RouterOutlet.prototype.ngOnDestroy = function () { this.parentContexts.onChildOutletDestroyed(this.name); };\n    RouterOutlet.prototype.ngOnInit = function () {\n        if (!this.activated) {\n            // If the outlet was not instantiated at the time the route got activated we need to populate\n            // the outlet when it is initialized (ie inside a NgIf)\n            var context = this.parentContexts.getContext(this.name);\n            if (context && context.route) {\n                if (context.attachRef) {\n                    // `attachRef` is populated when there is an existing component to mount\n                    this.attach(context.attachRef, context.route);\n                }\n                else {\n                    // otherwise the component defined in the configuration is created\n                    this.activateWith(context.route, context.resolver || null);\n                }\n            }\n        }\n    };\n    Object.defineProperty(RouterOutlet.prototype, \"isActivated\", {\n        get: function () { return !!this.activated; },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"component\", {\n        get: function () {\n            if (!this.activated)\n                throw new Error('Outlet is not activated');\n            return this.activated.instance;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"activatedRoute\", {\n        get: function () {\n            if (!this.activated)\n                throw new Error('Outlet is not activated');\n            return this._activatedRoute;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(RouterOutlet.prototype, \"activatedRouteData\", {\n        get: function () {\n            if (this._activatedRoute) {\n                return this._activatedRoute.snapshot.data;\n            }\n            return {};\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Called when the `RouteReuseStrategy` instructs to detach the subtree\n     */\n    RouterOutlet.prototype.detach = function () {\n        if (!this.activated)\n            throw new Error('Outlet is not activated');\n        this.location.detach();\n        var cmp = this.activated;\n        this.activated = null;\n        this._activatedRoute = null;\n        return cmp;\n    };\n    /**\n     * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree\n     */\n    RouterOutlet.prototype.attach = function (ref, activatedRoute) {\n        this.activated = ref;\n        this._activatedRoute = activatedRoute;\n        this.location.insert(ref.hostView);\n    };\n    RouterOutlet.prototype.deactivate = function () {\n        if (this.activated) {\n            var c = this.component;\n            this.activated.destroy();\n            this.activated = null;\n            this._activatedRoute = null;\n            this.deactivateEvents.emit(c);\n        }\n    };\n    RouterOutlet.prototype.activateWith = function (activatedRoute, resolver) {\n        if (this.isActivated) {\n            throw new Error('Cannot activate an already activated outlet');\n        }\n        this._activatedRoute = activatedRoute;\n        var snapshot = activatedRoute._futureSnapshot;\n        var component = snapshot.routeConfig.component;\n        resolver = resolver || this.resolver;\n        var factory = resolver.resolveComponentFactory(component);\n        var childContexts = this.parentContexts.getOrCreateContext(this.name).children;\n        var injector = new OutletInjector(activatedRoute, childContexts, this.location.injector);\n        this.activated = this.location.createComponent(factory, this.location.length, injector);\n        // Calling `markForCheck` to make sure we will run the change detection when the\n        // `RouterOutlet` is inside a `ChangeDetectionStrategy.OnPush` component.\n        this.changeDetector.markForCheck();\n        this.activateEvents.emit(this.activated.instance);\n    };\n    __decorate([\n        Output('activate'),\n        __metadata(\"design:type\", Object)\n    ], RouterOutlet.prototype, \"activateEvents\", void 0);\n    __decorate([\n        Output('deactivate'),\n        __metadata(\"design:type\", Object)\n    ], RouterOutlet.prototype, \"deactivateEvents\", void 0);\n    RouterOutlet = __decorate([\n        Directive({ selector: 'router-outlet', exportAs: 'outlet' }),\n        __param(3, Attribute('name')),\n        __metadata(\"design:paramtypes\", [ChildrenOutletContexts, ViewContainerRef,\n            ComponentFactoryResolver, String, ChangeDetectorRef])\n    ], RouterOutlet);\n    return RouterOutlet;\n}());\nvar OutletInjector = /** @class */ (function () {\n    function OutletInjector(route, childContexts, parent) {\n        this.route = route;\n        this.childContexts = childContexts;\n        this.parent = parent;\n    }\n    OutletInjector.prototype.get = function (token, notFoundValue) {\n        if (token === ActivatedRoute) {\n            return this.route;\n        }\n        if (token === ChildrenOutletContexts) {\n            return this.childContexts;\n        }\n        return this.parent.get(token, notFoundValue);\n    };\n    return OutletInjector;\n}());\n\n/**\n*@license\n*Copyright Google Inc. All Rights Reserved.\n*\n*Use of this source code is governed by an MIT-style license that can be\n*found in the LICENSE file at https://angular.io/license\n*/\n/**\n * @description\n *\n * Provides a preloading strategy.\n *\n * @experimental\n */\nvar PreloadingStrategy = /** @class */ (function () {\n    function PreloadingStrategy() {\n    }\n    return PreloadingStrategy;\n}());\n/**\n * @description\n *\n * Provides a preloading strategy that preloads all modules as quickly as possible.\n *\n * ```\n * RouteModule.forRoot(ROUTES, {preloadingStrategy: PreloadAllModules})\n * ```\n *\n * @experimental\n */\nvar PreloadAllModules = /** @class */ (function () {\n    function PreloadAllModules() {\n    }\n    PreloadAllModules.prototype.preload = function (route, fn) {\n        return fn().pipe(catchError(function () { return of(null); }));\n    };\n    return PreloadAllModules;\n}());\n/**\n * @description\n *\n * Provides a preloading strategy that does not preload any modules.\n *\n * This strategy is enabled by default.\n *\n * @experimental\n */\nvar NoPreloading = /** @class */ (function () {\n    function NoPreloading() {\n    }\n    NoPreloading.prototype.preload = function (route, fn) { return of(null); };\n    return NoPreloading;\n}());\n/**\n * The preloader optimistically loads all router configurations to\n * make navigations into lazily-loaded sections of the application faster.\n *\n * The preloader runs in the background. When the router bootstraps, the preloader\n * starts listening to all navigation events. After every such event, the preloader\n * will check if any configurations can be loaded lazily.\n *\n * If a route is protected by `canLoad` guards, the preloaded will not load it.\n *\n *\n */\nvar RouterPreloader = /** @class */ (function () {\n    function RouterPreloader(router, moduleLoader, compiler, injector, preloadingStrategy) {\n        this.router = router;\n        this.injector = injector;\n        this.preloadingStrategy = preloadingStrategy;\n        var onStartLoad = function (r) { return router.triggerEvent(new RouteConfigLoadStart(r)); };\n        var onEndLoad = function (r) { return router.triggerEvent(new RouteConfigLoadEnd(r)); };\n        this.loader = new RouterConfigLoader(moduleLoader, compiler, onStartLoad, onEndLoad);\n    }\n    RouterPreloader.prototype.setUpPreloading = function () {\n        var _this = this;\n        this.subscription =\n            this.router.events\n                .pipe(filter(function (e) { return e instanceof NavigationEnd; }), concatMap(function () { return _this.preload(); }))\n                .subscribe(function () { });\n    };\n    RouterPreloader.prototype.preload = function () {\n        var ngModule = this.injector.get(NgModuleRef);\n        return this.processRoutes(ngModule, this.router.config);\n    };\n    // TODO(jasonaden): This class relies on code external to the class to call setUpPreloading. If\n    // this hasn't been done, ngOnDestroy will fail as this.subscription will be undefined. This\n    // should be refactored.\n    RouterPreloader.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n    RouterPreloader.prototype.processRoutes = function (ngModule, routes) {\n        var e_1, _a;\n        var res = [];\n        try {\n            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n                var route = routes_1_1.value;\n                // we already have the config loaded, just recurse\n                if (route.loadChildren && !route.canLoad && route._loadedConfig) {\n                    var childConfig = route._loadedConfig;\n                    res.push(this.processRoutes(childConfig.module, childConfig.routes));\n                    // no config loaded, fetch the config\n                }\n                else if (route.loadChildren && !route.canLoad) {\n                    res.push(this.preloadConfig(ngModule, route));\n                    // recurse into children\n                }\n                else if (route.children) {\n                    res.push(this.processRoutes(ngModule, route.children));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return from(res).pipe(mergeAll(), map(function (_) { return void 0; }));\n    };\n    RouterPreloader.prototype.preloadConfig = function (ngModule, route) {\n        var _this = this;\n        return this.preloadingStrategy.preload(route, function () {\n            var loaded$ = _this.loader.load(ngModule.injector, route);\n            return loaded$.pipe(mergeMap(function (config) {\n                route._loadedConfig = config;\n                return _this.processRoutes(config.module, config.routes);\n            }));\n        });\n    };\n    RouterPreloader = __decorate([\n        Injectable(),\n        __metadata(\"design:paramtypes\", [Router, NgModuleFactoryLoader, Compiler,\n            Injector, PreloadingStrategy])\n    ], RouterPreloader);\n    return RouterPreloader;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar RouterScroller = /** @class */ (function () {\n    function RouterScroller(router, \n    /** @docsNotRequired */ viewportScroller, options) {\n        if (options === void 0) { options = {}; }\n        this.router = router;\n        this.viewportScroller = viewportScroller;\n        this.options = options;\n        this.lastId = 0;\n        this.lastSource = 'imperative';\n        this.restoredId = 0;\n        this.store = {};\n        // Default both options to 'disabled'\n        options.scrollPositionRestoration = options.scrollPositionRestoration || 'disabled';\n        options.anchorScrolling = options.anchorScrolling || 'disabled';\n    }\n    RouterScroller.prototype.init = function () {\n        // we want to disable the automatic scrolling because having two places\n        // responsible for scrolling results race conditions, especially given\n        // that browser don't implement this behavior consistently\n        if (this.options.scrollPositionRestoration !== 'disabled') {\n            this.viewportScroller.setHistoryScrollRestoration('manual');\n        }\n        this.routerEventsSubscription = this.createScrollEvents();\n        this.scrollEventsSubscription = this.consumeScrollEvents();\n    };\n    RouterScroller.prototype.createScrollEvents = function () {\n        var _this = this;\n        return this.router.events.subscribe(function (e) {\n            if (e instanceof NavigationStart) {\n                // store the scroll position of the current stable navigations.\n                _this.store[_this.lastId] = _this.viewportScroller.getScrollPosition();\n                _this.lastSource = e.navigationTrigger;\n                _this.restoredId = e.restoredState ? e.restoredState.navigationId : 0;\n            }\n            else if (e instanceof NavigationEnd) {\n                _this.lastId = e.id;\n                _this.scheduleScrollEvent(e, _this.router.parseUrl(e.urlAfterRedirects).fragment);\n            }\n        });\n    };\n    RouterScroller.prototype.consumeScrollEvents = function () {\n        var _this = this;\n        return this.router.events.subscribe(function (e) {\n            if (!(e instanceof Scroll))\n                return;\n            // a popstate event. The pop state event will always ignore anchor scrolling.\n            if (e.position) {\n                if (_this.options.scrollPositionRestoration === 'top') {\n                    _this.viewportScroller.scrollToPosition([0, 0]);\n                }\n                else if (_this.options.scrollPositionRestoration === 'enabled') {\n                    _this.viewportScroller.scrollToPosition(e.position);\n                }\n                // imperative navigation \"forward\"\n            }\n            else {\n                if (e.anchor && _this.options.anchorScrolling === 'enabled') {\n                    _this.viewportScroller.scrollToAnchor(e.anchor);\n                }\n                else if (_this.options.scrollPositionRestoration !== 'disabled') {\n                    _this.viewportScroller.scrollToPosition([0, 0]);\n                }\n            }\n        });\n    };\n    RouterScroller.prototype.scheduleScrollEvent = function (routerEvent, anchor) {\n        this.router.triggerEvent(new Scroll(routerEvent, this.lastSource === 'popstate' ? this.store[this.restoredId] : null, anchor));\n    };\n    RouterScroller.prototype.ngOnDestroy = function () {\n        if (this.routerEventsSubscription) {\n            this.routerEventsSubscription.unsubscribe();\n        }\n        if (this.scrollEventsSubscription) {\n            this.scrollEventsSubscription.unsubscribe();\n        }\n    };\n    return RouterScroller;\n}());\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @description\n *\n * Contains a list of directives\n *\n *\n */\nvar ROUTER_DIRECTIVES = [RouterOutlet, RouterLink, RouterLinkWithHref, RouterLinkActive, EmptyOutletComponent];\n/**\n * @description\n *\n * Is used in DI to configure the router.\n *\n *\n */\nvar ROUTER_CONFIGURATION = new InjectionToken('ROUTER_CONFIGURATION');\n/**\n * @docsNotRequired\n */\nvar ROUTER_FORROOT_GUARD = new InjectionToken('ROUTER_FORROOT_GUARD');\nvar ROUTER_PROVIDERS = [\n    Location,\n    { provide: UrlSerializer, useClass: DefaultUrlSerializer },\n    {\n        provide: Router,\n        useFactory: setupRouter,\n        deps: [\n            ApplicationRef, UrlSerializer, ChildrenOutletContexts, Location, Injector,\n            NgModuleFactoryLoader, Compiler, ROUTES, ROUTER_CONFIGURATION,\n            [UrlHandlingStrategy, new Optional()], [RouteReuseStrategy, new Optional()]\n        ]\n    },\n    ChildrenOutletContexts,\n    { provide: ActivatedRoute, useFactory: rootRoute, deps: [Router] },\n    { provide: NgModuleFactoryLoader, useClass: SystemJsNgModuleLoader },\n    RouterPreloader,\n    NoPreloading,\n    PreloadAllModules,\n    { provide: ROUTER_CONFIGURATION, useValue: { enableTracing: false } },\n];\nfunction routerNgProbeToken() {\n    return new NgProbeToken('Router', Router);\n}\n/**\n * @usageNotes\n *\n * RouterModule can be imported multiple times: once per lazily-loaded bundle.\n * Since the router deals with a global shared resource--location, we cannot have\n * more than one router service active.\n *\n * That is why there are two ways to create the module: `RouterModule.forRoot` and\n * `RouterModule.forChild`.\n *\n * * `forRoot` creates a module that contains all the directives, the given routes, and the router\n *   service itself.\n * * `forChild` creates a module that contains all the directives and the given routes, but does not\n *   include the router service.\n *\n * When registered at the root, the module should be used as follows\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forRoot(ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n * For submodules and lazy loaded submodules the module should be used as follows:\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forChild(ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n * @description\n *\n * Adds router directives and providers.\n *\n * Managing state transitions is one of the hardest parts of building applications. This is\n * especially true on the web, where you also need to ensure that the state is reflected in the URL.\n * In addition, we often want to split applications into multiple bundles and load them on demand.\n * Doing this transparently is not trivial.\n *\n * The Angular router solves these problems. Using the router, you can declaratively specify\n * application states, manage state transitions while taking care of the URL, and load bundles on\n * demand.\n *\n * [Read this developer guide](https://angular.io/docs/ts/latest/guide/router.html) to get an\n * overview of how the router should be used.\n *\n *\n */\nvar RouterModule = /** @class */ (function () {\n    // Note: We are injecting the Router so it gets created eagerly...\n    function RouterModule(guard, router) {\n    }\n    RouterModule_1 = RouterModule;\n    /**\n     * Creates a module with all the router providers and directives. It also optionally sets up an\n     * application listener to perform an initial navigation.\n     *\n     * Options (see `ExtraOptions`):\n     * * `enableTracing` makes the router log all its internal events to the console.\n     * * `useHash` enables the location strategy that uses the URL fragment instead of the history\n     * API.\n     * * `initialNavigation` disables the initial navigation.\n     * * `errorHandler` provides a custom error handler.\n     * * `preloadingStrategy` configures a preloading strategy (see `PreloadAllModules`).\n     * * `onSameUrlNavigation` configures how the router handles navigation to the current URL. See\n     * `ExtraOptions` for more details.\n     * * `paramsInheritanceStrategy` defines how the router merges params, data and resolved data\n     * from parent to child routes.\n     */\n    RouterModule.forRoot = function (routes, config) {\n        return {\n            ngModule: RouterModule_1,\n            providers: [\n                ROUTER_PROVIDERS,\n                provideRoutes(routes),\n                {\n                    provide: ROUTER_FORROOT_GUARD,\n                    useFactory: provideForRootGuard,\n                    deps: [[Router, new Optional(), new SkipSelf()]]\n                },\n                { provide: ROUTER_CONFIGURATION, useValue: config ? config : {} },\n                {\n                    provide: LocationStrategy,\n                    useFactory: provideLocationStrategy,\n                    deps: [\n                        PlatformLocation, [new Inject(APP_BASE_HREF), new Optional()], ROUTER_CONFIGURATION\n                    ]\n                },\n                {\n                    provide: RouterScroller,\n                    useFactory: createRouterScroller,\n                    deps: [Router, ViewportScroller, ROUTER_CONFIGURATION]\n                },\n                {\n                    provide: PreloadingStrategy,\n                    useExisting: config && config.preloadingStrategy ? config.preloadingStrategy :\n                        NoPreloading\n                },\n                { provide: NgProbeToken, multi: true, useFactory: routerNgProbeToken },\n                provideRouterInitializer(),\n            ],\n        };\n    };\n    /**\n     * Creates a module with all the router directives and a provider registering routes.\n     */\n    RouterModule.forChild = function (routes) {\n        return { ngModule: RouterModule_1, providers: [provideRoutes(routes)] };\n    };\n    var RouterModule_1;\n    RouterModule = RouterModule_1 = __decorate([\n        NgModule({\n            declarations: ROUTER_DIRECTIVES,\n            exports: ROUTER_DIRECTIVES,\n            entryComponents: [EmptyOutletComponent]\n        }),\n        __param(0, Optional()), __param(0, Inject(ROUTER_FORROOT_GUARD)), __param(1, Optional()),\n        __metadata(\"design:paramtypes\", [Object, Router])\n    ], RouterModule);\n    return RouterModule;\n}());\nfunction createRouterScroller(router, viewportScroller, config) {\n    if (config.scrollOffset) {\n        viewportScroller.setOffset(config.scrollOffset);\n    }\n    return new RouterScroller(router, viewportScroller, config);\n}\nfunction provideLocationStrategy(platformLocationStrategy, baseHref, options) {\n    if (options === void 0) { options = {}; }\n    return options.useHash ? new HashLocationStrategy(platformLocationStrategy, baseHref) :\n        new PathLocationStrategy(platformLocationStrategy, baseHref);\n}\nfunction provideForRootGuard(router) {\n    if (router) {\n        throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");\n    }\n    return 'guarded';\n}\n/**\n * @description\n *\n * Registers routes.\n *\n * @usageNotes\n * ### Example\n *\n * ```\n * @NgModule({\n *   imports: [RouterModule.forChild(ROUTES)],\n *   providers: [provideRoutes(EXTRA_ROUTES)]\n * })\n * class MyNgModule {}\n * ```\n *\n *\n */\nfunction provideRoutes(routes) {\n    return [\n        { provide: ANALYZE_FOR_ENTRY_COMPONENTS, multi: true, useValue: routes },\n        { provide: ROUTES, multi: true, useValue: routes },\n    ];\n}\nfunction setupRouter(ref, urlSerializer, contexts, location, injector, loader, compiler, config, opts, urlHandlingStrategy, routeReuseStrategy) {\n    if (opts === void 0) { opts = {}; }\n    var router = new Router(null, urlSerializer, contexts, location, injector, loader, compiler, flatten(config));\n    if (urlHandlingStrategy) {\n        router.urlHandlingStrategy = urlHandlingStrategy;\n    }\n    if (routeReuseStrategy) {\n        router.routeReuseStrategy = routeReuseStrategy;\n    }\n    if (opts.errorHandler) {\n        router.errorHandler = opts.errorHandler;\n    }\n    if (opts.malformedUriErrorHandler) {\n        router.malformedUriErrorHandler = opts.malformedUriErrorHandler;\n    }\n    if (opts.enableTracing) {\n        var dom_1 = ɵgetDOM();\n        router.events.subscribe(function (e) {\n            dom_1.logGroup(\"Router Event: \" + e.constructor.name);\n            dom_1.log(e.toString());\n            dom_1.log(e);\n            dom_1.logGroupEnd();\n        });\n    }\n    if (opts.onSameUrlNavigation) {\n        router.onSameUrlNavigation = opts.onSameUrlNavigation;\n    }\n    if (opts.paramsInheritanceStrategy) {\n        router.paramsInheritanceStrategy = opts.paramsInheritanceStrategy;\n    }\n    if (opts.urlUpdateStrategy) {\n        router.urlUpdateStrategy = opts.urlUpdateStrategy;\n    }\n    if (opts.relativeLinkResolution) {\n        router.relativeLinkResolution = opts.relativeLinkResolution;\n    }\n    return router;\n}\nfunction rootRoute(router) {\n    return router.routerState.root;\n}\n/**\n * To initialize the router properly we need to do in two steps:\n *\n * We need to start the navigation in a APP_INITIALIZER to block the bootstrap if\n * a resolver or a guards executes asynchronously. Second, we need to actually run\n * activation in a BOOTSTRAP_LISTENER. We utilize the afterPreactivation\n * hook provided by the router to do that.\n *\n * The router navigation starts, reaches the point when preactivation is done, and then\n * pauses. It waits for the hook to be resolved. We then resolve it only in a bootstrap listener.\n */\nvar RouterInitializer = /** @class */ (function () {\n    function RouterInitializer(injector) {\n        this.injector = injector;\n        this.initNavigation = false;\n        this.resultOfPreactivationDone = new Subject();\n    }\n    RouterInitializer.prototype.appInitializer = function () {\n        var _this = this;\n        var p = this.injector.get(LOCATION_INITIALIZED, Promise.resolve(null));\n        return p.then(function () {\n            var resolve = null;\n            var res = new Promise(function (r) { return resolve = r; });\n            var router = _this.injector.get(Router);\n            var opts = _this.injector.get(ROUTER_CONFIGURATION);\n            if (_this.isLegacyDisabled(opts) || _this.isLegacyEnabled(opts)) {\n                resolve(true);\n            }\n            else if (opts.initialNavigation === 'disabled') {\n                router.setUpLocationChangeListener();\n                resolve(true);\n            }\n            else if (opts.initialNavigation === 'enabled') {\n                router.hooks.afterPreactivation = function () {\n                    // only the initial navigation should be delayed\n                    if (!_this.initNavigation) {\n                        _this.initNavigation = true;\n                        resolve(true);\n                        return _this.resultOfPreactivationDone;\n                        // subsequent navigations should not be delayed\n                    }\n                    else {\n                        return of(null);\n                    }\n                };\n                router.initialNavigation();\n            }\n            else {\n                throw new Error(\"Invalid initialNavigation options: '\" + opts.initialNavigation + \"'\");\n            }\n            return res;\n        });\n    };\n    RouterInitializer.prototype.bootstrapListener = function (bootstrappedComponentRef) {\n        var opts = this.injector.get(ROUTER_CONFIGURATION);\n        var preloader = this.injector.get(RouterPreloader);\n        var routerScroller = this.injector.get(RouterScroller);\n        var router = this.injector.get(Router);\n        var ref = this.injector.get(ApplicationRef);\n        if (bootstrappedComponentRef !== ref.components[0]) {\n            return;\n        }\n        if (this.isLegacyEnabled(opts)) {\n            router.initialNavigation();\n        }\n        else if (this.isLegacyDisabled(opts)) {\n            router.setUpLocationChangeListener();\n        }\n        preloader.setUpPreloading();\n        routerScroller.init();\n        router.resetRootComponentType(ref.componentTypes[0]);\n        this.resultOfPreactivationDone.next(null);\n        this.resultOfPreactivationDone.complete();\n    };\n    RouterInitializer.prototype.isLegacyEnabled = function (opts) {\n        return opts.initialNavigation === 'legacy_enabled' || opts.initialNavigation === true ||\n            opts.initialNavigation === undefined;\n    };\n    RouterInitializer.prototype.isLegacyDisabled = function (opts) {\n        return opts.initialNavigation === 'legacy_disabled' || opts.initialNavigation === false;\n    };\n    RouterInitializer = __decorate([\n        Injectable(),\n        __metadata(\"design:paramtypes\", [Injector])\n    ], RouterInitializer);\n    return RouterInitializer;\n}());\nfunction getAppInitializer(r) {\n    return r.appInitializer.bind(r);\n}\nfunction getBootstrapListener(r) {\n    return r.bootstrapListener.bind(r);\n}\n/**\n * A token for the router initializer that will be called after the app is bootstrapped.\n *\n * @experimental\n */\nvar ROUTER_INITIALIZER = new InjectionToken('Router Initializer');\nfunction provideRouterInitializer() {\n    return [\n        RouterInitializer,\n        {\n            provide: APP_INITIALIZER,\n            multi: true,\n            useFactory: getAppInitializer,\n            deps: [RouterInitializer]\n        },\n        { provide: ROUTER_INITIALIZER, useFactory: getBootstrapListener, deps: [RouterInitializer] },\n        { provide: APP_BOOTSTRAP_LISTENER, multi: true, useExisting: ROUTER_INITIALIZER },\n    ];\n}\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nvar VERSION = new Version('6.1.10');\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n// This file only reexports content of the `src` folder. Keep it that way.\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ROUTER_FORROOT_GUARD as ɵangular_packages_router_router_a, RouterInitializer as ɵangular_packages_router_router_h, createRouterScroller as ɵangular_packages_router_router_c, getAppInitializer as ɵangular_packages_router_router_i, getBootstrapListener as ɵangular_packages_router_router_j, provideForRootGuard as ɵangular_packages_router_router_e, provideLocationStrategy as ɵangular_packages_router_router_d, provideRouterInitializer as ɵangular_packages_router_router_k, rootRoute as ɵangular_packages_router_router_g, routerNgProbeToken as ɵangular_packages_router_router_b, setupRouter as ɵangular_packages_router_router_f, RouterScroller as ɵangular_packages_router_router_n, Tree as ɵangular_packages_router_router_l, TreeNode as ɵangular_packages_router_router_m, RouterLink, RouterLinkWithHref, RouterLinkActive, RouterOutlet, ActivationEnd, ActivationStart, ChildActivationEnd, ChildActivationStart, GuardsCheckEnd, GuardsCheckStart, NavigationCancel, NavigationEnd, NavigationError, NavigationStart, ResolveEnd, ResolveStart, RouteConfigLoadEnd, RouteConfigLoadStart, RouterEvent, RoutesRecognized, Scroll, RouteReuseStrategy, Router, ROUTES, ROUTER_CONFIGURATION, ROUTER_INITIALIZER, RouterModule, provideRoutes, ChildrenOutletContexts, OutletContext, NoPreloading, PreloadAllModules, PreloadingStrategy, RouterPreloader, ActivatedRoute, ActivatedRouteSnapshot, RouterState, RouterStateSnapshot, PRIMARY_OUTLET, convertToParamMap, UrlHandlingStrategy, DefaultUrlSerializer, UrlSegment, UrlSegmentGroup, UrlSerializer, UrlTree, VERSION, EmptyOutletComponent as ɵEmptyOutletComponent, ROUTER_PROVIDERS as ɵROUTER_PROVIDERS, flatten as ɵflatten };\n//# sourceMappingURL=router.js.map\n"]}