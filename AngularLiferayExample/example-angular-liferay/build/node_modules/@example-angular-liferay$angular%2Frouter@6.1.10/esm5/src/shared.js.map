{"version":3,"sources":["../../../../../../../../../packages/router/src/shared.ts"],"names":[],"mappings":";;;;;;;;;AAYA;;;;;;;AAOA,WAAO,IAAM,iBAAiB,SAAvB;AA2CP,QAAA,cAAA,aAAA,YAAA;AAGE,iBAAA,WAAA,CAAY,MAAZ,EAA0B;AAAI,iBAAK,MAAL,GAAc,UAAU,EAAxB;AAA6B;AAE3D,oBAAA,SAAA,CAAA,GAAA,GAAA,UAAI,IAAJ,EAAgB;AAAa,mBAAO,KAAK,MAAL,CAAY,cAAZ,CAA2B,IAA3B,CAAP;AAA0C,SAAvE;AAEA,oBAAA,SAAA,CAAA,GAAA,GAAA,UAAI,IAAJ,EAAgB;AACd,gBAAI,KAAK,GAAL,CAAS,IAAT,CAAJ,EAAoB;AAClB,oBAAM,IAAI,KAAK,MAAL,CAAY,IAAZ,CAAV;AACA,uBAAO,MAAM,OAAN,CAAc,CAAd,IAAmB,EAAE,CAAF,CAAnB,GAA0B,CAAjC;AACD;AAED,mBAAO,IAAP;AACD,SAPD;AASA,oBAAA,SAAA,CAAA,MAAA,GAAA,UAAO,IAAP,EAAmB;AACjB,gBAAI,KAAK,GAAL,CAAS,IAAT,CAAJ,EAAoB;AAClB,oBAAM,IAAI,KAAK,MAAL,CAAY,IAAZ,CAAV;AACA,uBAAO,MAAM,OAAN,CAAc,CAAd,IAAmB,CAAnB,GAAuB,CAAC,CAAD,CAA9B;AACD;AAED,mBAAO,EAAP;AACD,SAPD;AASA,eAAA,cAAA,CAAI,YAAA,SAAJ,EAAI,MAAJ,EAAQ;iBAAR,YAAA;AAAuB,uBAAO,OAAO,IAAP,CAAY,KAAK,MAAjB,CAAP;AAAkC,aAAjD;4BAAA;;AAAA,SAAR;AACF,eAAA,WAAA;AAAC,KA1BD,EAAA;AA4BA;;;;;AAKA,WAAM,SAAA,iBAAA,CAA4B,MAA5B,EAA0C;AAC9C,eAAO,IAAI,WAAJ,CAAgB,MAAhB,CAAP;AACD;AAED,QAAM,6BAA6B,4BAAnC;AAEA,WAAM,SAAA,wBAAA,CAAmC,OAAnC,EAAkD;AACtD,YAAM,QAAQ,MAAM,+BAA+B,OAArC,CAAd;AACC,cAAc,0BAAd,IAA4C,IAA5C;AACD,eAAO,KAAP;AACD;AAED,WAAM,SAAA,0BAAA,CAAqC,KAArC,EAAiD;AACrD,eAAO,SAAU,MAAc,0BAAd,CAAjB;AACD;AAED;AACA,WAAM,SAAA,iBAAA,CACF,QADE,EACsB,YADtB,EACqD,KADrD,EACiE;AACrE,YAAM,QAAQ,MAAM,IAAN,CAAa,KAAb,CAAmB,GAAnB,CAAd;AAEA,YAAI,MAAM,MAAN,GAAe,SAAS,MAA5B,EAAoC;AAClC;AACA,mBAAO,IAAP;AACD;AAED,YAAI,MAAM,SAAN,KAAoB,MAApB,KACC,aAAa,WAAb,MAA8B,MAAM,MAAN,GAAe,SAAS,MADvD,CAAJ,EACoE;AAClE;AACA,mBAAO,IAAP;AACD;AAED,YAAM,YAAyC,EAA/C;AAEA;AACA,aAAK,IAAI,QAAQ,CAAjB,EAAoB,QAAQ,MAAM,MAAlC,EAA0C,OAA1C,EAAmD;AACjD,gBAAM,OAAO,MAAM,KAAN,CAAb;AACA,gBAAM,UAAU,SAAS,KAAT,CAAhB;AACA,gBAAM,cAAc,KAAK,UAAL,CAAgB,GAAhB,CAApB;AACA,gBAAI,WAAJ,EAAiB;AACf,0BAAU,KAAK,SAAL,CAAe,CAAf,CAAV,IAA+B,OAA/B;AACD,aAFD,MAEO,IAAI,SAAS,QAAQ,IAArB,EAA2B;AAChC;AACA,uBAAO,IAAP;AACD;AACF;AAED,eAAO,EAAC,UAAU,SAAS,KAAT,CAAe,CAAf,EAAkB,MAAM,MAAxB,CAAX,EAA4C,WAAS,SAArD,EAAP;AACD","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Route, UrlMatchResult} from './config';\nimport {UrlSegment, UrlSegmentGroup} from './url_tree';\n\n\n/**\n * @description\n *\n * Name of the primary outlet.\n *\n *\n */\nexport const PRIMARY_OUTLET = 'primary';\n\n/**\n * A collection of parameters.\n *\n *\n */\nexport type Params = {\n  [key: string]: any\n};\n\n/**\n * Matrix and Query parameters.\n *\n * `ParamMap` makes it easier to work with parameters as they could have either a single value or\n * multiple value. Because this should be known by the user, calling `get` or `getAll` returns the\n * correct type (either `string` or `string[]`).\n *\n * The API is inspired by the URLSearchParams interface.\n * see https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams\n *\n *\n */\nexport interface ParamMap {\n  has(name: string): boolean;\n  /**\n   * Return a single value for the given parameter name:\n   * - the value when the parameter has a single value,\n   * - the first value if the parameter has multiple values,\n   * - `null` when there is no such parameter.\n   */\n  get(name: string): string|null;\n  /**\n   * Return an array of values for the given parameter name.\n   *\n   * If there is no such parameter, an empty array is returned.\n   */\n  getAll(name: string): string[];\n\n  /** Name of the parameters */\n  readonly keys: string[];\n}\n\nclass ParamsAsMap implements ParamMap {\n  private params: Params;\n\n  constructor(params: Params) { this.params = params || {}; }\n\n  has(name: string): boolean { return this.params.hasOwnProperty(name); }\n\n  get(name: string): string|null {\n    if (this.has(name)) {\n      const v = this.params[name];\n      return Array.isArray(v) ? v[0] : v;\n    }\n\n    return null;\n  }\n\n  getAll(name: string): string[] {\n    if (this.has(name)) {\n      const v = this.params[name];\n      return Array.isArray(v) ? v : [v];\n    }\n\n    return [];\n  }\n\n  get keys(): string[] { return Object.keys(this.params); }\n}\n\n/**\n * Convert a `Params` instance to a `ParamMap`.\n *\n *\n */\nexport function convertToParamMap(params: Params): ParamMap {\n  return new ParamsAsMap(params);\n}\n\nconst NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';\n\nexport function navigationCancelingError(message: string) {\n  const error = Error('NavigationCancelingError: ' + message);\n  (error as any)[NAVIGATION_CANCELING_ERROR] = true;\n  return error;\n}\n\nexport function isNavigationCancelingError(error: Error) {\n  return error && (error as any)[NAVIGATION_CANCELING_ERROR];\n}\n\n// Matches the route configuration (`route`) against the actual URL (`segments`).\nexport function defaultUrlMatcher(\n    segments: UrlSegment[], segmentGroup: UrlSegmentGroup, route: Route): UrlMatchResult|null {\n  const parts = route.path !.split('/');\n\n  if (parts.length > segments.length) {\n    // The actual URL is shorter than the config, no match\n    return null;\n  }\n\n  if (route.pathMatch === 'full' &&\n      (segmentGroup.hasChildren() || parts.length < segments.length)) {\n    // The config is longer than the actual URL but we are looking for a full match, return null\n    return null;\n  }\n\n  const posParams: {[key: string]: UrlSegment} = {};\n\n  // Check each config part against the actual URL\n  for (let index = 0; index < parts.length; index++) {\n    const part = parts[index];\n    const segment = segments[index];\n    const isParameter = part.startsWith(':');\n    if (isParameter) {\n      posParams[part.substring(1)] = segment;\n    } else if (part !== segment.path) {\n      // The actual URL part does not match the config, no match\n      return null;\n    }\n  }\n\n  return {consumed: segments.slice(0, parts.length), posParams};\n}\n"],"sourceRoot":""}