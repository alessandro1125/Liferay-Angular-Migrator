{"version":3,"sources":["../../../../../../../packages/router/src/directives/router_link_active.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {AfterContentInit, ChangeDetectorRef, ContentChildren, Directive, ElementRef, Input, OnChanges, OnDestroy, QueryList, Renderer2, SimpleChanges} from '@angular/core';\nimport {Subscription} from 'rxjs';\n\nimport {NavigationEnd, RouterEvent} from '../events';\nimport {Router} from '../router';\n\nimport {RouterLink, RouterLinkWithHref} from './router_link';\n\n\n/**\n *\n * @description\n *\n * Lets you add a CSS class to an element when the link's route becomes active.\n *\n * This directive lets you add a CSS class to an element when the link's route\n * becomes active.\n *\n * Consider the following example:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\">Bob</a>\n * ```\n *\n * When the url is either '/user' or '/user/bob', the active-link class will\n * be added to the `a` tag. If the url changes, the class will be removed.\n *\n * You can set more than one class, as follows:\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"class1 class2\">Bob</a>\n * <a routerLink=\"/user/bob\" [routerLinkActive]=\"['class1', 'class2']\">Bob</a>\n * ```\n *\n * You can configure RouterLinkActive by passing `exact: true`. This will add the classes\n * only when the url matches the link exactly.\n *\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n * true}\">Bob</a>\n * ```\n *\n * You can assign the RouterLinkActive instance to a template variable and directly check\n * the `isActive` status.\n * ```\n * <a routerLink=\"/user/bob\" routerLinkActive #rla=\"routerLinkActive\">\n *   Bob {{ rla.isActive ? '(already open)' : ''}}\n * </a>\n * ```\n *\n * Finally, you can apply the RouterLinkActive directive to an ancestor of a RouterLink.\n *\n * ```\n * <div routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact: true}\">\n *   <a routerLink=\"/user/jim\">Jim</a>\n *   <a routerLink=\"/user/bob\">Bob</a>\n * </div>\n * ```\n *\n * This will set the active-link class on the div tag if the url is either '/user/jim' or\n * '/user/bob'.\n *\n * @ngModule RouterModule\n *\n *\n */\n@Directive({\n  selector: '[routerLinkActive]',\n  exportAs: 'routerLinkActive',\n})\nexport class RouterLinkActive implements OnChanges,\n    OnDestroy, AfterContentInit {\n  // TODO(issue/24571): remove '!'.\n  @ContentChildren(RouterLink, {descendants: true})\n  links !: QueryList<RouterLink>;\n  // TODO(issue/24571): remove '!'.\n  @ContentChildren(RouterLinkWithHref, {descendants: true})\n  linksWithHrefs !: QueryList<RouterLinkWithHref>;\n\n  private classes: string[] = [];\n  private subscription: Subscription;\n  public readonly isActive: boolean = false;\n\n  @Input() routerLinkActiveOptions: {exact: boolean} = {exact: false};\n\n  constructor(\n      private router: Router, private element: ElementRef, private renderer: Renderer2,\n      private cdr: ChangeDetectorRef) {\n    this.subscription = router.events.subscribe((s: RouterEvent) => {\n      if (s instanceof NavigationEnd) {\n        this.update();\n      }\n    });\n  }\n\n\n  ngAfterContentInit(): void {\n    this.links.changes.subscribe(_ => this.update());\n    this.linksWithHrefs.changes.subscribe(_ => this.update());\n    this.update();\n  }\n\n  @Input()\n  set routerLinkActive(data: string[]|string) {\n    const classes = Array.isArray(data) ? data : data.split(' ');\n    this.classes = classes.filter(c => !!c);\n  }\n\n  ngOnChanges(changes: SimpleChanges): void { this.update(); }\n  ngOnDestroy(): void { this.subscription.unsubscribe(); }\n\n  private update(): void {\n    if (!this.links || !this.linksWithHrefs || !this.router.navigated) return;\n    Promise.resolve().then(() => {\n      const hasActiveLinks = this.hasActiveLinks();\n      if (this.isActive !== hasActiveLinks) {\n        (this as any).isActive = hasActiveLinks;\n        this.classes.forEach((c) => {\n          if (hasActiveLinks) {\n            this.renderer.addClass(this.element.nativeElement, c);\n          } else {\n            this.renderer.removeClass(this.element.nativeElement, c);\n          }\n        });\n      }\n    });\n  }\n\n  private isLinkActive(router: Router): (link: (RouterLink|RouterLinkWithHref)) => boolean {\n    return (link: RouterLink | RouterLinkWithHref) =>\n               router.isActive(link.urlTree, this.routerLinkActiveOptions.exact);\n  }\n\n  private hasActiveLinks(): boolean {\n    return this.links.some(this.isLinkActive(this.router)) ||\n        this.linksWithHrefs.some(this.isLinkActive(this.router));\n  }\n}\n"],"sourceRoot":""}