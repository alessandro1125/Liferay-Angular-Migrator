{"version":3,"sources":["router.umd.js"],"names":["global","factory","exports","module","require","define","amd","ng","router","core","rxjs","operators","common","platformBrowser","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__values","o","m","Symbol","iterator","next","value","done","__read","ar","e","push","error","__spread","concat","RouterEvent","id","url","NavigationStart","_super","navigationTrigger","restoredState","_this","toString","NavigationEnd","urlAfterRedirects","NavigationCancel","reason","NavigationError","RoutesRecognized","state","GuardsCheckStart","GuardsCheckEnd","shouldActivate","ResolveStart","ResolveEnd","RouteConfigLoadStart","route","path","RouteConfigLoadEnd","ChildActivationStart","snapshot","routeConfig","ChildActivationEnd","ActivationStart","ActivationEnd","Scroll","routerEvent","position","anchor","pos","EmptyOutletComponent","Component","template","PRIMARY_OUTLET","ParamsAsMap","params","has","name","get","v","isArray","getAll","keys","enumerable","configurable","convertToParamMap","NAVIGATION_CANCELING_ERROR","navigationCancelingError","message","Error","isNavigationCancelingError","defaultUrlMatcher","segments","segmentGroup","parts","split","pathMatch","hasChildren","posParams","index","part","segment","isParameter","startsWith","substring","consumed","slice","LoadedRouterConfig","routes","validateConfig","config","parentPath","fullPath","getFullPath","validateNode","component","children","loadChildren","outlet","redirectTo","matcher","charAt","exp","currentRoute","standardizeConfig","map","shallowEqualArrays","a","shallowEqual","k1","k2","flatten","arr","last","forEach","callback","prop","waitForMap","obj","fn","of","waitHead","waitTail","res","k","mapped","pipe","concatAll","andObservables","observables","mergeAll","every","result","wrapIntoObservable","ɵisObservable","ɵisPromise","from","Promise","resolve","createEmptyUrlTree","UrlTree","UrlSegmentGroup","containsTree","container","containee","exact","equalQueryParams","queryParams","equalSegmentGroups","root","containsQueryParams","containsSegmentGroup","equalPath","numberOfChildren","containsSegmentGroupHelper","containeePaths","current","fragment","_queryParamMap","DEFAULT_SERIALIZER","serialize","parent","serializePaths","UrlSegment","parameters","_parameterMap","serializePath","equalSegments","as","bs","mapChildrenIntoArray","child","childOutlet","UrlSerializer","DefaultUrlSerializer","parse","UrlParser","parseRootSegment","parseQueryParams","parseFragment","tree","serializeSegment","query","serializeQueryParams","encodeUriFragment","join","primary","children_1","encodeUriString","encodeURIComponent","replace","encodeUriQuery","encodeURI","encodeUriSegment","decode","decodeURIComponent","decodeQuery","serializeMatrixParams","strParams","SEGMENT_RE","matchSegments","str","match","QUERY_PARAM_RE","matchQueryParams","QUERY_PARAM_VALUE_RE","matchUrlQueryParamValue","remaining","consumeOptional","peekStartsWith","parseChildren","parseQueryParam","parseSegment","capture","parseParens","parseMatrixParams","parseParam","valueMatch","decodedKey","decodedVal","currentVal","allowPrimary","outletName","undefined","indexOf","substr","NoMatch","AbsoluteRedirect","urlTree","noMatch","Observable","obs","absoluteRedirect","newTree","namedOutletsRedirect","canLoadFails","applyRedirects","moduleInjector","configLoader","urlSerializer","ApplyRedirects","allowRedirects","ngModule","NgModuleRef","expanded$","expandSegmentGroup","urlTrees$","rootSegmentGroup","createUrlTree","catchError","noMatchError","mapped$","rootCandidate","_a","expandChildren","expandSegment","expandSegmentAgainstRoute","first","_","EmptyError","noLeftoversInUrl","paths","getOutlet","matchSegmentAgainstRoute","expandSegmentAgainstRouteUsingRedirect","expandWildCardWithParamsAgainstRouteUsingRedirect","expandRegularSegmentAgainstRouteUsingRedirect","applyRedirectCommands","lineralizeSegments","mergeMap","newSegments","group","matched","consumedSegments","lastChild","positionalParamSegments","rawSegmentGroup","load","injector","cfg","_loadedConfig","rawSlicedSegments","childConfig$","getChildConfig","routerConfig","childModule","childConfig","slicedSegments","expanded$_1","cs","runCanLoadGuard","shouldLoad","applyRedirectCreatreUrlTree","newRoot","createSegmentGroup","createQueryParams","redirectToParams","actualParams","copySourceValue","sourceName","updatedSegments","createSegments","redirectToSegments","actualSegments","findPosParam","findOrReturn","redirectToUrlSegment","e_1","idx","actualSegments_1","actualSegments_1_1","splice","e_1_1","return","canLoad","injectionToken","guard","containsEmptyPathRedirectsWithNamedOutlets","createChildrenForEmptySegments","mergeTrivialChildren","containsEmptyPathRedirects","addEmptySegmentsToChildrenIfNeeded","e_2","routes_1","routes_1_1","isEmptyPathRedirect","e_2_1","primarySegmentGroup","e_3","routes_2","routes_2_1","e_3_1","some","Tree","_root","pathFromRoot","findNode","firstChild","siblings","findPath","filter","cc","node","_b","_c","node_1","unshift","TreeNode","nodeChildrenAsMap","RouterState","setRouterState","createEmptyState","rootComponent","createEmptyStateSnapshot","emptyUrl","BehaviorSubject","emptyParams","emptyData","emptyQueryParams","activated","ActivatedRoute","ActivatedRouteSnapshot","RouterStateSnapshot","data","futureSnapshot","_futureSnapshot","_routerState","_paramMap","inheritedParamsDataResolve","paramsInheritanceStrategy","inheritingStartingFrom","parent_1","flattenInherited","reduce","curr","_resolvedData","urlSegment","lastPathIndex","_urlSegment","_lastPathIndex","_resolve","serializeNode","advanceActivatedRoute","currentSnapshot","nextSnapshot","equalParamsAndUrlSegments","equalUrlParams","parentsMismatch","createRouterState","routeReuseStrategy","prevState","createNode","shouldReuseRoute","createOrReuseChildren","detachedRouteHandle","retrieve","setFutureSnapshotsOfActivatedRoutes","createActivatedRoute","commands","nav","computeNavigation","toRoot","startingPosition","findStartingPosition","processChildren","updateSegmentGroupChildren","updateSegmentGroup","isMatrixParams","command","outlets","segmentPath","oldSegmentGroup","newSegmentGroup","qp","replaceSegment","oldSegment","newSegment","Navigation","isAbsolute","numberOfDoubleDots","cmdWithOutlet","find","cmd","cmdIdx","outlets_1","urlPart","partIndex","Position","modifier","createPositionApplyingDoubleDots","g","ci","dd","getPath","getOutlets","startIndex","prefixedWith","slicedCommands","commandIndex","pathIndex","createNewSegmentGroup","outlets_2","currentCommandIndex","currentPathIndex","compare","createNewSegmentChildren","stringify","CanActivate","CanDeactivate","PreActivation","future","forwardEvent","canActivateChecks","canDeactivateChecks","initialize","parentContexts","futureRoot","currRoot","setupChildRouteGuards","checkGuards","isDeactivating","isActivating","canDeactivate$","runCanDeactivateChecks","canDeactivate","runCanActivateChecks","resolveData","concatMap","check","runResolve","futureNode","currNode","contexts","futurePath","prevChildren","setupRouteGuards","deactivateRouteAndItsChildren","getContext","context","shouldRunGuardsAndResolvers","runGuardsAndResolvers","mode","childName","isActivated","runCanDeactivate","fireChildActivationStart","fireActivationStart","runCanActivateChild","runCanActivate","canActivate","getToken","observable","canActivateChildGuards","reverse","extractCanActivateChild","guards","canActivateChild","resolveNode","resolvedData","key_1","getResolver","runningResolvers$","resolver","token","closestLoadedConfig","NoMatch$1","recognize","rootComponentType","relativeLinkResolution","Recognizer","split$1","processSegmentGroup","freeze","rootNode","routeState","inheritParamsAndData","routeNode","processSegment","checkOutletNameUniqueness","sortActivatedRouteSnapshots","config_1","config_1_1","processSegmentAgainstRoute","rawSegment","getData","getSourceSegmentGroup","getPathIndexShift","getResolve","match$1","nodes","sort","localeCompare","names","routeWithSameOutletName","_sourceSegment","_segmentIndexShift","containsEmptyPathMatchesWithNamedOutlets","s_1","createChildrenForEmptyPaths","containsEmptyPathMatches","s_2","addEmptyPathsToChildrenIfNeeded","emptyPathMatch","getOutlet$1","primarySegment","RouteReuseStrategy","DefaultRouteReuseStrategy","shouldDetach","store","detachedTree","shouldAttach","ROUTES","InjectionToken","RouterConfigLoader","loader","compiler","onLoadStartListener","onLoadEndListener","parentInjector","moduleFactory$","loadModuleFactory","NgModuleFactory","compileModuleAsync","UrlHandlingStrategy","DefaultUrlHandlingStrategy","shouldProcessUrl","extract","merge","newUrlPart","wholeUrl","defaultErrorHandler","defaultMalformedUriErrorHandler","defaultRouterHook","runExtras","Router","rootContexts","location","navigations","navigationId","isNgZoneEnabled","events","Subject","errorHandler","malformedUriErrorHandler","navigated","lastSuccessfulId","hooks","beforePreactivation","afterPreactivation","urlHandlingStrategy","onSameUrlNavigation","urlUpdateStrategy","onLoadStart","triggerEvent","onLoadEnd","console","ɵConsole","ngZone","NgZone","resetConfig","currentUrlTree","rawUrlTree","routerState","processNavigations","resetRootComponentType","initialNavigation","setUpLocationChangeListener","navigateByUrl","replaceUrl","locationSubscription","subscribe","change","parseUrl","source","setTimeout","scheduleNavigation","serializeUrl","event","ngOnDestroy","dispose","unsubscribe","navigationExtras","relativeTo","preserveQueryParams","queryParamsHandling","preserveFragment","isDevMode","warn","f","q","removeEmptyProps","extras","skipLocationChange","isInAngularZone","mergedTree","navigate","validateCommands","isActive","executeScheduledNavigation","promise","catch","rawUrl","lastNavigation","reject","rej","urlTransition","setBrowserUrl","then","runNavigate","precreatedState","resolvePromise","rejectPromise","urlAndSnapshot$","redirectsApplied$","appliedUrl","beforePreactivationDone$","appliedUrlTree","preActivation","preactivationSetup$","evt","preactivationCheckGuards$","preactivationResolveData$","preactivationDone$","routerState$","activateRoutes","storedState","storedUrl","navigationIsSuccessful","ActivateRoutes","activate","resetUrlToCurrentUrlTree","resetStateAndUrl","ee","isCurrentPathEqualTo","replaceState","go","futureState","currState","deactivateChildRoutes","activateChildRoutes","futureChild","childOutletName","deactivateRoutes","parentContext","detachAndStoreRouteSubtree","deactivateRouteAndOutlet","componentRef","detach","onOutletDeactivated","contexts_1","deactivate","getOrCreateContext","stored","onOutletReAttached","attachRef","attach","advanceActivatedRouteNodeAndItsChildren","parentLoadedConfig","cmpFactoryResolver","componentFactoryResolver","activateWith","RouterLink","tabIndex","renderer","el","setAttribute","nativeElement","set","preserve","onClick","attrBoolValue","Input","String","Boolean","HostListener","Function","Directive","selector","Attribute","Renderer2","ElementRef","RouterLinkWithHref","locationStrategy","subscription","updateTargetUrlAndHref","ngOnChanges","changes","button","ctrlKey","metaKey","shiftKey","href","prepareExternalUrl","HostBinding","Number","LocationStrategy","RouterLinkActive","element","cdr","classes","routerLinkActiveOptions","update","ngAfterContentInit","links","linksWithHrefs","hasActiveLinks","addClass","removeClass","isLinkActive","link","ContentChildren","descendants","QueryList","exportAs","ChangeDetectorRef","OutletContext","ChildrenOutletContexts","Map","onChildOutletCreated","onChildOutletDestroyed","RouterOutlet","changeDetector","_activatedRoute","activateEvents","EventEmitter","deactivateEvents","ngOnInit","instance","cmp","ref","activatedRoute","insert","hostView","destroy","emit","resolveComponentFactory","childContexts","OutletInjector","createComponent","markForCheck","Output","ViewContainerRef","ComponentFactoryResolver","notFoundValue","PreloadingStrategy","PreloadAllModules","preload","NoPreloading","RouterPreloader","moduleLoader","preloadingStrategy","onStartLoad","onEndLoad","setUpPreloading","processRoutes","preloadConfig","loaded$","Injectable","NgModuleFactoryLoader","Compiler","Injector","RouterScroller","viewportScroller","options","lastId","lastSource","restoredId","scrollPositionRestoration","anchorScrolling","init","setHistoryScrollRestoration","routerEventsSubscription","createScrollEvents","scrollEventsSubscription","consumeScrollEvents","getScrollPosition","scheduleScrollEvent","scrollToPosition","scrollToAnchor","ROUTER_DIRECTIVES","ROUTER_CONFIGURATION","ROUTER_FORROOT_GUARD","ROUTER_PROVIDERS","Location","provide","useClass","useFactory","setupRouter","deps","ApplicationRef","Optional","rootRoute","SystemJsNgModuleLoader","useValue","enableTracing","routerNgProbeToken","NgProbeToken","RouterModule","RouterModule_1","forRoot","providers","provideRoutes","provideForRootGuard","SkipSelf","provideLocationStrategy","PlatformLocation","Inject","APP_BASE_HREF","createRouterScroller","ViewportScroller","useExisting","multi","provideRouterInitializer","forChild","NgModule","declarations","entryComponents","scrollOffset","setOffset","platformLocationStrategy","baseHref","useHash","HashLocationStrategy","PathLocationStrategy","ANALYZE_FOR_ENTRY_COMPONENTS","opts","dom_1","ɵgetDOM","logGroup","log","logGroupEnd","RouterInitializer","initNavigation","resultOfPreactivationDone","appInitializer","LOCATION_INITIALIZED","isLegacyDisabled","isLegacyEnabled","bootstrapListener","bootstrappedComponentRef","preloader","routerScroller","components","componentTypes","complete","getAppInitializer","bind","getBootstrapListener","ROUTER_INITIALIZER","APP_INITIALIZER","APP_BOOTSTRAP_LISTENER","VERSION","Version","ɵangular_packages_router_router_a","ɵangular_packages_router_router_h","ɵangular_packages_router_router_c","ɵangular_packages_router_router_i","ɵangular_packages_router_router_j","ɵangular_packages_router_router_e","ɵangular_packages_router_router_d","ɵangular_packages_router_router_k","ɵangular_packages_router_router_g","ɵangular_packages_router_router_b","ɵangular_packages_router_router_f","ɵangular_packages_router_router_n","ɵangular_packages_router_router_l","ɵangular_packages_router_router_m","ɵEmptyOutletComponent","ɵROUTER_PROVIDERS","ɵflatten"],"mappings":"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","file":"router.umd.js","sourcesContent":["/**\n * @license Angular v6.1.10\n * (c) 2010-2018 Google, Inc. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/common'), require('@angular/platform-browser')) :\n    typeof define === 'function' && define.amd ? define('@angular/router', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/common', '@angular/platform-browser'], factory) :\n    (factory((global.ng = global.ng || {}, global.ng.router = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common,global.ng.platformBrowser));\n}(this, (function (exports,core,rxjs,operators,common,platformBrowser) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\r\n\r\n    function __decorate(decorators, target, key, desc) {\r\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n        else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n    }\r\n\r\n    function __param(paramIndex, decorator) {\r\n        return function (target, key) { decorator(target, key, paramIndex); }\r\n    }\r\n\r\n    function __metadata(metadataKey, metadataValue) {\r\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n    }\r\n\r\n    function __values(o) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n        if (m) return m.call(o);\r\n        return {\r\n            next: function () {\r\n                if (o && i >= o.length) o = void 0;\r\n                return { value: o && o[i++], done: !o };\r\n            }\r\n        };\r\n    }\r\n\r\n    function __read(o, n) {\r\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n        if (!m) return o;\r\n        var i = m.call(o), r, ar = [], e;\r\n        try {\r\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n        }\r\n        catch (error) { e = { error: error }; }\r\n        finally {\r\n            try {\r\n                if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n            }\r\n            finally { if (e) throw e.error; }\r\n        }\r\n        return ar;\r\n    }\r\n\r\n    function __spread() {\r\n        for (var ar = [], i = 0; i < arguments.length; i++)\r\n            ar = ar.concat(__read(arguments[i]));\r\n        return ar;\r\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Base for events the Router goes through, as opposed to events tied to a specific\n     * Route. `RouterEvent`s will only be fired one time for any given navigation.\n     *\n     * Example:\n     *\n     * ```\n     * class MyService {\n     *   constructor(public router: Router, logger: Logger) {\n     *     router.events.filter(e => e instanceof RouterEvent).subscribe(e => {\n     *       logger.log(e.id, e.url);\n     *     });\n     *   }\n     * }\n     * ```\n     *\n     * @experimental\n     */\n    var RouterEvent = /** @class */ (function () {\n        function RouterEvent(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url) {\n            this.id = id;\n            this.url = url;\n        }\n        return RouterEvent;\n    }());\n    /**\n     * @description\n     *\n     * Represents an event triggered when a navigation starts.\n     *\n     *\n     */\n    var NavigationStart = /** @class */ (function (_super) {\n        __extends(NavigationStart, _super);\n        function NavigationStart(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        navigationTrigger, \n        /** @docsNotRequired */\n        restoredState) {\n            if (navigationTrigger === void 0) { \n            /** @docsNotRequired */\n            navigationTrigger = 'imperative'; }\n            if (restoredState === void 0) { \n            /** @docsNotRequired */\n            restoredState = null; }\n            var _this = _super.call(this, id, url) || this;\n            _this.navigationTrigger = navigationTrigger;\n            _this.restoredState = restoredState;\n            return _this;\n        }\n        /** @docsNotRequired */\n        NavigationStart.prototype.toString = function () { return \"NavigationStart(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n        return NavigationStart;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents an event triggered when a navigation ends successfully.\n     *\n     *\n     */\n    var NavigationEnd = /** @class */ (function (_super) {\n        __extends(NavigationEnd, _super);\n        function NavigationEnd(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            return _this;\n        }\n        /** @docsNotRequired */\n        NavigationEnd.prototype.toString = function () {\n            return \"NavigationEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"')\";\n        };\n        return NavigationEnd;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents an event triggered when a navigation is canceled.\n     *\n     *\n     */\n    var NavigationCancel = /** @class */ (function (_super) {\n        __extends(NavigationCancel, _super);\n        function NavigationCancel(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        reason) {\n            var _this = _super.call(this, id, url) || this;\n            _this.reason = reason;\n            return _this;\n        }\n        /** @docsNotRequired */\n        NavigationCancel.prototype.toString = function () { return \"NavigationCancel(id: \" + this.id + \", url: '\" + this.url + \"')\"; };\n        return NavigationCancel;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents an event triggered when a navigation fails due to an unexpected error.\n     *\n     *\n     */\n    var NavigationError = /** @class */ (function (_super) {\n        __extends(NavigationError, _super);\n        function NavigationError(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        error) {\n            var _this = _super.call(this, id, url) || this;\n            _this.error = error;\n            return _this;\n        }\n        /** @docsNotRequired */\n        NavigationError.prototype.toString = function () {\n            return \"NavigationError(id: \" + this.id + \", url: '\" + this.url + \"', error: \" + this.error + \")\";\n        };\n        return NavigationError;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents an event triggered when routes are recognized.\n     *\n     *\n     */\n    var RoutesRecognized = /** @class */ (function (_super) {\n        __extends(RoutesRecognized, _super);\n        function RoutesRecognized(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects, \n        /** @docsNotRequired */\n        state) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            _this.state = state;\n            return _this;\n        }\n        /** @docsNotRequired */\n        RoutesRecognized.prototype.toString = function () {\n            return \"RoutesRecognized(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n        };\n        return RoutesRecognized;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents the start of the Guard phase of routing.\n     *\n     * @experimental\n     */\n    var GuardsCheckStart = /** @class */ (function (_super) {\n        __extends(GuardsCheckStart, _super);\n        function GuardsCheckStart(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects, \n        /** @docsNotRequired */\n        state) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            _this.state = state;\n            return _this;\n        }\n        GuardsCheckStart.prototype.toString = function () {\n            return \"GuardsCheckStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n        };\n        return GuardsCheckStart;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents the end of the Guard phase of routing.\n     *\n     * @experimental\n     */\n    var GuardsCheckEnd = /** @class */ (function (_super) {\n        __extends(GuardsCheckEnd, _super);\n        function GuardsCheckEnd(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects, \n        /** @docsNotRequired */\n        state, \n        /** @docsNotRequired */\n        shouldActivate) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            _this.state = state;\n            _this.shouldActivate = shouldActivate;\n            return _this;\n        }\n        GuardsCheckEnd.prototype.toString = function () {\n            return \"GuardsCheckEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \", shouldActivate: \" + this.shouldActivate + \")\";\n        };\n        return GuardsCheckEnd;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents the start of the Resolve phase of routing. The timing of this\n     * event may change, thus it's experimental. In the current iteration it will run\n     * in the \"resolve\" phase whether there's things to resolve or not. In the future this\n     * behavior may change to only run when there are things to be resolved.\n     *\n     * @experimental\n     */\n    var ResolveStart = /** @class */ (function (_super) {\n        __extends(ResolveStart, _super);\n        function ResolveStart(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects, \n        /** @docsNotRequired */\n        state) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            _this.state = state;\n            return _this;\n        }\n        ResolveStart.prototype.toString = function () {\n            return \"ResolveStart(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n        };\n        return ResolveStart;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents the end of the Resolve phase of routing. See note on\n     * `ResolveStart` for use of this experimental API.\n     *\n     * @experimental\n     */\n    var ResolveEnd = /** @class */ (function (_super) {\n        __extends(ResolveEnd, _super);\n        function ResolveEnd(\n        /** @docsNotRequired */\n        id, \n        /** @docsNotRequired */\n        url, \n        /** @docsNotRequired */\n        urlAfterRedirects, \n        /** @docsNotRequired */\n        state) {\n            var _this = _super.call(this, id, url) || this;\n            _this.urlAfterRedirects = urlAfterRedirects;\n            _this.state = state;\n            return _this;\n        }\n        ResolveEnd.prototype.toString = function () {\n            return \"ResolveEnd(id: \" + this.id + \", url: '\" + this.url + \"', urlAfterRedirects: '\" + this.urlAfterRedirects + \"', state: \" + this.state + \")\";\n        };\n        return ResolveEnd;\n    }(RouterEvent));\n    /**\n     * @description\n     *\n     * Represents an event triggered before lazy loading a route config.\n     *\n     * @experimental\n     */\n    var RouteConfigLoadStart = /** @class */ (function () {\n        function RouteConfigLoadStart(\n        /** @docsNotRequired */\n        route) {\n            this.route = route;\n        }\n        RouteConfigLoadStart.prototype.toString = function () { return \"RouteConfigLoadStart(path: \" + this.route.path + \")\"; };\n        return RouteConfigLoadStart;\n    }());\n    /**\n     * @description\n     *\n     * Represents an event triggered when a route has been lazy loaded.\n     *\n     * @experimental\n     */\n    var RouteConfigLoadEnd = /** @class */ (function () {\n        function RouteConfigLoadEnd(\n        /** @docsNotRequired */\n        route) {\n            this.route = route;\n        }\n        RouteConfigLoadEnd.prototype.toString = function () { return \"RouteConfigLoadEnd(path: \" + this.route.path + \")\"; };\n        return RouteConfigLoadEnd;\n    }());\n    /**\n     * @description\n     *\n     * Represents the start of end of the Resolve phase of routing. See note on\n     * `ChildActivationEnd` for use of this experimental API.\n     *\n     * @experimental\n     */\n    var ChildActivationStart = /** @class */ (function () {\n        function ChildActivationStart(\n        /** @docsNotRequired */\n        snapshot) {\n            this.snapshot = snapshot;\n        }\n        ChildActivationStart.prototype.toString = function () {\n            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n            return \"ChildActivationStart(path: '\" + path + \"')\";\n        };\n        return ChildActivationStart;\n    }());\n    /**\n     * @description\n     *\n     * Represents the start of end of the Resolve phase of routing. See note on\n     * `ChildActivationStart` for use of this experimental API.\n     *\n     * @experimental\n     */\n    var ChildActivationEnd = /** @class */ (function () {\n        function ChildActivationEnd(\n        /** @docsNotRequired */\n        snapshot) {\n            this.snapshot = snapshot;\n        }\n        ChildActivationEnd.prototype.toString = function () {\n            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n            return \"ChildActivationEnd(path: '\" + path + \"')\";\n        };\n        return ChildActivationEnd;\n    }());\n    /**\n     * @description\n     *\n     * Represents the start of end of the Resolve phase of routing. See note on\n     * `ActivationEnd` for use of this experimental API.\n     *\n     * @experimental\n     */\n    var ActivationStart = /** @class */ (function () {\n        function ActivationStart(\n        /** @docsNotRequired */\n        snapshot) {\n            this.snapshot = snapshot;\n        }\n        ActivationStart.prototype.toString = function () {\n            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n            return \"ActivationStart(path: '\" + path + \"')\";\n        };\n        return ActivationStart;\n    }());\n    /**\n     * @description\n     *\n     * Represents the start of end of the Resolve phase of routing. See note on\n     * `ActivationStart` for use of this experimental API.\n     *\n     * @experimental\n     */\n    var ActivationEnd = /** @class */ (function () {\n        function ActivationEnd(\n        /** @docsNotRequired */\n        snapshot) {\n            this.snapshot = snapshot;\n        }\n        ActivationEnd.prototype.toString = function () {\n            var path = this.snapshot.routeConfig && this.snapshot.routeConfig.path || '';\n            return \"ActivationEnd(path: '\" + path + \"')\";\n        };\n        return ActivationEnd;\n    }());\n    /**\n     * @description\n     *\n     * Represents a scrolling event.\n     */\n    var Scroll = /** @class */ (function () {\n        function Scroll(\n        /** @docsNotRequired */\n        routerEvent, \n        /** @docsNotRequired */\n        position, \n        /** @docsNotRequired */\n        anchor) {\n            this.routerEvent = routerEvent;\n            this.position = position;\n            this.anchor = anchor;\n        }\n        Scroll.prototype.toString = function () {\n            var pos = this.position ? this.position[0] + \", \" + this.position[1] : null;\n            return \"Scroll(anchor: '\" + this.anchor + \"', position: '\" + pos + \"')\";\n        };\n        return Scroll;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * This component is used internally within the router to be a placeholder when an empty\n     * router-outlet is needed. For example, with a config such as:\n     *\n     * `{path: 'parent', outlet: 'nav', children: [...]}`\n     *\n     * In order to render, there needs to be a component on this config, which will default\n     * to this `EmptyOutletComponent`.\n     */\n    var EmptyOutletComponent = /** @class */ (function () {\n        function EmptyOutletComponent() {\n        }\n        EmptyOutletComponent = __decorate([\n            core.Component({ template: \"<router-outlet></router-outlet>\" })\n        ], EmptyOutletComponent);\n        return EmptyOutletComponent;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Name of the primary outlet.\n     *\n     *\n     */\n    var PRIMARY_OUTLET = 'primary';\n    var ParamsAsMap = /** @class */ (function () {\n        function ParamsAsMap(params) {\n            this.params = params || {};\n        }\n        ParamsAsMap.prototype.has = function (name) { return this.params.hasOwnProperty(name); };\n        ParamsAsMap.prototype.get = function (name) {\n            if (this.has(name)) {\n                var v = this.params[name];\n                return Array.isArray(v) ? v[0] : v;\n            }\n            return null;\n        };\n        ParamsAsMap.prototype.getAll = function (name) {\n            if (this.has(name)) {\n                var v = this.params[name];\n                return Array.isArray(v) ? v : [v];\n            }\n            return [];\n        };\n        Object.defineProperty(ParamsAsMap.prototype, \"keys\", {\n            get: function () { return Object.keys(this.params); },\n            enumerable: true,\n            configurable: true\n        });\n        return ParamsAsMap;\n    }());\n    /**\n     * Convert a `Params` instance to a `ParamMap`.\n     *\n     *\n     */\n    function convertToParamMap(params) {\n        return new ParamsAsMap(params);\n    }\n    var NAVIGATION_CANCELING_ERROR = 'ngNavigationCancelingError';\n    function navigationCancelingError(message) {\n        var error = Error('NavigationCancelingError: ' + message);\n        error[NAVIGATION_CANCELING_ERROR] = true;\n        return error;\n    }\n    function isNavigationCancelingError(error) {\n        return error && error[NAVIGATION_CANCELING_ERROR];\n    }\n    // Matches the route configuration (`route`) against the actual URL (`segments`).\n    function defaultUrlMatcher(segments, segmentGroup, route) {\n        var parts = route.path.split('/');\n        if (parts.length > segments.length) {\n            // The actual URL is shorter than the config, no match\n            return null;\n        }\n        if (route.pathMatch === 'full' &&\n            (segmentGroup.hasChildren() || parts.length < segments.length)) {\n            // The config is longer than the actual URL but we are looking for a full match, return null\n            return null;\n        }\n        var posParams = {};\n        // Check each config part against the actual URL\n        for (var index = 0; index < parts.length; index++) {\n            var part = parts[index];\n            var segment = segments[index];\n            var isParameter = part.startsWith(':');\n            if (isParameter) {\n                posParams[part.substring(1)] = segment;\n            }\n            else if (part !== segment.path) {\n                // The actual URL part does not match the config, no match\n                return null;\n            }\n        }\n        return { consumed: segments.slice(0, parts.length), posParams: posParams };\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var LoadedRouterConfig = /** @class */ (function () {\n        function LoadedRouterConfig(routes, module) {\n            this.routes = routes;\n            this.module = module;\n        }\n        return LoadedRouterConfig;\n    }());\n    function validateConfig(config, parentPath) {\n        if (parentPath === void 0) { parentPath = ''; }\n        // forEach doesn't iterate undefined values\n        for (var i = 0; i < config.length; i++) {\n            var route = config[i];\n            var fullPath = getFullPath(parentPath, route);\n            validateNode(route, fullPath);\n        }\n    }\n    function validateNode(route, fullPath) {\n        if (!route) {\n            throw new Error(\"\\n      Invalid configuration of route '\" + fullPath + \"': Encountered undefined route.\\n      The reason might be an extra comma.\\n\\n      Example:\\n      const routes: Routes = [\\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\\n        { path: 'detail/:id', component: HeroDetailComponent }\\n      ];\\n    \");\n        }\n        if (Array.isArray(route)) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': Array cannot be specified\");\n        }\n        if (!route.component && !route.children && !route.loadChildren &&\n            (route.outlet && route.outlet !== PRIMARY_OUTLET)) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': a componentless route without children or loadChildren cannot have a named outlet set\");\n        }\n        if (route.redirectTo && route.children) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and children cannot be used together\");\n        }\n        if (route.redirectTo && route.loadChildren) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and loadChildren cannot be used together\");\n        }\n        if (route.children && route.loadChildren) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': children and loadChildren cannot be used together\");\n        }\n        if (route.redirectTo && route.component) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': redirectTo and component cannot be used together\");\n        }\n        if (route.path && route.matcher) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path and matcher cannot be used together\");\n        }\n        if (route.redirectTo === void 0 && !route.component && !route.children && !route.loadChildren) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"'. One of the following must be provided: component, redirectTo, children or loadChildren\");\n        }\n        if (route.path === void 0 && route.matcher === void 0) {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': routes must have either a path or a matcher specified\");\n        }\n        if (typeof route.path === 'string' && route.path.charAt(0) === '/') {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': path cannot start with a slash\");\n        }\n        if (route.path === '' && route.redirectTo !== void 0 && route.pathMatch === void 0) {\n            var exp = \"The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.\";\n            throw new Error(\"Invalid configuration of route '{path: \\\"\" + fullPath + \"\\\", redirectTo: \\\"\" + route.redirectTo + \"\\\"}': please provide 'pathMatch'. \" + exp);\n        }\n        if (route.pathMatch !== void 0 && route.pathMatch !== 'full' && route.pathMatch !== 'prefix') {\n            throw new Error(\"Invalid configuration of route '\" + fullPath + \"': pathMatch can only be set to 'prefix' or 'full'\");\n        }\n        if (route.children) {\n            validateConfig(route.children, fullPath);\n        }\n    }\n    function getFullPath(parentPath, currentRoute) {\n        if (!currentRoute) {\n            return parentPath;\n        }\n        if (!parentPath && !currentRoute.path) {\n            return '';\n        }\n        else if (parentPath && !currentRoute.path) {\n            return parentPath + \"/\";\n        }\n        else if (!parentPath && currentRoute.path) {\n            return currentRoute.path;\n        }\n        else {\n            return parentPath + \"/\" + currentRoute.path;\n        }\n    }\n    /**\n     * Makes a copy of the config and adds any default required properties.\n     */\n    function standardizeConfig(r) {\n        var children = r.children && r.children.map(standardizeConfig);\n        var c = children ? __assign({}, r, { children: children }) : __assign({}, r);\n        if (!c.component && (children || c.loadChildren) && (c.outlet && c.outlet !== PRIMARY_OUTLET)) {\n            c.component = EmptyOutletComponent;\n        }\n        return c;\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function shallowEqualArrays(a, b) {\n        if (a.length !== b.length)\n            return false;\n        for (var i = 0; i < a.length; ++i) {\n            if (!shallowEqual(a[i], b[i]))\n                return false;\n        }\n        return true;\n    }\n    function shallowEqual(a, b) {\n        var k1 = Object.keys(a);\n        var k2 = Object.keys(b);\n        if (k1.length != k2.length) {\n            return false;\n        }\n        var key;\n        for (var i = 0; i < k1.length; i++) {\n            key = k1[i];\n            if (a[key] !== b[key]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Flattens single-level nested arrays.\n     */\n    function flatten(arr) {\n        return Array.prototype.concat.apply([], arr);\n    }\n    /**\n     * Return the last element of an array.\n     */\n    function last(a) {\n        return a.length > 0 ? a[a.length - 1] : null;\n    }\n    function forEach(map, callback) {\n        for (var prop in map) {\n            if (map.hasOwnProperty(prop)) {\n                callback(map[prop], prop);\n            }\n        }\n    }\n    function waitForMap(obj, fn) {\n        if (Object.keys(obj).length === 0) {\n            return rxjs.of({});\n        }\n        var waitHead = [];\n        var waitTail = [];\n        var res = {};\n        forEach(obj, function (a, k) {\n            var mapped = fn(k, a).pipe(operators.map(function (r) { return res[k] = r; }));\n            if (k === PRIMARY_OUTLET) {\n                waitHead.push(mapped);\n            }\n            else {\n                waitTail.push(mapped);\n            }\n        });\n        // Closure compiler has problem with using spread operator here. So just using Array.concat.\n        return rxjs.of.apply(null, waitHead.concat(waitTail)).pipe(operators.concatAll(), operators.last(), operators.map(function () { return res; }));\n    }\n    /**\n     * ANDs Observables by merging all input observables, reducing to an Observable verifying all\n     * input Observables return `true`.\n     */\n    function andObservables(observables) {\n        return observables.pipe(operators.mergeAll(), operators.every(function (result) { return result === true; }));\n    }\n    function wrapIntoObservable(value) {\n        if (core.ɵisObservable(value)) {\n            return value;\n        }\n        if (core.ɵisPromise(value)) {\n            // Use `Promise.resolve()` to wrap promise-like instances.\n            // Required ie when a Resolver returns a AngularJS `$q` promise to correctly trigger the\n            // change detection.\n            return rxjs.from(Promise.resolve(value));\n        }\n        return rxjs.of(value);\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function createEmptyUrlTree() {\n        return new UrlTree(new UrlSegmentGroup([], {}), {}, null);\n    }\n    function containsTree(container, containee, exact) {\n        if (exact) {\n            return equalQueryParams(container.queryParams, containee.queryParams) &&\n                equalSegmentGroups(container.root, containee.root);\n        }\n        return containsQueryParams(container.queryParams, containee.queryParams) &&\n            containsSegmentGroup(container.root, containee.root);\n    }\n    function equalQueryParams(container, containee) {\n        // TODO: This does not handle array params correctly.\n        return shallowEqual(container, containee);\n    }\n    function equalSegmentGroups(container, containee) {\n        if (!equalPath(container.segments, containee.segments))\n            return false;\n        if (container.numberOfChildren !== containee.numberOfChildren)\n            return false;\n        for (var c in containee.children) {\n            if (!container.children[c])\n                return false;\n            if (!equalSegmentGroups(container.children[c], containee.children[c]))\n                return false;\n        }\n        return true;\n    }\n    function containsQueryParams(container, containee) {\n        // TODO: This does not handle array params correctly.\n        return Object.keys(containee).length <= Object.keys(container).length &&\n            Object.keys(containee).every(function (key) { return containee[key] === container[key]; });\n    }\n    function containsSegmentGroup(container, containee) {\n        return containsSegmentGroupHelper(container, containee, containee.segments);\n    }\n    function containsSegmentGroupHelper(container, containee, containeePaths) {\n        if (container.segments.length > containeePaths.length) {\n            var current = container.segments.slice(0, containeePaths.length);\n            if (!equalPath(current, containeePaths))\n                return false;\n            if (containee.hasChildren())\n                return false;\n            return true;\n        }\n        else if (container.segments.length === containeePaths.length) {\n            if (!equalPath(container.segments, containeePaths))\n                return false;\n            for (var c in containee.children) {\n                if (!container.children[c])\n                    return false;\n                if (!containsSegmentGroup(container.children[c], containee.children[c]))\n                    return false;\n            }\n            return true;\n        }\n        else {\n            var current = containeePaths.slice(0, container.segments.length);\n            var next = containeePaths.slice(container.segments.length);\n            if (!equalPath(container.segments, current))\n                return false;\n            if (!container.children[PRIMARY_OUTLET])\n                return false;\n            return containsSegmentGroupHelper(container.children[PRIMARY_OUTLET], containee, next);\n        }\n    }\n    /**\n     * @description\n     *\n     * Represents the parsed URL.\n     *\n     * Since a router state is a tree, and the URL is nothing but a serialized state, the URL is a\n     * serialized tree.\n     * UrlTree is a data structure that provides a lot of affordances in dealing with URLs\n     *\n     * @usageNotes\n     * ### Example\n     *\n     * ```\n     * @Component({templateUrl:'template.html'})\n     * class MyComponent {\n     *   constructor(router: Router) {\n     *     const tree: UrlTree =\n     *       router.parseUrl('/team/33/(user/victor//support:help)?debug=true#fragment');\n     *     const f = tree.fragment; // return 'fragment'\n     *     const q = tree.queryParams; // returns {debug: 'true'}\n     *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n     *     const s: UrlSegment[] = g.segments; // returns 2 segments 'team' and '33'\n     *     g.children[PRIMARY_OUTLET].segments; // returns 2 segments 'user' and 'victor'\n     *     g.children['support'].segments; // return 1 segment 'help'\n     *   }\n     * }\n     * ```\n     *\n     *\n     */\n    var UrlTree = /** @class */ (function () {\n        /** @internal */\n        function UrlTree(\n        /** The root segment group of the URL tree */\n        root, \n        /** The query params of the URL */\n        queryParams, \n        /** The fragment of the URL */\n        fragment) {\n            this.root = root;\n            this.queryParams = queryParams;\n            this.fragment = fragment;\n        }\n        Object.defineProperty(UrlTree.prototype, \"queryParamMap\", {\n            get: function () {\n                if (!this._queryParamMap) {\n                    this._queryParamMap = convertToParamMap(this.queryParams);\n                }\n                return this._queryParamMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /** @docsNotRequired */\n        UrlTree.prototype.toString = function () { return DEFAULT_SERIALIZER.serialize(this); };\n        return UrlTree;\n    }());\n    /**\n     * @description\n     *\n     * Represents the parsed URL segment group.\n     *\n     * See `UrlTree` for more information.\n     *\n     *\n     */\n    var UrlSegmentGroup = /** @class */ (function () {\n        function UrlSegmentGroup(\n        /** The URL segments of this group. See `UrlSegment` for more information */\n        segments, \n        /** The list of children of this group */\n        children) {\n            var _this = this;\n            this.segments = segments;\n            this.children = children;\n            /** The parent node in the url tree */\n            this.parent = null;\n            forEach(children, function (v, k) { return v.parent = _this; });\n        }\n        /** Whether the segment has child segments */\n        UrlSegmentGroup.prototype.hasChildren = function () { return this.numberOfChildren > 0; };\n        Object.defineProperty(UrlSegmentGroup.prototype, \"numberOfChildren\", {\n            /** Number of child segments */\n            get: function () { return Object.keys(this.children).length; },\n            enumerable: true,\n            configurable: true\n        });\n        /** @docsNotRequired */\n        UrlSegmentGroup.prototype.toString = function () { return serializePaths(this); };\n        return UrlSegmentGroup;\n    }());\n    /**\n     * @description\n     *\n     * Represents a single URL segment.\n     *\n     * A UrlSegment is a part of a URL between the two slashes. It contains a path and the matrix\n     * parameters associated with the segment.\n     *\n     * @usageNotes\n     * ### Example\n     *\n     * ```\n     * @Component({templateUrl:'template.html'})\n     * class MyComponent {\n     *   constructor(router: Router) {\n     *     const tree: UrlTree = router.parseUrl('/team;id=33');\n     *     const g: UrlSegmentGroup = tree.root.children[PRIMARY_OUTLET];\n     *     const s: UrlSegment[] = g.segments;\n     *     s[0].path; // returns 'team'\n     *     s[0].parameters; // returns {id: 33}\n     *   }\n     * }\n     * ```\n     *\n     *\n     */\n    var UrlSegment = /** @class */ (function () {\n        function UrlSegment(\n        /** The path part of a URL segment */\n        path, \n        /** The matrix parameters associated with a segment */\n        parameters) {\n            this.path = path;\n            this.parameters = parameters;\n        }\n        Object.defineProperty(UrlSegment.prototype, \"parameterMap\", {\n            get: function () {\n                if (!this._parameterMap) {\n                    this._parameterMap = convertToParamMap(this.parameters);\n                }\n                return this._parameterMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /** @docsNotRequired */\n        UrlSegment.prototype.toString = function () { return serializePath(this); };\n        return UrlSegment;\n    }());\n    function equalSegments(as, bs) {\n        return equalPath(as, bs) && as.every(function (a, i) { return shallowEqual(a.parameters, bs[i].parameters); });\n    }\n    function equalPath(as, bs) {\n        if (as.length !== bs.length)\n            return false;\n        return as.every(function (a, i) { return a.path === bs[i].path; });\n    }\n    function mapChildrenIntoArray(segment, fn) {\n        var res = [];\n        forEach(segment.children, function (child, childOutlet) {\n            if (childOutlet === PRIMARY_OUTLET) {\n                res = res.concat(fn(child, childOutlet));\n            }\n        });\n        forEach(segment.children, function (child, childOutlet) {\n            if (childOutlet !== PRIMARY_OUTLET) {\n                res = res.concat(fn(child, childOutlet));\n            }\n        });\n        return res;\n    }\n    /**\n     * @description\n     *\n     * Serializes and deserializes a URL string into a URL tree.\n     *\n     * The url serialization strategy is customizable. You can\n     * make all URLs case insensitive by providing a custom UrlSerializer.\n     *\n     * See `DefaultUrlSerializer` for an example of a URL serializer.\n     *\n     *\n     */\n    var UrlSerializer = /** @class */ (function () {\n        function UrlSerializer() {\n        }\n        return UrlSerializer;\n    }());\n    /**\n     * @description\n     *\n     * A default implementation of the `UrlSerializer`.\n     *\n     * Example URLs:\n     *\n     * ```\n     * /inbox/33(popup:compose)\n     * /inbox/33;open=true/messages/44\n     * ```\n     *\n     * DefaultUrlSerializer uses parentheses to serialize secondary segments (e.g., popup:compose), the\n     * colon syntax to specify the outlet, and the ';parameter=value' syntax (e.g., open=true) to\n     * specify route specific parameters.\n     *\n     *\n     */\n    var DefaultUrlSerializer = /** @class */ (function () {\n        function DefaultUrlSerializer() {\n        }\n        /** Parses a url into a `UrlTree` */\n        DefaultUrlSerializer.prototype.parse = function (url) {\n            var p = new UrlParser(url);\n            return new UrlTree(p.parseRootSegment(), p.parseQueryParams(), p.parseFragment());\n        };\n        /** Converts a `UrlTree` into a url */\n        DefaultUrlSerializer.prototype.serialize = function (tree) {\n            var segment = \"/\" + serializeSegment(tree.root, true);\n            var query = serializeQueryParams(tree.queryParams);\n            var fragment = typeof tree.fragment === \"string\" ? \"#\" + encodeUriFragment(tree.fragment) : '';\n            return \"\" + segment + query + fragment;\n        };\n        return DefaultUrlSerializer;\n    }());\n    var DEFAULT_SERIALIZER = new DefaultUrlSerializer();\n    function serializePaths(segment) {\n        return segment.segments.map(function (p) { return serializePath(p); }).join('/');\n    }\n    function serializeSegment(segment, root) {\n        if (!segment.hasChildren()) {\n            return serializePaths(segment);\n        }\n        if (root) {\n            var primary = segment.children[PRIMARY_OUTLET] ?\n                serializeSegment(segment.children[PRIMARY_OUTLET], false) :\n                '';\n            var children_1 = [];\n            forEach(segment.children, function (v, k) {\n                if (k !== PRIMARY_OUTLET) {\n                    children_1.push(k + \":\" + serializeSegment(v, false));\n                }\n            });\n            return children_1.length > 0 ? primary + \"(\" + children_1.join('//') + \")\" : primary;\n        }\n        else {\n            var children = mapChildrenIntoArray(segment, function (v, k) {\n                if (k === PRIMARY_OUTLET) {\n                    return [serializeSegment(segment.children[PRIMARY_OUTLET], false)];\n                }\n                return [k + \":\" + serializeSegment(v, false)];\n            });\n            return serializePaths(segment) + \"/(\" + children.join('//') + \")\";\n        }\n    }\n    /**\n     * Encodes a URI string with the default encoding. This function will only ever be called from\n     * `encodeUriQuery` or `encodeUriSegment` as it's the base set of encodings to be used. We need\n     * a custom encoding because encodeURIComponent is too aggressive and encodes stuff that doesn't\n     * have to be encoded per https://url.spec.whatwg.org.\n     */\n    function encodeUriString(s) {\n        return encodeURIComponent(s)\n            .replace(/%40/g, '@')\n            .replace(/%3A/gi, ':')\n            .replace(/%24/g, '$')\n            .replace(/%2C/gi, ',');\n    }\n    /**\n     * This function should be used to encode both keys and values in a query string key/value. In\n     * the following URL, you need to call encodeUriQuery on \"k\" and \"v\":\n     *\n     * http://www.site.org/html;mk=mv?k=v#f\n     */\n    function encodeUriQuery(s) {\n        return encodeUriString(s).replace(/%3B/gi, ';');\n    }\n    /**\n     * This function should be used to encode a URL fragment. In the following URL, you need to call\n     * encodeUriFragment on \"f\":\n     *\n     * http://www.site.org/html;mk=mv?k=v#f\n     */\n    function encodeUriFragment(s) {\n        return encodeURI(s);\n    }\n    /**\n     * This function should be run on any URI segment as well as the key and value in a key/value\n     * pair for matrix params. In the following URL, you need to call encodeUriSegment on \"html\",\n     * \"mk\", and \"mv\":\n     *\n     * http://www.site.org/html;mk=mv?k=v#f\n     */\n    function encodeUriSegment(s) {\n        return encodeUriString(s).replace(/\\(/g, '%28').replace(/\\)/g, '%29').replace(/%26/gi, '&');\n    }\n    function decode(s) {\n        return decodeURIComponent(s);\n    }\n    // Query keys/values should have the \"+\" replaced first, as \"+\" in a query string is \" \".\n    // decodeURIComponent function will not decode \"+\" as a space.\n    function decodeQuery(s) {\n        return decode(s.replace(/\\+/g, '%20'));\n    }\n    function serializePath(path) {\n        return \"\" + encodeUriSegment(path.path) + serializeMatrixParams(path.parameters);\n    }\n    function serializeMatrixParams(params) {\n        return Object.keys(params)\n            .map(function (key) { return \";\" + encodeUriSegment(key) + \"=\" + encodeUriSegment(params[key]); })\n            .join('');\n    }\n    function serializeQueryParams(params) {\n        var strParams = Object.keys(params).map(function (name) {\n            var value = params[name];\n            return Array.isArray(value) ?\n                value.map(function (v) { return encodeUriQuery(name) + \"=\" + encodeUriQuery(v); }).join('&') :\n                encodeUriQuery(name) + \"=\" + encodeUriQuery(value);\n        });\n        return strParams.length ? \"?\" + strParams.join(\"&\") : '';\n    }\n    var SEGMENT_RE = /^[^\\/()?;=#]+/;\n    function matchSegments(str) {\n        var match = str.match(SEGMENT_RE);\n        return match ? match[0] : '';\n    }\n    var QUERY_PARAM_RE = /^[^=?&#]+/;\n    // Return the name of the query param at the start of the string or an empty string\n    function matchQueryParams(str) {\n        var match = str.match(QUERY_PARAM_RE);\n        return match ? match[0] : '';\n    }\n    var QUERY_PARAM_VALUE_RE = /^[^?&#]+/;\n    // Return the value of the query param at the start of the string or an empty string\n    function matchUrlQueryParamValue(str) {\n        var match = str.match(QUERY_PARAM_VALUE_RE);\n        return match ? match[0] : '';\n    }\n    var UrlParser = /** @class */ (function () {\n        function UrlParser(url) {\n            this.url = url;\n            this.remaining = url;\n        }\n        UrlParser.prototype.parseRootSegment = function () {\n            this.consumeOptional('/');\n            if (this.remaining === '' || this.peekStartsWith('?') || this.peekStartsWith('#')) {\n                return new UrlSegmentGroup([], {});\n            }\n            // The root segment group never has segments\n            return new UrlSegmentGroup([], this.parseChildren());\n        };\n        UrlParser.prototype.parseQueryParams = function () {\n            var params = {};\n            if (this.consumeOptional('?')) {\n                do {\n                    this.parseQueryParam(params);\n                } while (this.consumeOptional('&'));\n            }\n            return params;\n        };\n        UrlParser.prototype.parseFragment = function () {\n            return this.consumeOptional('#') ? decodeURIComponent(this.remaining) : null;\n        };\n        UrlParser.prototype.parseChildren = function () {\n            if (this.remaining === '') {\n                return {};\n            }\n            this.consumeOptional('/');\n            var segments = [];\n            if (!this.peekStartsWith('(')) {\n                segments.push(this.parseSegment());\n            }\n            while (this.peekStartsWith('/') && !this.peekStartsWith('//') && !this.peekStartsWith('/(')) {\n                this.capture('/');\n                segments.push(this.parseSegment());\n            }\n            var children = {};\n            if (this.peekStartsWith('/(')) {\n                this.capture('/');\n                children = this.parseParens(true);\n            }\n            var res = {};\n            if (this.peekStartsWith('(')) {\n                res = this.parseParens(false);\n            }\n            if (segments.length > 0 || Object.keys(children).length > 0) {\n                res[PRIMARY_OUTLET] = new UrlSegmentGroup(segments, children);\n            }\n            return res;\n        };\n        // parse a segment with its matrix parameters\n        // ie `name;k1=v1;k2`\n        UrlParser.prototype.parseSegment = function () {\n            var path = matchSegments(this.remaining);\n            if (path === '' && this.peekStartsWith(';')) {\n                throw new Error(\"Empty path url segment cannot have parameters: '\" + this.remaining + \"'.\");\n            }\n            this.capture(path);\n            return new UrlSegment(decode(path), this.parseMatrixParams());\n        };\n        UrlParser.prototype.parseMatrixParams = function () {\n            var params = {};\n            while (this.consumeOptional(';')) {\n                this.parseParam(params);\n            }\n            return params;\n        };\n        UrlParser.prototype.parseParam = function (params) {\n            var key = matchSegments(this.remaining);\n            if (!key) {\n                return;\n            }\n            this.capture(key);\n            var value = '';\n            if (this.consumeOptional('=')) {\n                var valueMatch = matchSegments(this.remaining);\n                if (valueMatch) {\n                    value = valueMatch;\n                    this.capture(value);\n                }\n            }\n            params[decode(key)] = decode(value);\n        };\n        // Parse a single query parameter `name[=value]`\n        UrlParser.prototype.parseQueryParam = function (params) {\n            var key = matchQueryParams(this.remaining);\n            if (!key) {\n                return;\n            }\n            this.capture(key);\n            var value = '';\n            if (this.consumeOptional('=')) {\n                var valueMatch = matchUrlQueryParamValue(this.remaining);\n                if (valueMatch) {\n                    value = valueMatch;\n                    this.capture(value);\n                }\n            }\n            var decodedKey = decodeQuery(key);\n            var decodedVal = decodeQuery(value);\n            if (params.hasOwnProperty(decodedKey)) {\n                // Append to existing values\n                var currentVal = params[decodedKey];\n                if (!Array.isArray(currentVal)) {\n                    currentVal = [currentVal];\n                    params[decodedKey] = currentVal;\n                }\n                currentVal.push(decodedVal);\n            }\n            else {\n                // Create a new value\n                params[decodedKey] = decodedVal;\n            }\n        };\n        // parse `(a/b//outlet_name:c/d)`\n        UrlParser.prototype.parseParens = function (allowPrimary) {\n            var segments = {};\n            this.capture('(');\n            while (!this.consumeOptional(')') && this.remaining.length > 0) {\n                var path = matchSegments(this.remaining);\n                var next = this.remaining[path.length];\n                // if is is not one of these characters, then the segment was unescaped\n                // or the group was not closed\n                if (next !== '/' && next !== ')' && next !== ';') {\n                    throw new Error(\"Cannot parse url '\" + this.url + \"'\");\n                }\n                var outletName = undefined;\n                if (path.indexOf(':') > -1) {\n                    outletName = path.substr(0, path.indexOf(':'));\n                    this.capture(outletName);\n                    this.capture(':');\n                }\n                else if (allowPrimary) {\n                    outletName = PRIMARY_OUTLET;\n                }\n                var children = this.parseChildren();\n                segments[outletName] = Object.keys(children).length === 1 ? children[PRIMARY_OUTLET] :\n                    new UrlSegmentGroup([], children);\n                this.consumeOptional('//');\n            }\n            return segments;\n        };\n        UrlParser.prototype.peekStartsWith = function (str) { return this.remaining.startsWith(str); };\n        // Consumes the prefix when it is present and returns whether it has been consumed\n        UrlParser.prototype.consumeOptional = function (str) {\n            if (this.peekStartsWith(str)) {\n                this.remaining = this.remaining.substring(str.length);\n                return true;\n            }\n            return false;\n        };\n        UrlParser.prototype.capture = function (str) {\n            if (!this.consumeOptional(str)) {\n                throw new Error(\"Expected \\\"\" + str + \"\\\".\");\n            }\n        };\n        return UrlParser;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var NoMatch = /** @class */ (function () {\n        function NoMatch(segmentGroup) {\n            this.segmentGroup = segmentGroup || null;\n        }\n        return NoMatch;\n    }());\n    var AbsoluteRedirect = /** @class */ (function () {\n        function AbsoluteRedirect(urlTree) {\n            this.urlTree = urlTree;\n        }\n        return AbsoluteRedirect;\n    }());\n    function noMatch(segmentGroup) {\n        return new rxjs.Observable(function (obs) { return obs.error(new NoMatch(segmentGroup)); });\n    }\n    function absoluteRedirect(newTree) {\n        return new rxjs.Observable(function (obs) { return obs.error(new AbsoluteRedirect(newTree)); });\n    }\n    function namedOutletsRedirect(redirectTo) {\n        return new rxjs.Observable(function (obs) { return obs.error(new Error(\"Only absolute redirects can have named outlets. redirectTo: '\" + redirectTo + \"'\")); });\n    }\n    function canLoadFails(route) {\n        return new rxjs.Observable(function (obs) { return obs.error(navigationCancelingError(\"Cannot load children because the guard of the route \\\"path: '\" + route.path + \"'\\\" returned false\")); });\n    }\n    /**\n     * Returns the `UrlTree` with the redirection applied.\n     *\n     * Lazy modules are loaded along the way.\n     */\n    function applyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n        return new ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config).apply();\n    }\n    var ApplyRedirects = /** @class */ (function () {\n        function ApplyRedirects(moduleInjector, configLoader, urlSerializer, urlTree, config) {\n            this.configLoader = configLoader;\n            this.urlSerializer = urlSerializer;\n            this.urlTree = urlTree;\n            this.config = config;\n            this.allowRedirects = true;\n            this.ngModule = moduleInjector.get(core.NgModuleRef);\n        }\n        ApplyRedirects.prototype.apply = function () {\n            var _this = this;\n            var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, this.urlTree.root, PRIMARY_OUTLET);\n            var urlTrees$ = expanded$.pipe(operators.map(function (rootSegmentGroup) { return _this.createUrlTree(rootSegmentGroup, _this.urlTree.queryParams, _this.urlTree.fragment); }));\n            return urlTrees$.pipe(operators.catchError(function (e) {\n                if (e instanceof AbsoluteRedirect) {\n                    // after an absolute redirect we do not apply any more redirects!\n                    _this.allowRedirects = false;\n                    // we need to run matching, so we can fetch all lazy-loaded modules\n                    return _this.match(e.urlTree);\n                }\n                if (e instanceof NoMatch) {\n                    throw _this.noMatchError(e);\n                }\n                throw e;\n            }));\n        };\n        ApplyRedirects.prototype.match = function (tree) {\n            var _this = this;\n            var expanded$ = this.expandSegmentGroup(this.ngModule, this.config, tree.root, PRIMARY_OUTLET);\n            var mapped$ = expanded$.pipe(operators.map(function (rootSegmentGroup) {\n                return _this.createUrlTree(rootSegmentGroup, tree.queryParams, tree.fragment);\n            }));\n            return mapped$.pipe(operators.catchError(function (e) {\n                if (e instanceof NoMatch) {\n                    throw _this.noMatchError(e);\n                }\n                throw e;\n            }));\n        };\n        ApplyRedirects.prototype.noMatchError = function (e) {\n            return new Error(\"Cannot match any routes. URL Segment: '\" + e.segmentGroup + \"'\");\n        };\n        ApplyRedirects.prototype.createUrlTree = function (rootCandidate, queryParams, fragment) {\n            var _a;\n            var root = rootCandidate.segments.length > 0 ?\n                new UrlSegmentGroup([], (_a = {}, _a[PRIMARY_OUTLET] = rootCandidate, _a)) :\n                rootCandidate;\n            return new UrlTree(root, queryParams, fragment);\n        };\n        ApplyRedirects.prototype.expandSegmentGroup = function (ngModule, routes, segmentGroup, outlet) {\n            if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n                return this.expandChildren(ngModule, routes, segmentGroup)\n                    .pipe(operators.map(function (children) { return new UrlSegmentGroup([], children); }));\n            }\n            return this.expandSegment(ngModule, segmentGroup, routes, segmentGroup.segments, outlet, true);\n        };\n        // Recursively expand segment groups for all the child outlets\n        ApplyRedirects.prototype.expandChildren = function (ngModule, routes, segmentGroup) {\n            var _this = this;\n            return waitForMap(segmentGroup.children, function (childOutlet, child) { return _this.expandSegmentGroup(ngModule, routes, child, childOutlet); });\n        };\n        ApplyRedirects.prototype.expandSegment = function (ngModule, segmentGroup, routes, segments, outlet, allowRedirects) {\n            var _this = this;\n            return rxjs.of.apply(void 0, __spread(routes)).pipe(operators.map(function (r) {\n                var expanded$ = _this.expandSegmentAgainstRoute(ngModule, segmentGroup, routes, r, segments, outlet, allowRedirects);\n                return expanded$.pipe(operators.catchError(function (e) {\n                    if (e instanceof NoMatch) {\n                        // TODO(i): this return type doesn't match the declared Observable<UrlSegmentGroup> -\n                        // talk to Jason\n                        return rxjs.of(null);\n                    }\n                    throw e;\n                }));\n            }), operators.concatAll(), operators.first(function (s) { return !!s; }), operators.catchError(function (e, _) {\n                if (e instanceof rxjs.EmptyError || e.name === 'EmptyError') {\n                    if (_this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n                        return rxjs.of(new UrlSegmentGroup([], {}));\n                    }\n                    throw new NoMatch(segmentGroup);\n                }\n                throw e;\n            }));\n        };\n        ApplyRedirects.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n            return segments.length === 0 && !segmentGroup.children[outlet];\n        };\n        ApplyRedirects.prototype.expandSegmentAgainstRoute = function (ngModule, segmentGroup, routes, route, paths, outlet, allowRedirects) {\n            if (getOutlet(route) !== outlet) {\n                return noMatch(segmentGroup);\n            }\n            if (route.redirectTo === undefined) {\n                return this.matchSegmentAgainstRoute(ngModule, segmentGroup, route, paths);\n            }\n            if (allowRedirects && this.allowRedirects) {\n                return this.expandSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, paths, outlet);\n            }\n            return noMatch(segmentGroup);\n        };\n        ApplyRedirects.prototype.expandSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n            if (route.path === '**') {\n                return this.expandWildCardWithParamsAgainstRouteUsingRedirect(ngModule, routes, route, outlet);\n            }\n            return this.expandRegularSegmentAgainstRouteUsingRedirect(ngModule, segmentGroup, routes, route, segments, outlet);\n        };\n        ApplyRedirects.prototype.expandWildCardWithParamsAgainstRouteUsingRedirect = function (ngModule, routes, route, outlet) {\n            var _this = this;\n            var newTree = this.applyRedirectCommands([], route.redirectTo, {});\n            if (route.redirectTo.startsWith('/')) {\n                return absoluteRedirect(newTree);\n            }\n            return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {\n                var group = new UrlSegmentGroup(newSegments, {});\n                return _this.expandSegment(ngModule, group, routes, newSegments, outlet, false);\n            }));\n        };\n        ApplyRedirects.prototype.expandRegularSegmentAgainstRouteUsingRedirect = function (ngModule, segmentGroup, routes, route, segments, outlet) {\n            var _this = this;\n            var _a = match(segmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild, positionalParamSegments = _a.positionalParamSegments;\n            if (!matched)\n                return noMatch(segmentGroup);\n            var newTree = this.applyRedirectCommands(consumedSegments, route.redirectTo, positionalParamSegments);\n            if (route.redirectTo.startsWith('/')) {\n                return absoluteRedirect(newTree);\n            }\n            return this.lineralizeSegments(route, newTree).pipe(operators.mergeMap(function (newSegments) {\n                return _this.expandSegment(ngModule, segmentGroup, routes, newSegments.concat(segments.slice(lastChild)), outlet, false);\n            }));\n        };\n        ApplyRedirects.prototype.matchSegmentAgainstRoute = function (ngModule, rawSegmentGroup, route, segments) {\n            var _this = this;\n            if (route.path === '**') {\n                if (route.loadChildren) {\n                    return this.configLoader.load(ngModule.injector, route)\n                        .pipe(operators.map(function (cfg) {\n                        route._loadedConfig = cfg;\n                        return new UrlSegmentGroup(segments, {});\n                    }));\n                }\n                return rxjs.of(new UrlSegmentGroup(segments, {}));\n            }\n            var _a = match(rawSegmentGroup, route, segments), matched = _a.matched, consumedSegments = _a.consumedSegments, lastChild = _a.lastChild;\n            if (!matched)\n                return noMatch(rawSegmentGroup);\n            var rawSlicedSegments = segments.slice(lastChild);\n            var childConfig$ = this.getChildConfig(ngModule, route);\n            return childConfig$.pipe(operators.mergeMap(function (routerConfig) {\n                var childModule = routerConfig.module;\n                var childConfig = routerConfig.routes;\n                var _a = split(rawSegmentGroup, consumedSegments, rawSlicedSegments, childConfig), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n                if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n                    var expanded$_1 = _this.expandChildren(childModule, childConfig, segmentGroup);\n                    return expanded$_1.pipe(operators.map(function (children) { return new UrlSegmentGroup(consumedSegments, children); }));\n                }\n                if (childConfig.length === 0 && slicedSegments.length === 0) {\n                    return rxjs.of(new UrlSegmentGroup(consumedSegments, {}));\n                }\n                var expanded$ = _this.expandSegment(childModule, segmentGroup, childConfig, slicedSegments, PRIMARY_OUTLET, true);\n                return expanded$.pipe(operators.map(function (cs) {\n                    return new UrlSegmentGroup(consumedSegments.concat(cs.segments), cs.children);\n                }));\n            }));\n        };\n        ApplyRedirects.prototype.getChildConfig = function (ngModule, route) {\n            var _this = this;\n            if (route.children) {\n                // The children belong to the same module\n                return rxjs.of(new LoadedRouterConfig(route.children, ngModule));\n            }\n            if (route.loadChildren) {\n                // lazy children belong to the loaded module\n                if (route._loadedConfig !== undefined) {\n                    return rxjs.of(route._loadedConfig);\n                }\n                return runCanLoadGuard(ngModule.injector, route).pipe(operators.mergeMap(function (shouldLoad) {\n                    if (shouldLoad) {\n                        return _this.configLoader.load(ngModule.injector, route)\n                            .pipe(operators.map(function (cfg) {\n                            route._loadedConfig = cfg;\n                            return cfg;\n                        }));\n                    }\n                    return canLoadFails(route);\n                }));\n            }\n            return rxjs.of(new LoadedRouterConfig([], ngModule));\n        };\n        ApplyRedirects.prototype.lineralizeSegments = function (route, urlTree) {\n            var res = [];\n            var c = urlTree.root;\n            while (true) {\n                res = res.concat(c.segments);\n                if (c.numberOfChildren === 0) {\n                    return rxjs.of(res);\n                }\n                if (c.numberOfChildren > 1 || !c.children[PRIMARY_OUTLET]) {\n                    return namedOutletsRedirect(route.redirectTo);\n                }\n                c = c.children[PRIMARY_OUTLET];\n            }\n        };\n        ApplyRedirects.prototype.applyRedirectCommands = function (segments, redirectTo, posParams) {\n            return this.applyRedirectCreatreUrlTree(redirectTo, this.urlSerializer.parse(redirectTo), segments, posParams);\n        };\n        ApplyRedirects.prototype.applyRedirectCreatreUrlTree = function (redirectTo, urlTree, segments, posParams) {\n            var newRoot = this.createSegmentGroup(redirectTo, urlTree.root, segments, posParams);\n            return new UrlTree(newRoot, this.createQueryParams(urlTree.queryParams, this.urlTree.queryParams), urlTree.fragment);\n        };\n        ApplyRedirects.prototype.createQueryParams = function (redirectToParams, actualParams) {\n            var res = {};\n            forEach(redirectToParams, function (v, k) {\n                var copySourceValue = typeof v === 'string' && v.startsWith(':');\n                if (copySourceValue) {\n                    var sourceName = v.substring(1);\n                    res[k] = actualParams[sourceName];\n                }\n                else {\n                    res[k] = v;\n                }\n            });\n            return res;\n        };\n        ApplyRedirects.prototype.createSegmentGroup = function (redirectTo, group, segments, posParams) {\n            var _this = this;\n            var updatedSegments = this.createSegments(redirectTo, group.segments, segments, posParams);\n            var children = {};\n            forEach(group.children, function (child, name) {\n                children[name] = _this.createSegmentGroup(redirectTo, child, segments, posParams);\n            });\n            return new UrlSegmentGroup(updatedSegments, children);\n        };\n        ApplyRedirects.prototype.createSegments = function (redirectTo, redirectToSegments, actualSegments, posParams) {\n            var _this = this;\n            return redirectToSegments.map(function (s) { return s.path.startsWith(':') ? _this.findPosParam(redirectTo, s, posParams) :\n                _this.findOrReturn(s, actualSegments); });\n        };\n        ApplyRedirects.prototype.findPosParam = function (redirectTo, redirectToUrlSegment, posParams) {\n            var pos = posParams[redirectToUrlSegment.path.substring(1)];\n            if (!pos)\n                throw new Error(\"Cannot redirect to '\" + redirectTo + \"'. Cannot find '\" + redirectToUrlSegment.path + \"'.\");\n            return pos;\n        };\n        ApplyRedirects.prototype.findOrReturn = function (redirectToUrlSegment, actualSegments) {\n            var e_1, _a;\n            var idx = 0;\n            try {\n                for (var actualSegments_1 = __values(actualSegments), actualSegments_1_1 = actualSegments_1.next(); !actualSegments_1_1.done; actualSegments_1_1 = actualSegments_1.next()) {\n                    var s = actualSegments_1_1.value;\n                    if (s.path === redirectToUrlSegment.path) {\n                        actualSegments.splice(idx);\n                        return s;\n                    }\n                    idx++;\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (actualSegments_1_1 && !actualSegments_1_1.done && (_a = actualSegments_1.return)) _a.call(actualSegments_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return redirectToUrlSegment;\n        };\n        return ApplyRedirects;\n    }());\n    function runCanLoadGuard(moduleInjector, route) {\n        var canLoad = route.canLoad;\n        if (!canLoad || canLoad.length === 0)\n            return rxjs.of(true);\n        var obs = rxjs.from(canLoad).pipe(operators.map(function (injectionToken) {\n            var guard = moduleInjector.get(injectionToken);\n            return wrapIntoObservable(guard.canLoad ? guard.canLoad(route) : guard(route));\n        }));\n        return andObservables(obs);\n    }\n    function match(segmentGroup, route, segments) {\n        if (route.path === '') {\n            if ((route.pathMatch === 'full') && (segmentGroup.hasChildren() || segments.length > 0)) {\n                return { matched: false, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n            }\n            return { matched: true, consumedSegments: [], lastChild: 0, positionalParamSegments: {} };\n        }\n        var matcher = route.matcher || defaultUrlMatcher;\n        var res = matcher(segments, segmentGroup, route);\n        if (!res) {\n            return {\n                matched: false,\n                consumedSegments: [],\n                lastChild: 0,\n                positionalParamSegments: {},\n            };\n        }\n        return {\n            matched: true,\n            consumedSegments: res.consumed,\n            lastChild: res.consumed.length,\n            positionalParamSegments: res.posParams,\n        };\n    }\n    function split(segmentGroup, consumedSegments, slicedSegments, config) {\n        if (slicedSegments.length > 0 &&\n            containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n            var s = new UrlSegmentGroup(consumedSegments, createChildrenForEmptySegments(config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n            return { segmentGroup: mergeTrivialChildren(s), slicedSegments: [] };\n        }\n        if (slicedSegments.length === 0 &&\n            containsEmptyPathRedirects(segmentGroup, slicedSegments, config)) {\n            var s = new UrlSegmentGroup(segmentGroup.segments, addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, config, segmentGroup.children));\n            return { segmentGroup: mergeTrivialChildren(s), slicedSegments: slicedSegments };\n        }\n        return { segmentGroup: segmentGroup, slicedSegments: slicedSegments };\n    }\n    function mergeTrivialChildren(s) {\n        if (s.numberOfChildren === 1 && s.children[PRIMARY_OUTLET]) {\n            var c = s.children[PRIMARY_OUTLET];\n            return new UrlSegmentGroup(s.segments.concat(c.segments), c.children);\n        }\n        return s;\n    }\n    function addEmptySegmentsToChildrenIfNeeded(segmentGroup, slicedSegments, routes, children) {\n        var e_2, _a;\n        var res = {};\n        try {\n            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n                var r = routes_1_1.value;\n                if (isEmptyPathRedirect(segmentGroup, slicedSegments, r) && !children[getOutlet(r)]) {\n                    res[getOutlet(r)] = new UrlSegmentGroup([], {});\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return __assign({}, children, res);\n    }\n    function createChildrenForEmptySegments(routes, primarySegmentGroup) {\n        var e_3, _a;\n        var res = {};\n        res[PRIMARY_OUTLET] = primarySegmentGroup;\n        try {\n            for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n                var r = routes_2_1.value;\n                if (r.path === '' && getOutlet(r) !== PRIMARY_OUTLET) {\n                    res[getOutlet(r)] = new UrlSegmentGroup([], {});\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return res;\n    }\n    function containsEmptyPathRedirectsWithNamedOutlets(segmentGroup, segments, routes) {\n        return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r) && getOutlet(r) !== PRIMARY_OUTLET; });\n    }\n    function containsEmptyPathRedirects(segmentGroup, segments, routes) {\n        return routes.some(function (r) { return isEmptyPathRedirect(segmentGroup, segments, r); });\n    }\n    function isEmptyPathRedirect(segmentGroup, segments, r) {\n        if ((segmentGroup.hasChildren() || segments.length > 0) && r.pathMatch === 'full') {\n            return false;\n        }\n        return r.path === '' && r.redirectTo !== undefined;\n    }\n    function getOutlet(route) {\n        return route.outlet || PRIMARY_OUTLET;\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var Tree = /** @class */ (function () {\n        function Tree(root) {\n            this._root = root;\n        }\n        Object.defineProperty(Tree.prototype, \"root\", {\n            get: function () { return this._root.value; },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * @internal\n         */\n        Tree.prototype.parent = function (t) {\n            var p = this.pathFromRoot(t);\n            return p.length > 1 ? p[p.length - 2] : null;\n        };\n        /**\n         * @internal\n         */\n        Tree.prototype.children = function (t) {\n            var n = findNode(t, this._root);\n            return n ? n.children.map(function (t) { return t.value; }) : [];\n        };\n        /**\n         * @internal\n         */\n        Tree.prototype.firstChild = function (t) {\n            var n = findNode(t, this._root);\n            return n && n.children.length > 0 ? n.children[0].value : null;\n        };\n        /**\n         * @internal\n         */\n        Tree.prototype.siblings = function (t) {\n            var p = findPath(t, this._root);\n            if (p.length < 2)\n                return [];\n            var c = p[p.length - 2].children.map(function (c) { return c.value; });\n            return c.filter(function (cc) { return cc !== t; });\n        };\n        /**\n         * @internal\n         */\n        Tree.prototype.pathFromRoot = function (t) { return findPath(t, this._root).map(function (s) { return s.value; }); };\n        return Tree;\n    }());\n    // DFS for the node matching the value\n    function findNode(value, node) {\n        var e_1, _a;\n        if (value === node.value)\n            return node;\n        try {\n            for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var child = _c.value;\n                var node_1 = findNode(value, child);\n                if (node_1)\n                    return node_1;\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return null;\n    }\n    // Return the path to the node with the given value using DFS\n    function findPath(value, node) {\n        var e_2, _a;\n        if (value === node.value)\n            return [node];\n        try {\n            for (var _b = __values(node.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var child = _c.value;\n                var path = findPath(value, child);\n                if (path.length) {\n                    path.unshift(node);\n                    return path;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return [];\n    }\n    var TreeNode = /** @class */ (function () {\n        function TreeNode(value, children) {\n            this.value = value;\n            this.children = children;\n        }\n        TreeNode.prototype.toString = function () { return \"TreeNode(\" + this.value + \")\"; };\n        return TreeNode;\n    }());\n    // Return the list of T indexed by outlet name\n    function nodeChildrenAsMap(node) {\n        var map = {};\n        if (node) {\n            node.children.forEach(function (child) { return map[child.value.outlet] = child; });\n        }\n        return map;\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Represents the state of the router.\n     *\n     * RouterState is a tree of activated routes. Every node in this tree knows about the \"consumed\" URL\n     * segments, the extracted parameters, and the resolved data.\n     *\n     * @usageNotes\n     * ### Example\n     *\n     * ```\n     * @Component({templateUrl:'template.html'})\n     * class MyComponent {\n     *   constructor(router: Router) {\n     *     const state: RouterState = router.routerState;\n     *     const root: ActivatedRoute = state.root;\n     *     const child = root.firstChild;\n     *     const id: Observable<string> = child.params.map(p => p.id);\n     *     //...\n     *   }\n     * }\n     * ```\n     *\n     * See `ActivatedRoute` for more information.\n     *\n     *\n     */\n    var RouterState = /** @class */ (function (_super) {\n        __extends(RouterState, _super);\n        /** @internal */\n        function RouterState(root, \n        /** The current snapshot of the router state */\n        snapshot) {\n            var _this = _super.call(this, root) || this;\n            _this.snapshot = snapshot;\n            setRouterState(_this, root);\n            return _this;\n        }\n        RouterState.prototype.toString = function () { return this.snapshot.toString(); };\n        return RouterState;\n    }(Tree));\n    function createEmptyState(urlTree, rootComponent) {\n        var snapshot = createEmptyStateSnapshot(urlTree, rootComponent);\n        var emptyUrl = new rxjs.BehaviorSubject([new UrlSegment('', {})]);\n        var emptyParams = new rxjs.BehaviorSubject({});\n        var emptyData = new rxjs.BehaviorSubject({});\n        var emptyQueryParams = new rxjs.BehaviorSubject({});\n        var fragment = new rxjs.BehaviorSubject('');\n        var activated = new ActivatedRoute(emptyUrl, emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, snapshot.root);\n        activated.snapshot = snapshot.root;\n        return new RouterState(new TreeNode(activated, []), snapshot);\n    }\n    function createEmptyStateSnapshot(urlTree, rootComponent) {\n        var emptyParams = {};\n        var emptyData = {};\n        var emptyQueryParams = {};\n        var fragment = '';\n        var activated = new ActivatedRouteSnapshot([], emptyParams, emptyQueryParams, fragment, emptyData, PRIMARY_OUTLET, rootComponent, null, urlTree.root, -1, {});\n        return new RouterStateSnapshot('', new TreeNode(activated, []));\n    }\n    /**\n     * @description\n     *\n     * Contains the information about a route associated with a component loaded in an\n     * outlet.  An `ActivatedRoute` can also be used to traverse the router state tree.\n     *\n     * ```\n     * @Component({...})\n     * class MyComponent {\n     *   constructor(route: ActivatedRoute) {\n     *     const id: Observable<string> = route.params.map(p => p.id);\n     *     const url: Observable<string> = route.url.map(segments => segments.join(''));\n     *     // route.data includes both `data` and `resolve`\n     *     const user = route.data.map(d => d.user);\n     *   }\n     * }\n     * ```\n     *\n     *\n     */\n    var ActivatedRoute = /** @class */ (function () {\n        /** @internal */\n        function ActivatedRoute(\n        /** An observable of the URL segments matched by this route */\n        url, \n        /** An observable of the matrix parameters scoped to this route */\n        params, \n        /** An observable of the query parameters shared by all the routes */\n        queryParams, \n        /** An observable of the URL fragment shared by all the routes */\n        fragment, \n        /** An observable of the static and resolved data of this route. */\n        data, \n        /** The outlet name of the route. It's a constant */\n        outlet, \n        /** The component of the route. It's a constant */\n        // TODO(vsavkin): remove |string\n        component, futureSnapshot) {\n            this.url = url;\n            this.params = params;\n            this.queryParams = queryParams;\n            this.fragment = fragment;\n            this.data = data;\n            this.outlet = outlet;\n            this.component = component;\n            this._futureSnapshot = futureSnapshot;\n        }\n        Object.defineProperty(ActivatedRoute.prototype, \"routeConfig\", {\n            /** The configuration used to match this route */\n            get: function () { return this._futureSnapshot.routeConfig; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"root\", {\n            /** The root of the router state */\n            get: function () { return this._routerState.root; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"parent\", {\n            /** The parent of this route in the router state tree */\n            get: function () { return this._routerState.parent(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"firstChild\", {\n            /** The first child of this route in the router state tree */\n            get: function () { return this._routerState.firstChild(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"children\", {\n            /** The children of this route in the router state tree */\n            get: function () { return this._routerState.children(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"pathFromRoot\", {\n            /** The path from the root of the router state tree to this route */\n            get: function () { return this._routerState.pathFromRoot(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"paramMap\", {\n            get: function () {\n                if (!this._paramMap) {\n                    this._paramMap = this.params.pipe(operators.map(function (p) { return convertToParamMap(p); }));\n                }\n                return this._paramMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRoute.prototype, \"queryParamMap\", {\n            get: function () {\n                if (!this._queryParamMap) {\n                    this._queryParamMap =\n                        this.queryParams.pipe(operators.map(function (p) { return convertToParamMap(p); }));\n                }\n                return this._queryParamMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ActivatedRoute.prototype.toString = function () {\n            return this.snapshot ? this.snapshot.toString() : \"Future(\" + this._futureSnapshot + \")\";\n        };\n        return ActivatedRoute;\n    }());\n    /**\n     * Returns the inherited params, data, and resolve for a given route.\n     * By default, this only inherits values up to the nearest path-less or component-less route.\n     * @internal\n     */\n    function inheritedParamsDataResolve(route, paramsInheritanceStrategy) {\n        if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n        var pathFromRoot = route.pathFromRoot;\n        var inheritingStartingFrom = 0;\n        if (paramsInheritanceStrategy !== 'always') {\n            inheritingStartingFrom = pathFromRoot.length - 1;\n            while (inheritingStartingFrom >= 1) {\n                var current = pathFromRoot[inheritingStartingFrom];\n                var parent_1 = pathFromRoot[inheritingStartingFrom - 1];\n                // current route is an empty path => inherits its parent's params and data\n                if (current.routeConfig && current.routeConfig.path === '') {\n                    inheritingStartingFrom--;\n                    // parent is componentless => current route should inherit its params and data\n                }\n                else if (!parent_1.component) {\n                    inheritingStartingFrom--;\n                }\n                else {\n                    break;\n                }\n            }\n        }\n        return flattenInherited(pathFromRoot.slice(inheritingStartingFrom));\n    }\n    /** @internal */\n    function flattenInherited(pathFromRoot) {\n        return pathFromRoot.reduce(function (res, curr) {\n            var params = __assign({}, res.params, curr.params);\n            var data = __assign({}, res.data, curr.data);\n            var resolve = __assign({}, res.resolve, curr._resolvedData);\n            return { params: params, data: data, resolve: resolve };\n        }, { params: {}, data: {}, resolve: {} });\n    }\n    /**\n     * @description\n     *\n     * Contains the information about a route associated with a component loaded in an\n     * outlet at a particular moment in time. ActivatedRouteSnapshot can also be used to\n     * traverse the router state tree.\n     *\n     * ```\n     * @Component({templateUrl:'./my-component.html'})\n     * class MyComponent {\n     *   constructor(route: ActivatedRoute) {\n     *     const id: string = route.snapshot.params.id;\n     *     const url: string = route.snapshot.url.join('');\n     *     const user = route.snapshot.data.user;\n     *   }\n     * }\n     * ```\n     *\n     *\n     */\n    var ActivatedRouteSnapshot = /** @class */ (function () {\n        /** @internal */\n        function ActivatedRouteSnapshot(\n        /** The URL segments matched by this route */\n        url, \n        /** The matrix parameters scoped to this route */\n        params, \n        /** The query parameters shared by all the routes */\n        queryParams, \n        /** The URL fragment shared by all the routes */\n        fragment, \n        /** The static and resolved data of this route */\n        data, \n        /** The outlet name of the route */\n        outlet, \n        /** The component of the route */\n        component, routeConfig, urlSegment, lastPathIndex, resolve) {\n            this.url = url;\n            this.params = params;\n            this.queryParams = queryParams;\n            this.fragment = fragment;\n            this.data = data;\n            this.outlet = outlet;\n            this.component = component;\n            this.routeConfig = routeConfig;\n            this._urlSegment = urlSegment;\n            this._lastPathIndex = lastPathIndex;\n            this._resolve = resolve;\n        }\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"root\", {\n            /** The root of the router state */\n            get: function () { return this._routerState.root; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"parent\", {\n            /** The parent of this route in the router state tree */\n            get: function () { return this._routerState.parent(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"firstChild\", {\n            /** The first child of this route in the router state tree */\n            get: function () { return this._routerState.firstChild(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"children\", {\n            /** The children of this route in the router state tree */\n            get: function () { return this._routerState.children(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"pathFromRoot\", {\n            /** The path from the root of the router state tree to this route */\n            get: function () { return this._routerState.pathFromRoot(this); },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"paramMap\", {\n            get: function () {\n                if (!this._paramMap) {\n                    this._paramMap = convertToParamMap(this.params);\n                }\n                return this._paramMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(ActivatedRouteSnapshot.prototype, \"queryParamMap\", {\n            get: function () {\n                if (!this._queryParamMap) {\n                    this._queryParamMap = convertToParamMap(this.queryParams);\n                }\n                return this._queryParamMap;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        ActivatedRouteSnapshot.prototype.toString = function () {\n            var url = this.url.map(function (segment) { return segment.toString(); }).join('/');\n            var matched = this.routeConfig ? this.routeConfig.path : '';\n            return \"Route(url:'\" + url + \"', path:'\" + matched + \"')\";\n        };\n        return ActivatedRouteSnapshot;\n    }());\n    /**\n     * @description\n     *\n     * Represents the state of the router at a moment in time.\n     *\n     * This is a tree of activated route snapshots. Every node in this tree knows about\n     * the \"consumed\" URL segments, the extracted parameters, and the resolved data.\n     *\n     * @usageNotes\n     * ### Example\n     *\n     * ```\n     * @Component({templateUrl:'template.html'})\n     * class MyComponent {\n     *   constructor(router: Router) {\n     *     const state: RouterState = router.routerState;\n     *     const snapshot: RouterStateSnapshot = state.snapshot;\n     *     const root: ActivatedRouteSnapshot = snapshot.root;\n     *     const child = root.firstChild;\n     *     const id: Observable<string> = child.params.map(p => p.id);\n     *     //...\n     *   }\n     * }\n     * ```\n     *\n     *\n     */\n    var RouterStateSnapshot = /** @class */ (function (_super) {\n        __extends(RouterStateSnapshot, _super);\n        /** @internal */\n        function RouterStateSnapshot(\n        /** The url from which this snapshot was created */\n        url, root) {\n            var _this = _super.call(this, root) || this;\n            _this.url = url;\n            setRouterState(_this, root);\n            return _this;\n        }\n        RouterStateSnapshot.prototype.toString = function () { return serializeNode(this._root); };\n        return RouterStateSnapshot;\n    }(Tree));\n    function setRouterState(state, node) {\n        node.value._routerState = state;\n        node.children.forEach(function (c) { return setRouterState(state, c); });\n    }\n    function serializeNode(node) {\n        var c = node.children.length > 0 ? \" { \" + node.children.map(serializeNode).join(', ') + \" } \" : '';\n        return \"\" + node.value + c;\n    }\n    /**\n     * The expectation is that the activate route is created with the right set of parameters.\n     * So we push new values into the observables only when they are not the initial values.\n     * And we detect that by checking if the snapshot field is set.\n     */\n    function advanceActivatedRoute(route) {\n        if (route.snapshot) {\n            var currentSnapshot = route.snapshot;\n            var nextSnapshot = route._futureSnapshot;\n            route.snapshot = nextSnapshot;\n            if (!shallowEqual(currentSnapshot.queryParams, nextSnapshot.queryParams)) {\n                route.queryParams.next(nextSnapshot.queryParams);\n            }\n            if (currentSnapshot.fragment !== nextSnapshot.fragment) {\n                route.fragment.next(nextSnapshot.fragment);\n            }\n            if (!shallowEqual(currentSnapshot.params, nextSnapshot.params)) {\n                route.params.next(nextSnapshot.params);\n            }\n            if (!shallowEqualArrays(currentSnapshot.url, nextSnapshot.url)) {\n                route.url.next(nextSnapshot.url);\n            }\n            if (!shallowEqual(currentSnapshot.data, nextSnapshot.data)) {\n                route.data.next(nextSnapshot.data);\n            }\n        }\n        else {\n            route.snapshot = route._futureSnapshot;\n            // this is for resolved data\n            route.data.next(route._futureSnapshot.data);\n        }\n    }\n    function equalParamsAndUrlSegments(a, b) {\n        var equalUrlParams = shallowEqual(a.params, b.params) && equalSegments(a.url, b.url);\n        var parentsMismatch = !a.parent !== !b.parent;\n        return equalUrlParams && !parentsMismatch &&\n            (!a.parent || equalParamsAndUrlSegments(a.parent, b.parent));\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function createRouterState(routeReuseStrategy, curr, prevState) {\n        var root = createNode(routeReuseStrategy, curr._root, prevState ? prevState._root : undefined);\n        return new RouterState(root, curr);\n    }\n    function createNode(routeReuseStrategy, curr, prevState) {\n        // reuse an activated route that is currently displayed on the screen\n        if (prevState && routeReuseStrategy.shouldReuseRoute(curr.value, prevState.value.snapshot)) {\n            var value = prevState.value;\n            value._futureSnapshot = curr.value;\n            var children = createOrReuseChildren(routeReuseStrategy, curr, prevState);\n            return new TreeNode(value, children);\n            // retrieve an activated route that is used to be displayed, but is not currently displayed\n        }\n        else {\n            var detachedRouteHandle = routeReuseStrategy.retrieve(curr.value);\n            if (detachedRouteHandle) {\n                var tree = detachedRouteHandle.route;\n                setFutureSnapshotsOfActivatedRoutes(curr, tree);\n                return tree;\n            }\n            else {\n                var value = createActivatedRoute(curr.value);\n                var children = curr.children.map(function (c) { return createNode(routeReuseStrategy, c); });\n                return new TreeNode(value, children);\n            }\n        }\n    }\n    function setFutureSnapshotsOfActivatedRoutes(curr, result) {\n        if (curr.value.routeConfig !== result.value.routeConfig) {\n            throw new Error('Cannot reattach ActivatedRouteSnapshot created from a different route');\n        }\n        if (curr.children.length !== result.children.length) {\n            throw new Error('Cannot reattach ActivatedRouteSnapshot with a different number of children');\n        }\n        result.value._futureSnapshot = curr.value;\n        for (var i = 0; i < curr.children.length; ++i) {\n            setFutureSnapshotsOfActivatedRoutes(curr.children[i], result.children[i]);\n        }\n    }\n    function createOrReuseChildren(routeReuseStrategy, curr, prevState) {\n        return curr.children.map(function (child) {\n            var e_1, _a;\n            try {\n                for (var _b = __values(prevState.children), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var p = _c.value;\n                    if (routeReuseStrategy.shouldReuseRoute(p.value.snapshot, child.value)) {\n                        return createNode(routeReuseStrategy, child, p);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return createNode(routeReuseStrategy, child);\n        });\n    }\n    function createActivatedRoute(c) {\n        return new ActivatedRoute(new rxjs.BehaviorSubject(c.url), new rxjs.BehaviorSubject(c.params), new rxjs.BehaviorSubject(c.queryParams), new rxjs.BehaviorSubject(c.fragment), new rxjs.BehaviorSubject(c.data), c.outlet, c.component, c);\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function createUrlTree(route, urlTree, commands, queryParams, fragment) {\n        if (commands.length === 0) {\n            return tree(urlTree.root, urlTree.root, urlTree, queryParams, fragment);\n        }\n        var nav = computeNavigation(commands);\n        if (nav.toRoot()) {\n            return tree(urlTree.root, new UrlSegmentGroup([], {}), urlTree, queryParams, fragment);\n        }\n        var startingPosition = findStartingPosition(nav, urlTree, route);\n        var segmentGroup = startingPosition.processChildren ?\n            updateSegmentGroupChildren(startingPosition.segmentGroup, startingPosition.index, nav.commands) :\n            updateSegmentGroup(startingPosition.segmentGroup, startingPosition.index, nav.commands);\n        return tree(startingPosition.segmentGroup, segmentGroup, urlTree, queryParams, fragment);\n    }\n    function isMatrixParams(command) {\n        return typeof command === 'object' && command != null && !command.outlets && !command.segmentPath;\n    }\n    function tree(oldSegmentGroup, newSegmentGroup, urlTree, queryParams, fragment) {\n        var qp = {};\n        if (queryParams) {\n            forEach(queryParams, function (value, name) {\n                qp[name] = Array.isArray(value) ? value.map(function (v) { return \"\" + v; }) : \"\" + value;\n            });\n        }\n        if (urlTree.root === oldSegmentGroup) {\n            return new UrlTree(newSegmentGroup, qp, fragment);\n        }\n        return new UrlTree(replaceSegment(urlTree.root, oldSegmentGroup, newSegmentGroup), qp, fragment);\n    }\n    function replaceSegment(current, oldSegment, newSegment) {\n        var children = {};\n        forEach(current.children, function (c, outletName) {\n            if (c === oldSegment) {\n                children[outletName] = newSegment;\n            }\n            else {\n                children[outletName] = replaceSegment(c, oldSegment, newSegment);\n            }\n        });\n        return new UrlSegmentGroup(current.segments, children);\n    }\n    var Navigation = /** @class */ (function () {\n        function Navigation(isAbsolute, numberOfDoubleDots, commands) {\n            this.isAbsolute = isAbsolute;\n            this.numberOfDoubleDots = numberOfDoubleDots;\n            this.commands = commands;\n            if (isAbsolute && commands.length > 0 && isMatrixParams(commands[0])) {\n                throw new Error('Root segment cannot have matrix parameters');\n            }\n            var cmdWithOutlet = commands.find(function (c) { return typeof c === 'object' && c != null && c.outlets; });\n            if (cmdWithOutlet && cmdWithOutlet !== last(commands)) {\n                throw new Error('{outlets:{}} has to be the last command');\n            }\n        }\n        Navigation.prototype.toRoot = function () {\n            return this.isAbsolute && this.commands.length === 1 && this.commands[0] == '/';\n        };\n        return Navigation;\n    }());\n    /** Transforms commands to a normalized `Navigation` */\n    function computeNavigation(commands) {\n        if ((typeof commands[0] === 'string') && commands.length === 1 && commands[0] === '/') {\n            return new Navigation(true, 0, commands);\n        }\n        var numberOfDoubleDots = 0;\n        var isAbsolute = false;\n        var res = commands.reduce(function (res, cmd, cmdIdx) {\n            if (typeof cmd === 'object' && cmd != null) {\n                if (cmd.outlets) {\n                    var outlets_1 = {};\n                    forEach(cmd.outlets, function (commands, name) {\n                        outlets_1[name] = typeof commands === 'string' ? commands.split('/') : commands;\n                    });\n                    return __spread(res, [{ outlets: outlets_1 }]);\n                }\n                if (cmd.segmentPath) {\n                    return __spread(res, [cmd.segmentPath]);\n                }\n            }\n            if (!(typeof cmd === 'string')) {\n                return __spread(res, [cmd]);\n            }\n            if (cmdIdx === 0) {\n                cmd.split('/').forEach(function (urlPart, partIndex) {\n                    if (partIndex == 0 && urlPart === '.') ;\n                    else if (partIndex == 0 && urlPart === '') { //  '/a'\n                        isAbsolute = true;\n                    }\n                    else if (urlPart === '..') { //  '../a'\n                        numberOfDoubleDots++;\n                    }\n                    else if (urlPart != '') {\n                        res.push(urlPart);\n                    }\n                });\n                return res;\n            }\n            return __spread(res, [cmd]);\n        }, []);\n        return new Navigation(isAbsolute, numberOfDoubleDots, res);\n    }\n    var Position = /** @class */ (function () {\n        function Position(segmentGroup, processChildren, index) {\n            this.segmentGroup = segmentGroup;\n            this.processChildren = processChildren;\n            this.index = index;\n        }\n        return Position;\n    }());\n    function findStartingPosition(nav, tree, route) {\n        if (nav.isAbsolute) {\n            return new Position(tree.root, true, 0);\n        }\n        if (route.snapshot._lastPathIndex === -1) {\n            return new Position(route.snapshot._urlSegment, true, 0);\n        }\n        var modifier = isMatrixParams(nav.commands[0]) ? 0 : 1;\n        var index = route.snapshot._lastPathIndex + modifier;\n        return createPositionApplyingDoubleDots(route.snapshot._urlSegment, index, nav.numberOfDoubleDots);\n    }\n    function createPositionApplyingDoubleDots(group, index, numberOfDoubleDots) {\n        var g = group;\n        var ci = index;\n        var dd = numberOfDoubleDots;\n        while (dd > ci) {\n            dd -= ci;\n            g = g.parent;\n            if (!g) {\n                throw new Error('Invalid number of \\'../\\'');\n            }\n            ci = g.segments.length;\n        }\n        return new Position(g, false, ci - dd);\n    }\n    function getPath(command) {\n        if (typeof command === 'object' && command != null && command.outlets) {\n            return command.outlets[PRIMARY_OUTLET];\n        }\n        return \"\" + command;\n    }\n    function getOutlets(commands) {\n        var _a, _b;\n        if (!(typeof commands[0] === 'object'))\n            return _a = {}, _a[PRIMARY_OUTLET] = commands, _a;\n        if (commands[0].outlets === undefined)\n            return _b = {}, _b[PRIMARY_OUTLET] = commands, _b;\n        return commands[0].outlets;\n    }\n    function updateSegmentGroup(segmentGroup, startIndex, commands) {\n        if (!segmentGroup) {\n            segmentGroup = new UrlSegmentGroup([], {});\n        }\n        if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n            return updateSegmentGroupChildren(segmentGroup, startIndex, commands);\n        }\n        var m = prefixedWith(segmentGroup, startIndex, commands);\n        var slicedCommands = commands.slice(m.commandIndex);\n        if (m.match && m.pathIndex < segmentGroup.segments.length) {\n            var g = new UrlSegmentGroup(segmentGroup.segments.slice(0, m.pathIndex), {});\n            g.children[PRIMARY_OUTLET] =\n                new UrlSegmentGroup(segmentGroup.segments.slice(m.pathIndex), segmentGroup.children);\n            return updateSegmentGroupChildren(g, 0, slicedCommands);\n        }\n        else if (m.match && slicedCommands.length === 0) {\n            return new UrlSegmentGroup(segmentGroup.segments, {});\n        }\n        else if (m.match && !segmentGroup.hasChildren()) {\n            return createNewSegmentGroup(segmentGroup, startIndex, commands);\n        }\n        else if (m.match) {\n            return updateSegmentGroupChildren(segmentGroup, 0, slicedCommands);\n        }\n        else {\n            return createNewSegmentGroup(segmentGroup, startIndex, commands);\n        }\n    }\n    function updateSegmentGroupChildren(segmentGroup, startIndex, commands) {\n        if (commands.length === 0) {\n            return new UrlSegmentGroup(segmentGroup.segments, {});\n        }\n        else {\n            var outlets_2 = getOutlets(commands);\n            var children_1 = {};\n            forEach(outlets_2, function (commands, outlet) {\n                if (commands !== null) {\n                    children_1[outlet] = updateSegmentGroup(segmentGroup.children[outlet], startIndex, commands);\n                }\n            });\n            forEach(segmentGroup.children, function (child, childOutlet) {\n                if (outlets_2[childOutlet] === undefined) {\n                    children_1[childOutlet] = child;\n                }\n            });\n            return new UrlSegmentGroup(segmentGroup.segments, children_1);\n        }\n    }\n    function prefixedWith(segmentGroup, startIndex, commands) {\n        var currentCommandIndex = 0;\n        var currentPathIndex = startIndex;\n        var noMatch = { match: false, pathIndex: 0, commandIndex: 0 };\n        while (currentPathIndex < segmentGroup.segments.length) {\n            if (currentCommandIndex >= commands.length)\n                return noMatch;\n            var path = segmentGroup.segments[currentPathIndex];\n            var curr = getPath(commands[currentCommandIndex]);\n            var next = currentCommandIndex < commands.length - 1 ? commands[currentCommandIndex + 1] : null;\n            if (currentPathIndex > 0 && curr === undefined)\n                break;\n            if (curr && next && (typeof next === 'object') && next.outlets === undefined) {\n                if (!compare(curr, next, path))\n                    return noMatch;\n                currentCommandIndex += 2;\n            }\n            else {\n                if (!compare(curr, {}, path))\n                    return noMatch;\n                currentCommandIndex++;\n            }\n            currentPathIndex++;\n        }\n        return { match: true, pathIndex: currentPathIndex, commandIndex: currentCommandIndex };\n    }\n    function createNewSegmentGroup(segmentGroup, startIndex, commands) {\n        var paths = segmentGroup.segments.slice(0, startIndex);\n        var i = 0;\n        while (i < commands.length) {\n            if (typeof commands[i] === 'object' && commands[i].outlets !== undefined) {\n                var children = createNewSegmentChildren(commands[i].outlets);\n                return new UrlSegmentGroup(paths, children);\n            }\n            // if we start with an object literal, we need to reuse the path part from the segment\n            if (i === 0 && isMatrixParams(commands[0])) {\n                var p = segmentGroup.segments[startIndex];\n                paths.push(new UrlSegment(p.path, commands[0]));\n                i++;\n                continue;\n            }\n            var curr = getPath(commands[i]);\n            var next = (i < commands.length - 1) ? commands[i + 1] : null;\n            if (curr && next && isMatrixParams(next)) {\n                paths.push(new UrlSegment(curr, stringify(next)));\n                i += 2;\n            }\n            else {\n                paths.push(new UrlSegment(curr, {}));\n                i++;\n            }\n        }\n        return new UrlSegmentGroup(paths, {});\n    }\n    function createNewSegmentChildren(outlets) {\n        var children = {};\n        forEach(outlets, function (commands, outlet) {\n            if (commands !== null) {\n                children[outlet] = createNewSegmentGroup(new UrlSegmentGroup([], {}), 0, commands);\n            }\n        });\n        return children;\n    }\n    function stringify(params) {\n        var res = {};\n        forEach(params, function (v, k) { return res[k] = \"\" + v; });\n        return res;\n    }\n    function compare(path, params, segment) {\n        return path == segment.path && shallowEqual(params, segment.parameters);\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var CanActivate = /** @class */ (function () {\n        function CanActivate(path) {\n            this.path = path;\n            this.route = this.path[this.path.length - 1];\n        }\n        return CanActivate;\n    }());\n    var CanDeactivate = /** @class */ (function () {\n        function CanDeactivate(component, route) {\n            this.component = component;\n            this.route = route;\n        }\n        return CanDeactivate;\n    }());\n    /**\n     * This class bundles the actions involved in preactivation of a route.\n     */\n    var PreActivation = /** @class */ (function () {\n        function PreActivation(future, curr, moduleInjector, forwardEvent) {\n            this.future = future;\n            this.curr = curr;\n            this.moduleInjector = moduleInjector;\n            this.forwardEvent = forwardEvent;\n            this.canActivateChecks = [];\n            this.canDeactivateChecks = [];\n        }\n        PreActivation.prototype.initialize = function (parentContexts) {\n            var futureRoot = this.future._root;\n            var currRoot = this.curr ? this.curr._root : null;\n            this.setupChildRouteGuards(futureRoot, currRoot, parentContexts, [futureRoot.value]);\n        };\n        PreActivation.prototype.checkGuards = function () {\n            var _this = this;\n            if (!this.isDeactivating() && !this.isActivating()) {\n                return rxjs.of(true);\n            }\n            var canDeactivate$ = this.runCanDeactivateChecks();\n            return canDeactivate$.pipe(operators.mergeMap(function (canDeactivate) { return canDeactivate ? _this.runCanActivateChecks() : rxjs.of(false); }));\n        };\n        PreActivation.prototype.resolveData = function (paramsInheritanceStrategy) {\n            var _this = this;\n            if (!this.isActivating())\n                return rxjs.of(null);\n            return rxjs.from(this.canActivateChecks)\n                .pipe(operators.concatMap(function (check) { return _this.runResolve(check.route, paramsInheritanceStrategy); }), operators.reduce(function (_, __) { return _; }));\n        };\n        PreActivation.prototype.isDeactivating = function () { return this.canDeactivateChecks.length !== 0; };\n        PreActivation.prototype.isActivating = function () { return this.canActivateChecks.length !== 0; };\n        /**\n         * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n         * proper state to run `checkGuards()` method.\n         */\n        PreActivation.prototype.setupChildRouteGuards = function (futureNode, currNode, contexts, futurePath) {\n            var _this = this;\n            var prevChildren = nodeChildrenAsMap(currNode);\n            // Process the children of the future route\n            futureNode.children.forEach(function (c) {\n                _this.setupRouteGuards(c, prevChildren[c.value.outlet], contexts, futurePath.concat([c.value]));\n                delete prevChildren[c.value.outlet];\n            });\n            // Process any children left from the current route (not active for the future route)\n            forEach(prevChildren, function (v, k) {\n                return _this.deactivateRouteAndItsChildren(v, contexts.getContext(k));\n            });\n        };\n        /**\n         * Iterates over child routes and calls recursive `setupRouteGuards` to get `this` instance in\n         * proper state to run `checkGuards()` method.\n         */\n        PreActivation.prototype.setupRouteGuards = function (futureNode, currNode, parentContexts, futurePath) {\n            var future = futureNode.value;\n            var curr = currNode ? currNode.value : null;\n            var context = parentContexts ? parentContexts.getContext(futureNode.value.outlet) : null;\n            // reusing the node\n            if (curr && future.routeConfig === curr.routeConfig) {\n                var shouldRunGuardsAndResolvers = this.shouldRunGuardsAndResolvers(curr, future, future.routeConfig.runGuardsAndResolvers);\n                if (shouldRunGuardsAndResolvers) {\n                    this.canActivateChecks.push(new CanActivate(futurePath));\n                }\n                else {\n                    // we need to set the data\n                    future.data = curr.data;\n                    future._resolvedData = curr._resolvedData;\n                }\n                // If we have a component, we need to go through an outlet.\n                if (future.component) {\n                    this.setupChildRouteGuards(futureNode, currNode, context ? context.children : null, futurePath);\n                    // if we have a componentless route, we recurse but keep the same outlet map.\n                }\n                else {\n                    this.setupChildRouteGuards(futureNode, currNode, parentContexts, futurePath);\n                }\n                if (shouldRunGuardsAndResolvers) {\n                    var outlet = context.outlet;\n                    this.canDeactivateChecks.push(new CanDeactivate(outlet.component, curr));\n                }\n            }\n            else {\n                if (curr) {\n                    this.deactivateRouteAndItsChildren(currNode, context);\n                }\n                this.canActivateChecks.push(new CanActivate(futurePath));\n                // If we have a component, we need to go through an outlet.\n                if (future.component) {\n                    this.setupChildRouteGuards(futureNode, null, context ? context.children : null, futurePath);\n                    // if we have a componentless route, we recurse but keep the same outlet map.\n                }\n                else {\n                    this.setupChildRouteGuards(futureNode, null, parentContexts, futurePath);\n                }\n            }\n        };\n        PreActivation.prototype.shouldRunGuardsAndResolvers = function (curr, future, mode) {\n            switch (mode) {\n                case 'always':\n                    return true;\n                case 'paramsOrQueryParamsChange':\n                    return !equalParamsAndUrlSegments(curr, future) ||\n                        !shallowEqual(curr.queryParams, future.queryParams);\n                case 'paramsChange':\n                default:\n                    return !equalParamsAndUrlSegments(curr, future);\n            }\n        };\n        PreActivation.prototype.deactivateRouteAndItsChildren = function (route, context) {\n            var _this = this;\n            var children = nodeChildrenAsMap(route);\n            var r = route.value;\n            forEach(children, function (node, childName) {\n                if (!r.component) {\n                    _this.deactivateRouteAndItsChildren(node, context);\n                }\n                else if (context) {\n                    _this.deactivateRouteAndItsChildren(node, context.children.getContext(childName));\n                }\n                else {\n                    _this.deactivateRouteAndItsChildren(node, null);\n                }\n            });\n            if (!r.component) {\n                this.canDeactivateChecks.push(new CanDeactivate(null, r));\n            }\n            else if (context && context.outlet && context.outlet.isActivated) {\n                this.canDeactivateChecks.push(new CanDeactivate(context.outlet.component, r));\n            }\n            else {\n                this.canDeactivateChecks.push(new CanDeactivate(null, r));\n            }\n        };\n        PreActivation.prototype.runCanDeactivateChecks = function () {\n            var _this = this;\n            return rxjs.from(this.canDeactivateChecks)\n                .pipe(operators.mergeMap(function (check) { return _this.runCanDeactivate(check.component, check.route); }), operators.every(function (result) { return result === true; }));\n        };\n        PreActivation.prototype.runCanActivateChecks = function () {\n            var _this = this;\n            return rxjs.from(this.canActivateChecks)\n                .pipe(operators.concatMap(function (check) { return andObservables(rxjs.from([\n                _this.fireChildActivationStart(check.route.parent),\n                _this.fireActivationStart(check.route), _this.runCanActivateChild(check.path),\n                _this.runCanActivate(check.route)\n            ])); }), operators.every(function (result) { return result === true; }));\n            // this.fireChildActivationStart(check.path),\n        };\n        /**\n         * This should fire off `ActivationStart` events for each route being activated at this\n         * level.\n         * In other words, if you're activating `a` and `b` below, `path` will contain the\n         * `ActivatedRouteSnapshot`s for both and we will fire `ActivationStart` for both. Always\n         * return\n         * `true` so checks continue to run.\n         */\n        PreActivation.prototype.fireActivationStart = function (snapshot) {\n            if (snapshot !== null && this.forwardEvent) {\n                this.forwardEvent(new ActivationStart(snapshot));\n            }\n            return rxjs.of(true);\n        };\n        /**\n         * This should fire off `ChildActivationStart` events for each route being activated at this\n         * level.\n         * In other words, if you're activating `a` and `b` below, `path` will contain the\n         * `ActivatedRouteSnapshot`s for both and we will fire `ChildActivationStart` for both. Always\n         * return\n         * `true` so checks continue to run.\n         */\n        PreActivation.prototype.fireChildActivationStart = function (snapshot) {\n            if (snapshot !== null && this.forwardEvent) {\n                this.forwardEvent(new ChildActivationStart(snapshot));\n            }\n            return rxjs.of(true);\n        };\n        PreActivation.prototype.runCanActivate = function (future) {\n            var _this = this;\n            var canActivate = future.routeConfig ? future.routeConfig.canActivate : null;\n            if (!canActivate || canActivate.length === 0)\n                return rxjs.of(true);\n            var obs = rxjs.from(canActivate).pipe(operators.map(function (c) {\n                var guard = _this.getToken(c, future);\n                var observable;\n                if (guard.canActivate) {\n                    observable = wrapIntoObservable(guard.canActivate(future, _this.future));\n                }\n                else {\n                    observable = wrapIntoObservable(guard(future, _this.future));\n                }\n                return observable.pipe(operators.first());\n            }));\n            return andObservables(obs);\n        };\n        PreActivation.prototype.runCanActivateChild = function (path) {\n            var _this = this;\n            var future = path[path.length - 1];\n            var canActivateChildGuards = path.slice(0, path.length - 1)\n                .reverse()\n                .map(function (p) { return _this.extractCanActivateChild(p); })\n                .filter(function (_) { return _ !== null; });\n            return andObservables(rxjs.from(canActivateChildGuards).pipe(operators.map(function (d) {\n                var obs = rxjs.from(d.guards).pipe(operators.map(function (c) {\n                    var guard = _this.getToken(c, d.node);\n                    var observable;\n                    if (guard.canActivateChild) {\n                        observable = wrapIntoObservable(guard.canActivateChild(future, _this.future));\n                    }\n                    else {\n                        observable = wrapIntoObservable(guard(future, _this.future));\n                    }\n                    return observable.pipe(operators.first());\n                }));\n                return andObservables(obs);\n            })));\n        };\n        PreActivation.prototype.extractCanActivateChild = function (p) {\n            var canActivateChild = p.routeConfig ? p.routeConfig.canActivateChild : null;\n            if (!canActivateChild || canActivateChild.length === 0)\n                return null;\n            return { node: p, guards: canActivateChild };\n        };\n        PreActivation.prototype.runCanDeactivate = function (component, curr) {\n            var _this = this;\n            var canDeactivate = curr && curr.routeConfig ? curr.routeConfig.canDeactivate : null;\n            if (!canDeactivate || canDeactivate.length === 0)\n                return rxjs.of(true);\n            var canDeactivate$ = rxjs.from(canDeactivate).pipe(operators.mergeMap(function (c) {\n                var guard = _this.getToken(c, curr);\n                var observable;\n                if (guard.canDeactivate) {\n                    observable =\n                        wrapIntoObservable(guard.canDeactivate(component, curr, _this.curr, _this.future));\n                }\n                else {\n                    observable = wrapIntoObservable(guard(component, curr, _this.curr, _this.future));\n                }\n                return observable.pipe(operators.first());\n            }));\n            return canDeactivate$.pipe(operators.every(function (result) { return result === true; }));\n        };\n        PreActivation.prototype.runResolve = function (future, paramsInheritanceStrategy) {\n            var resolve = future._resolve;\n            return this.resolveNode(resolve, future).pipe(operators.map(function (resolvedData) {\n                future._resolvedData = resolvedData;\n                future.data = __assign({}, future.data, inheritedParamsDataResolve(future, paramsInheritanceStrategy).resolve);\n                return null;\n            }));\n        };\n        PreActivation.prototype.resolveNode = function (resolve, future) {\n            var _this = this;\n            var keys = Object.keys(resolve);\n            if (keys.length === 0) {\n                return rxjs.of({});\n            }\n            if (keys.length === 1) {\n                var key_1 = keys[0];\n                return this.getResolver(resolve[key_1], future).pipe(operators.map(function (value) {\n                    var _a;\n                    return _a = {}, _a[key_1] = value, _a;\n                }));\n            }\n            var data = {};\n            var runningResolvers$ = rxjs.from(keys).pipe(operators.mergeMap(function (key) {\n                return _this.getResolver(resolve[key], future).pipe(operators.map(function (value) {\n                    data[key] = value;\n                    return value;\n                }));\n            }));\n            return runningResolvers$.pipe(operators.last(), operators.map(function () { return data; }));\n        };\n        PreActivation.prototype.getResolver = function (injectionToken, future) {\n            var resolver = this.getToken(injectionToken, future);\n            return resolver.resolve ? wrapIntoObservable(resolver.resolve(future, this.future)) :\n                wrapIntoObservable(resolver(future, this.future));\n        };\n        PreActivation.prototype.getToken = function (token, snapshot) {\n            var config = closestLoadedConfig(snapshot);\n            var injector = config ? config.module.injector : this.moduleInjector;\n            return injector.get(token);\n        };\n        return PreActivation;\n    }());\n    function closestLoadedConfig(snapshot) {\n        if (!snapshot)\n            return null;\n        for (var s = snapshot.parent; s; s = s.parent) {\n            var route = s.routeConfig;\n            if (route && route._loadedConfig)\n                return route._loadedConfig;\n        }\n        return null;\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var NoMatch$1 = /** @class */ (function () {\n        function NoMatch() {\n        }\n        return NoMatch;\n    }());\n    function recognize(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {\n        if (paramsInheritanceStrategy === void 0) { paramsInheritanceStrategy = 'emptyOnly'; }\n        if (relativeLinkResolution === void 0) { relativeLinkResolution = 'legacy'; }\n        return new Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution)\n            .recognize();\n    }\n    var Recognizer = /** @class */ (function () {\n        function Recognizer(rootComponentType, config, urlTree, url, paramsInheritanceStrategy, relativeLinkResolution) {\n            this.rootComponentType = rootComponentType;\n            this.config = config;\n            this.urlTree = urlTree;\n            this.url = url;\n            this.paramsInheritanceStrategy = paramsInheritanceStrategy;\n            this.relativeLinkResolution = relativeLinkResolution;\n        }\n        Recognizer.prototype.recognize = function () {\n            try {\n                var rootSegmentGroup = split$1(this.urlTree.root, [], [], this.config, this.relativeLinkResolution).segmentGroup;\n                var children = this.processSegmentGroup(this.config, rootSegmentGroup, PRIMARY_OUTLET);\n                var root = new ActivatedRouteSnapshot([], Object.freeze({}), Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, {}, PRIMARY_OUTLET, this.rootComponentType, null, this.urlTree.root, -1, {});\n                var rootNode = new TreeNode(root, children);\n                var routeState = new RouterStateSnapshot(this.url, rootNode);\n                this.inheritParamsAndData(routeState._root);\n                return rxjs.of(routeState);\n            }\n            catch (e) {\n                return new rxjs.Observable(function (obs) { return obs.error(e); });\n            }\n        };\n        Recognizer.prototype.inheritParamsAndData = function (routeNode) {\n            var _this = this;\n            var route = routeNode.value;\n            var i = inheritedParamsDataResolve(route, this.paramsInheritanceStrategy);\n            route.params = Object.freeze(i.params);\n            route.data = Object.freeze(i.data);\n            routeNode.children.forEach(function (n) { return _this.inheritParamsAndData(n); });\n        };\n        Recognizer.prototype.processSegmentGroup = function (config, segmentGroup, outlet) {\n            if (segmentGroup.segments.length === 0 && segmentGroup.hasChildren()) {\n                return this.processChildren(config, segmentGroup);\n            }\n            return this.processSegment(config, segmentGroup, segmentGroup.segments, outlet);\n        };\n        Recognizer.prototype.processChildren = function (config, segmentGroup) {\n            var _this = this;\n            var children = mapChildrenIntoArray(segmentGroup, function (child, childOutlet) { return _this.processSegmentGroup(config, child, childOutlet); });\n            checkOutletNameUniqueness(children);\n            sortActivatedRouteSnapshots(children);\n            return children;\n        };\n        Recognizer.prototype.processSegment = function (config, segmentGroup, segments, outlet) {\n            var e_1, _a;\n            try {\n                for (var config_1 = __values(config), config_1_1 = config_1.next(); !config_1_1.done; config_1_1 = config_1.next()) {\n                    var r = config_1_1.value;\n                    try {\n                        return this.processSegmentAgainstRoute(r, segmentGroup, segments, outlet);\n                    }\n                    catch (e) {\n                        if (!(e instanceof NoMatch$1))\n                            throw e;\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (config_1_1 && !config_1_1.done && (_a = config_1.return)) _a.call(config_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            if (this.noLeftoversInUrl(segmentGroup, segments, outlet)) {\n                return [];\n            }\n            throw new NoMatch$1();\n        };\n        Recognizer.prototype.noLeftoversInUrl = function (segmentGroup, segments, outlet) {\n            return segments.length === 0 && !segmentGroup.children[outlet];\n        };\n        Recognizer.prototype.processSegmentAgainstRoute = function (route, rawSegment, segments, outlet) {\n            if (route.redirectTo)\n                throw new NoMatch$1();\n            if ((route.outlet || PRIMARY_OUTLET) !== outlet)\n                throw new NoMatch$1();\n            var snapshot;\n            var consumedSegments = [];\n            var rawSlicedSegments = [];\n            if (route.path === '**') {\n                var params = segments.length > 0 ? last(segments).parameters : {};\n                snapshot = new ActivatedRouteSnapshot(segments, params, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + segments.length, getResolve(route));\n            }\n            else {\n                var result = match$1(rawSegment, route, segments);\n                consumedSegments = result.consumedSegments;\n                rawSlicedSegments = segments.slice(result.lastChild);\n                snapshot = new ActivatedRouteSnapshot(consumedSegments, result.parameters, Object.freeze(__assign({}, this.urlTree.queryParams)), this.urlTree.fragment, getData(route), outlet, route.component, route, getSourceSegmentGroup(rawSegment), getPathIndexShift(rawSegment) + consumedSegments.length, getResolve(route));\n            }\n            var childConfig = getChildConfig(route);\n            var _a = split$1(rawSegment, consumedSegments, rawSlicedSegments, childConfig, this.relativeLinkResolution), segmentGroup = _a.segmentGroup, slicedSegments = _a.slicedSegments;\n            if (slicedSegments.length === 0 && segmentGroup.hasChildren()) {\n                var children_1 = this.processChildren(childConfig, segmentGroup);\n                return [new TreeNode(snapshot, children_1)];\n            }\n            if (childConfig.length === 0 && slicedSegments.length === 0) {\n                return [new TreeNode(snapshot, [])];\n            }\n            var children = this.processSegment(childConfig, segmentGroup, slicedSegments, PRIMARY_OUTLET);\n            return [new TreeNode(snapshot, children)];\n        };\n        return Recognizer;\n    }());\n    function sortActivatedRouteSnapshots(nodes) {\n        nodes.sort(function (a, b) {\n            if (a.value.outlet === PRIMARY_OUTLET)\n                return -1;\n            if (b.value.outlet === PRIMARY_OUTLET)\n                return 1;\n            return a.value.outlet.localeCompare(b.value.outlet);\n        });\n    }\n    function getChildConfig(route) {\n        if (route.children) {\n            return route.children;\n        }\n        if (route.loadChildren) {\n            return route._loadedConfig.routes;\n        }\n        return [];\n    }\n    function match$1(segmentGroup, route, segments) {\n        if (route.path === '') {\n            if (route.pathMatch === 'full' && (segmentGroup.hasChildren() || segments.length > 0)) {\n                throw new NoMatch$1();\n            }\n            return { consumedSegments: [], lastChild: 0, parameters: {} };\n        }\n        var matcher = route.matcher || defaultUrlMatcher;\n        var res = matcher(segments, segmentGroup, route);\n        if (!res)\n            throw new NoMatch$1();\n        var posParams = {};\n        forEach(res.posParams, function (v, k) { posParams[k] = v.path; });\n        var parameters = res.consumed.length > 0 ? __assign({}, posParams, res.consumed[res.consumed.length - 1].parameters) :\n            posParams;\n        return { consumedSegments: res.consumed, lastChild: res.consumed.length, parameters: parameters };\n    }\n    function checkOutletNameUniqueness(nodes) {\n        var names = {};\n        nodes.forEach(function (n) {\n            var routeWithSameOutletName = names[n.value.outlet];\n            if (routeWithSameOutletName) {\n                var p = routeWithSameOutletName.url.map(function (s) { return s.toString(); }).join('/');\n                var c = n.value.url.map(function (s) { return s.toString(); }).join('/');\n                throw new Error(\"Two segments cannot have the same outlet name: '\" + p + \"' and '\" + c + \"'.\");\n            }\n            names[n.value.outlet] = n.value;\n        });\n    }\n    function getSourceSegmentGroup(segmentGroup) {\n        var s = segmentGroup;\n        while (s._sourceSegment) {\n            s = s._sourceSegment;\n        }\n        return s;\n    }\n    function getPathIndexShift(segmentGroup) {\n        var s = segmentGroup;\n        var res = (s._segmentIndexShift ? s._segmentIndexShift : 0);\n        while (s._sourceSegment) {\n            s = s._sourceSegment;\n            res += (s._segmentIndexShift ? s._segmentIndexShift : 0);\n        }\n        return res - 1;\n    }\n    function split$1(segmentGroup, consumedSegments, slicedSegments, config, relativeLinkResolution) {\n        if (slicedSegments.length > 0 &&\n            containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, config)) {\n            var s_1 = new UrlSegmentGroup(consumedSegments, createChildrenForEmptyPaths(segmentGroup, consumedSegments, config, new UrlSegmentGroup(slicedSegments, segmentGroup.children)));\n            s_1._sourceSegment = segmentGroup;\n            s_1._segmentIndexShift = consumedSegments.length;\n            return { segmentGroup: s_1, slicedSegments: [] };\n        }\n        if (slicedSegments.length === 0 &&\n            containsEmptyPathMatches(segmentGroup, slicedSegments, config)) {\n            var s_2 = new UrlSegmentGroup(segmentGroup.segments, addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, config, segmentGroup.children, relativeLinkResolution));\n            s_2._sourceSegment = segmentGroup;\n            s_2._segmentIndexShift = consumedSegments.length;\n            return { segmentGroup: s_2, slicedSegments: slicedSegments };\n        }\n        var s = new UrlSegmentGroup(segmentGroup.segments, segmentGroup.children);\n        s._sourceSegment = segmentGroup;\n        s._segmentIndexShift = consumedSegments.length;\n        return { segmentGroup: s, slicedSegments: slicedSegments };\n    }\n    function addEmptyPathsToChildrenIfNeeded(segmentGroup, consumedSegments, slicedSegments, routes, children, relativeLinkResolution) {\n        var e_2, _a;\n        var res = {};\n        try {\n            for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n                var r = routes_1_1.value;\n                if (emptyPathMatch(segmentGroup, slicedSegments, r) && !children[getOutlet$1(r)]) {\n                    var s = new UrlSegmentGroup([], {});\n                    s._sourceSegment = segmentGroup;\n                    if (relativeLinkResolution === 'legacy') {\n                        s._segmentIndexShift = segmentGroup.segments.length;\n                    }\n                    else {\n                        s._segmentIndexShift = consumedSegments.length;\n                    }\n                    res[getOutlet$1(r)] = s;\n                }\n            }\n        }\n        catch (e_2_1) { e_2 = { error: e_2_1 }; }\n        finally {\n            try {\n                if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n            }\n            finally { if (e_2) throw e_2.error; }\n        }\n        return __assign({}, children, res);\n    }\n    function createChildrenForEmptyPaths(segmentGroup, consumedSegments, routes, primarySegment) {\n        var e_3, _a;\n        var res = {};\n        res[PRIMARY_OUTLET] = primarySegment;\n        primarySegment._sourceSegment = segmentGroup;\n        primarySegment._segmentIndexShift = consumedSegments.length;\n        try {\n            for (var routes_2 = __values(routes), routes_2_1 = routes_2.next(); !routes_2_1.done; routes_2_1 = routes_2.next()) {\n                var r = routes_2_1.value;\n                if (r.path === '' && getOutlet$1(r) !== PRIMARY_OUTLET) {\n                    var s = new UrlSegmentGroup([], {});\n                    s._sourceSegment = segmentGroup;\n                    s._segmentIndexShift = consumedSegments.length;\n                    res[getOutlet$1(r)] = s;\n                }\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (routes_2_1 && !routes_2_1.done && (_a = routes_2.return)) _a.call(routes_2);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n        return res;\n    }\n    function containsEmptyPathMatchesWithNamedOutlets(segmentGroup, slicedSegments, routes) {\n        return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r) && getOutlet$1(r) !== PRIMARY_OUTLET; });\n    }\n    function containsEmptyPathMatches(segmentGroup, slicedSegments, routes) {\n        return routes.some(function (r) { return emptyPathMatch(segmentGroup, slicedSegments, r); });\n    }\n    function emptyPathMatch(segmentGroup, slicedSegments, r) {\n        if ((segmentGroup.hasChildren() || slicedSegments.length > 0) && r.pathMatch === 'full') {\n            return false;\n        }\n        return r.path === '' && r.redirectTo === undefined;\n    }\n    function getOutlet$1(route) {\n        return route.outlet || PRIMARY_OUTLET;\n    }\n    function getData(route) {\n        return route.data || {};\n    }\n    function getResolve(route) {\n        return route.resolve || {};\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Provides a way to customize when activated routes get reused.\n     *\n     * @experimental\n     */\n    var RouteReuseStrategy = /** @class */ (function () {\n        function RouteReuseStrategy() {\n        }\n        return RouteReuseStrategy;\n    }());\n    /**\n     * Does not detach any subtrees. Reuses routes as long as their route config is the same.\n     */\n    var DefaultRouteReuseStrategy = /** @class */ (function () {\n        function DefaultRouteReuseStrategy() {\n        }\n        DefaultRouteReuseStrategy.prototype.shouldDetach = function (route) { return false; };\n        DefaultRouteReuseStrategy.prototype.store = function (route, detachedTree) { };\n        DefaultRouteReuseStrategy.prototype.shouldAttach = function (route) { return false; };\n        DefaultRouteReuseStrategy.prototype.retrieve = function (route) { return null; };\n        DefaultRouteReuseStrategy.prototype.shouldReuseRoute = function (future, curr) {\n            return future.routeConfig === curr.routeConfig;\n        };\n        return DefaultRouteReuseStrategy;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @docsNotRequired\n     * @experimental\n     */\n    var ROUTES = new core.InjectionToken('ROUTES');\n    var RouterConfigLoader = /** @class */ (function () {\n        function RouterConfigLoader(loader, compiler, onLoadStartListener, onLoadEndListener) {\n            this.loader = loader;\n            this.compiler = compiler;\n            this.onLoadStartListener = onLoadStartListener;\n            this.onLoadEndListener = onLoadEndListener;\n        }\n        RouterConfigLoader.prototype.load = function (parentInjector, route) {\n            var _this = this;\n            if (this.onLoadStartListener) {\n                this.onLoadStartListener(route);\n            }\n            var moduleFactory$ = this.loadModuleFactory(route.loadChildren);\n            return moduleFactory$.pipe(operators.map(function (factory) {\n                if (_this.onLoadEndListener) {\n                    _this.onLoadEndListener(route);\n                }\n                var module = factory.create(parentInjector);\n                return new LoadedRouterConfig(flatten(module.injector.get(ROUTES)).map(standardizeConfig), module);\n            }));\n        };\n        RouterConfigLoader.prototype.loadModuleFactory = function (loadChildren) {\n            var _this = this;\n            if (typeof loadChildren === 'string') {\n                return rxjs.from(this.loader.load(loadChildren));\n            }\n            else {\n                return wrapIntoObservable(loadChildren()).pipe(operators.mergeMap(function (t) {\n                    if (t instanceof core.NgModuleFactory) {\n                        return rxjs.of(t);\n                    }\n                    else {\n                        return rxjs.from(_this.compiler.compileModuleAsync(t));\n                    }\n                }));\n            }\n        };\n        return RouterConfigLoader;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Provides a way to migrate AngularJS applications to Angular.\n     *\n     * @experimental\n     */\n    var UrlHandlingStrategy = /** @class */ (function () {\n        function UrlHandlingStrategy() {\n        }\n        return UrlHandlingStrategy;\n    }());\n    /**\n     * @experimental\n     */\n    var DefaultUrlHandlingStrategy = /** @class */ (function () {\n        function DefaultUrlHandlingStrategy() {\n        }\n        DefaultUrlHandlingStrategy.prototype.shouldProcessUrl = function (url) { return true; };\n        DefaultUrlHandlingStrategy.prototype.extract = function (url) { return url; };\n        DefaultUrlHandlingStrategy.prototype.merge = function (newUrlPart, wholeUrl) { return newUrlPart; };\n        return DefaultUrlHandlingStrategy;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function defaultErrorHandler(error) {\n        throw error;\n    }\n    function defaultMalformedUriErrorHandler(error, urlSerializer, url) {\n        return urlSerializer.parse('/');\n    }\n    /**\n     * @internal\n     */\n    function defaultRouterHook(snapshot, runExtras) {\n        return rxjs.of(null);\n    }\n    /**\n     * @description\n     *\n     * Provides the navigation and url manipulation capabilities.\n     *\n     * See `Routes` for more details and examples.\n     *\n     * @ngModule RouterModule\n     *\n     *\n     */\n    var Router = /** @class */ (function () {\n        /**\n         * Creates the router service.\n         */\n        // TODO: vsavkin make internal after the final is out.\n        function Router(rootComponentType, urlSerializer, rootContexts, location, injector, loader, compiler, config) {\n            var _this = this;\n            this.rootComponentType = rootComponentType;\n            this.urlSerializer = urlSerializer;\n            this.rootContexts = rootContexts;\n            this.location = location;\n            this.config = config;\n            this.navigations = new rxjs.BehaviorSubject(null);\n            this.navigationId = 0;\n            this.isNgZoneEnabled = false;\n            this.events = new rxjs.Subject();\n            /**\n             * Error handler that is invoked when a navigation errors.\n             *\n             * See `ErrorHandler` for more information.\n             */\n            this.errorHandler = defaultErrorHandler;\n            /**\n             * Malformed uri error handler is invoked when `Router.parseUrl(url)` throws an\n             * error due to containing an invalid character. The most common case would be a `%` sign\n             * that's not encoded and is not part of a percent encoded sequence.\n             */\n            this.malformedUriErrorHandler = defaultMalformedUriErrorHandler;\n            /**\n             * Indicates if at least one navigation happened.\n             */\n            this.navigated = false;\n            this.lastSuccessfulId = -1;\n            /**\n             * Used by RouterModule. This allows us to\n             * pause the navigation either before preactivation or after it.\n             * @internal\n             */\n            this.hooks = {\n                beforePreactivation: defaultRouterHook,\n                afterPreactivation: defaultRouterHook\n            };\n            /**\n             * Extracts and merges URLs. Used for AngularJS to Angular migrations.\n             */\n            this.urlHandlingStrategy = new DefaultUrlHandlingStrategy();\n            this.routeReuseStrategy = new DefaultRouteReuseStrategy();\n            /**\n             * Define what the router should do if it receives a navigation request to the current URL.\n             * By default, the router will ignore this navigation. However, this prevents features such\n             * as a \"refresh\" button. Use this option to configure the behavior when navigating to the\n             * current URL. Default is 'ignore'.\n             */\n            this.onSameUrlNavigation = 'ignore';\n            /**\n             * Defines how the router merges params, data and resolved data from parent to child\n             * routes. Available options are:\n             *\n             * - `'emptyOnly'`, the default, only inherits parent params for path-less or component-less\n             *   routes.\n             * - `'always'`, enables unconditional inheritance of parent params.\n             */\n            this.paramsInheritanceStrategy = 'emptyOnly';\n            /**\n             * Defines when the router updates the browser URL. The default behavior is to update after\n             * successful navigation. However, some applications may prefer a mode where the URL gets\n             * updated at the beginning of navigation. The most common use case would be updating the\n             * URL early so if navigation fails, you can show an error message with the URL that failed.\n             * Available options are:\n             *\n             * - `'deferred'`, the default, updates the browser URL after navigation has finished.\n             * - `'eager'`, updates browser URL at the beginning of navigation.\n             */\n            this.urlUpdateStrategy = 'deferred';\n            /**\n             * See {@link RouterModule} for more information.\n             */\n            this.relativeLinkResolution = 'legacy';\n            var onLoadStart = function (r) { return _this.triggerEvent(new RouteConfigLoadStart(r)); };\n            var onLoadEnd = function (r) { return _this.triggerEvent(new RouteConfigLoadEnd(r)); };\n            this.ngModule = injector.get(core.NgModuleRef);\n            this.console = injector.get(core.ɵConsole);\n            var ngZone = injector.get(core.NgZone);\n            this.isNgZoneEnabled = ngZone instanceof core.NgZone;\n            this.resetConfig(config);\n            this.currentUrlTree = createEmptyUrlTree();\n            this.rawUrlTree = this.currentUrlTree;\n            this.configLoader = new RouterConfigLoader(loader, compiler, onLoadStart, onLoadEnd);\n            this.routerState = createEmptyState(this.currentUrlTree, this.rootComponentType);\n            this.processNavigations();\n        }\n        /**\n         * @internal\n         * TODO: this should be removed once the constructor of the router made internal\n         */\n        Router.prototype.resetRootComponentType = function (rootComponentType) {\n            this.rootComponentType = rootComponentType;\n            // TODO: vsavkin router 4.0 should make the root component set to null\n            // this will simplify the lifecycle of the router.\n            this.routerState.root.component = this.rootComponentType;\n        };\n        /**\n         * Sets up the location change listener and performs the initial navigation.\n         */\n        Router.prototype.initialNavigation = function () {\n            this.setUpLocationChangeListener();\n            if (this.navigationId === 0) {\n                this.navigateByUrl(this.location.path(true), { replaceUrl: true });\n            }\n        };\n        /**\n         * Sets up the location change listener.\n         */\n        Router.prototype.setUpLocationChangeListener = function () {\n            var _this = this;\n            // Don't need to use Zone.wrap any more, because zone.js\n            // already patch onPopState, so location change callback will\n            // run into ngZone\n            if (!this.locationSubscription) {\n                this.locationSubscription = this.location.subscribe(function (change) {\n                    var rawUrlTree = _this.parseUrl(change['url']);\n                    var source = change['type'] === 'popstate' ? 'popstate' : 'hashchange';\n                    var state = change.state && change.state.navigationId ?\n                        { navigationId: change.state.navigationId } :\n                        null;\n                    setTimeout(function () { _this.scheduleNavigation(rawUrlTree, source, state, { replaceUrl: true }); }, 0);\n                });\n            }\n        };\n        Object.defineProperty(Router.prototype, \"url\", {\n            /** The current url */\n            get: function () { return this.serializeUrl(this.currentUrlTree); },\n            enumerable: true,\n            configurable: true\n        });\n        /** @internal */\n        Router.prototype.triggerEvent = function (event) { this.events.next(event); };\n        /**\n         * Resets the configuration used for navigation and generating links.\n         *\n         * @usageNotes\n         *\n         * ### Example\n         *\n         * ```\n         * router.resetConfig([\n         *  { path: 'team/:id', component: TeamCmp, children: [\n         *    { path: 'simple', component: SimpleCmp },\n         *    { path: 'user/:name', component: UserCmp }\n         *  ]}\n         * ]);\n         * ```\n         */\n        Router.prototype.resetConfig = function (config) {\n            validateConfig(config);\n            this.config = config.map(standardizeConfig);\n            this.navigated = false;\n            this.lastSuccessfulId = -1;\n        };\n        /** @docsNotRequired */\n        Router.prototype.ngOnDestroy = function () { this.dispose(); };\n        /** Disposes of the router */\n        Router.prototype.dispose = function () {\n            if (this.locationSubscription) {\n                this.locationSubscription.unsubscribe();\n                this.locationSubscription = null;\n            }\n        };\n        /**\n         * Applies an array of commands to the current url tree and creates a new url tree.\n         *\n         * When given an activate route, applies the given commands starting from the route.\n         * When not given a route, applies the given command starting from the root.\n         *\n         * @usageNotes\n         *\n         * ### Example\n         *\n         * ```\n         * // create /team/33/user/11\n         * router.createUrlTree(['/team', 33, 'user', 11]);\n         *\n         * // create /team/33;expand=true/user/11\n         * router.createUrlTree(['/team', 33, {expand: true}, 'user', 11]);\n         *\n         * // you can collapse static segments like this (this works only with the first passed-in value):\n         * router.createUrlTree(['/team/33/user', userId]);\n         *\n         * // If the first segment can contain slashes, and you do not want the router to split it, you\n         * // can do the following:\n         *\n         * router.createUrlTree([{segmentPath: '/one/two'}]);\n         *\n         * // create /team/33/(user/11//right:chat)\n         * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: 'chat'}}]);\n         *\n         * // remove the right secondary node\n         * router.createUrlTree(['/team', 33, {outlets: {primary: 'user/11', right: null}}]);\n         *\n         * // assuming the current url is `/team/33/user/11` and the route points to `user/11`\n         *\n         * // navigate to /team/33/user/11/details\n         * router.createUrlTree(['details'], {relativeTo: route});\n         *\n         * // navigate to /team/33/user/22\n         * router.createUrlTree(['../22'], {relativeTo: route});\n         *\n         * // navigate to /team/44/user/22\n         * router.createUrlTree(['../../team/44/user/22'], {relativeTo: route});\n         * ```\n         */\n        Router.prototype.createUrlTree = function (commands, navigationExtras) {\n            if (navigationExtras === void 0) { navigationExtras = {}; }\n            var relativeTo = navigationExtras.relativeTo, queryParams = navigationExtras.queryParams, fragment = navigationExtras.fragment, preserveQueryParams = navigationExtras.preserveQueryParams, queryParamsHandling = navigationExtras.queryParamsHandling, preserveFragment = navigationExtras.preserveFragment;\n            if (core.isDevMode() && preserveQueryParams && console && console.warn) {\n                console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n            }\n            var a = relativeTo || this.routerState.root;\n            var f = preserveFragment ? this.currentUrlTree.fragment : fragment;\n            var q = null;\n            if (queryParamsHandling) {\n                switch (queryParamsHandling) {\n                    case 'merge':\n                        q = __assign({}, this.currentUrlTree.queryParams, queryParams);\n                        break;\n                    case 'preserve':\n                        q = this.currentUrlTree.queryParams;\n                        break;\n                    default:\n                        q = queryParams || null;\n                }\n            }\n            else {\n                q = preserveQueryParams ? this.currentUrlTree.queryParams : queryParams || null;\n            }\n            if (q !== null) {\n                q = this.removeEmptyProps(q);\n            }\n            return createUrlTree(a, this.currentUrlTree, commands, q, f);\n        };\n        /**\n         * Navigate based on the provided url. This navigation is always absolute.\n         *\n         * Returns a promise that:\n         * - resolves to 'true' when navigation succeeds,\n         * - resolves to 'false' when navigation fails,\n         * - is rejected when an error happens.\n         *\n         * @usageNotes\n         *\n         * ### Example\n         *\n         * ```\n         * router.navigateByUrl(\"/team/33/user/11\");\n         *\n         * // Navigate without updating the URL\n         * router.navigateByUrl(\"/team/33/user/11\", { skipLocationChange: true });\n         * ```\n         *\n         * Since `navigateByUrl()` takes an absolute URL as the first parameter,\n         * it will not apply any delta to the current URL and ignores any properties\n         * in the second parameter (the `NavigationExtras`) that would change the\n         * provided URL.\n         */\n        Router.prototype.navigateByUrl = function (url, extras) {\n            if (extras === void 0) { extras = { skipLocationChange: false }; }\n            if (core.isDevMode() && this.isNgZoneEnabled && !core.NgZone.isInAngularZone()) {\n                this.console.warn(\"Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?\");\n            }\n            var urlTree = url instanceof UrlTree ? url : this.parseUrl(url);\n            var mergedTree = this.urlHandlingStrategy.merge(urlTree, this.rawUrlTree);\n            return this.scheduleNavigation(mergedTree, 'imperative', null, extras);\n        };\n        /**\n         * Navigate based on the provided array of commands and a starting point.\n         * If no starting route is provided, the navigation is absolute.\n         *\n         * Returns a promise that:\n         * - resolves to 'true' when navigation succeeds,\n         * - resolves to 'false' when navigation fails,\n         * - is rejected when an error happens.\n         *\n         * @usageNotes\n         *\n         * ### Example\n         *\n         * ```\n         * router.navigate(['team', 33, 'user', 11], {relativeTo: route});\n         *\n         * // Navigate without updating the URL\n         * router.navigate(['team', 33, 'user', 11], {relativeTo: route, skipLocationChange: true});\n         * ```\n         *\n         * The first parameter of `navigate()` is a delta to be applied to the current URL\n         * or the one provided in the `relativeTo` property of the second parameter (the\n         * `NavigationExtras`).\n         */\n        Router.prototype.navigate = function (commands, extras) {\n            if (extras === void 0) { extras = { skipLocationChange: false }; }\n            validateCommands(commands);\n            return this.navigateByUrl(this.createUrlTree(commands, extras), extras);\n        };\n        /** Serializes a `UrlTree` into a string */\n        Router.prototype.serializeUrl = function (url) { return this.urlSerializer.serialize(url); };\n        /** Parses a string into a `UrlTree` */\n        Router.prototype.parseUrl = function (url) {\n            var urlTree;\n            try {\n                urlTree = this.urlSerializer.parse(url);\n            }\n            catch (e) {\n                urlTree = this.malformedUriErrorHandler(e, this.urlSerializer, url);\n            }\n            return urlTree;\n        };\n        /** Returns whether the url is activated */\n        Router.prototype.isActive = function (url, exact) {\n            if (url instanceof UrlTree) {\n                return containsTree(this.currentUrlTree, url, exact);\n            }\n            var urlTree = this.parseUrl(url);\n            return containsTree(this.currentUrlTree, urlTree, exact);\n        };\n        Router.prototype.removeEmptyProps = function (params) {\n            return Object.keys(params).reduce(function (result, key) {\n                var value = params[key];\n                if (value !== null && value !== undefined) {\n                    result[key] = value;\n                }\n                return result;\n            }, {});\n        };\n        Router.prototype.processNavigations = function () {\n            var _this = this;\n            this.navigations\n                .pipe(operators.concatMap(function (nav) {\n                if (nav) {\n                    _this.executeScheduledNavigation(nav);\n                    // a failed navigation should not stop the router from processing\n                    // further navigations => the catch\n                    return nav.promise.catch(function () { });\n                }\n                else {\n                    return rxjs.of(null);\n                }\n            }))\n                .subscribe(function () { });\n        };\n        Router.prototype.scheduleNavigation = function (rawUrl, source, state, extras) {\n            var lastNavigation = this.navigations.value;\n            // If the user triggers a navigation imperatively (e.g., by using navigateByUrl),\n            // and that navigation results in 'replaceState' that leads to the same URL,\n            // we should skip those.\n            if (lastNavigation && source !== 'imperative' && lastNavigation.source === 'imperative' &&\n                lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n                return Promise.resolve(true); // return value is not used\n            }\n            // Because of a bug in IE and Edge, the location class fires two events (popstate and\n            // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n            // flicker. Handles the case when a popstate was emitted first.\n            if (lastNavigation && source == 'hashchange' && lastNavigation.source === 'popstate' &&\n                lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n                return Promise.resolve(true); // return value is not used\n            }\n            // Because of a bug in IE and Edge, the location class fires two events (popstate and\n            // hashchange) every single time. The second one should be ignored. Otherwise, the URL will\n            // flicker. Handles the case when a hashchange was emitted first.\n            if (lastNavigation && source == 'popstate' && lastNavigation.source === 'hashchange' &&\n                lastNavigation.rawUrl.toString() === rawUrl.toString()) {\n                return Promise.resolve(true); // return value is not used\n            }\n            var resolve = null;\n            var reject = null;\n            var promise = new Promise(function (res, rej) {\n                resolve = res;\n                reject = rej;\n            });\n            var id = ++this.navigationId;\n            this.navigations.next({ id: id, source: source, state: state, rawUrl: rawUrl, extras: extras, resolve: resolve, reject: reject, promise: promise });\n            // Make sure that the error is propagated even though `processNavigations` catch\n            // handler does not rethrow\n            return promise.catch(function (e) { return Promise.reject(e); });\n        };\n        Router.prototype.executeScheduledNavigation = function (_a) {\n            var _this = this;\n            var id = _a.id, rawUrl = _a.rawUrl, extras = _a.extras, resolve = _a.resolve, reject = _a.reject, source = _a.source, state = _a.state;\n            var url = this.urlHandlingStrategy.extract(rawUrl);\n            var urlTransition = !this.navigated || url.toString() !== this.currentUrlTree.toString();\n            if ((this.onSameUrlNavigation === 'reload' ? true : urlTransition) &&\n                this.urlHandlingStrategy.shouldProcessUrl(rawUrl)) {\n                if (this.urlUpdateStrategy === 'eager' && !extras.skipLocationChange) {\n                    this.setBrowserUrl(rawUrl, !!extras.replaceUrl, id);\n                }\n                this.events\n                    .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n                Promise.resolve()\n                    .then(function (_) { return _this.runNavigate(url, rawUrl, !!extras.skipLocationChange, !!extras.replaceUrl, id, null); })\n                    .then(resolve, reject);\n                // we cannot process the current URL, but we could process the previous one =>\n                // we need to do some cleanup\n            }\n            else if (urlTransition && this.rawUrlTree &&\n                this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)) {\n                this.events\n                    .next(new NavigationStart(id, this.serializeUrl(url), source, state));\n                Promise.resolve()\n                    .then(function (_) { return _this.runNavigate(url, rawUrl, false, false, id, createEmptyState(url, _this.rootComponentType).snapshot); })\n                    .then(resolve, reject);\n            }\n            else {\n                this.rawUrlTree = rawUrl;\n                resolve(null);\n            }\n        };\n        Router.prototype.runNavigate = function (url, rawUrl, skipLocationChange, replaceUrl, id, precreatedState) {\n            var _this = this;\n            if (id !== this.navigationId) {\n                this.events\n                    .next(new NavigationCancel(id, this.serializeUrl(url), \"Navigation ID \" + id + \" is not equal to the current navigation id \" + this.navigationId));\n                return Promise.resolve(false);\n            }\n            return new Promise(function (resolvePromise, rejectPromise) {\n                // create an observable of the url and route state snapshot\n                // this operation do not result in any side effects\n                var urlAndSnapshot$;\n                if (!precreatedState) {\n                    var moduleInjector = _this.ngModule.injector;\n                    var redirectsApplied$ = applyRedirects(moduleInjector, _this.configLoader, _this.urlSerializer, url, _this.config);\n                    urlAndSnapshot$ = redirectsApplied$.pipe(operators.mergeMap(function (appliedUrl) {\n                        return recognize(_this.rootComponentType, _this.config, appliedUrl, _this.serializeUrl(appliedUrl), _this.paramsInheritanceStrategy, _this.relativeLinkResolution)\n                            .pipe(operators.map(function (snapshot) {\n                            _this.events\n                                .next(new RoutesRecognized(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                            return { appliedUrl: appliedUrl, snapshot: snapshot };\n                        }));\n                    }));\n                }\n                else {\n                    urlAndSnapshot$ = rxjs.of({ appliedUrl: url, snapshot: precreatedState });\n                }\n                var beforePreactivationDone$ = urlAndSnapshot$.pipe(operators.mergeMap(function (p) {\n                    if (typeof p === 'boolean')\n                        return rxjs.of(p);\n                    return _this.hooks\n                        .beforePreactivation(p.snapshot, {\n                        navigationId: id,\n                        appliedUrlTree: url,\n                        rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                    })\n                        .pipe(operators.map(function () { return p; }));\n                }));\n                // run preactivation: guards and data resolvers\n                var preActivation;\n                var preactivationSetup$ = beforePreactivationDone$.pipe(operators.map(function (p) {\n                    if (typeof p === 'boolean')\n                        return p;\n                    var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                    var moduleInjector = _this.ngModule.injector;\n                    preActivation = new PreActivation(snapshot, _this.routerState.snapshot, moduleInjector, function (evt) { return _this.triggerEvent(evt); });\n                    preActivation.initialize(_this.rootContexts);\n                    return { appliedUrl: appliedUrl, snapshot: snapshot };\n                }));\n                var preactivationCheckGuards$ = preactivationSetup$.pipe(operators.mergeMap(function (p) {\n                    if (typeof p === 'boolean' || _this.navigationId !== id)\n                        return rxjs.of(false);\n                    var appliedUrl = p.appliedUrl, snapshot = p.snapshot;\n                    _this.triggerEvent(new GuardsCheckStart(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot));\n                    return preActivation.checkGuards().pipe(operators.map(function (shouldActivate) {\n                        _this.triggerEvent(new GuardsCheckEnd(id, _this.serializeUrl(url), _this.serializeUrl(appliedUrl), snapshot, shouldActivate));\n                        return { appliedUrl: appliedUrl, snapshot: snapshot, shouldActivate: shouldActivate };\n                    }));\n                }));\n                var preactivationResolveData$ = preactivationCheckGuards$.pipe(operators.mergeMap(function (p) {\n                    if (typeof p === 'boolean' || _this.navigationId !== id)\n                        return rxjs.of(false);\n                    if (p.shouldActivate && preActivation.isActivating()) {\n                        _this.triggerEvent(new ResolveStart(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                        return preActivation.resolveData(_this.paramsInheritanceStrategy).pipe(operators.map(function () {\n                            _this.triggerEvent(new ResolveEnd(id, _this.serializeUrl(url), _this.serializeUrl(p.appliedUrl), p.snapshot));\n                            return p;\n                        }));\n                    }\n                    else {\n                        return rxjs.of(p);\n                    }\n                }));\n                var preactivationDone$ = preactivationResolveData$.pipe(operators.mergeMap(function (p) {\n                    if (typeof p === 'boolean' || _this.navigationId !== id)\n                        return rxjs.of(false);\n                    return _this.hooks\n                        .afterPreactivation(p.snapshot, {\n                        navigationId: id,\n                        appliedUrlTree: url,\n                        rawUrlTree: rawUrl, skipLocationChange: skipLocationChange, replaceUrl: replaceUrl,\n                    })\n                        .pipe(operators.map(function () { return p; }));\n                }));\n                // create router state\n                // this operation has side effects => route state is being affected\n                var routerState$ = preactivationDone$.pipe(operators.map(function (p) {\n                    if (typeof p === 'boolean' || _this.navigationId !== id)\n                        return false;\n                    var appliedUrl = p.appliedUrl, snapshot = p.snapshot, shouldActivate = p.shouldActivate;\n                    if (shouldActivate) {\n                        var state = createRouterState(_this.routeReuseStrategy, snapshot, _this.routerState);\n                        return { appliedUrl: appliedUrl, state: state, shouldActivate: shouldActivate };\n                    }\n                    else {\n                        return { appliedUrl: appliedUrl, state: null, shouldActivate: shouldActivate };\n                    }\n                }));\n                _this.activateRoutes(routerState$, _this.routerState, _this.currentUrlTree, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise);\n            });\n        };\n        /**\n         * Performs the logic of activating routes. This is a synchronous process by default. While this\n         * is a private method, it could be overridden to make activation asynchronous.\n         */\n        Router.prototype.activateRoutes = function (state, storedState, storedUrl, id, url, rawUrl, skipLocationChange, replaceUrl, resolvePromise, rejectPromise) {\n            var _this = this;\n            // applied the new router state\n            // this operation has side effects\n            var navigationIsSuccessful;\n            state\n                .forEach(function (p) {\n                if (typeof p === 'boolean' || !p.shouldActivate || id !== _this.navigationId || !p.state) {\n                    navigationIsSuccessful = false;\n                    return;\n                }\n                var appliedUrl = p.appliedUrl, state = p.state;\n                _this.currentUrlTree = appliedUrl;\n                _this.rawUrlTree = _this.urlHandlingStrategy.merge(_this.currentUrlTree, rawUrl);\n                _this.routerState = state;\n                if (_this.urlUpdateStrategy === 'deferred' && !skipLocationChange) {\n                    _this.setBrowserUrl(_this.rawUrlTree, replaceUrl, id);\n                }\n                new ActivateRoutes(_this.routeReuseStrategy, state, storedState, function (evt) { return _this.triggerEvent(evt); })\n                    .activate(_this.rootContexts);\n                navigationIsSuccessful = true;\n            })\n                .then(function () {\n                if (navigationIsSuccessful) {\n                    _this.navigated = true;\n                    _this.lastSuccessfulId = id;\n                    _this.events\n                        .next(new NavigationEnd(id, _this.serializeUrl(url), _this.serializeUrl(_this.currentUrlTree)));\n                    resolvePromise(true);\n                }\n                else {\n                    _this.resetUrlToCurrentUrlTree();\n                    _this.events\n                        .next(new NavigationCancel(id, _this.serializeUrl(url), ''));\n                    resolvePromise(false);\n                }\n            }, function (e) {\n                if (isNavigationCancelingError(e)) {\n                    _this.navigated = true;\n                    _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                    _this.events\n                        .next(new NavigationCancel(id, _this.serializeUrl(url), e.message));\n                    resolvePromise(false);\n                }\n                else {\n                    _this.resetStateAndUrl(storedState, storedUrl, rawUrl);\n                    _this.events\n                        .next(new NavigationError(id, _this.serializeUrl(url), e));\n                    try {\n                        resolvePromise(_this.errorHandler(e));\n                    }\n                    catch (ee) {\n                        rejectPromise(ee);\n                    }\n                }\n            });\n        };\n        Router.prototype.setBrowserUrl = function (url, replaceUrl, id) {\n            var path = this.urlSerializer.serialize(url);\n            if (this.location.isCurrentPathEqualTo(path) || replaceUrl) {\n                this.location.replaceState(path, '', { navigationId: id });\n            }\n            else {\n                this.location.go(path, '', { navigationId: id });\n            }\n        };\n        Router.prototype.resetStateAndUrl = function (storedState, storedUrl, rawUrl) {\n            this.routerState = storedState;\n            this.currentUrlTree = storedUrl;\n            this.rawUrlTree = this.urlHandlingStrategy.merge(this.currentUrlTree, rawUrl);\n            this.resetUrlToCurrentUrlTree();\n        };\n        Router.prototype.resetUrlToCurrentUrlTree = function () {\n            this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree), '', { navigationId: this.lastSuccessfulId });\n        };\n        return Router;\n    }());\n    var ActivateRoutes = /** @class */ (function () {\n        function ActivateRoutes(routeReuseStrategy, futureState, currState, forwardEvent) {\n            this.routeReuseStrategy = routeReuseStrategy;\n            this.futureState = futureState;\n            this.currState = currState;\n            this.forwardEvent = forwardEvent;\n        }\n        ActivateRoutes.prototype.activate = function (parentContexts) {\n            var futureRoot = this.futureState._root;\n            var currRoot = this.currState ? this.currState._root : null;\n            this.deactivateChildRoutes(futureRoot, currRoot, parentContexts);\n            advanceActivatedRoute(this.futureState.root);\n            this.activateChildRoutes(futureRoot, currRoot, parentContexts);\n        };\n        // De-activate the child route that are not re-used for the future state\n        ActivateRoutes.prototype.deactivateChildRoutes = function (futureNode, currNode, contexts) {\n            var _this = this;\n            var children = nodeChildrenAsMap(currNode);\n            // Recurse on the routes active in the future state to de-activate deeper children\n            futureNode.children.forEach(function (futureChild) {\n                var childOutletName = futureChild.value.outlet;\n                _this.deactivateRoutes(futureChild, children[childOutletName], contexts);\n                delete children[childOutletName];\n            });\n            // De-activate the routes that will not be re-used\n            forEach(children, function (v, childName) {\n                _this.deactivateRouteAndItsChildren(v, contexts);\n            });\n        };\n        ActivateRoutes.prototype.deactivateRoutes = function (futureNode, currNode, parentContext) {\n            var future = futureNode.value;\n            var curr = currNode ? currNode.value : null;\n            if (future === curr) {\n                // Reusing the node, check to see if the children need to be de-activated\n                if (future.component) {\n                    // If we have a normal route, we need to go through an outlet.\n                    var context = parentContext.getContext(future.outlet);\n                    if (context) {\n                        this.deactivateChildRoutes(futureNode, currNode, context.children);\n                    }\n                }\n                else {\n                    // if we have a componentless route, we recurse but keep the same outlet map.\n                    this.deactivateChildRoutes(futureNode, currNode, parentContext);\n                }\n            }\n            else {\n                if (curr) {\n                    // Deactivate the current route which will not be re-used\n                    this.deactivateRouteAndItsChildren(currNode, parentContext);\n                }\n            }\n        };\n        ActivateRoutes.prototype.deactivateRouteAndItsChildren = function (route, parentContexts) {\n            if (this.routeReuseStrategy.shouldDetach(route.value.snapshot)) {\n                this.detachAndStoreRouteSubtree(route, parentContexts);\n            }\n            else {\n                this.deactivateRouteAndOutlet(route, parentContexts);\n            }\n        };\n        ActivateRoutes.prototype.detachAndStoreRouteSubtree = function (route, parentContexts) {\n            var context = parentContexts.getContext(route.value.outlet);\n            if (context && context.outlet) {\n                var componentRef = context.outlet.detach();\n                var contexts = context.children.onOutletDeactivated();\n                this.routeReuseStrategy.store(route.value.snapshot, { componentRef: componentRef, route: route, contexts: contexts });\n            }\n        };\n        ActivateRoutes.prototype.deactivateRouteAndOutlet = function (route, parentContexts) {\n            var _this = this;\n            var context = parentContexts.getContext(route.value.outlet);\n            if (context) {\n                var children = nodeChildrenAsMap(route);\n                var contexts_1 = route.value.component ? context.children : parentContexts;\n                forEach(children, function (v, k) { return _this.deactivateRouteAndItsChildren(v, contexts_1); });\n                if (context.outlet) {\n                    // Destroy the component\n                    context.outlet.deactivate();\n                    // Destroy the contexts for all the outlets that were in the component\n                    context.children.onOutletDeactivated();\n                }\n            }\n        };\n        ActivateRoutes.prototype.activateChildRoutes = function (futureNode, currNode, contexts) {\n            var _this = this;\n            var children = nodeChildrenAsMap(currNode);\n            futureNode.children.forEach(function (c) {\n                _this.activateRoutes(c, children[c.value.outlet], contexts);\n                _this.forwardEvent(new ActivationEnd(c.value.snapshot));\n            });\n            if (futureNode.children.length) {\n                this.forwardEvent(new ChildActivationEnd(futureNode.value.snapshot));\n            }\n        };\n        ActivateRoutes.prototype.activateRoutes = function (futureNode, currNode, parentContexts) {\n            var future = futureNode.value;\n            var curr = currNode ? currNode.value : null;\n            advanceActivatedRoute(future);\n            // reusing the node\n            if (future === curr) {\n                if (future.component) {\n                    // If we have a normal route, we need to go through an outlet.\n                    var context = parentContexts.getOrCreateContext(future.outlet);\n                    this.activateChildRoutes(futureNode, currNode, context.children);\n                }\n                else {\n                    // if we have a componentless route, we recurse but keep the same outlet map.\n                    this.activateChildRoutes(futureNode, currNode, parentContexts);\n                }\n            }\n            else {\n                if (future.component) {\n                    // if we have a normal route, we need to place the component into the outlet and recurse.\n                    var context = parentContexts.getOrCreateContext(future.outlet);\n                    if (this.routeReuseStrategy.shouldAttach(future.snapshot)) {\n                        var stored = this.routeReuseStrategy.retrieve(future.snapshot);\n                        this.routeReuseStrategy.store(future.snapshot, null);\n                        context.children.onOutletReAttached(stored.contexts);\n                        context.attachRef = stored.componentRef;\n                        context.route = stored.route.value;\n                        if (context.outlet) {\n                            // Attach right away when the outlet has already been instantiated\n                            // Otherwise attach from `RouterOutlet.ngOnInit` when it is instantiated\n                            context.outlet.attach(stored.componentRef, stored.route.value);\n                        }\n                        advanceActivatedRouteNodeAndItsChildren(stored.route);\n                    }\n                    else {\n                        var config = parentLoadedConfig(future.snapshot);\n                        var cmpFactoryResolver = config ? config.module.componentFactoryResolver : null;\n                        context.attachRef = null;\n                        context.route = future;\n                        context.resolver = cmpFactoryResolver;\n                        if (context.outlet) {\n                            // Activate the outlet when it has already been instantiated\n                            // Otherwise it will get activated from its `ngOnInit` when instantiated\n                            context.outlet.activateWith(future, cmpFactoryResolver);\n                        }\n                        this.activateChildRoutes(futureNode, null, context.children);\n                    }\n                }\n                else {\n                    // if we have a componentless route, we recurse but keep the same outlet map.\n                    this.activateChildRoutes(futureNode, null, parentContexts);\n                }\n            }\n        };\n        return ActivateRoutes;\n    }());\n    function advanceActivatedRouteNodeAndItsChildren(node) {\n        advanceActivatedRoute(node.value);\n        node.children.forEach(advanceActivatedRouteNodeAndItsChildren);\n    }\n    function parentLoadedConfig(snapshot) {\n        for (var s = snapshot.parent; s; s = s.parent) {\n            var route = s.routeConfig;\n            if (route && route._loadedConfig)\n                return route._loadedConfig;\n            if (route && route.component)\n                return null;\n        }\n        return null;\n    }\n    function validateCommands(commands) {\n        for (var i = 0; i < commands.length; i++) {\n            var cmd = commands[i];\n            if (cmd == null) {\n                throw new Error(\"The requested path contains \" + cmd + \" segment at index \" + i);\n            }\n        }\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Lets you link to specific routes in your app.\n     *\n     * Consider the following route configuration:\n     * `[{ path: 'user/:name', component: UserCmp }]`.\n     * When linking to this `user/:name` route, you use the `RouterLink` directive.\n     *\n     * If the link is static, you can use the directive as follows:\n     * `<a routerLink=\"/user/bob\">link to user component</a>`\n     *\n     * If you use dynamic values to generate the link, you can pass an array of path\n     * segments, followed by the params for each segment.\n     *\n     * For instance `['/team', teamId, 'user', userName, {details: true}]`\n     * means that we want to generate a link to `/team/11/user/bob;details=true`.\n     *\n     * Multiple static segments can be merged into one\n     * (e.g., `['/team/11/user', userName, {details: true}]`).\n     *\n     * The first segment name can be prepended with `/`, `./`, or `../`:\n     * * If the first segment begins with `/`, the router will look up the route from the root of the\n     *   app.\n     * * If the first segment begins with `./`, or doesn't begin with a slash, the router will\n     *   instead look in the children of the current activated route.\n     * * And if the first segment begins with `../`, the router will go up one level.\n     *\n     * You can set query params and fragment as follows:\n     *\n     * ```\n     * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" fragment=\"education\">\n     *   link to user component\n     * </a>\n     * ```\n     * RouterLink will use these to generate this link: `/user/bob#education?debug=true`.\n     *\n     * (Deprecated in v4.0.0 use `queryParamsHandling` instead) You can also tell the\n     * directive to preserve the current query params and fragment:\n     *\n     * ```\n     * <a [routerLink]=\"['/user/bob']\" preserveQueryParams preserveFragment>\n     *   link to user component\n     * </a>\n     * ```\n     *\n     * You can tell the directive to how to handle queryParams, available options are:\n     *  - `'merge'`: merge the queryParams into the current queryParams\n     *  - `'preserve'`: preserve the current queryParams\n     *  - default/`''`: use the queryParams only\n     *\n     * Same options for {@link NavigationExtras#queryParamsHandling\n     * NavigationExtras#queryParamsHandling}.\n     *\n     * ```\n     * <a [routerLink]=\"['/user/bob']\" [queryParams]=\"{debug: true}\" queryParamsHandling=\"merge\">\n     *   link to user component\n     * </a>\n     * ```\n     *\n     * The router link directive always treats the provided input as a delta to the current url.\n     *\n     * For instance, if the current url is `/user/(box//aux:team)`.\n     *\n     * Then the following link `<a [routerLink]=\"['/user/jim']\">Jim</a>` will generate the link\n     * `/user/(jim//aux:team)`.\n     *\n     * See {@link Router#createUrlTree createUrlTree} for more information.\n     *\n     * @ngModule RouterModule\n     *\n     *\n     */\n    var RouterLink = /** @class */ (function () {\n        function RouterLink(router, route, tabIndex, renderer, el) {\n            this.router = router;\n            this.route = route;\n            this.commands = [];\n            if (tabIndex == null) {\n                renderer.setAttribute(el.nativeElement, 'tabindex', '0');\n            }\n        }\n        Object.defineProperty(RouterLink.prototype, \"routerLink\", {\n            set: function (commands) {\n                if (commands != null) {\n                    this.commands = Array.isArray(commands) ? commands : [commands];\n                }\n                else {\n                    this.commands = [];\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RouterLink.prototype, \"preserveQueryParams\", {\n            /**\n             * @deprecated 4.0.0 use `queryParamsHandling` instead.\n             */\n            set: function (value) {\n                if (core.isDevMode() && console && console.warn) {\n                    console.warn('preserveQueryParams is deprecated!, use queryParamsHandling instead.');\n                }\n                this.preserve = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        RouterLink.prototype.onClick = function () {\n            var extras = {\n                skipLocationChange: attrBoolValue(this.skipLocationChange),\n                replaceUrl: attrBoolValue(this.replaceUrl),\n            };\n            this.router.navigateByUrl(this.urlTree, extras);\n            return true;\n        };\n        Object.defineProperty(RouterLink.prototype, \"urlTree\", {\n            get: function () {\n                return this.router.createUrlTree(this.commands, {\n                    relativeTo: this.route,\n                    queryParams: this.queryParams,\n                    fragment: this.fragment,\n                    preserveQueryParams: attrBoolValue(this.preserve),\n                    queryParamsHandling: this.queryParamsHandling,\n                    preserveFragment: attrBoolValue(this.preserveFragment),\n                });\n            },\n            enumerable: true,\n            configurable: true\n        });\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object)\n        ], RouterLink.prototype, \"queryParams\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", String)\n        ], RouterLink.prototype, \"fragment\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", String)\n        ], RouterLink.prototype, \"queryParamsHandling\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLink.prototype, \"preserveFragment\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLink.prototype, \"skipLocationChange\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLink.prototype, \"replaceUrl\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object),\n            __metadata(\"design:paramtypes\", [Object])\n        ], RouterLink.prototype, \"routerLink\", null);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean),\n            __metadata(\"design:paramtypes\", [Boolean])\n        ], RouterLink.prototype, \"preserveQueryParams\", null);\n        __decorate([\n            core.HostListener('click'),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", []),\n            __metadata(\"design:returntype\", Boolean)\n        ], RouterLink.prototype, \"onClick\", null);\n        RouterLink = __decorate([\n            core.Directive({ selector: ':not(a)[routerLink]' }),\n            __param(2, core.Attribute('tabindex')),\n            __metadata(\"design:paramtypes\", [Router, ActivatedRoute, String, core.Renderer2, core.ElementRef])\n        ], RouterLink);\n        return RouterLink;\n    }());\n    /**\n     * @description\n     *\n     * Lets you link to specific routes in your app.\n     *\n     * See `RouterLink` for more information.\n     *\n     * @ngModule RouterModule\n     *\n     *\n     */\n    var RouterLinkWithHref = /** @class */ (function () {\n        function RouterLinkWithHref(router, route, locationStrategy) {\n            var _this = this;\n            this.router = router;\n            this.route = route;\n            this.locationStrategy = locationStrategy;\n            this.commands = [];\n            this.subscription = router.events.subscribe(function (s) {\n                if (s instanceof NavigationEnd) {\n                    _this.updateTargetUrlAndHref();\n                }\n            });\n        }\n        Object.defineProperty(RouterLinkWithHref.prototype, \"routerLink\", {\n            set: function (commands) {\n                if (commands != null) {\n                    this.commands = Array.isArray(commands) ? commands : [commands];\n                }\n                else {\n                    this.commands = [];\n                }\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RouterLinkWithHref.prototype, \"preserveQueryParams\", {\n            set: function (value) {\n                if (core.isDevMode() && console && console.warn) {\n                    console.warn('preserveQueryParams is deprecated, use queryParamsHandling instead.');\n                }\n                this.preserve = value;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        RouterLinkWithHref.prototype.ngOnChanges = function (changes) { this.updateTargetUrlAndHref(); };\n        RouterLinkWithHref.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n        RouterLinkWithHref.prototype.onClick = function (button, ctrlKey, metaKey, shiftKey) {\n            if (button !== 0 || ctrlKey || metaKey || shiftKey) {\n                return true;\n            }\n            if (typeof this.target === 'string' && this.target != '_self') {\n                return true;\n            }\n            var extras = {\n                skipLocationChange: attrBoolValue(this.skipLocationChange),\n                replaceUrl: attrBoolValue(this.replaceUrl),\n            };\n            this.router.navigateByUrl(this.urlTree, extras);\n            return false;\n        };\n        RouterLinkWithHref.prototype.updateTargetUrlAndHref = function () {\n            this.href = this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree));\n        };\n        Object.defineProperty(RouterLinkWithHref.prototype, \"urlTree\", {\n            get: function () {\n                return this.router.createUrlTree(this.commands, {\n                    relativeTo: this.route,\n                    queryParams: this.queryParams,\n                    fragment: this.fragment,\n                    preserveQueryParams: attrBoolValue(this.preserve),\n                    queryParamsHandling: this.queryParamsHandling,\n                    preserveFragment: attrBoolValue(this.preserveFragment),\n                });\n            },\n            enumerable: true,\n            configurable: true\n        });\n        __decorate([\n            core.HostBinding('attr.target'), core.Input(),\n            __metadata(\"design:type\", String)\n        ], RouterLinkWithHref.prototype, \"target\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object)\n        ], RouterLinkWithHref.prototype, \"queryParams\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", String)\n        ], RouterLinkWithHref.prototype, \"fragment\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", String)\n        ], RouterLinkWithHref.prototype, \"queryParamsHandling\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLinkWithHref.prototype, \"preserveFragment\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLinkWithHref.prototype, \"skipLocationChange\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean)\n        ], RouterLinkWithHref.prototype, \"replaceUrl\", void 0);\n        __decorate([\n            core.HostBinding(),\n            __metadata(\"design:type\", String)\n        ], RouterLinkWithHref.prototype, \"href\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object),\n            __metadata(\"design:paramtypes\", [Object])\n        ], RouterLinkWithHref.prototype, \"routerLink\", null);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Boolean),\n            __metadata(\"design:paramtypes\", [Boolean])\n        ], RouterLinkWithHref.prototype, \"preserveQueryParams\", null);\n        __decorate([\n            core.HostListener('click', ['$event.button', '$event.ctrlKey', '$event.metaKey', '$event.shiftKey']),\n            __metadata(\"design:type\", Function),\n            __metadata(\"design:paramtypes\", [Number, Boolean, Boolean, Boolean]),\n            __metadata(\"design:returntype\", Boolean)\n        ], RouterLinkWithHref.prototype, \"onClick\", null);\n        RouterLinkWithHref = __decorate([\n            core.Directive({ selector: 'a[routerLink]' }),\n            __metadata(\"design:paramtypes\", [Router, ActivatedRoute,\n                common.LocationStrategy])\n        ], RouterLinkWithHref);\n        return RouterLinkWithHref;\n    }());\n    function attrBoolValue(s) {\n        return s === '' || !!s;\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     *\n     * @description\n     *\n     * Lets you add a CSS class to an element when the link's route becomes active.\n     *\n     * This directive lets you add a CSS class to an element when the link's route\n     * becomes active.\n     *\n     * Consider the following example:\n     *\n     * ```\n     * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\">Bob</a>\n     * ```\n     *\n     * When the url is either '/user' or '/user/bob', the active-link class will\n     * be added to the `a` tag. If the url changes, the class will be removed.\n     *\n     * You can set more than one class, as follows:\n     *\n     * ```\n     * <a routerLink=\"/user/bob\" routerLinkActive=\"class1 class2\">Bob</a>\n     * <a routerLink=\"/user/bob\" [routerLinkActive]=\"['class1', 'class2']\">Bob</a>\n     * ```\n     *\n     * You can configure RouterLinkActive by passing `exact: true`. This will add the classes\n     * only when the url matches the link exactly.\n     *\n     * ```\n     * <a routerLink=\"/user/bob\" routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact:\n     * true}\">Bob</a>\n     * ```\n     *\n     * You can assign the RouterLinkActive instance to a template variable and directly check\n     * the `isActive` status.\n     * ```\n     * <a routerLink=\"/user/bob\" routerLinkActive #rla=\"routerLinkActive\">\n     *   Bob {{ rla.isActive ? '(already open)' : ''}}\n     * </a>\n     * ```\n     *\n     * Finally, you can apply the RouterLinkActive directive to an ancestor of a RouterLink.\n     *\n     * ```\n     * <div routerLinkActive=\"active-link\" [routerLinkActiveOptions]=\"{exact: true}\">\n     *   <a routerLink=\"/user/jim\">Jim</a>\n     *   <a routerLink=\"/user/bob\">Bob</a>\n     * </div>\n     * ```\n     *\n     * This will set the active-link class on the div tag if the url is either '/user/jim' or\n     * '/user/bob'.\n     *\n     * @ngModule RouterModule\n     *\n     *\n     */\n    var RouterLinkActive = /** @class */ (function () {\n        function RouterLinkActive(router, element, renderer, cdr) {\n            var _this = this;\n            this.router = router;\n            this.element = element;\n            this.renderer = renderer;\n            this.cdr = cdr;\n            this.classes = [];\n            this.isActive = false;\n            this.routerLinkActiveOptions = { exact: false };\n            this.subscription = router.events.subscribe(function (s) {\n                if (s instanceof NavigationEnd) {\n                    _this.update();\n                }\n            });\n        }\n        RouterLinkActive.prototype.ngAfterContentInit = function () {\n            var _this = this;\n            this.links.changes.subscribe(function (_) { return _this.update(); });\n            this.linksWithHrefs.changes.subscribe(function (_) { return _this.update(); });\n            this.update();\n        };\n        Object.defineProperty(RouterLinkActive.prototype, \"routerLinkActive\", {\n            set: function (data) {\n                var classes = Array.isArray(data) ? data : data.split(' ');\n                this.classes = classes.filter(function (c) { return !!c; });\n            },\n            enumerable: true,\n            configurable: true\n        });\n        RouterLinkActive.prototype.ngOnChanges = function (changes) { this.update(); };\n        RouterLinkActive.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n        RouterLinkActive.prototype.update = function () {\n            var _this = this;\n            if (!this.links || !this.linksWithHrefs || !this.router.navigated)\n                return;\n            Promise.resolve().then(function () {\n                var hasActiveLinks = _this.hasActiveLinks();\n                if (_this.isActive !== hasActiveLinks) {\n                    _this.isActive = hasActiveLinks;\n                    _this.classes.forEach(function (c) {\n                        if (hasActiveLinks) {\n                            _this.renderer.addClass(_this.element.nativeElement, c);\n                        }\n                        else {\n                            _this.renderer.removeClass(_this.element.nativeElement, c);\n                        }\n                    });\n                }\n            });\n        };\n        RouterLinkActive.prototype.isLinkActive = function (router) {\n            var _this = this;\n            return function (link) {\n                return router.isActive(link.urlTree, _this.routerLinkActiveOptions.exact);\n            };\n        };\n        RouterLinkActive.prototype.hasActiveLinks = function () {\n            return this.links.some(this.isLinkActive(this.router)) ||\n                this.linksWithHrefs.some(this.isLinkActive(this.router));\n        };\n        __decorate([\n            core.ContentChildren(RouterLink, { descendants: true }),\n            __metadata(\"design:type\", core.QueryList)\n        ], RouterLinkActive.prototype, \"links\", void 0);\n        __decorate([\n            core.ContentChildren(RouterLinkWithHref, { descendants: true }),\n            __metadata(\"design:type\", core.QueryList)\n        ], RouterLinkActive.prototype, \"linksWithHrefs\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object)\n        ], RouterLinkActive.prototype, \"routerLinkActiveOptions\", void 0);\n        __decorate([\n            core.Input(),\n            __metadata(\"design:type\", Object),\n            __metadata(\"design:paramtypes\", [Object])\n        ], RouterLinkActive.prototype, \"routerLinkActive\", null);\n        RouterLinkActive = __decorate([\n            core.Directive({\n                selector: '[routerLinkActive]',\n                exportAs: 'routerLinkActive',\n            }),\n            __metadata(\"design:paramtypes\", [Router, core.ElementRef, core.Renderer2,\n                core.ChangeDetectorRef])\n        ], RouterLinkActive);\n        return RouterLinkActive;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Store contextual information about a `RouterOutlet`\n     *\n     *\n     */\n    var OutletContext = /** @class */ (function () {\n        function OutletContext() {\n            this.outlet = null;\n            this.route = null;\n            this.resolver = null;\n            this.children = new ChildrenOutletContexts();\n            this.attachRef = null;\n        }\n        return OutletContext;\n    }());\n    /**\n     * Store contextual information about the children (= nested) `RouterOutlet`\n     *\n     *\n     */\n    var ChildrenOutletContexts = /** @class */ (function () {\n        function ChildrenOutletContexts() {\n            // contexts for child outlets, by name.\n            this.contexts = new Map();\n        }\n        /** Called when a `RouterOutlet` directive is instantiated */\n        ChildrenOutletContexts.prototype.onChildOutletCreated = function (childName, outlet) {\n            var context = this.getOrCreateContext(childName);\n            context.outlet = outlet;\n            this.contexts.set(childName, context);\n        };\n        /**\n         * Called when a `RouterOutlet` directive is destroyed.\n         * We need to keep the context as the outlet could be destroyed inside a NgIf and might be\n         * re-created later.\n         */\n        ChildrenOutletContexts.prototype.onChildOutletDestroyed = function (childName) {\n            var context = this.getContext(childName);\n            if (context) {\n                context.outlet = null;\n            }\n        };\n        /**\n         * Called when the corresponding route is deactivated during navigation.\n         * Because the component get destroyed, all children outlet are destroyed.\n         */\n        ChildrenOutletContexts.prototype.onOutletDeactivated = function () {\n            var contexts = this.contexts;\n            this.contexts = new Map();\n            return contexts;\n        };\n        ChildrenOutletContexts.prototype.onOutletReAttached = function (contexts) { this.contexts = contexts; };\n        ChildrenOutletContexts.prototype.getOrCreateContext = function (childName) {\n            var context = this.getContext(childName);\n            if (!context) {\n                context = new OutletContext();\n                this.contexts.set(childName, context);\n            }\n            return context;\n        };\n        ChildrenOutletContexts.prototype.getContext = function (childName) { return this.contexts.get(childName) || null; };\n        return ChildrenOutletContexts;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Acts as a placeholder that Angular dynamically fills based on the current router state.\n     *\n     * ```\n     * <router-outlet></router-outlet>\n     * <router-outlet name='left'></router-outlet>\n     * <router-outlet name='right'></router-outlet>\n     * ```\n     *\n     * A router outlet will emit an activate event any time a new component is being instantiated,\n     * and a deactivate event when it is being destroyed.\n     *\n     * ```\n     * <router-outlet\n     *   (activate)='onActivate($event)'\n     *   (deactivate)='onDeactivate($event)'></router-outlet>\n     * ```\n     * @ngModule RouterModule\n     *\n     *\n     */\n    var RouterOutlet = /** @class */ (function () {\n        function RouterOutlet(parentContexts, location, resolver, name, changeDetector) {\n            this.parentContexts = parentContexts;\n            this.location = location;\n            this.resolver = resolver;\n            this.changeDetector = changeDetector;\n            this.activated = null;\n            this._activatedRoute = null;\n            this.activateEvents = new core.EventEmitter();\n            this.deactivateEvents = new core.EventEmitter();\n            this.name = name || PRIMARY_OUTLET;\n            parentContexts.onChildOutletCreated(this.name, this);\n        }\n        RouterOutlet.prototype.ngOnDestroy = function () { this.parentContexts.onChildOutletDestroyed(this.name); };\n        RouterOutlet.prototype.ngOnInit = function () {\n            if (!this.activated) {\n                // If the outlet was not instantiated at the time the route got activated we need to populate\n                // the outlet when it is initialized (ie inside a NgIf)\n                var context = this.parentContexts.getContext(this.name);\n                if (context && context.route) {\n                    if (context.attachRef) {\n                        // `attachRef` is populated when there is an existing component to mount\n                        this.attach(context.attachRef, context.route);\n                    }\n                    else {\n                        // otherwise the component defined in the configuration is created\n                        this.activateWith(context.route, context.resolver || null);\n                    }\n                }\n            }\n        };\n        Object.defineProperty(RouterOutlet.prototype, \"isActivated\", {\n            get: function () { return !!this.activated; },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RouterOutlet.prototype, \"component\", {\n            get: function () {\n                if (!this.activated)\n                    throw new Error('Outlet is not activated');\n                return this.activated.instance;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RouterOutlet.prototype, \"activatedRoute\", {\n            get: function () {\n                if (!this.activated)\n                    throw new Error('Outlet is not activated');\n                return this._activatedRoute;\n            },\n            enumerable: true,\n            configurable: true\n        });\n        Object.defineProperty(RouterOutlet.prototype, \"activatedRouteData\", {\n            get: function () {\n                if (this._activatedRoute) {\n                    return this._activatedRoute.snapshot.data;\n                }\n                return {};\n            },\n            enumerable: true,\n            configurable: true\n        });\n        /**\n         * Called when the `RouteReuseStrategy` instructs to detach the subtree\n         */\n        RouterOutlet.prototype.detach = function () {\n            if (!this.activated)\n                throw new Error('Outlet is not activated');\n            this.location.detach();\n            var cmp = this.activated;\n            this.activated = null;\n            this._activatedRoute = null;\n            return cmp;\n        };\n        /**\n         * Called when the `RouteReuseStrategy` instructs to re-attach a previously detached subtree\n         */\n        RouterOutlet.prototype.attach = function (ref, activatedRoute) {\n            this.activated = ref;\n            this._activatedRoute = activatedRoute;\n            this.location.insert(ref.hostView);\n        };\n        RouterOutlet.prototype.deactivate = function () {\n            if (this.activated) {\n                var c = this.component;\n                this.activated.destroy();\n                this.activated = null;\n                this._activatedRoute = null;\n                this.deactivateEvents.emit(c);\n            }\n        };\n        RouterOutlet.prototype.activateWith = function (activatedRoute, resolver) {\n            if (this.isActivated) {\n                throw new Error('Cannot activate an already activated outlet');\n            }\n            this._activatedRoute = activatedRoute;\n            var snapshot = activatedRoute._futureSnapshot;\n            var component = snapshot.routeConfig.component;\n            resolver = resolver || this.resolver;\n            var factory = resolver.resolveComponentFactory(component);\n            var childContexts = this.parentContexts.getOrCreateContext(this.name).children;\n            var injector = new OutletInjector(activatedRoute, childContexts, this.location.injector);\n            this.activated = this.location.createComponent(factory, this.location.length, injector);\n            // Calling `markForCheck` to make sure we will run the change detection when the\n            // `RouterOutlet` is inside a `ChangeDetectionStrategy.OnPush` component.\n            this.changeDetector.markForCheck();\n            this.activateEvents.emit(this.activated.instance);\n        };\n        __decorate([\n            core.Output('activate'),\n            __metadata(\"design:type\", Object)\n        ], RouterOutlet.prototype, \"activateEvents\", void 0);\n        __decorate([\n            core.Output('deactivate'),\n            __metadata(\"design:type\", Object)\n        ], RouterOutlet.prototype, \"deactivateEvents\", void 0);\n        RouterOutlet = __decorate([\n            core.Directive({ selector: 'router-outlet', exportAs: 'outlet' }),\n            __param(3, core.Attribute('name')),\n            __metadata(\"design:paramtypes\", [ChildrenOutletContexts, core.ViewContainerRef,\n                core.ComponentFactoryResolver, String, core.ChangeDetectorRef])\n        ], RouterOutlet);\n        return RouterOutlet;\n    }());\n    var OutletInjector = /** @class */ (function () {\n        function OutletInjector(route, childContexts, parent) {\n            this.route = route;\n            this.childContexts = childContexts;\n            this.parent = parent;\n        }\n        OutletInjector.prototype.get = function (token, notFoundValue) {\n            if (token === ActivatedRoute) {\n                return this.route;\n            }\n            if (token === ChildrenOutletContexts) {\n                return this.childContexts;\n            }\n            return this.parent.get(token, notFoundValue);\n        };\n        return OutletInjector;\n    }());\n\n    /**\n    *@license\n    *Copyright Google Inc. All Rights Reserved.\n    *\n    *Use of this source code is governed by an MIT-style license that can be\n    *found in the LICENSE file at https://angular.io/license\n    */\n    /**\n     * @description\n     *\n     * Provides a preloading strategy.\n     *\n     * @experimental\n     */\n    var PreloadingStrategy = /** @class */ (function () {\n        function PreloadingStrategy() {\n        }\n        return PreloadingStrategy;\n    }());\n    /**\n     * @description\n     *\n     * Provides a preloading strategy that preloads all modules as quickly as possible.\n     *\n     * ```\n     * RouteModule.forRoot(ROUTES, {preloadingStrategy: PreloadAllModules})\n     * ```\n     *\n     * @experimental\n     */\n    var PreloadAllModules = /** @class */ (function () {\n        function PreloadAllModules() {\n        }\n        PreloadAllModules.prototype.preload = function (route, fn) {\n            return fn().pipe(operators.catchError(function () { return rxjs.of(null); }));\n        };\n        return PreloadAllModules;\n    }());\n    /**\n     * @description\n     *\n     * Provides a preloading strategy that does not preload any modules.\n     *\n     * This strategy is enabled by default.\n     *\n     * @experimental\n     */\n    var NoPreloading = /** @class */ (function () {\n        function NoPreloading() {\n        }\n        NoPreloading.prototype.preload = function (route, fn) { return rxjs.of(null); };\n        return NoPreloading;\n    }());\n    /**\n     * The preloader optimistically loads all router configurations to\n     * make navigations into lazily-loaded sections of the application faster.\n     *\n     * The preloader runs in the background. When the router bootstraps, the preloader\n     * starts listening to all navigation events. After every such event, the preloader\n     * will check if any configurations can be loaded lazily.\n     *\n     * If a route is protected by `canLoad` guards, the preloaded will not load it.\n     *\n     *\n     */\n    var RouterPreloader = /** @class */ (function () {\n        function RouterPreloader(router, moduleLoader, compiler, injector, preloadingStrategy) {\n            this.router = router;\n            this.injector = injector;\n            this.preloadingStrategy = preloadingStrategy;\n            var onStartLoad = function (r) { return router.triggerEvent(new RouteConfigLoadStart(r)); };\n            var onEndLoad = function (r) { return router.triggerEvent(new RouteConfigLoadEnd(r)); };\n            this.loader = new RouterConfigLoader(moduleLoader, compiler, onStartLoad, onEndLoad);\n        }\n        RouterPreloader.prototype.setUpPreloading = function () {\n            var _this = this;\n            this.subscription =\n                this.router.events\n                    .pipe(operators.filter(function (e) { return e instanceof NavigationEnd; }), operators.concatMap(function () { return _this.preload(); }))\n                    .subscribe(function () { });\n        };\n        RouterPreloader.prototype.preload = function () {\n            var ngModule = this.injector.get(core.NgModuleRef);\n            return this.processRoutes(ngModule, this.router.config);\n        };\n        // TODO(jasonaden): This class relies on code external to the class to call setUpPreloading. If\n        // this hasn't been done, ngOnDestroy will fail as this.subscription will be undefined. This\n        // should be refactored.\n        RouterPreloader.prototype.ngOnDestroy = function () { this.subscription.unsubscribe(); };\n        RouterPreloader.prototype.processRoutes = function (ngModule, routes) {\n            var e_1, _a;\n            var res = [];\n            try {\n                for (var routes_1 = __values(routes), routes_1_1 = routes_1.next(); !routes_1_1.done; routes_1_1 = routes_1.next()) {\n                    var route = routes_1_1.value;\n                    // we already have the config loaded, just recurse\n                    if (route.loadChildren && !route.canLoad && route._loadedConfig) {\n                        var childConfig = route._loadedConfig;\n                        res.push(this.processRoutes(childConfig.module, childConfig.routes));\n                        // no config loaded, fetch the config\n                    }\n                    else if (route.loadChildren && !route.canLoad) {\n                        res.push(this.preloadConfig(ngModule, route));\n                        // recurse into children\n                    }\n                    else if (route.children) {\n                        res.push(this.processRoutes(ngModule, route.children));\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (routes_1_1 && !routes_1_1.done && (_a = routes_1.return)) _a.call(routes_1);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            return rxjs.from(res).pipe(operators.mergeAll(), operators.map(function (_) { return void 0; }));\n        };\n        RouterPreloader.prototype.preloadConfig = function (ngModule, route) {\n            var _this = this;\n            return this.preloadingStrategy.preload(route, function () {\n                var loaded$ = _this.loader.load(ngModule.injector, route);\n                return loaded$.pipe(operators.mergeMap(function (config) {\n                    route._loadedConfig = config;\n                    return _this.processRoutes(config.module, config.routes);\n                }));\n            });\n        };\n        RouterPreloader = __decorate([\n            core.Injectable(),\n            __metadata(\"design:paramtypes\", [Router, core.NgModuleFactoryLoader, core.Compiler,\n                core.Injector, PreloadingStrategy])\n        ], RouterPreloader);\n        return RouterPreloader;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var RouterScroller = /** @class */ (function () {\n        function RouterScroller(router, \n        /** @docsNotRequired */ viewportScroller, options) {\n            if (options === void 0) { options = {}; }\n            this.router = router;\n            this.viewportScroller = viewportScroller;\n            this.options = options;\n            this.lastId = 0;\n            this.lastSource = 'imperative';\n            this.restoredId = 0;\n            this.store = {};\n            // Default both options to 'disabled'\n            options.scrollPositionRestoration = options.scrollPositionRestoration || 'disabled';\n            options.anchorScrolling = options.anchorScrolling || 'disabled';\n        }\n        RouterScroller.prototype.init = function () {\n            // we want to disable the automatic scrolling because having two places\n            // responsible for scrolling results race conditions, especially given\n            // that browser don't implement this behavior consistently\n            if (this.options.scrollPositionRestoration !== 'disabled') {\n                this.viewportScroller.setHistoryScrollRestoration('manual');\n            }\n            this.routerEventsSubscription = this.createScrollEvents();\n            this.scrollEventsSubscription = this.consumeScrollEvents();\n        };\n        RouterScroller.prototype.createScrollEvents = function () {\n            var _this = this;\n            return this.router.events.subscribe(function (e) {\n                if (e instanceof NavigationStart) {\n                    // store the scroll position of the current stable navigations.\n                    _this.store[_this.lastId] = _this.viewportScroller.getScrollPosition();\n                    _this.lastSource = e.navigationTrigger;\n                    _this.restoredId = e.restoredState ? e.restoredState.navigationId : 0;\n                }\n                else if (e instanceof NavigationEnd) {\n                    _this.lastId = e.id;\n                    _this.scheduleScrollEvent(e, _this.router.parseUrl(e.urlAfterRedirects).fragment);\n                }\n            });\n        };\n        RouterScroller.prototype.consumeScrollEvents = function () {\n            var _this = this;\n            return this.router.events.subscribe(function (e) {\n                if (!(e instanceof Scroll))\n                    return;\n                // a popstate event. The pop state event will always ignore anchor scrolling.\n                if (e.position) {\n                    if (_this.options.scrollPositionRestoration === 'top') {\n                        _this.viewportScroller.scrollToPosition([0, 0]);\n                    }\n                    else if (_this.options.scrollPositionRestoration === 'enabled') {\n                        _this.viewportScroller.scrollToPosition(e.position);\n                    }\n                    // imperative navigation \"forward\"\n                }\n                else {\n                    if (e.anchor && _this.options.anchorScrolling === 'enabled') {\n                        _this.viewportScroller.scrollToAnchor(e.anchor);\n                    }\n                    else if (_this.options.scrollPositionRestoration !== 'disabled') {\n                        _this.viewportScroller.scrollToPosition([0, 0]);\n                    }\n                }\n            });\n        };\n        RouterScroller.prototype.scheduleScrollEvent = function (routerEvent, anchor) {\n            this.router.triggerEvent(new Scroll(routerEvent, this.lastSource === 'popstate' ? this.store[this.restoredId] : null, anchor));\n        };\n        RouterScroller.prototype.ngOnDestroy = function () {\n            if (this.routerEventsSubscription) {\n                this.routerEventsSubscription.unsubscribe();\n            }\n            if (this.scrollEventsSubscription) {\n                this.scrollEventsSubscription.unsubscribe();\n            }\n        };\n        return RouterScroller;\n    }());\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @description\n     *\n     * Contains a list of directives\n     *\n     *\n     */\n    var ROUTER_DIRECTIVES = [RouterOutlet, RouterLink, RouterLinkWithHref, RouterLinkActive, EmptyOutletComponent];\n    /**\n     * @description\n     *\n     * Is used in DI to configure the router.\n     *\n     *\n     */\n    var ROUTER_CONFIGURATION = new core.InjectionToken('ROUTER_CONFIGURATION');\n    /**\n     * @docsNotRequired\n     */\n    var ROUTER_FORROOT_GUARD = new core.InjectionToken('ROUTER_FORROOT_GUARD');\n    var ROUTER_PROVIDERS = [\n        common.Location,\n        { provide: UrlSerializer, useClass: DefaultUrlSerializer },\n        {\n            provide: Router,\n            useFactory: setupRouter,\n            deps: [\n                core.ApplicationRef, UrlSerializer, ChildrenOutletContexts, common.Location, core.Injector,\n                core.NgModuleFactoryLoader, core.Compiler, ROUTES, ROUTER_CONFIGURATION,\n                [UrlHandlingStrategy, new core.Optional()], [RouteReuseStrategy, new core.Optional()]\n            ]\n        },\n        ChildrenOutletContexts,\n        { provide: ActivatedRoute, useFactory: rootRoute, deps: [Router] },\n        { provide: core.NgModuleFactoryLoader, useClass: core.SystemJsNgModuleLoader },\n        RouterPreloader,\n        NoPreloading,\n        PreloadAllModules,\n        { provide: ROUTER_CONFIGURATION, useValue: { enableTracing: false } },\n    ];\n    function routerNgProbeToken() {\n        return new core.NgProbeToken('Router', Router);\n    }\n    /**\n     * @usageNotes\n     *\n     * RouterModule can be imported multiple times: once per lazily-loaded bundle.\n     * Since the router deals with a global shared resource--location, we cannot have\n     * more than one router service active.\n     *\n     * That is why there are two ways to create the module: `RouterModule.forRoot` and\n     * `RouterModule.forChild`.\n     *\n     * * `forRoot` creates a module that contains all the directives, the given routes, and the router\n     *   service itself.\n     * * `forChild` creates a module that contains all the directives and the given routes, but does not\n     *   include the router service.\n     *\n     * When registered at the root, the module should be used as follows\n     *\n     * ```\n     * @NgModule({\n     *   imports: [RouterModule.forRoot(ROUTES)]\n     * })\n     * class MyNgModule {}\n     * ```\n     *\n     * For submodules and lazy loaded submodules the module should be used as follows:\n     *\n     * ```\n     * @NgModule({\n     *   imports: [RouterModule.forChild(ROUTES)]\n     * })\n     * class MyNgModule {}\n     * ```\n     *\n     * @description\n     *\n     * Adds router directives and providers.\n     *\n     * Managing state transitions is one of the hardest parts of building applications. This is\n     * especially true on the web, where you also need to ensure that the state is reflected in the URL.\n     * In addition, we often want to split applications into multiple bundles and load them on demand.\n     * Doing this transparently is not trivial.\n     *\n     * The Angular router solves these problems. Using the router, you can declaratively specify\n     * application states, manage state transitions while taking care of the URL, and load bundles on\n     * demand.\n     *\n     * [Read this developer guide](https://angular.io/docs/ts/latest/guide/router.html) to get an\n     * overview of how the router should be used.\n     *\n     *\n     */\n    var RouterModule = /** @class */ (function () {\n        // Note: We are injecting the Router so it gets created eagerly...\n        function RouterModule(guard, router) {\n        }\n        RouterModule_1 = RouterModule;\n        /**\n         * Creates a module with all the router providers and directives. It also optionally sets up an\n         * application listener to perform an initial navigation.\n         *\n         * Options (see `ExtraOptions`):\n         * * `enableTracing` makes the router log all its internal events to the console.\n         * * `useHash` enables the location strategy that uses the URL fragment instead of the history\n         * API.\n         * * `initialNavigation` disables the initial navigation.\n         * * `errorHandler` provides a custom error handler.\n         * * `preloadingStrategy` configures a preloading strategy (see `PreloadAllModules`).\n         * * `onSameUrlNavigation` configures how the router handles navigation to the current URL. See\n         * `ExtraOptions` for more details.\n         * * `paramsInheritanceStrategy` defines how the router merges params, data and resolved data\n         * from parent to child routes.\n         */\n        RouterModule.forRoot = function (routes, config) {\n            return {\n                ngModule: RouterModule_1,\n                providers: [\n                    ROUTER_PROVIDERS,\n                    provideRoutes(routes),\n                    {\n                        provide: ROUTER_FORROOT_GUARD,\n                        useFactory: provideForRootGuard,\n                        deps: [[Router, new core.Optional(), new core.SkipSelf()]]\n                    },\n                    { provide: ROUTER_CONFIGURATION, useValue: config ? config : {} },\n                    {\n                        provide: common.LocationStrategy,\n                        useFactory: provideLocationStrategy,\n                        deps: [\n                            common.PlatformLocation, [new core.Inject(common.APP_BASE_HREF), new core.Optional()], ROUTER_CONFIGURATION\n                        ]\n                    },\n                    {\n                        provide: RouterScroller,\n                        useFactory: createRouterScroller,\n                        deps: [Router, common.ViewportScroller, ROUTER_CONFIGURATION]\n                    },\n                    {\n                        provide: PreloadingStrategy,\n                        useExisting: config && config.preloadingStrategy ? config.preloadingStrategy :\n                            NoPreloading\n                    },\n                    { provide: core.NgProbeToken, multi: true, useFactory: routerNgProbeToken },\n                    provideRouterInitializer(),\n                ],\n            };\n        };\n        /**\n         * Creates a module with all the router directives and a provider registering routes.\n         */\n        RouterModule.forChild = function (routes) {\n            return { ngModule: RouterModule_1, providers: [provideRoutes(routes)] };\n        };\n        var RouterModule_1;\n        RouterModule = RouterModule_1 = __decorate([\n            core.NgModule({\n                declarations: ROUTER_DIRECTIVES,\n                exports: ROUTER_DIRECTIVES,\n                entryComponents: [EmptyOutletComponent]\n            }),\n            __param(0, core.Optional()), __param(0, core.Inject(ROUTER_FORROOT_GUARD)), __param(1, core.Optional()),\n            __metadata(\"design:paramtypes\", [Object, Router])\n        ], RouterModule);\n        return RouterModule;\n    }());\n    function createRouterScroller(router, viewportScroller, config) {\n        if (config.scrollOffset) {\n            viewportScroller.setOffset(config.scrollOffset);\n        }\n        return new RouterScroller(router, viewportScroller, config);\n    }\n    function provideLocationStrategy(platformLocationStrategy, baseHref, options) {\n        if (options === void 0) { options = {}; }\n        return options.useHash ? new common.HashLocationStrategy(platformLocationStrategy, baseHref) :\n            new common.PathLocationStrategy(platformLocationStrategy, baseHref);\n    }\n    function provideForRootGuard(router) {\n        if (router) {\n            throw new Error(\"RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.\");\n        }\n        return 'guarded';\n    }\n    /**\n     * @description\n     *\n     * Registers routes.\n     *\n     * @usageNotes\n     * ### Example\n     *\n     * ```\n     * @NgModule({\n     *   imports: [RouterModule.forChild(ROUTES)],\n     *   providers: [provideRoutes(EXTRA_ROUTES)]\n     * })\n     * class MyNgModule {}\n     * ```\n     *\n     *\n     */\n    function provideRoutes(routes) {\n        return [\n            { provide: core.ANALYZE_FOR_ENTRY_COMPONENTS, multi: true, useValue: routes },\n            { provide: ROUTES, multi: true, useValue: routes },\n        ];\n    }\n    function setupRouter(ref, urlSerializer, contexts, location, injector, loader, compiler, config, opts, urlHandlingStrategy, routeReuseStrategy) {\n        if (opts === void 0) { opts = {}; }\n        var router = new Router(null, urlSerializer, contexts, location, injector, loader, compiler, flatten(config));\n        if (urlHandlingStrategy) {\n            router.urlHandlingStrategy = urlHandlingStrategy;\n        }\n        if (routeReuseStrategy) {\n            router.routeReuseStrategy = routeReuseStrategy;\n        }\n        if (opts.errorHandler) {\n            router.errorHandler = opts.errorHandler;\n        }\n        if (opts.malformedUriErrorHandler) {\n            router.malformedUriErrorHandler = opts.malformedUriErrorHandler;\n        }\n        if (opts.enableTracing) {\n            var dom_1 = platformBrowser.ɵgetDOM();\n            router.events.subscribe(function (e) {\n                dom_1.logGroup(\"Router Event: \" + e.constructor.name);\n                dom_1.log(e.toString());\n                dom_1.log(e);\n                dom_1.logGroupEnd();\n            });\n        }\n        if (opts.onSameUrlNavigation) {\n            router.onSameUrlNavigation = opts.onSameUrlNavigation;\n        }\n        if (opts.paramsInheritanceStrategy) {\n            router.paramsInheritanceStrategy = opts.paramsInheritanceStrategy;\n        }\n        if (opts.urlUpdateStrategy) {\n            router.urlUpdateStrategy = opts.urlUpdateStrategy;\n        }\n        if (opts.relativeLinkResolution) {\n            router.relativeLinkResolution = opts.relativeLinkResolution;\n        }\n        return router;\n    }\n    function rootRoute(router) {\n        return router.routerState.root;\n    }\n    /**\n     * To initialize the router properly we need to do in two steps:\n     *\n     * We need to start the navigation in a APP_INITIALIZER to block the bootstrap if\n     * a resolver or a guards executes asynchronously. Second, we need to actually run\n     * activation in a BOOTSTRAP_LISTENER. We utilize the afterPreactivation\n     * hook provided by the router to do that.\n     *\n     * The router navigation starts, reaches the point when preactivation is done, and then\n     * pauses. It waits for the hook to be resolved. We then resolve it only in a bootstrap listener.\n     */\n    var RouterInitializer = /** @class */ (function () {\n        function RouterInitializer(injector) {\n            this.injector = injector;\n            this.initNavigation = false;\n            this.resultOfPreactivationDone = new rxjs.Subject();\n        }\n        RouterInitializer.prototype.appInitializer = function () {\n            var _this = this;\n            var p = this.injector.get(common.LOCATION_INITIALIZED, Promise.resolve(null));\n            return p.then(function () {\n                var resolve = null;\n                var res = new Promise(function (r) { return resolve = r; });\n                var router = _this.injector.get(Router);\n                var opts = _this.injector.get(ROUTER_CONFIGURATION);\n                if (_this.isLegacyDisabled(opts) || _this.isLegacyEnabled(opts)) {\n                    resolve(true);\n                }\n                else if (opts.initialNavigation === 'disabled') {\n                    router.setUpLocationChangeListener();\n                    resolve(true);\n                }\n                else if (opts.initialNavigation === 'enabled') {\n                    router.hooks.afterPreactivation = function () {\n                        // only the initial navigation should be delayed\n                        if (!_this.initNavigation) {\n                            _this.initNavigation = true;\n                            resolve(true);\n                            return _this.resultOfPreactivationDone;\n                            // subsequent navigations should not be delayed\n                        }\n                        else {\n                            return rxjs.of(null);\n                        }\n                    };\n                    router.initialNavigation();\n                }\n                else {\n                    throw new Error(\"Invalid initialNavigation options: '\" + opts.initialNavigation + \"'\");\n                }\n                return res;\n            });\n        };\n        RouterInitializer.prototype.bootstrapListener = function (bootstrappedComponentRef) {\n            var opts = this.injector.get(ROUTER_CONFIGURATION);\n            var preloader = this.injector.get(RouterPreloader);\n            var routerScroller = this.injector.get(RouterScroller);\n            var router = this.injector.get(Router);\n            var ref = this.injector.get(core.ApplicationRef);\n            if (bootstrappedComponentRef !== ref.components[0]) {\n                return;\n            }\n            if (this.isLegacyEnabled(opts)) {\n                router.initialNavigation();\n            }\n            else if (this.isLegacyDisabled(opts)) {\n                router.setUpLocationChangeListener();\n            }\n            preloader.setUpPreloading();\n            routerScroller.init();\n            router.resetRootComponentType(ref.componentTypes[0]);\n            this.resultOfPreactivationDone.next(null);\n            this.resultOfPreactivationDone.complete();\n        };\n        RouterInitializer.prototype.isLegacyEnabled = function (opts) {\n            return opts.initialNavigation === 'legacy_enabled' || opts.initialNavigation === true ||\n                opts.initialNavigation === undefined;\n        };\n        RouterInitializer.prototype.isLegacyDisabled = function (opts) {\n            return opts.initialNavigation === 'legacy_disabled' || opts.initialNavigation === false;\n        };\n        RouterInitializer = __decorate([\n            core.Injectable(),\n            __metadata(\"design:paramtypes\", [core.Injector])\n        ], RouterInitializer);\n        return RouterInitializer;\n    }());\n    function getAppInitializer(r) {\n        return r.appInitializer.bind(r);\n    }\n    function getBootstrapListener(r) {\n        return r.bootstrapListener.bind(r);\n    }\n    /**\n     * A token for the router initializer that will be called after the app is bootstrapped.\n     *\n     * @experimental\n     */\n    var ROUTER_INITIALIZER = new core.InjectionToken('Router Initializer');\n    function provideRouterInitializer() {\n        return [\n            RouterInitializer,\n            {\n                provide: core.APP_INITIALIZER,\n                multi: true,\n                useFactory: getAppInitializer,\n                deps: [RouterInitializer]\n            },\n            { provide: ROUTER_INITIALIZER, useFactory: getBootstrapListener, deps: [RouterInitializer] },\n            { provide: core.APP_BOOTSTRAP_LISTENER, multi: true, useExisting: ROUTER_INITIALIZER },\n        ];\n    }\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var VERSION = new core.Version('6.1.10');\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // This file only reexports content of the `src` folder. Keep it that way.\n\n    /**\n     * @license\n     * Copyright Google Inc. All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.ɵangular_packages_router_router_a = ROUTER_FORROOT_GUARD;\n    exports.ɵangular_packages_router_router_h = RouterInitializer;\n    exports.ɵangular_packages_router_router_c = createRouterScroller;\n    exports.ɵangular_packages_router_router_i = getAppInitializer;\n    exports.ɵangular_packages_router_router_j = getBootstrapListener;\n    exports.ɵangular_packages_router_router_e = provideForRootGuard;\n    exports.ɵangular_packages_router_router_d = provideLocationStrategy;\n    exports.ɵangular_packages_router_router_k = provideRouterInitializer;\n    exports.ɵangular_packages_router_router_g = rootRoute;\n    exports.ɵangular_packages_router_router_b = routerNgProbeToken;\n    exports.ɵangular_packages_router_router_f = setupRouter;\n    exports.ɵangular_packages_router_router_n = RouterScroller;\n    exports.ɵangular_packages_router_router_l = Tree;\n    exports.ɵangular_packages_router_router_m = TreeNode;\n    exports.RouterLink = RouterLink;\n    exports.RouterLinkWithHref = RouterLinkWithHref;\n    exports.RouterLinkActive = RouterLinkActive;\n    exports.RouterOutlet = RouterOutlet;\n    exports.ActivationEnd = ActivationEnd;\n    exports.ActivationStart = ActivationStart;\n    exports.ChildActivationEnd = ChildActivationEnd;\n    exports.ChildActivationStart = ChildActivationStart;\n    exports.GuardsCheckEnd = GuardsCheckEnd;\n    exports.GuardsCheckStart = GuardsCheckStart;\n    exports.NavigationCancel = NavigationCancel;\n    exports.NavigationEnd = NavigationEnd;\n    exports.NavigationError = NavigationError;\n    exports.NavigationStart = NavigationStart;\n    exports.ResolveEnd = ResolveEnd;\n    exports.ResolveStart = ResolveStart;\n    exports.RouteConfigLoadEnd = RouteConfigLoadEnd;\n    exports.RouteConfigLoadStart = RouteConfigLoadStart;\n    exports.RouterEvent = RouterEvent;\n    exports.RoutesRecognized = RoutesRecognized;\n    exports.Scroll = Scroll;\n    exports.RouteReuseStrategy = RouteReuseStrategy;\n    exports.Router = Router;\n    exports.ROUTES = ROUTES;\n    exports.ROUTER_CONFIGURATION = ROUTER_CONFIGURATION;\n    exports.ROUTER_INITIALIZER = ROUTER_INITIALIZER;\n    exports.RouterModule = RouterModule;\n    exports.provideRoutes = provideRoutes;\n    exports.ChildrenOutletContexts = ChildrenOutletContexts;\n    exports.OutletContext = OutletContext;\n    exports.NoPreloading = NoPreloading;\n    exports.PreloadAllModules = PreloadAllModules;\n    exports.PreloadingStrategy = PreloadingStrategy;\n    exports.RouterPreloader = RouterPreloader;\n    exports.ActivatedRoute = ActivatedRoute;\n    exports.ActivatedRouteSnapshot = ActivatedRouteSnapshot;\n    exports.RouterState = RouterState;\n    exports.RouterStateSnapshot = RouterStateSnapshot;\n    exports.PRIMARY_OUTLET = PRIMARY_OUTLET;\n    exports.convertToParamMap = convertToParamMap;\n    exports.UrlHandlingStrategy = UrlHandlingStrategy;\n    exports.DefaultUrlSerializer = DefaultUrlSerializer;\n    exports.UrlSegment = UrlSegment;\n    exports.UrlSegmentGroup = UrlSegmentGroup;\n    exports.UrlSerializer = UrlSerializer;\n    exports.UrlTree = UrlTree;\n    exports.VERSION = VERSION;\n    exports.ɵEmptyOutletComponent = EmptyOutletComponent;\n    exports.ɵROUTER_PROVIDERS = ROUTER_PROVIDERS;\n    exports.ɵflatten = flatten;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=router.umd.js.map\n"]}