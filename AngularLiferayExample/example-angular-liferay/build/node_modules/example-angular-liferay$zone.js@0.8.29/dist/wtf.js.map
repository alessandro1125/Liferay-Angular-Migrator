{"version":3,"sources":["wtf.js"],"names":["global","factory","exports","module","define","amd","wtfTrace","wtfEvents","wtfEnabled","wtf","trace","events","WtfZoneSpec","name","prototype","onFork","parentZoneDelegate","currentZone","targetZone","zoneSpec","retValue","fork","forkInstance","zonePathName","onInvoke","delegate","applyThis","applyArgs","source","src","scope","invokeScope","createScope","leaveScope","invoke","onHandleError","error","handleError","onScheduleTask","task","key","type","instance","scheduleInstance","createInstance","scheduleTask","shallowObj","data","onInvokeTask","invokeTaskScope","invokeTask","onCancelTask","cancelInstance","cancelTask","obj","depth","out","hasOwnProperty","value","name_1","constructor","Object","undefined","zone","localZone","parent","Zone","window","self"],"mappings":"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","file":"wtf.js","sourcesContent":["/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n/**\n * @fileoverview\n * @suppress {missingRequire}\n */\n(function (global) {\n    // Detect and setup WTF.\n    var wtfTrace = null;\n    var wtfEvents = null;\n    var wtfEnabled = (function () {\n        var wtf = global['wtf'];\n        if (wtf) {\n            wtfTrace = wtf.trace;\n            if (wtfTrace) {\n                wtfEvents = wtfTrace.events;\n                return true;\n            }\n        }\n        return false;\n    })();\n    var WtfZoneSpec = /** @class */ (function () {\n        function WtfZoneSpec() {\n            this.name = 'WTF';\n        }\n        WtfZoneSpec.prototype.onFork = function (parentZoneDelegate, currentZone, targetZone, zoneSpec) {\n            var retValue = parentZoneDelegate.fork(targetZone, zoneSpec);\n            WtfZoneSpec.forkInstance(zonePathName(targetZone), retValue.name);\n            return retValue;\n        };\n        WtfZoneSpec.prototype.onInvoke = function (parentZoneDelegate, currentZone, targetZone, delegate, applyThis, applyArgs, source) {\n            var src = source || 'unknown';\n            var scope = WtfZoneSpec.invokeScope[src];\n            if (!scope) {\n                scope = WtfZoneSpec.invokeScope[src] =\n                    wtfEvents.createScope(\"Zone:invoke:\" + source + \"(ascii zone)\");\n            }\n            return wtfTrace.leaveScope(scope(zonePathName(targetZone)), parentZoneDelegate.invoke(targetZone, delegate, applyThis, applyArgs, source));\n        };\n        WtfZoneSpec.prototype.onHandleError = function (parentZoneDelegate, currentZone, targetZone, error) {\n            return parentZoneDelegate.handleError(targetZone, error);\n        };\n        WtfZoneSpec.prototype.onScheduleTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n            var key = task.type + ':' + task.source;\n            var instance = WtfZoneSpec.scheduleInstance[key];\n            if (!instance) {\n                instance = WtfZoneSpec.scheduleInstance[key] =\n                    wtfEvents.createInstance(\"Zone:schedule:\" + key + \"(ascii zone, any data)\");\n            }\n            var retValue = parentZoneDelegate.scheduleTask(targetZone, task);\n            instance(zonePathName(targetZone), shallowObj(task.data, 2));\n            return retValue;\n        };\n        WtfZoneSpec.prototype.onInvokeTask = function (parentZoneDelegate, currentZone, targetZone, task, applyThis, applyArgs) {\n            var source = task.source;\n            var scope = WtfZoneSpec.invokeTaskScope[source];\n            if (!scope) {\n                scope = WtfZoneSpec.invokeTaskScope[source] =\n                    wtfEvents.createScope(\"Zone:invokeTask:\" + source + \"(ascii zone)\");\n            }\n            return wtfTrace.leaveScope(scope(zonePathName(targetZone)), parentZoneDelegate.invokeTask(targetZone, task, applyThis, applyArgs));\n        };\n        WtfZoneSpec.prototype.onCancelTask = function (parentZoneDelegate, currentZone, targetZone, task) {\n            var key = task.source;\n            var instance = WtfZoneSpec.cancelInstance[key];\n            if (!instance) {\n                instance = WtfZoneSpec.cancelInstance[key] =\n                    wtfEvents.createInstance(\"Zone:cancel:\" + key + \"(ascii zone, any options)\");\n            }\n            var retValue = parentZoneDelegate.cancelTask(targetZone, task);\n            instance(zonePathName(targetZone), shallowObj(task.data, 2));\n            return retValue;\n        };\n        WtfZoneSpec.forkInstance = wtfEnabled ? wtfEvents.createInstance('Zone:fork(ascii zone, ascii newZone)') : null;\n        WtfZoneSpec.scheduleInstance = {};\n        WtfZoneSpec.cancelInstance = {};\n        WtfZoneSpec.invokeScope = {};\n        WtfZoneSpec.invokeTaskScope = {};\n        return WtfZoneSpec;\n    }());\n    function shallowObj(obj, depth) {\n        if (!obj || !depth)\n            return null;\n        var out = {};\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                var value = obj[key];\n                switch (typeof value) {\n                    case 'object':\n                        var name_1 = value && value.constructor && value.constructor.name;\n                        value = name_1 == Object.name ? shallowObj(value, depth - 1) : name_1;\n                        break;\n                    case 'function':\n                        value = value.name || undefined;\n                        break;\n                }\n                out[key] = value;\n            }\n        }\n        return out;\n    }\n    function zonePathName(zone) {\n        var name = zone.name;\n        var localZone = zone.parent;\n        while (localZone != null) {\n            name = localZone.name + '::' + name;\n            localZone = localZone.parent;\n        }\n        return name;\n    }\n    Zone['wtfZoneSpec'] = !wtfEnabled ? null : new WtfZoneSpec();\n})(typeof window === 'object' && window || typeof self === 'object' && self || global);\n\n})));\n"]}