{"version":3,"sources":["proxy.min.js"],"names":["e","t","exports","module","define","amd","defaultSpecDelegate","name","_delegateSpec","properties","ProxyZoneSpec","propertyKeys","lastTaskState","isNeedToTriggerHasTask","tasks","setDelegate","get","Zone","current","isLoaded","assertPresent","Error","prototype","s","forEach","Object","keys","macroTask","microTask","getDelegate","resetDelegate","tryTriggerHasTask","onHasTask","removeFromTasks","length","splice","getAndClearPendingTasksInfo","map","data","join","type","source","onFork","n","fork","onIntercept","o","intercept","onInvoke","r","a","invoke","onHandleError","handleError","onScheduleTask","push","scheduleTask","onInvokeTask","invokeTask","onCancelTask","cancelTask","hasTask"],"mappings":"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","file":"proxy.min.js","sourcesContent":["!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?t():\"function\"==typeof define&&define.amd?define(t):t()}(this,function(){\"use strict\";var e=function(){function e(e){void 0===e&&(e=null),this.defaultSpecDelegate=e,this.name=\"ProxyZone\",this._delegateSpec=null,this.properties={ProxyZoneSpec:this},this.propertyKeys=null,this.lastTaskState=null,this.isNeedToTriggerHasTask=!1,this.tasks=[],this.setDelegate(e)}return e.get=function(){return Zone.current.get(\"ProxyZoneSpec\")},e.isLoaded=function(){return e.get()instanceof e},e.assertPresent=function(){if(!e.isLoaded())throw new Error(\"Expected to be running in 'ProxyZone', but it was not found.\");return e.get()},e.prototype.setDelegate=function(e){var t=this,s=this._delegateSpec!==e;this._delegateSpec=e,this.propertyKeys&&this.propertyKeys.forEach(function(e){return delete t.properties[e]}),this.propertyKeys=null,e&&e.properties&&(this.propertyKeys=Object.keys(e.properties),this.propertyKeys.forEach(function(s){return t.properties[s]=e.properties[s]})),s&&this.lastTaskState&&(this.lastTaskState.macroTask||this.lastTaskState.microTask)&&(this.isNeedToTriggerHasTask=!0)},e.prototype.getDelegate=function(){return this._delegateSpec},e.prototype.resetDelegate=function(){this.getDelegate();this.setDelegate(this.defaultSpecDelegate)},e.prototype.tryTriggerHasTask=function(e,t,s){this.isNeedToTriggerHasTask&&this.lastTaskState&&(this.isNeedToTriggerHasTask=!1,this.onHasTask(e,t,s,this.lastTaskState))},e.prototype.removeFromTasks=function(e){if(this.tasks)for(var t=0;t<this.tasks.length;t++)if(this.tasks[t]===e)return void this.tasks.splice(t,1)},e.prototype.getAndClearPendingTasksInfo=function(){if(0===this.tasks.length)return\"\";var e=this.tasks.map(function(e){var t=e.data&&Object.keys(e.data).map(function(t){return t+\":\"+e.data[t]}).join(\",\");return\"type: \"+e.type+\", source: \"+e.source+\", args: {\"+t+\"}\"}),t=\"--Pendng async tasks are: [\"+e+\"]\";return this.tasks=[],t},e.prototype.onFork=function(e,t,s,n){return this._delegateSpec&&this._delegateSpec.onFork?this._delegateSpec.onFork(e,t,s,n):e.fork(s,n)},e.prototype.onIntercept=function(e,t,s,n,o){return this._delegateSpec&&this._delegateSpec.onIntercept?this._delegateSpec.onIntercept(e,t,s,n,o):e.intercept(s,n,o)},e.prototype.onInvoke=function(e,t,s,n,o,r,a){return this.tryTriggerHasTask(e,t,s),this._delegateSpec&&this._delegateSpec.onInvoke?this._delegateSpec.onInvoke(e,t,s,n,o,r,a):e.invoke(s,n,o,r,a)},e.prototype.onHandleError=function(e,t,s,n){return this._delegateSpec&&this._delegateSpec.onHandleError?this._delegateSpec.onHandleError(e,t,s,n):e.handleError(s,n)},e.prototype.onScheduleTask=function(e,t,s,n){return\"eventTask\"!==n.type&&this.tasks.push(n),this._delegateSpec&&this._delegateSpec.onScheduleTask?this._delegateSpec.onScheduleTask(e,t,s,n):e.scheduleTask(s,n)},e.prototype.onInvokeTask=function(e,t,s,n,o,r){return\"eventTask\"!==n.type&&this.removeFromTasks(n),this.tryTriggerHasTask(e,t,s),this._delegateSpec&&this._delegateSpec.onInvokeTask?this._delegateSpec.onInvokeTask(e,t,s,n,o,r):e.invokeTask(s,n,o,r)},e.prototype.onCancelTask=function(e,t,s,n){return\"eventTask\"!==n.type&&this.removeFromTasks(n),this.tryTriggerHasTask(e,t,s),this._delegateSpec&&this._delegateSpec.onCancelTask?this._delegateSpec.onCancelTask(e,t,s,n):e.cancelTask(s,n)},e.prototype.onHasTask=function(e,t,s,n){this.lastTaskState=n,this._delegateSpec&&this._delegateSpec.onHasTask?this._delegateSpec.onHasTask(e,t,s,n):e.hasTask(s,n)},e}();Zone.ProxyZoneSpec=e});"]}