{"version":3,"sources":["webapis-media-query.js"],"names":["global","factory","exports","module","define","amd","Zone","__load_patch","api","patchAddListener","proto","patchMethod","delegate","self","args","callback","length","wrapperedCallback","current","wrap","symbol","call","apply","patchRemoveListener","prototype","mql","Object","getPrototypeOf"],"mappings":"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","file":"webapis-media-query.js","sourcesContent":["/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(factory());\n}(this, (function () { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nZone.__load_patch('mediaQuery', function (global, Zone, api) {\n    function patchAddListener(proto) {\n        api.patchMethod(proto, 'addListener', function (delegate) { return function (self, args) {\n            var callback = args.length > 0 ? args[0] : null;\n            if (typeof callback === 'function') {\n                var wrapperedCallback = Zone.current.wrap(callback, 'MediaQuery');\n                callback[api.symbol('mediaQueryCallback')] = wrapperedCallback;\n                return delegate.call(self, wrapperedCallback);\n            }\n            else {\n                return delegate.apply(self, args);\n            }\n        }; });\n    }\n    function patchRemoveListener(proto) {\n        api.patchMethod(proto, 'removeListener', function (delegate) { return function (self, args) {\n            var callback = args.length > 0 ? args[0] : null;\n            if (typeof callback === 'function') {\n                var wrapperedCallback = callback[api.symbol('mediaQueryCallback')];\n                if (wrapperedCallback) {\n                    return delegate.call(self, wrapperedCallback);\n                }\n                else {\n                    return delegate.apply(self, args);\n                }\n            }\n            else {\n                return delegate.apply(self, args);\n            }\n        }; });\n    }\n    if (global['MediaQueryList']) {\n        var proto = global['MediaQueryList'].prototype;\n        patchAddListener(proto);\n        patchRemoveListener(proto);\n    }\n    else if (global['matchMedia']) {\n        api.patchMethod(global, 'matchMedia', function (delegate) { return function (self, args) {\n            var mql = delegate.apply(self, args);\n            if (mql) {\n                // try to patch MediaQueryList.prototype\n                var proto = Object.getPrototypeOf(mql);\n                if (proto && proto['addListener']) {\n                    // try to patch proto, don't need to worry about patch\n                    // multiple times, because, api.patchEventTarget will check it\n                    patchAddListener(proto);\n                    patchRemoveListener(proto);\n                    patchAddListener(mql);\n                    patchRemoveListener(mql);\n                }\n                else if (mql['addListener']) {\n                    // proto not exists, or proto has no addListener method\n                    // try to patch mql instance\n                    patchAddListener(mql);\n                    patchRemoveListener(mql);\n                }\n            }\n            return mql;\n        }; });\n    }\n});\n\n})));\n"]}