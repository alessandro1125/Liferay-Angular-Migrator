{"version":3,"sources":["zone-patch-rxjs.js"],"names":["global","factory","exports","module","require","define","amd","rxjs","Zone","__load_patch","api","symbol","__symbol__","nextSource","errorSource","completeSource","ObjectDefineProperties","Object","defineProperties","patchObservable","ObservablePrototype","Observable","prototype","_symbolSubscribe","_subscribe","_zone","value","writable","configurable","_zoneSource","_zoneSubscribe","source","get","set","current","constructor","proto","getPrototypeOf","subscribe","tearDown_1","run","arguments","zone_1","apply","subjectFactory","_zoneSubjectFactory","zone","patchMethod","delegate","self","args","observable","operator","operatorDelegate","operatorSelf","operatorArgs","patchSubscription","Subscription","_zoneUnsubscribe","_unsubscribe","unsubscribe","patchSubscriber","next","Subscriber","error","complete","defineProperty","_zoneDestination","destination","currentZone","subscriptionZone"],"mappings":"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","file":"zone-patch-rxjs.js","sourcesContent":["/**\n* @license\n* Copyright Google Inc. All Rights Reserved.\n*\n* Use of this source code is governed by an MIT-style license that can be\n* found in the LICENSE file at https://angular.io/license\n*/\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(require('rxjs')) :\n\ttypeof define === 'function' && define.amd ? define(['rxjs'], factory) :\n\t(factory(global.rxjs));\n}(this, (function (rxjs) { 'use strict';\n\n/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nZone.__load_patch('rxjs', function (global, Zone, api) {\n    var symbol = Zone.__symbol__;\n    var nextSource = 'rxjs.Subscriber.next';\n    var errorSource = 'rxjs.Subscriber.error';\n    var completeSource = 'rxjs.Subscriber.complete';\n    var ObjectDefineProperties = Object.defineProperties;\n    var patchObservable = function () {\n        var ObservablePrototype = rxjs.Observable.prototype;\n        var _symbolSubscribe = symbol('_subscribe');\n        var _subscribe = ObservablePrototype[_symbolSubscribe] = ObservablePrototype._subscribe;\n        ObjectDefineProperties(rxjs.Observable.prototype, {\n            _zone: { value: null, writable: true, configurable: true },\n            _zoneSource: { value: null, writable: true, configurable: true },\n            _zoneSubscribe: { value: null, writable: true, configurable: true },\n            source: {\n                configurable: true,\n                get: function () {\n                    return this._zoneSource;\n                },\n                set: function (source) {\n                    this._zone = Zone.current;\n                    this._zoneSource = source;\n                }\n            },\n            _subscribe: {\n                configurable: true,\n                get: function () {\n                    if (this._zoneSubscribe) {\n                        return this._zoneSubscribe;\n                    }\n                    else if (this.constructor === rxjs.Observable) {\n                        return _subscribe;\n                    }\n                    var proto = Object.getPrototypeOf(this);\n                    return proto && proto._subscribe;\n                },\n                set: function (subscribe) {\n                    this._zone = Zone.current;\n                    this._zoneSubscribe = function () {\n                        if (this._zone && this._zone !== Zone.current) {\n                            var tearDown_1 = this._zone.run(subscribe, this, arguments);\n                            if (tearDown_1 && typeof tearDown_1 === 'function') {\n                                var zone_1 = this._zone;\n                                return function () {\n                                    if (zone_1 !== Zone.current) {\n                                        return zone_1.run(tearDown_1, this, arguments);\n                                    }\n                                    return tearDown_1.apply(this, arguments);\n                                };\n                            }\n                            return tearDown_1;\n                        }\n                        return subscribe.apply(this, arguments);\n                    };\n                }\n            },\n            subjectFactory: {\n                get: function () {\n                    return this._zoneSubjectFactory;\n                },\n                set: function (factory) {\n                    var zone = this._zone;\n                    this._zoneSubjectFactory = function () {\n                        if (zone && zone !== Zone.current) {\n                            return zone.run(factory, this, arguments);\n                        }\n                        return factory.apply(this, arguments);\n                    };\n                }\n            }\n        });\n    };\n    api.patchMethod(rxjs.Observable.prototype, 'lift', function (delegate) { return function (self, args) {\n        var observable = delegate.apply(self, args);\n        if (observable.operator) {\n            observable.operator._zone = Zone.current;\n            api.patchMethod(observable.operator, 'call', function (operatorDelegate) { return function (operatorSelf, operatorArgs) {\n                if (operatorSelf._zone && operatorSelf._zone !== Zone.current) {\n                    return operatorSelf._zone.run(operatorDelegate, operatorSelf, operatorArgs);\n                }\n                return operatorDelegate.apply(operatorSelf, operatorArgs);\n            }; });\n        }\n        return observable;\n    }; });\n    var patchSubscription = function () {\n        ObjectDefineProperties(rxjs.Subscription.prototype, {\n            _zone: { value: null, writable: true, configurable: true },\n            _zoneUnsubscribe: { value: null, writable: true, configurable: true },\n            _unsubscribe: {\n                get: function () {\n                    if (this._zoneUnsubscribe) {\n                        return this._zoneUnsubscribe;\n                    }\n                    var proto = Object.getPrototypeOf(this);\n                    return proto && proto._unsubscribe;\n                },\n                set: function (unsubscribe) {\n                    this._zone = Zone.current;\n                    this._zoneUnsubscribe = function () {\n                        if (this._zone && this._zone !== Zone.current) {\n                            return this._zone.run(unsubscribe, this, arguments);\n                        }\n                        return unsubscribe.apply(this, arguments);\n                    };\n                }\n            }\n        });\n    };\n    var patchSubscriber = function () {\n        var next = rxjs.Subscriber.prototype.next;\n        var error = rxjs.Subscriber.prototype.error;\n        var complete = rxjs.Subscriber.prototype.complete;\n        Object.defineProperty(rxjs.Subscriber.prototype, 'destination', {\n            configurable: true,\n            get: function () {\n                return this._zoneDestination;\n            },\n            set: function (destination) {\n                this._zone = Zone.current;\n                this._zoneDestination = destination;\n            }\n        });\n        // patch Subscriber.next to make sure it run\n        // into SubscriptionZone\n        rxjs.Subscriber.prototype.next = function () {\n            var currentZone = Zone.current;\n            var subscriptionZone = this._zone;\n            // for performance concern, check Zone.current\n            // equal with this._zone(SubscriptionZone) or not\n            if (subscriptionZone && subscriptionZone !== currentZone) {\n                return subscriptionZone.run(next, this, arguments, nextSource);\n            }\n            else {\n                return next.apply(this, arguments);\n            }\n        };\n        rxjs.Subscriber.prototype.error = function () {\n            var currentZone = Zone.current;\n            var subscriptionZone = this._zone;\n            // for performance concern, check Zone.current\n            // equal with this._zone(SubscriptionZone) or not\n            if (subscriptionZone && subscriptionZone !== currentZone) {\n                return subscriptionZone.run(error, this, arguments, errorSource);\n            }\n            else {\n                return error.apply(this, arguments);\n            }\n        };\n        rxjs.Subscriber.prototype.complete = function () {\n            var currentZone = Zone.current;\n            var subscriptionZone = this._zone;\n            // for performance concern, check Zone.current\n            // equal with this._zone(SubscriptionZone) or not\n            if (subscriptionZone && subscriptionZone !== currentZone) {\n                return subscriptionZone.run(complete, this, arguments, completeSource);\n            }\n            else {\n                return complete.apply(this, arguments);\n            }\n        };\n    };\n    patchObservable();\n    patchSubscription();\n    patchSubscriber();\n});\n\n})));\n"]}