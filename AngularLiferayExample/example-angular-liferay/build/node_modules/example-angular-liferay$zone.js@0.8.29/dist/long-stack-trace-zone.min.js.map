{"version":3,"sources":["long-stack-trace-zone.min.js"],"names":["t","r","exports","module","define","amd","Error","u","a","stack","split","o","e","n","length","c","s","hasOwnProperty","push","trim","Date","getTime","i","timestamp","f","replace","k","_","error","join","h","stackTraceLimit","indexOf","match","d","l","T","Zone","longStackTraceZoneSpec","name","longStackTraceLimit","getLongStackTrace","__symbol__","onScheduleTask","currentTask","data","concat","scheduleTask","onHandleError","task","longStack","handleError"],"mappings":"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","file":"long-stack-trace-zone.min.js","sourcesContent":["!function(t,r){\"object\"==typeof exports&&\"undefined\"!=typeof module?r():\"function\"==typeof define&&define.amd?define(r):r()}(this,function(){\"use strict\";function t(){return new Error(u)}function r(){try{throw t()}catch(r){return r}}function a(t){return t.stack?t.stack.split(o):[]}function e(t,r){for(var e=a(r),n=0;n<e.length;n++){var c=e[n];s.hasOwnProperty(c)||t.push(e[n])}}function n(t,r){var a=[r?r.trim():\"\"];if(t)for(var n=(new Date).getTime(),c=0;c<t.length;c++){var i=t[c],s=i.timestamp,f=\"____________________Elapsed \"+(n-s.getTime())+\" ms; At: \"+s;f=f.replace(/[^\\w\\d]/g,\"_\"),a.push(k.replace(_,f)),e(a,i.error),n=s.getTime()}return a.join(o)}function c(t,r){r>0&&(t.push(a((new h).error)),c(t,r-1))}function i(){if(!(Error.stackTraceLimit<=0)){var t=[];c(t,2);for(var r=t[0],a=t[1],e=0;e<r.length;e++){var n=r[e];if(n.indexOf(u)==-1){var i=n.match(/^\\s*at\\s+/);if(i){k=i[0]+_+\" (http://localhost)\";break}}}for(var e=0;e<r.length;e++){var n=r[e],o=a[e];if(n!==o)break;s[n]=!0}}}var o=\"\\n\",s={},f=\"__creationTrace__\",u=\"STACKTRACE TRACKING\",_=\"__SEP_TAG__\",k=_+\"@[native]\",h=function(){function t(){this.error=d(),this.timestamp=new Date}return t}(),l=t(),T=r(),d=l.stack?t:T.stack?r:t;Zone.longStackTraceZoneSpec={name:\"long-stack-trace\",longStackTraceLimit:10,getLongStackTrace:function(t){if(t){var r=t[Zone.__symbol__(\"currentTaskTrace\")];return r?n(r,t.stack):t.stack}},onScheduleTask:function(t,r,a,e){if(Error.stackTraceLimit>0){var n=Zone.currentTask,c=n&&n.data&&n.data[f]||[];c=[new h].concat(c),c.length>this.longStackTraceLimit&&(c.length=this.longStackTraceLimit),e.data||(e.data={}),e.data[f]=c}return t.scheduleTask(a,e)},onHandleError:function(t,r,a,e){if(Error.stackTraceLimit>0){var c=Zone.currentTask||e.task;if(e instanceof Error&&c){var i=n(c.data&&c.data[f],e.stack);try{e.stack=e.longStack=i}catch(o){}}}return t.handleError(a,e)}},i()});"]}