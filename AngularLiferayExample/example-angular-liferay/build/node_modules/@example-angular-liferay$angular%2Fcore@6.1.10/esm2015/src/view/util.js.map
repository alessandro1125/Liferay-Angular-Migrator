{"version":3,"sources":["../../../../../../../packages/core/src/view/util.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {WrappedValue, devModeEqual} from '../change_detection/change_detection';\nimport {SOURCE} from '../di/injector';\nimport {ViewEncapsulation} from '../metadata/view';\nimport {RendererType2} from '../render/api';\nimport {looseIdentical, stringify} from '../util';\nimport {expressionChangedAfterItHasBeenCheckedError} from './errors';\nimport {BindingDef, BindingFlags, Definition, DefinitionFactory, DepDef, DepFlags, ElementData, NodeDef, NodeFlags, QueryValueType, Services, ViewData, ViewDefinition, ViewDefinitionFactory, ViewFlags, ViewState, asElementData, asTextData} from './types';\n\nexport const NOOP: any = () => {};\n\nconst _tokenKeyCache = new Map<any, string>();\n\nexport function tokenKey(token: any): string {\n  let key = _tokenKeyCache.get(token);\n  if (!key) {\n    key = stringify(token) + '_' + _tokenKeyCache.size;\n    _tokenKeyCache.set(token, key);\n  }\n  return key;\n}\n\nexport function unwrapValue(view: ViewData, nodeIdx: number, bindingIdx: number, value: any): any {\n  if (WrappedValue.isWrapped(value)) {\n    value = WrappedValue.unwrap(value);\n    const globalBindingIdx = view.def.nodes[nodeIdx].bindingIndex + bindingIdx;\n    const oldValue = WrappedValue.unwrap(view.oldValues[globalBindingIdx]);\n    view.oldValues[globalBindingIdx] = new WrappedValue(oldValue);\n  }\n  return value;\n}\n\nconst UNDEFINED_RENDERER_TYPE_ID = '$$undefined';\nconst EMPTY_RENDERER_TYPE_ID = '$$empty';\n\n// Attention: this function is called as top level function.\n// Putting any logic in here will destroy closure tree shaking!\nexport function createRendererType2(values: {\n  styles: (string | any[])[],\n  encapsulation: ViewEncapsulation,\n  data: {[kind: string]: any[]}\n}): RendererType2 {\n  return {\n    id: UNDEFINED_RENDERER_TYPE_ID,\n    styles: values.styles,\n    encapsulation: values.encapsulation,\n    data: values.data\n  };\n}\n\nlet _renderCompCount = 0;\n\nexport function resolveRendererType2(type?: RendererType2 | null): RendererType2|null {\n  if (type && type.id === UNDEFINED_RENDERER_TYPE_ID) {\n    // first time we see this RendererType2. Initialize it...\n    const isFilled =\n        ((type.encapsulation != null && type.encapsulation !== ViewEncapsulation.None) ||\n         type.styles.length || Object.keys(type.data).length);\n    if (isFilled) {\n      type.id = `c${_renderCompCount++}`;\n    } else {\n      type.id = EMPTY_RENDERER_TYPE_ID;\n    }\n  }\n  if (type && type.id === EMPTY_RENDERER_TYPE_ID) {\n    type = null;\n  }\n  return type || null;\n}\n\nexport function checkBinding(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any): boolean {\n  const oldValues = view.oldValues;\n  if ((view.state & ViewState.FirstCheck) ||\n      !looseIdentical(oldValues[def.bindingIndex + bindingIdx], value)) {\n    return true;\n  }\n  return false;\n}\n\nexport function checkAndUpdateBinding(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any): boolean {\n  if (checkBinding(view, def, bindingIdx, value)) {\n    view.oldValues[def.bindingIndex + bindingIdx] = value;\n    return true;\n  }\n  return false;\n}\n\nexport function checkBindingNoChanges(\n    view: ViewData, def: NodeDef, bindingIdx: number, value: any) {\n  const oldValue = view.oldValues[def.bindingIndex + bindingIdx];\n  if ((view.state & ViewState.BeforeFirstCheck) || !devModeEqual(oldValue, value)) {\n    const bindingName = def.bindings[bindingIdx].name;\n    throw expressionChangedAfterItHasBeenCheckedError(\n        Services.createDebugContext(view, def.nodeIndex), `${bindingName}: ${oldValue}`,\n        `${bindingName}: ${value}`, (view.state & ViewState.BeforeFirstCheck) !== 0);\n  }\n}\n\nexport function markParentViewsForCheck(view: ViewData) {\n  let currView: ViewData|null = view;\n  while (currView) {\n    if (currView.def.flags & ViewFlags.OnPush) {\n      currView.state |= ViewState.ChecksEnabled;\n    }\n    currView = currView.viewContainerParent || currView.parent;\n  }\n}\n\nexport function markParentViewsForCheckProjectedViews(view: ViewData, endView: ViewData) {\n  let currView: ViewData|null = view;\n  while (currView && currView !== endView) {\n    currView.state |= ViewState.CheckProjectedViews;\n    currView = currView.viewContainerParent || currView.parent;\n  }\n}\n\nexport function dispatchEvent(\n    view: ViewData, nodeIndex: number, eventName: string, event: any): boolean|undefined {\n  try {\n    const nodeDef = view.def.nodes[nodeIndex];\n    const startView = nodeDef.flags & NodeFlags.ComponentView ?\n        asElementData(view, nodeIndex).componentView :\n        view;\n    markParentViewsForCheck(startView);\n    return Services.handleEvent(view, nodeIndex, eventName, event);\n  } catch (e) {\n    // Attention: Don't rethrow, as it would cancel Observable subscriptions!\n    view.root.errorHandler.handleError(e);\n  }\n}\n\nexport function declaredViewContainer(view: ViewData): ElementData|null {\n  if (view.parent) {\n    const parentView = view.parent;\n    return asElementData(parentView, view.parentNodeDef !.nodeIndex);\n  }\n  return null;\n}\n\n/**\n * for component views, this is the host element.\n * for embedded views, this is the index of the parent node\n * that contains the view container.\n */\nexport function viewParentEl(view: ViewData): NodeDef|null {\n  const parentView = view.parent;\n  if (parentView) {\n    return view.parentNodeDef !.parent;\n  } else {\n    return null;\n  }\n}\n\nexport function renderNode(view: ViewData, def: NodeDef): any {\n  switch (def.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return asElementData(view, def.nodeIndex).renderElement;\n    case NodeFlags.TypeText:\n      return asTextData(view, def.nodeIndex).renderText;\n  }\n}\n\nexport function elementEventFullName(target: string | null, name: string): string {\n  return target ? `${target}:${name}` : name;\n}\n\nexport function isComponentView(view: ViewData): boolean {\n  return !!view.parent && !!(view.parentNodeDef !.flags & NodeFlags.Component);\n}\n\nexport function isEmbeddedView(view: ViewData): boolean {\n  return !!view.parent && !(view.parentNodeDef !.flags & NodeFlags.Component);\n}\n\nexport function filterQueryId(queryId: number): number {\n  return 1 << (queryId % 32);\n}\n\nexport function splitMatchedQueriesDsl(\n    matchedQueriesDsl: [string | number, QueryValueType][] | null): {\n  matchedQueries: {[queryId: string]: QueryValueType},\n  references: {[refId: string]: QueryValueType},\n  matchedQueryIds: number\n} {\n  const matchedQueries: {[queryId: string]: QueryValueType} = {};\n  let matchedQueryIds = 0;\n  const references: {[refId: string]: QueryValueType} = {};\n  if (matchedQueriesDsl) {\n    matchedQueriesDsl.forEach(([queryId, valueType]) => {\n      if (typeof queryId === 'number') {\n        matchedQueries[queryId] = valueType;\n        matchedQueryIds |= filterQueryId(queryId);\n      } else {\n        references[queryId] = valueType;\n      }\n    });\n  }\n  return {matchedQueries, references, matchedQueryIds};\n}\n\nexport function splitDepsDsl(deps: ([DepFlags, any] | any)[], sourceName?: string): DepDef[] {\n  return deps.map(value => {\n    let token: any;\n    let flags: DepFlags;\n    if (Array.isArray(value)) {\n      [flags, token] = value;\n    } else {\n      flags = DepFlags.None;\n      token = value;\n    }\n    if (token && (typeof token === 'function' || typeof token === 'object') && sourceName) {\n      Object.defineProperty(token, SOURCE, {value: sourceName, configurable: true});\n    }\n    return {flags, token, tokenKey: tokenKey(token)};\n  });\n}\n\nexport function getParentRenderElement(view: ViewData, renderHost: any, def: NodeDef): any {\n  let renderParent = def.renderParent;\n  if (renderParent) {\n    if ((renderParent.flags & NodeFlags.TypeElement) === 0 ||\n        (renderParent.flags & NodeFlags.ComponentView) === 0 ||\n        (renderParent.element !.componentRendererType &&\n         renderParent.element !.componentRendererType !.encapsulation ===\n             ViewEncapsulation.Native)) {\n      // only children of non components, or children of components with native encapsulation should\n      // be attached.\n      return asElementData(view, def.renderParent !.nodeIndex).renderElement;\n    }\n  } else {\n    return renderHost;\n  }\n}\n\nconst DEFINITION_CACHE = new WeakMap<any, Definition<any>>();\n\nexport function resolveDefinition<D extends Definition<any>>(factory: DefinitionFactory<D>): D {\n  let value = DEFINITION_CACHE.get(factory) !as D;\n  if (!value) {\n    value = factory(() => NOOP);\n    value.factory = factory;\n    DEFINITION_CACHE.set(factory, value);\n  }\n  return value;\n}\n\nexport function rootRenderNodes(view: ViewData): any[] {\n  const renderNodes: any[] = [];\n  visitRootRenderNodes(view, RenderNodeAction.Collect, undefined, undefined, renderNodes);\n  return renderNodes;\n}\n\nexport const enum RenderNodeAction {Collect, AppendChild, InsertBefore, RemoveChild}\n\nexport function visitRootRenderNodes(\n    view: ViewData, action: RenderNodeAction, parentNode: any, nextSibling: any, target?: any[]) {\n  // We need to re-compute the parent node in case the nodes have been moved around manually\n  if (action === RenderNodeAction.RemoveChild) {\n    parentNode = view.renderer.parentNode(renderNode(view, view.def.lastRenderRootNode !));\n  }\n  visitSiblingRenderNodes(\n      view, action, 0, view.def.nodes.length - 1, parentNode, nextSibling, target);\n}\n\nexport function visitSiblingRenderNodes(\n    view: ViewData, action: RenderNodeAction, startIndex: number, endIndex: number, parentNode: any,\n    nextSibling: any, target?: any[]) {\n  for (let i = startIndex; i <= endIndex; i++) {\n    const nodeDef = view.def.nodes[i];\n    if (nodeDef.flags & (NodeFlags.TypeElement | NodeFlags.TypeText | NodeFlags.TypeNgContent)) {\n      visitRenderNode(view, nodeDef, action, parentNode, nextSibling, target);\n    }\n    // jump to next sibling\n    i += nodeDef.childCount;\n  }\n}\n\nexport function visitProjectedRenderNodes(\n    view: ViewData, ngContentIndex: number, action: RenderNodeAction, parentNode: any,\n    nextSibling: any, target?: any[]) {\n  let compView: ViewData|null = view;\n  while (compView && !isComponentView(compView)) {\n    compView = compView.parent;\n  }\n  const hostView = compView !.parent;\n  const hostElDef = viewParentEl(compView !);\n  const startIndex = hostElDef !.nodeIndex + 1;\n  const endIndex = hostElDef !.nodeIndex + hostElDef !.childCount;\n  for (let i = startIndex; i <= endIndex; i++) {\n    const nodeDef = hostView !.def.nodes[i];\n    if (nodeDef.ngContentIndex === ngContentIndex) {\n      visitRenderNode(hostView !, nodeDef, action, parentNode, nextSibling, target);\n    }\n    // jump to next sibling\n    i += nodeDef.childCount;\n  }\n  if (!hostView !.parent) {\n    // a root view\n    const projectedNodes = view.root.projectableNodes[ngContentIndex];\n    if (projectedNodes) {\n      for (let i = 0; i < projectedNodes.length; i++) {\n        execRenderNodeAction(view, projectedNodes[i], action, parentNode, nextSibling, target);\n      }\n    }\n  }\n}\n\nfunction visitRenderNode(\n    view: ViewData, nodeDef: NodeDef, action: RenderNodeAction, parentNode: any, nextSibling: any,\n    target?: any[]) {\n  if (nodeDef.flags & NodeFlags.TypeNgContent) {\n    visitProjectedRenderNodes(\n        view, nodeDef.ngContent !.index, action, parentNode, nextSibling, target);\n  } else {\n    const rn = renderNode(view, nodeDef);\n    if (action === RenderNodeAction.RemoveChild && (nodeDef.flags & NodeFlags.ComponentView) &&\n        (nodeDef.bindingFlags & BindingFlags.CatSyntheticProperty)) {\n      // Note: we might need to do both actions.\n      if (nodeDef.bindingFlags & (BindingFlags.SyntheticProperty)) {\n        execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n      }\n      if (nodeDef.bindingFlags & (BindingFlags.SyntheticHostProperty)) {\n        const compView = asElementData(view, nodeDef.nodeIndex).componentView;\n        execRenderNodeAction(compView, rn, action, parentNode, nextSibling, target);\n      }\n    } else {\n      execRenderNodeAction(view, rn, action, parentNode, nextSibling, target);\n    }\n    if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n      const embeddedViews = asElementData(view, nodeDef.nodeIndex).viewContainer !._embeddedViews;\n      for (let k = 0; k < embeddedViews.length; k++) {\n        visitRootRenderNodes(embeddedViews[k], action, parentNode, nextSibling, target);\n      }\n    }\n    if (nodeDef.flags & NodeFlags.TypeElement && !nodeDef.element !.name) {\n      visitSiblingRenderNodes(\n          view, action, nodeDef.nodeIndex + 1, nodeDef.nodeIndex + nodeDef.childCount, parentNode,\n          nextSibling, target);\n    }\n  }\n}\n\nfunction execRenderNodeAction(\n    view: ViewData, renderNode: any, action: RenderNodeAction, parentNode: any, nextSibling: any,\n    target?: any[]) {\n  const renderer = view.renderer;\n  switch (action) {\n    case RenderNodeAction.AppendChild:\n      renderer.appendChild(parentNode, renderNode);\n      break;\n    case RenderNodeAction.InsertBefore:\n      renderer.insertBefore(parentNode, renderNode, nextSibling);\n      break;\n    case RenderNodeAction.RemoveChild:\n      renderer.removeChild(parentNode, renderNode);\n      break;\n    case RenderNodeAction.Collect:\n      target !.push(renderNode);\n      break;\n  }\n}\n\nconst NS_PREFIX_RE = /^:([^:]+):(.+)$/;\n\nexport function splitNamespace(name: string): string[] {\n  if (name[0] === ':') {\n    const match = name.match(NS_PREFIX_RE) !;\n    return [match[1], match[2]];\n  }\n  return ['', name];\n}\n\nexport function calcBindingFlags(bindings: BindingDef[]): BindingFlags {\n  let flags = 0;\n  for (let i = 0; i < bindings.length; i++) {\n    flags |= bindings[i].flags;\n  }\n  return flags;\n}\n\nexport function interpolate(valueCount: number, constAndInterp: string[]): string {\n  let result = '';\n  for (let i = 0; i < valueCount * 2; i = i + 2) {\n    result = result + constAndInterp[i] + _toStringWithNull(constAndInterp[i + 1]);\n  }\n  return result + constAndInterp[valueCount * 2];\n}\n\nexport function inlineInterpolate(\n    valueCount: number, c0: string, a1: any, c1: string, a2?: any, c2?: string, a3?: any,\n    c3?: string, a4?: any, c4?: string, a5?: any, c5?: string, a6?: any, c6?: string, a7?: any,\n    c7?: string, a8?: any, c8?: string, a9?: any, c9?: string): string {\n  switch (valueCount) {\n    case 1:\n      return c0 + _toStringWithNull(a1) + c1;\n    case 2:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2;\n    case 3:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3;\n    case 4:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4;\n    case 5:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5;\n    case 6:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) + c6;\n    case 7:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7;\n    case 8:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8;\n    case 9:\n      return c0 + _toStringWithNull(a1) + c1 + _toStringWithNull(a2) + c2 + _toStringWithNull(a3) +\n          c3 + _toStringWithNull(a4) + c4 + _toStringWithNull(a5) + c5 + _toStringWithNull(a6) +\n          c6 + _toStringWithNull(a7) + c7 + _toStringWithNull(a8) + c8 + _toStringWithNull(a9) + c9;\n    default:\n      throw new Error(`Does not support more than 9 expressions`);\n  }\n}\n\nfunction _toStringWithNull(v: any): string {\n  return v != null ? v.toString() : '';\n}\n\nexport const EMPTY_ARRAY: any[] = [];\nexport const EMPTY_MAP: {[key: string]: any} = {};\n"],"sourceRoot":""}