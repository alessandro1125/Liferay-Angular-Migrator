{"version":3,"sources":["../../../../../../../packages/core/src/view/pure_expression.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {BindingDef, BindingFlags, NodeDef, NodeFlags, PureExpressionData, ViewData, asPureExpressionData} from './types';\nimport {calcBindingFlags, checkAndUpdateBinding} from './util';\n\nexport function purePipeDef(checkIndex: number, argCount: number): NodeDef {\n  // argCount + 1 to include the pipe as first arg\n  return _pureExpressionDef(NodeFlags.TypePurePipe, checkIndex, new Array(argCount + 1));\n}\n\nexport function pureArrayDef(checkIndex: number, argCount: number): NodeDef {\n  return _pureExpressionDef(NodeFlags.TypePureArray, checkIndex, new Array(argCount));\n}\n\nexport function pureObjectDef(checkIndex: number, propToIndex: {[p: string]: number}): NodeDef {\n  const keys = Object.keys(propToIndex);\n  const nbKeys = keys.length;\n  const propertyNames = new Array(nbKeys);\n  for (let i = 0; i < nbKeys; i++) {\n    const key = keys[i];\n    const index = propToIndex[key];\n    propertyNames[index] = key;\n  }\n\n  return _pureExpressionDef(NodeFlags.TypePureObject, checkIndex, propertyNames);\n}\n\nfunction _pureExpressionDef(\n    flags: NodeFlags, checkIndex: number, propertyNames: string[]): NodeDef {\n  const bindings: BindingDef[] = new Array(propertyNames.length);\n  for (let i = 0; i < propertyNames.length; i++) {\n    const prop = propertyNames[i];\n    bindings[i] = {\n      flags: BindingFlags.TypeProperty,\n      name: prop,\n      ns: null,\n      nonMinifiedName: prop,\n      securityContext: null,\n      suffix: null\n    };\n  }\n  return {\n    // will bet set by the view definition\n    nodeIndex: -1,\n    parent: null,\n    renderParent: null,\n    bindingIndex: -1,\n    outputIndex: -1,\n    // regular values\n    checkIndex,\n    flags,\n    childFlags: 0,\n    directChildFlags: 0,\n    childMatchedQueries: 0,\n    matchedQueries: {},\n    matchedQueryIds: 0,\n    references: {},\n    ngContentIndex: -1,\n    childCount: 0, bindings,\n    bindingFlags: calcBindingFlags(bindings),\n    outputs: [],\n    element: null,\n    provider: null,\n    text: null,\n    query: null,\n    ngContent: null\n  };\n}\n\nexport function createPureExpression(view: ViewData, def: NodeDef): PureExpressionData {\n  return {value: undefined};\n}\n\nexport function checkAndUpdatePureExpressionInline(\n    view: ViewData, def: NodeDef, v0: any, v1: any, v2: any, v3: any, v4: any, v5: any, v6: any,\n    v7: any, v8: any, v9: any): boolean {\n  const bindings = def.bindings;\n  let changed = false;\n  const bindLen = bindings.length;\n  if (bindLen > 0 && checkAndUpdateBinding(view, def, 0, v0)) changed = true;\n  if (bindLen > 1 && checkAndUpdateBinding(view, def, 1, v1)) changed = true;\n  if (bindLen > 2 && checkAndUpdateBinding(view, def, 2, v2)) changed = true;\n  if (bindLen > 3 && checkAndUpdateBinding(view, def, 3, v3)) changed = true;\n  if (bindLen > 4 && checkAndUpdateBinding(view, def, 4, v4)) changed = true;\n  if (bindLen > 5 && checkAndUpdateBinding(view, def, 5, v5)) changed = true;\n  if (bindLen > 6 && checkAndUpdateBinding(view, def, 6, v6)) changed = true;\n  if (bindLen > 7 && checkAndUpdateBinding(view, def, 7, v7)) changed = true;\n  if (bindLen > 8 && checkAndUpdateBinding(view, def, 8, v8)) changed = true;\n  if (bindLen > 9 && checkAndUpdateBinding(view, def, 9, v9)) changed = true;\n\n  if (changed) {\n    const data = asPureExpressionData(view, def.nodeIndex);\n    let value: any;\n    switch (def.flags & NodeFlags.Types) {\n      case NodeFlags.TypePureArray:\n        value = new Array(bindings.length);\n        if (bindLen > 0) value[0] = v0;\n        if (bindLen > 1) value[1] = v1;\n        if (bindLen > 2) value[2] = v2;\n        if (bindLen > 3) value[3] = v3;\n        if (bindLen > 4) value[4] = v4;\n        if (bindLen > 5) value[5] = v5;\n        if (bindLen > 6) value[6] = v6;\n        if (bindLen > 7) value[7] = v7;\n        if (bindLen > 8) value[8] = v8;\n        if (bindLen > 9) value[9] = v9;\n        break;\n      case NodeFlags.TypePureObject:\n        value = {};\n        if (bindLen > 0) value[bindings[0].name !] = v0;\n        if (bindLen > 1) value[bindings[1].name !] = v1;\n        if (bindLen > 2) value[bindings[2].name !] = v2;\n        if (bindLen > 3) value[bindings[3].name !] = v3;\n        if (bindLen > 4) value[bindings[4].name !] = v4;\n        if (bindLen > 5) value[bindings[5].name !] = v5;\n        if (bindLen > 6) value[bindings[6].name !] = v6;\n        if (bindLen > 7) value[bindings[7].name !] = v7;\n        if (bindLen > 8) value[bindings[8].name !] = v8;\n        if (bindLen > 9) value[bindings[9].name !] = v9;\n        break;\n      case NodeFlags.TypePurePipe:\n        const pipe = v0;\n        switch (bindLen) {\n          case 1:\n            value = pipe.transform(v0);\n            break;\n          case 2:\n            value = pipe.transform(v1);\n            break;\n          case 3:\n            value = pipe.transform(v1, v2);\n            break;\n          case 4:\n            value = pipe.transform(v1, v2, v3);\n            break;\n          case 5:\n            value = pipe.transform(v1, v2, v3, v4);\n            break;\n          case 6:\n            value = pipe.transform(v1, v2, v3, v4, v5);\n            break;\n          case 7:\n            value = pipe.transform(v1, v2, v3, v4, v5, v6);\n            break;\n          case 8:\n            value = pipe.transform(v1, v2, v3, v4, v5, v6, v7);\n            break;\n          case 9:\n            value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8);\n            break;\n          case 10:\n            value = pipe.transform(v1, v2, v3, v4, v5, v6, v7, v8, v9);\n            break;\n        }\n        break;\n    }\n    data.value = value;\n  }\n  return changed;\n}\n\nexport function checkAndUpdatePureExpressionDynamic(\n    view: ViewData, def: NodeDef, values: any[]): boolean {\n  const bindings = def.bindings;\n  let changed = false;\n  for (let i = 0; i < values.length; i++) {\n    // Note: We need to loop over all values, so that\n    // the old values are updates as well!\n    if (checkAndUpdateBinding(view, def, i, values[i])) {\n      changed = true;\n    }\n  }\n  if (changed) {\n    const data = asPureExpressionData(view, def.nodeIndex);\n    let value: any;\n    switch (def.flags & NodeFlags.Types) {\n      case NodeFlags.TypePureArray:\n        value = values;\n        break;\n      case NodeFlags.TypePureObject:\n        value = {};\n        for (let i = 0; i < values.length; i++) {\n          value[bindings[i].name !] = values[i];\n        }\n        break;\n      case NodeFlags.TypePurePipe:\n        const pipe = values[0];\n        const params = values.slice(1);\n        value = (<any>pipe.transform)(...params);\n        break;\n    }\n    data.value = value;\n  }\n  return changed;\n}\n"],"sourceRoot":""}