{"version":3,"sources":["../../../../../../../packages/core/src/linker/component_factory_resolver.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAUA,aAAQ,SAAR,QAAwB,SAAxB;AAEA,aAAQ,gBAAR,QAA6C,qBAA7C;;;;;AAGA,WAAM,SAAA,uBAAA,CAAkC,SAAlC,EAAqD;;AACzD,cAAM,QAAQ,MACV,kCAAkC,UAAU,SAAV,CAAoB,gDAD5C,CAAd;AAEA,wBAAC,KAAD,CAAe,eAAf,IAAkC,SAAlC;AACA,eAAO,KAAP;AACD;;AAED,UAAM,kBAAkB,aAAxB;;;;;AAEA,WAAM,SAAA,YAAA,CAAuB,KAAvB,EAAmC;AACvC,eAAO,iBAAC,KAAD,CAAe,eAAf;AAAP;AACD;AAGD,UAAA,6BAAA,CAAA;;;;;;AACE,gCAA2B,SAA3B,EAA+D;AAC7D,kBAAM,wBAAwB,SAAxB,CAAN;AACD;AAHH;;;;AAMA,WAAM,MAAA,wBAAA,CAAA;oCACoC,IAAI,6BAAJ,E;;;;;;;;;;;;AAI1C,WAAM,MAAA,+BAAA,CAAA;;;;;;AAGJ,oBACI,SADJ,EACgD,OADhD,EAEY,SAFZ,EAEY;AADoC,iBAAA,OAAA,GAAA,OAAA;AACpC,iBAAA,SAAA,GAAA,SAAA;8BAJS,IAAI,GAAJ,E;AAKnB,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,UAAU,MAA9B,EAAsC,GAAtC,EAA2C;;AACzC,sBAAM,UAAU,UAAU,CAAV,CAAhB;AACA,qBAAK,UAAL,CAAgB,GAAhB,CAAoB,QAAQ,aAA5B,EAA2C,OAA3C;AACD;AACF;;;;;;AAED,gCAA2B,SAA3B,EAA+D;;AAC7D,gBAAI,UAAU,KAAK,UAAL,CAAgB,GAAhB,CAAoB,SAApB,CAAd;AACA,gBAAI,CAAC,OAAD,IAAY,KAAK,OAArB,EAA8B;AAC5B,0BAAU,KAAK,OAAL,CAAa,uBAAb,CAAqC,SAArC,CAAV;AACD;AACD,gBAAI,CAAC,OAAL,EAAc;AACZ,sBAAM,wBAAwB,SAAxB,CAAN;AACD;AACD,mBAAO,IAAI,6BAAJ,CAAkC,OAAlC,EAA2C,KAAK,SAAhD,CAAP;AACD;AArBG;;;;;;;;;;;;AAwBN,WAAM,MAAA,6BAAA,SAAgD,gBAAhD,CAAmE;;;;;AAOvE,oBAAoB,OAApB,EAA0D,QAA1D,EAAoF;AAClF;AADkB,iBAAA,OAAA,GAAA,OAAA;AAAsC,iBAAA,QAAA,GAAA,QAAA;AAExD,iBAAK,QAAL,GAAgB,QAAQ,QAAxB;AACA,iBAAK,aAAL,GAAqB,QAAQ,aAA7B;AACA,iBAAK,kBAAL,GAA0B,QAAQ,kBAAlC;AACA,iBAAK,MAAL,GAAc,QAAQ,MAAtB;AACA,iBAAK,OAAL,GAAe,QAAQ,OAAvB;AACD;;;;;;;;AAED,eACI,QADJ,EACwB,gBADxB,EACoD,kBADpD,EAEI,QAFJ,EAE+B;AAC7B,mBAAO,KAAK,OAAL,CAAa,MAAb,CACH,QADG,EACO,gBADP,EACyB,kBADzB,EAC6C,YAAY,KAAK,QAD9D,CAAP;AAED;AArBsE","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Injector} from '../di/injector';\nimport {Type} from '../type';\nimport {stringify} from '../util';\n\nimport {ComponentFactory, ComponentRef} from './component_factory';\nimport {NgModuleRef} from './ng_module_factory';\n\nexport function noComponentFactoryError(component: Function) {\n  const error = Error(\n      `No component factory found for ${stringify(component)}. Did you add it to @NgModule.entryComponents?`);\n  (error as any)[ERROR_COMPONENT] = component;\n  return error;\n}\n\nconst ERROR_COMPONENT = 'ngComponent';\n\nexport function getComponent(error: Error): Type<any> {\n  return (error as any)[ERROR_COMPONENT];\n}\n\n\nclass _NullComponentFactoryResolver implements ComponentFactoryResolver {\n  resolveComponentFactory<T>(component: {new (...args: any[]): T}): ComponentFactory<T> {\n    throw noComponentFactoryError(component);\n  }\n}\n\nexport abstract class ComponentFactoryResolver {\n  static NULL: ComponentFactoryResolver = new _NullComponentFactoryResolver();\n  abstract resolveComponentFactory<T>(component: Type<T>): ComponentFactory<T>;\n}\n\nexport class CodegenComponentFactoryResolver implements ComponentFactoryResolver {\n  private _factories = new Map<any, ComponentFactory<any>>();\n\n  constructor(\n      factories: ComponentFactory<any>[], private _parent: ComponentFactoryResolver,\n      private _ngModule: NgModuleRef<any>) {\n    for (let i = 0; i < factories.length; i++) {\n      const factory = factories[i];\n      this._factories.set(factory.componentType, factory);\n    }\n  }\n\n  resolveComponentFactory<T>(component: {new (...args: any[]): T}): ComponentFactory<T> {\n    let factory = this._factories.get(component);\n    if (!factory && this._parent) {\n      factory = this._parent.resolveComponentFactory(component);\n    }\n    if (!factory) {\n      throw noComponentFactoryError(component);\n    }\n    return new ComponentFactoryBoundToModule(factory, this._ngModule);\n  }\n}\n\nexport class ComponentFactoryBoundToModule<C> extends ComponentFactory<C> {\n  readonly selector: string;\n  readonly componentType: Type<any>;\n  readonly ngContentSelectors: string[];\n  readonly inputs: {propName: string, templateName: string}[];\n  readonly outputs: {propName: string, templateName: string}[];\n\n  constructor(private factory: ComponentFactory<C>, private ngModule: NgModuleRef<any>) {\n    super();\n    this.selector = factory.selector;\n    this.componentType = factory.componentType;\n    this.ngContentSelectors = factory.ngContentSelectors;\n    this.inputs = factory.inputs;\n    this.outputs = factory.outputs;\n  }\n\n  create(\n      injector: Injector, projectableNodes?: any[][], rootSelectorOrNode?: string|any,\n      ngModule?: NgModuleRef<any>): ComponentRef<C> {\n    return this.factory.create(\n        injector, projectableNodes, rootSelectorOrNode, ngModule || this.ngModule);\n  }\n}\n"],"sourceRoot":""}