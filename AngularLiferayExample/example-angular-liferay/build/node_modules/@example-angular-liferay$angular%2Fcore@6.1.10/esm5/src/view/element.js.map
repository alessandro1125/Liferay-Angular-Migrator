{"version":3,"sources":["../../../../../../../../../../packages/core/src/view/element.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {RendererType2} from '../render/api';\nimport {SecurityContext} from '../sanitization/security';\n\nimport {BindingDef, BindingFlags, ElementData, ElementHandleEventFn, NodeDef, NodeFlags, OutputDef, OutputType, QueryValueType, ViewData, ViewDefinitionFactory, asElementData} from './types';\nimport {NOOP, calcBindingFlags, checkAndUpdateBinding, dispatchEvent, elementEventFullName, getParentRenderElement, resolveDefinition, resolveRendererType2, splitMatchedQueriesDsl, splitNamespace} from './util';\n\nexport function anchorDef(\n    flags: NodeFlags, matchedQueriesDsl: null | [string | number, QueryValueType][],\n    ngContentIndex: null | number, childCount: number, handleEvent?: null | ElementHandleEventFn,\n    templateFactory?: ViewDefinitionFactory): NodeDef {\n  flags |= NodeFlags.TypeElement;\n  const {matchedQueries, references, matchedQueryIds} = splitMatchedQueriesDsl(matchedQueriesDsl);\n  const template = templateFactory ? resolveDefinition(templateFactory) : null;\n\n  return {\n    // will bet set by the view definition\n    nodeIndex: -1,\n    parent: null,\n    renderParent: null,\n    bindingIndex: -1,\n    outputIndex: -1,\n    // regular values\n    flags,\n    checkIndex: -1,\n    childFlags: 0,\n    directChildFlags: 0,\n    childMatchedQueries: 0, matchedQueries, matchedQueryIds, references, ngContentIndex, childCount,\n    bindings: [],\n    bindingFlags: 0,\n    outputs: [],\n    element: {\n      ns: null,\n      name: null,\n      attrs: null, template,\n      componentProvider: null,\n      componentView: null,\n      componentRendererType: null,\n      publicProviders: null,\n      allProviders: null,\n      handleEvent: handleEvent || NOOP\n    },\n    provider: null,\n    text: null,\n    query: null,\n    ngContent: null\n  };\n}\n\nexport function elementDef(\n    checkIndex: number, flags: NodeFlags,\n    matchedQueriesDsl: null | [string | number, QueryValueType][], ngContentIndex: null | number,\n    childCount: number, namespaceAndName: string | null, fixedAttrs: null | [string, string][] = [],\n    bindings?: null | [BindingFlags, string, string | SecurityContext | null][],\n    outputs?: null | ([string, string])[], handleEvent?: null | ElementHandleEventFn,\n    componentView?: null | ViewDefinitionFactory,\n    componentRendererType?: RendererType2 | null): NodeDef {\n  if (!handleEvent) {\n    handleEvent = NOOP;\n  }\n  const {matchedQueries, references, matchedQueryIds} = splitMatchedQueriesDsl(matchedQueriesDsl);\n  let ns: string = null !;\n  let name: string = null !;\n  if (namespaceAndName) {\n    [ns, name] = splitNamespace(namespaceAndName);\n  }\n  bindings = bindings || [];\n  const bindingDefs: BindingDef[] = new Array(bindings.length);\n  for (let i = 0; i < bindings.length; i++) {\n    const [bindingFlags, namespaceAndName, suffixOrSecurityContext] = bindings[i];\n\n    const [ns, name] = splitNamespace(namespaceAndName);\n    let securityContext: SecurityContext = undefined !;\n    let suffix: string = undefined !;\n    switch (bindingFlags & BindingFlags.Types) {\n      case BindingFlags.TypeElementStyle:\n        suffix = <string>suffixOrSecurityContext;\n        break;\n      case BindingFlags.TypeElementAttribute:\n      case BindingFlags.TypeProperty:\n        securityContext = <SecurityContext>suffixOrSecurityContext;\n        break;\n    }\n    bindingDefs[i] =\n        {flags: bindingFlags, ns, name, nonMinifiedName: name, securityContext, suffix};\n  }\n  outputs = outputs || [];\n  const outputDefs: OutputDef[] = new Array(outputs.length);\n  for (let i = 0; i < outputs.length; i++) {\n    const [target, eventName] = outputs[i];\n    outputDefs[i] = {\n      type: OutputType.ElementOutput,\n      target: <any>target, eventName,\n      propName: null\n    };\n  }\n  fixedAttrs = fixedAttrs || [];\n  const attrs = <[string, string, string][]>fixedAttrs.map(([namespaceAndName, value]) => {\n    const [ns, name] = splitNamespace(namespaceAndName);\n    return [ns, name, value];\n  });\n  componentRendererType = resolveRendererType2(componentRendererType);\n  if (componentView) {\n    flags |= NodeFlags.ComponentView;\n  }\n  flags |= NodeFlags.TypeElement;\n  return {\n    // will bet set by the view definition\n    nodeIndex: -1,\n    parent: null,\n    renderParent: null,\n    bindingIndex: -1,\n    outputIndex: -1,\n    // regular values\n    checkIndex,\n    flags,\n    childFlags: 0,\n    directChildFlags: 0,\n    childMatchedQueries: 0, matchedQueries, matchedQueryIds, references, ngContentIndex, childCount,\n    bindings: bindingDefs,\n    bindingFlags: calcBindingFlags(bindingDefs),\n    outputs: outputDefs,\n    element: {\n      ns,\n      name,\n      attrs,\n      template: null,\n      // will bet set by the view definition\n      componentProvider: null,\n      componentView: componentView || null,\n      componentRendererType: componentRendererType,\n      publicProviders: null,\n      allProviders: null,\n      handleEvent: handleEvent || NOOP,\n    },\n    provider: null,\n    text: null,\n    query: null,\n    ngContent: null\n  };\n}\n\nexport function createElement(view: ViewData, renderHost: any, def: NodeDef): ElementData {\n  const elDef = def.element !;\n  const rootSelectorOrNode = view.root.selectorOrNode;\n  const renderer = view.renderer;\n  let el: any;\n  if (view.parent || !rootSelectorOrNode) {\n    if (elDef.name) {\n      el = renderer.createElement(elDef.name, elDef.ns);\n    } else {\n      el = renderer.createComment('');\n    }\n    const parentEl = getParentRenderElement(view, renderHost, def);\n    if (parentEl) {\n      renderer.appendChild(parentEl, el);\n    }\n  } else {\n    el = renderer.selectRootElement(rootSelectorOrNode);\n  }\n  if (elDef.attrs) {\n    for (let i = 0; i < elDef.attrs.length; i++) {\n      const [ns, name, value] = elDef.attrs[i];\n      renderer.setAttribute(el, name, value, ns);\n    }\n  }\n  return el;\n}\n\nexport function listenToElementOutputs(view: ViewData, compView: ViewData, def: NodeDef, el: any) {\n  for (let i = 0; i < def.outputs.length; i++) {\n    const output = def.outputs[i];\n    const handleEventClosure = renderEventHandlerClosure(\n        view, def.nodeIndex, elementEventFullName(output.target, output.eventName));\n    let listenTarget: 'window'|'document'|'body'|'component'|null = output.target;\n    let listenerView = view;\n    if (output.target === 'component') {\n      listenTarget = null;\n      listenerView = compView;\n    }\n    const disposable =\n        <any>listenerView.renderer.listen(listenTarget || el, output.eventName, handleEventClosure);\n    view.disposables ![def.outputIndex + i] = disposable;\n  }\n}\n\nfunction renderEventHandlerClosure(view: ViewData, index: number, eventName: string) {\n  return (event: any) => dispatchEvent(view, index, eventName, event);\n}\n\n\nexport function checkAndUpdateElementInline(\n    view: ViewData, def: NodeDef, v0: any, v1: any, v2: any, v3: any, v4: any, v5: any, v6: any,\n    v7: any, v8: any, v9: any): boolean {\n  const bindLen = def.bindings.length;\n  let changed = false;\n  if (bindLen > 0 && checkAndUpdateElementValue(view, def, 0, v0)) changed = true;\n  if (bindLen > 1 && checkAndUpdateElementValue(view, def, 1, v1)) changed = true;\n  if (bindLen > 2 && checkAndUpdateElementValue(view, def, 2, v2)) changed = true;\n  if (bindLen > 3 && checkAndUpdateElementValue(view, def, 3, v3)) changed = true;\n  if (bindLen > 4 && checkAndUpdateElementValue(view, def, 4, v4)) changed = true;\n  if (bindLen > 5 && checkAndUpdateElementValue(view, def, 5, v5)) changed = true;\n  if (bindLen > 6 && checkAndUpdateElementValue(view, def, 6, v6)) changed = true;\n  if (bindLen > 7 && checkAndUpdateElementValue(view, def, 7, v7)) changed = true;\n  if (bindLen > 8 && checkAndUpdateElementValue(view, def, 8, v8)) changed = true;\n  if (bindLen > 9 && checkAndUpdateElementValue(view, def, 9, v9)) changed = true;\n  return changed;\n}\n\nexport function checkAndUpdateElementDynamic(view: ViewData, def: NodeDef, values: any[]): boolean {\n  let changed = false;\n  for (let i = 0; i < values.length; i++) {\n    if (checkAndUpdateElementValue(view, def, i, values[i])) changed = true;\n  }\n  return changed;\n}\n\nfunction checkAndUpdateElementValue(view: ViewData, def: NodeDef, bindingIdx: number, value: any) {\n  if (!checkAndUpdateBinding(view, def, bindingIdx, value)) {\n    return false;\n  }\n  const binding = def.bindings[bindingIdx];\n  const elData = asElementData(view, def.nodeIndex);\n  const renderNode = elData.renderElement;\n  const name = binding.name !;\n  switch (binding.flags & BindingFlags.Types) {\n    case BindingFlags.TypeElementAttribute:\n      setElementAttribute(view, binding, renderNode, binding.ns, name, value);\n      break;\n    case BindingFlags.TypeElementClass:\n      setElementClass(view, renderNode, name, value);\n      break;\n    case BindingFlags.TypeElementStyle:\n      setElementStyle(view, binding, renderNode, name, value);\n      break;\n    case BindingFlags.TypeProperty:\n      const bindView = (def.flags & NodeFlags.ComponentView &&\n                        binding.flags & BindingFlags.SyntheticHostProperty) ?\n          elData.componentView :\n          view;\n      setElementProperty(bindView, binding, renderNode, name, value);\n      break;\n  }\n  return true;\n}\n\nfunction setElementAttribute(\n    view: ViewData, binding: BindingDef, renderNode: any, ns: string | null, name: string,\n    value: any) {\n  const securityContext = binding.securityContext;\n  let renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n  renderValue = renderValue != null ? renderValue.toString() : null;\n  const renderer = view.renderer;\n  if (value != null) {\n    renderer.setAttribute(renderNode, name, renderValue, ns);\n  } else {\n    renderer.removeAttribute(renderNode, name, ns);\n  }\n}\n\nfunction setElementClass(view: ViewData, renderNode: any, name: string, value: boolean) {\n  const renderer = view.renderer;\n  if (value) {\n    renderer.addClass(renderNode, name);\n  } else {\n    renderer.removeClass(renderNode, name);\n  }\n}\n\nfunction setElementStyle(\n    view: ViewData, binding: BindingDef, renderNode: any, name: string, value: any) {\n  let renderValue: string|null =\n      view.root.sanitizer.sanitize(SecurityContext.STYLE, value as{} | string);\n  if (renderValue != null) {\n    renderValue = renderValue.toString();\n    const unit = binding.suffix;\n    if (unit != null) {\n      renderValue = renderValue + unit;\n    }\n  } else {\n    renderValue = null;\n  }\n  const renderer = view.renderer;\n  if (renderValue != null) {\n    renderer.setStyle(renderNode, name, renderValue);\n  } else {\n    renderer.removeStyle(renderNode, name);\n  }\n}\n\nfunction setElementProperty(\n    view: ViewData, binding: BindingDef, renderNode: any, name: string, value: any) {\n  const securityContext = binding.securityContext;\n  let renderValue = securityContext ? view.root.sanitizer.sanitize(securityContext, value) : value;\n  view.renderer.setProperty(renderNode, name, renderValue);\n}\n"],"sourceRoot":""}