{"version":3,"sources":["../../../../../../../../../../packages/core/src/view/view.ts"],"names":[],"mappings":";;;;;;;;;AAUA,aAAQ,4BAAR,EAAsC,2BAAtC,EAAmE,aAAnE,EAAkF,sBAAlF,QAA+G,WAA/G;AACA,aAAQ,2CAAR,QAA0D,UAA1D;AACA,aAAQ,eAAR,QAA8B,cAA9B;AACA,aAAQ,+BAAR,EAAyC,8BAAzC,EAAyE,6BAAzE,EAAwG,uBAAxG,EAAiI,kBAAjI,EAAqJ,sBAArJ,QAAkL,YAAlL;AACA,aAAQ,mCAAR,EAA6C,kCAA7C,EAAiF,oBAAjF,QAA4G,mBAA5G;AACA,aAAQ,mBAAR,EAA6B,WAA7B,QAA+C,SAA/C;AACA,aAAQ,kBAAR,EAA4B,uBAA5B,QAA0D,QAA1D;AACA,aAAQ,yBAAR,EAAmC,wBAAnC,EAA6D,UAA7D,QAA8E,QAA9E;AACA,aAAoG,QAApG,EAA+L,aAA/L,EAA8M,WAA9M,EAA2N,UAA3N,EAAuO,cAAvO,QAA4P,SAA5P;AACA,aAAQ,IAAR,EAAc,qBAAd,EAAqC,eAArC,EAAsD,qCAAtD,EAA6F,iBAA7F,EAAgH,QAAhH,QAA+H,QAA/H;AACA,aAAQ,mBAAR,QAAkC,eAAlC;AAEA,WAAM,SAAA,OAAA,CACF,KADE,EACgB,KADhB,EACkC,gBADlC,EAEF,cAFE,EAEkC;AACtC;AACA,YAAI,mBAAmB,CAAvB;AACA,YAAI,sBAAsB,CAA1B;AACA,YAAI,gBAAgB,CAApB;AACA,YAAI,oBAAoB,CAAxB;AACA,YAAI,qBAAqB,CAAzB;AACA,YAAI,gBAA8B,IAAlC;AACA,YAAI,sBAAoC,IAAxC;AACA,YAAI,mCAAmC,KAAvC;AACA,YAAI,oCAAoC,KAAxC;AACA,YAAI,qBAAmC,IAAvC;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACrC,gBAAM,OAAO,MAAM,CAAN,CAAb;AACA,iBAAK,SAAL,GAAiB,CAAjB;AACA,iBAAK,MAAL,GAAc,aAAd;AACA,iBAAK,YAAL,GAAoB,gBAApB;AACA,iBAAK,WAAL,GAAmB,mBAAnB;AACA,iBAAK,YAAL,GAAoB,mBAApB;AAEA,6BAAiB,KAAK,KAAtB;AACA,kCAAsB,KAAK,eAA3B;AAEA,gBAAI,KAAK,OAAT,EAAkB;AAChB,oBAAM,QAAQ,KAAK,OAAnB;AACA,sBAAM,eAAN,GACI,gBAAgB,cAAc,OAAd,CAAwB,eAAxC,GAA0D,OAAO,MAAP,CAAc,IAAd,CAD9D;AAEA,sBAAM,YAAN,GAAqB,MAAM,eAA3B;AACA;AACA,mDAAmC,KAAnC;AACA,oDAAoC,KAApC;AAEA,oBAAI,KAAK,OAAL,CAAa,QAAjB,EAA2B;AACzB,0CAAsB,KAAK,OAAL,CAAa,QAAb,CAAsB,kBAA5C;AACD;AACF;AACD,yBAAa,aAAb,EAA4B,IAA5B,EAAkC,MAAM,MAAxC;AAGA,gCAAoB,KAAK,QAAL,CAAc,MAAlC;AACA,mCAAuB,KAAK,OAAL,CAAa,MAApC;AAEA,gBAAI,CAAC,mBAAD,IAAyB,KAAK,KAAL,GAAU,CAAnC,CAAmC,mBAAvC,EAAoE;AAClE,qCAAqB,IAArB;AACD;AAED,gBAAI,KAAK,KAAL,GAAU,KAAd,CAAc,iBAAd,EAAwC;AACtC,wBAAI,CAAC,gCAAL,EAAuC;AACrC,2DAAmC,IAAnC;AACA;AACA,sCAAgB,OAAhB,CAA0B,eAA1B,GACI,OAAO,MAAP,CAAc,cAAgB,OAAhB,CAA0B,eAAxC,CADJ;AAEA,sCAAgB,OAAhB,CAA0B,YAA1B,GAAyC,cAAgB,OAAhB,CAA0B,eAAnE;AACD;AACD,wBAAM,mBAAmB,CAAC,KAAK,KAAL,GAAU,IAAX,CAAW,qBAAX,MAA6C,CAAtE;AACA,wBAAM,cAAc,CAAC,KAAK,KAAL,GAAU,KAAX,CAAW,eAAX,MAAuC,CAA3D;AACA,wBAAI,CAAC,gBAAD,IAAqB,WAAzB,EAAsC;AACpC,sCAAgB,OAAhB,CAA0B,eAA1B,CAA4C,SAAS,KAAK,QAAL,CAAgB,KAAzB,CAA5C,IAA+E,IAA/E;AACD,qBAFD,MAEO;AACL,4BAAI,CAAC,iCAAL,EAAwC;AACtC,gEAAoC,IAApC;AACA;AACA,0CAAgB,OAAhB,CAA0B,YAA1B,GACI,OAAO,MAAP,CAAc,cAAgB,OAAhB,CAA0B,eAAxC,CADJ;AAED;AACD,sCAAgB,OAAhB,CAA0B,YAA1B,CAAyC,SAAS,KAAK,QAAL,CAAgB,KAAzB,CAAzC,IAA4E,IAA5E;AACD;AACD,wBAAI,WAAJ,EAAiB;AACf,sCAAgB,OAAhB,CAA0B,iBAA1B,GAA8C,IAA9C;AACD;AACF;AAED,gBAAI,aAAJ,EAAmB;AACjB,8BAAc,UAAd,IAA4B,KAAK,KAAjC;AACA,8BAAc,gBAAd,IAAkC,KAAK,KAAvC;AACA,8BAAc,mBAAd,IAAqC,KAAK,eAA1C;AACA,oBAAI,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,QAAjC,EAA2C;AACzC,kCAAc,mBAAd,IAAqC,KAAK,OAAL,CAAa,QAAb,CAAsB,kBAA3D;AACD;AACF,aAPD,MAOO;AACL,qCAAqB,KAAK,KAA1B;AACD;AAED,gBAAI,KAAK,UAAL,GAAkB,CAAtB,EAAyB;AACvB,gCAAgB,IAAhB;AAEA,oBAAI,CAAC,cAAc,IAAd,CAAL,EAA0B;AACxB,0CAAsB,IAAtB;AACD;AACF,aAND,MAMO;AACL;AACA;AACA;AACA;AACA;AACA,uBAAO,iBAAiB,MAAM,cAAc,SAAd,GAA0B,cAAc,UAAtE,EAAkF;AAChF,wBAAM,YAA0B,cAAc,MAA9C;AACA,wBAAI,SAAJ,EAAe;AACb,kCAAU,UAAV,IAAwB,cAAc,UAAtC;AACA,kCAAU,mBAAV,IAAiC,cAAc,mBAA/C;AACD;AACD,oCAAgB,SAAhB;AACA;AACA,wBAAI,iBAAiB,cAAc,aAAd,CAArB,EAAmD;AACjD,8CAAsB,cAAc,YAApC;AACD,qBAFD,MAEO;AACL,8CAAsB,aAAtB;AACD;AACF;AACF;AACF;AAED,YAAM,cAAiC,UAAC,IAAD,EAAO,SAAP,EAAkB,SAAlB,EAA6B,KAA7B,EAAkC;AACrE,mBAAA,MAAM,SAAN,EAAiB,OAAjB,CAA2B,WAA3B,CAAyC,IAAzC,EAA+C,SAA/C,EAA0D,KAA1D,CAAA;AAAgE,SADpE;AAGA,eAAO;AACL;AACA,qBAAS,IAFJ;AAGL,uBAAW,aAHN;AAIL,2BAAe,iBAJV;AAKL,gCAAoB,kBALf,EAKmC,OAAK,KALxC;AAML,mBAAO,KANF;AAOL,8BAAkB,oBAAoB,IAPjC;AAQL,4BAAgB,kBAAkB,IAR7B,EAQmC,aAAW,WAR9C;AASL,0BAAc,gBATT;AAUL,yBAAa,mBAVR,EAU6B,oBAAkB;AAV/C,SAAP;AAYD;AAED,aAAA,aAAA,CAAuB,IAAvB,EAAoC;AAClC,eAAO,CAAC,KAAK,KAAL,GAAU,CAAX,CAAW,iBAAX,MAAyC,CAAzC,IAA8C,KAAK,OAAL,CAAe,IAAf,KAAwB,IAA7E;AACD;AAED,aAAA,YAAA,CAAsB,MAAtB,EAA8C,IAA9C,EAA6D,SAA7D,EAA8E;AAC5E,YAAM,WAAW,KAAK,OAAL,IAAgB,KAAK,OAAL,CAAa,QAA9C;AACA,YAAI,QAAJ,EAAc;AACZ,gBAAI,CAAC,SAAS,kBAAd,EAAkC;AAChC,sBAAM,IAAI,KAAJ,CAAU,kEAAV,CAAN;AACD;AACD,gBAAI,SAAS,kBAAT,IACA,SAAS,kBAAT,CAA4B,KAA5B,GAAiC,QADrC,CACqC,mBADrC,EACiE;AAC/D,0BAAM,IAAI,KAAJ,CACF,qFAAmF,KAAK,SAAxF,GAAiG,GAD/F,CAAN;AAED;AACF;AACD,YAAI,KAAK,KAAL,GAAU,KAAd,CAAc,iBAAd,EAAwC;AACtC,oBAAM,cAAc,SAAS,OAAO,KAAhB,GAAwB,CAA5C;AACA,oBAAI,CAAC,cAAW,CAAZ,CAAY,iBAAZ,MAA0C,CAA9C,EAAiD;AAC/C,0BAAM,IAAI,KAAJ,CACF,wGAAsG,KAAK,SAA3G,GAAoH,GADlH,CAAN;AAED;AACF;AACD,YAAI,KAAK,KAAT,EAAgB;AACd,gBAAI,KAAK,KAAL,GAAU,QAAV,CAAU,sBAAV,KACC,CAAC,MAAD,IAAW,CAAC,OAAO,KAAP,GAAY,KAAb,CAAa,mBAAb,MAA6C,CADzD,CAAJ,EACiE;AAC/D,sBAAM,IAAI,KAAJ,CACF,oFAAkF,KAAK,SAAvF,GAAgG,GAD9F,CAAN;AAED;AACD,gBAAI,KAAK,KAAL,GAAU,SAAV,CAAU,mBAAV,IAAwC,MAA5C,EAAoD;AAClD,sBAAM,IAAI,KAAJ,CACF,0EAAwE,KAAK,SAA7E,GAAsF,GADpF,CAAN;AAED;AACF;AACD,YAAI,KAAK,UAAT,EAAqB;AACnB,gBAAM,YAAY,SAAS,OAAO,SAAP,GAAmB,OAAO,UAAnC,GAAgD,YAAY,CAA9E;AACA,gBAAI,KAAK,SAAL,IAAkB,SAAlB,IAA+B,KAAK,SAAL,GAAiB,KAAK,UAAtB,GAAmC,SAAtE,EAAiF;AAC/E,sBAAM,IAAI,KAAJ,CACF,yEAAuE,KAAK,SAA5E,GAAqF,GADnF,CAAN;AAED;AACF;AACF;AAED,WAAM,SAAA,kBAAA,CACF,MADE,EACgB,SADhB,EACoC,OADpC,EAC6D,OAD7D,EAC0E;AAC9E;AACA;AACA,YAAM,OAAO,WAAW,OAAO,IAAlB,EAAwB,OAAO,QAA/B,EAAyC,MAAzC,EAAiD,SAAjD,EAA4D,OAA5D,CAAb;AACA,iBAAS,IAAT,EAAe,OAAO,SAAtB,EAAiC,OAAjC;AACA,wBAAgB,IAAhB;AACA,eAAO,IAAP;AACD;AAED,WAAM,SAAA,cAAA,CAAyB,IAAzB,EAAyC,GAAzC,EAA8D,OAA9D,EAA2E;AAC/E,YAAM,OAAO,WAAW,IAAX,EAAiB,KAAK,QAAtB,EAAgC,IAAhC,EAAsC,IAAtC,EAA4C,GAA5C,CAAb;AACA,iBAAS,IAAT,EAAe,OAAf,EAAwB,OAAxB;AACA,wBAAgB,IAAhB;AACA,eAAO,IAAP;AACD;AAED,WAAM,SAAA,mBAAA,CACF,UADE,EACoB,OADpB,EACsC,OADtC,EAC+D,WAD/D,EAC+E;AACnF,YAAM,eAAe,QAAQ,OAAR,CAAkB,qBAAvC;AACA,YAAI,YAAJ;AACA,YAAI,CAAC,YAAL,EAAmB;AACjB,2BAAe,WAAW,IAAX,CAAgB,QAA/B;AACD,SAFD,MAEO;AACL,2BAAe,WAAW,IAAX,CAAgB,eAAhB,CAAgC,cAAhC,CAA+C,WAA/C,EAA4D,YAA5D,CAAf;AACD;AACD,eAAO,WACH,WAAW,IADR,EACc,YADd,EAC4B,UAD5B,EACwC,QAAQ,OAAR,CAAkB,iBAD1D,EAC6E,OAD7E,CAAP;AAED;AAED,aAAA,UAAA,CACI,IADJ,EACoB,QADpB,EACyC,MADzC,EACkE,aADlE,EAEI,GAFJ,EAEuB;AACrB,YAAM,QAAoB,IAAI,KAAJ,CAAU,IAAI,KAAJ,CAAU,MAApB,CAA1B;AACA,YAAM,cAAc,IAAI,WAAJ,GAAkB,IAAI,KAAJ,CAAU,IAAI,WAAd,CAAlB,GAA+C,IAAnE;AACA,YAAM,OAAiB;AACrB,iBAAG,GADkB;AAErB,oBAAM,MAFe;AAGrB,iCAAqB,IAHA,EAGM,eAAa,aAHnB;AAIrB,qBAAS,IAJY;AAKrB,uBAAW,IALU,EAKJ,OAAK,KALD;AAMrB,mBAAK,EANgB,CAMhB,aANgB,EAMK,MAAI,IANT,EAMW,UAAQ,QANnB;AAOrB,uBAAW,IAAI,KAAJ,CAAU,IAAI,YAAd,CAPU,EAOmB,aAAW,WAP9B;AAQrB,uBAAW,CAAC;AARS,SAAvB;AAUA,eAAO,IAAP;AACD;AAED,aAAA,QAAA,CAAkB,IAAlB,EAAkC,SAAlC,EAAkD,OAAlD,EAA8D;AAC5D,aAAK,SAAL,GAAiB,SAAjB;AACA,aAAK,OAAL,GAAe,OAAf;AACD;AAED,aAAA,eAAA,CAAyB,IAAzB,EAAuC;AACrC,YAAI,UAAJ;AACA,YAAI,gBAAgB,IAAhB,CAAJ,EAA2B;AACzB,gBAAM,UAAU,KAAK,aAArB;AACA,yBAAa,cAAc,KAAK,MAAnB,EAA6B,QAAU,MAAV,CAAmB,SAAhD,EAA2D,aAAxE;AACD;AACD,YAAM,MAAM,KAAK,GAAjB;AACA,YAAM,QAAQ,KAAK,KAAnB;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,KAAJ,CAAU,MAA9B,EAAsC,GAAtC,EAA2C;AACzC,gBAAM,UAAU,IAAI,KAAJ,CAAU,CAAV,CAAhB;AACA,qBAAS,cAAT,CAAwB,IAAxB,EAA8B,CAA9B;AACA,gBAAI,WAAQ,KAAA,CAAZ;AACA,oBAAQ,QAAQ,KAAR,GAAa,SAArB,CAAqB,WAArB,GACE,KAAA,CAAA,CAAA,iBAAA;AACE,wBAAM,KAAK,cAAc,IAAd,EAAoB,UAApB,EAAgC,OAAhC,CAAX;AACA,wBAAI,gBAA0B,SAA9B;AACA,wBAAI,QAAQ,KAAR,GAAa,QAAjB,CAAiB,mBAAjB,EAA6C;AAC3C,gCAAM,cAAc,kBAAkB,QAAQ,OAAR,CAAkB,aAApC,CAApB;AACA,4CAAgB,SAAS,mBAAT,CAA6B,IAA7B,EAAmC,OAAnC,EAA4C,WAA5C,EAAyD,EAAzD,CAAhB;AACD;AACD,2CAAuB,IAAvB,EAA6B,aAA7B,EAA4C,OAA5C,EAAqD,EAArD;AACA,+BAAwB;AACtB,uCAAe,EADO;AAEtB,uCAAa,aAFS;AAGtB,uCAAe,IAHO;AAItB,kCAAU,QAAQ,OAAR,CAAkB,QAAlB,GAA6B,mBAAmB,IAAnB,EAAyB,OAAzB,CAA7B,GAAiE;AAJrD,qBAAxB;AAMA,wBAAI,QAAQ,KAAR,GAAa,QAAjB,CAAiB,mBAAjB,EAA6C;AAC3C,qCAAS,aAAT,GAAyB,wBAAwB,IAAxB,EAA8B,OAA9B,EAAuC,QAAvC,CAAzB;AACD;AACD;AACF,qBAAA,CAAA,CAAA,cAAA;AACE,+BAAW,WAAW,IAAX,EAAiB,UAAjB,EAA6B,OAA7B,CAAX;AACA;AACF,qBAAA,GAAA,CAAA,uBAAA;AACA,qBAAA,IAAA,CAAA,yBAAA;AACA,qBAAA,IAAA,CAAA,6BAAA;AACA,qBAAA,GAAA,CAAA,uBAAA;AAAkC;AAChC,mCAAW,MAAM,CAAN,CAAX;AACA,4BAAI,CAAC,QAAD,IAAa,EAAE,QAAQ,KAAR,GAAa,IAAf,CAAe,kBAAf,CAAjB,EAA4D;AAC1D,gCAAM,WAAW,uBAAuB,IAAvB,EAA6B,OAA7B,CAAjB;AACA,uCAAyB,EAAC,UAAQ,QAAT,EAAzB;AACD;AACD;AACD;AACD,qBAAA,EAAA,CAAA,cAAA;AAAyB;AACvB,4BAAM,WAAW,mBAAmB,IAAnB,EAAyB,OAAzB,CAAjB;AACA,mCAAyB,EAAC,UAAQ,QAAT,EAAzB;AACA;AACD;AACD,qBAAA,KAAA,CAAA,mBAAA;AAA8B;AAC5B,mCAAW,MAAM,CAAN,CAAX;AACA,4BAAI,CAAC,QAAL,EAAe;AACb,gCAAM,WAAW,wBAAwB,IAAxB,EAA8B,OAA9B,CAAjB;AACA,uCAAyB,EAAC,UAAQ,QAAT,EAAzB;AACD;AACD,4BAAI,QAAQ,KAAR,GAAa,KAAjB,CAAiB,eAAjB,EAAyC;AACvC,oCAAM,WAAW,cAAc,IAAd,EAAoB,QAAQ,MAAR,CAAiB,SAArC,EAAgD,aAAjE;AACA,yCAAS,QAAT,EAAmB,SAAS,QAA5B,EAAsC,SAAS,QAA/C;AACD;AACD;AACD;AACD,qBAAA,EAAA,CAAA,mBAAA;AACA,qBAAA,EAAA,CAAA,oBAAA;AACA,qBAAA,GAAA,CAAA,kBAAA;AACE,+BAAW,qBAAqB,IAArB,EAA2B,OAA3B,CAAX;AACA;AACF,qBAAA,QAAA,CAAA,sBAAA;AACA,qBAAA,SAAA,CAAA,mBAAA;AACE,+BAAW,aAAX;AACA;AACF,qBAAA,CAAA,CAAA,mBAAA;AACE,oCAAgB,IAAhB,EAAsB,UAAtB,EAAkC,OAAlC;AACA;AACA,+BAAW,SAAX;AACA;AA/DJ;AAiEA,kBAAM,CAAN,IAAW,QAAX;AACD;AACD;AACA;AACA,iCAAyB,IAAzB,EAA+B,WAAW,eAA1C;AAEA;AACA,0BACI,IADJ,EACU,SAAA,sBAAA,GAAA,SADV,CACU,mBADV,EAC8D,SAD9D,CAC8D,iBAD9D,EAC8D,CAD9D,CAC8D,oBAD9D;AAGD;AAED,WAAM,SAAA,kBAAA,CAA6B,IAA7B,EAA2C;AAC/C,mCAA2B,IAA3B;AACA,iBAAS,gBAAT,CAA0B,IAA1B,EAA8B,CAA9B,CAA8B,oBAA9B;AACA,gCAAwB,IAAxB,EAA8B,WAAW,cAAzC;AACA,iBAAS,cAAT,CAAwB,IAAxB,EAA4B,CAA5B,CAA4B,oBAA5B;AACA,iCAAyB,IAAzB,EAA+B,WAAW,cAA1C;AACA;AACA;AACA,aAAK,KAAL,IAAc,EAAE,GAAA,yBAAA,GAAA,EAAF,CAAE,wBAAF,CAAd;AACD;AAED,WAAM,SAAA,kBAAA,CAA6B,IAA7B,EAA2C;AAC/C,YAAI,KAAK,KAAL,GAAU,CAAd,CAAc,sBAAd,EAA6C;AAC3C,qBAAK,KAAL,IAAc,CAAA,CAAd,CAAc,sBAAd;AACA,qBAAK,KAAL,IAAU,CAAV,CAAU,gBAAV;AACD,aAHD,MAGO;AACL,iBAAK,KAAL,IAAc,CAAA,CAAd,CAAc,gBAAd;AACD;AACD,uBAAe,IAAf,EAAmB,CAAnB,CAAmB,0BAAnB,EAAmB,GAAnB,CAAmB,6BAAnB;AACA,mCAA2B,IAA3B;AACA,iBAAS,gBAAT,CAA0B,IAA1B,EAA8B,CAA9B,CAA8B,oBAA9B;AACA,gCAAwB,IAAxB,EAA8B,WAAW,cAAzC;AACA,0BACI,IADJ,EACQ,QADR,CACQ,sBADR,EACQ,SADR,CACQ,kBADR,EACQ,CADR,CACQ,oBADR;AAEA,YAAI,WAAW,eACX,IADW,EACP,GADO,CACP,6BADO,EACP,GADO,CACP,uCADO,CAAf;AAEA,wCACI,IADJ,EACU,QAAA,yBAAA,IAAiC,WAAU,OAAV,CAAU,sBAAV,GAAwC,CAAzE,CADV;AAGA,iBAAS,cAAT,CAAwB,IAAxB,EAA4B,CAA5B,CAA4B,oBAA5B;AAEA,iCAAyB,IAAzB,EAA+B,WAAW,cAA1C;AACA,0BACI,IADJ,EACQ,SADR,CACQ,mBADR,EACQ,SADR,CACQ,kBADR,EACQ,CADR,CACQ,oBADR;AAEA,mBAAW,eACP,IADO,EACH,GADG,CACH,uCADG,EACH,GADG,CACH,oCADG,CAAX;AAEA,wCACI,IADJ,EACU,QAAA,sBAAA,IAA8B,WAAU,OAAV,CAAU,mBAAV,GAAqC,CAAnE,CADV;AAGA,YAAI,KAAK,GAAL,CAAS,KAAT,GAAc,CAAlB,CAAkB,YAAlB,EAAuC;AACrC,qBAAK,KAAL,IAAc,CAAA,CAAd,CAAc,mBAAd;AACD;AACD,aAAK,KAAL,IAAc,EAAE,GAAA,yBAAA,GAAA,EAAF,CAAE,wBAAF,CAAd;AACA,uBAAe,IAAf,EAAmB,GAAnB,CAAmB,oCAAnB,EAAmB,IAAnB,CAAmB,yBAAnB;AACD;AAED,WAAM,SAAA,kBAAA,CACF,IADE,EACc,OADd,EACgC,QADhC,EACwD,EADxD,EACkE,EADlE,EAC4E,EAD5E,EAEF,EAFE,EAEQ,EAFR,EAEkB,EAFlB,EAE4B,EAF5B,EAEsC,EAFtC,EAEgD,EAFhD,EAE0D,EAF1D,EAEkE;AACtE,YAAI,aAAQ,CAAZ,CAAY,YAAZ,EAAsC;AACpC,uBAAO,yBAAyB,IAAzB,EAA+B,OAA/B,EAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,EAA5D,EAAgE,EAAhE,EAAoE,EAApE,EAAwE,EAAxE,EAA4E,EAA5E,CAAP;AACD,aAFD,MAEO;AACL,mBAAO,0BAA0B,IAA1B,EAAgC,OAAhC,EAAyC,EAAzC,CAAP;AACD;AACF;AAED,aAAA,0BAAA,CAAoC,IAApC,EAAkD;AAChD,YAAM,MAAM,KAAK,GAAjB;AACA,YAAI,EAAE,IAAI,SAAJ,GAAa,CAAf,CAAe,uBAAf,CAAJ,EAAoD;AAClD;AACD;AACD,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,KAAJ,CAAU,MAA9B,EAAsC,GAAtC,EAA2C;AACzC,gBAAM,UAAU,IAAI,KAAJ,CAAU,CAAV,CAAhB;AACA,gBAAI,QAAQ,KAAR,GAAa,CAAjB,CAAiB,uBAAjB,EAAiD;AAC/C,wBAAM,iBAAiB,cAAc,IAAd,EAAoB,CAApB,EAAuB,QAAvB,CAAgC,eAAvD;AACA,wBAAI,cAAJ,EAAoB;AAClB,6BAAK,IAAI,MAAI,CAAb,EAAgB,MAAI,eAAe,MAAnC,EAA2C,KAA3C,EAAgD;AAC9C,gCAAM,gBAAgB,eAAe,GAAf,CAAtB;AACA,0CAAc,KAAd,IAAmB,EAAnB,CAAmB,wBAAnB;AACA,kEAAsC,aAAtC,EAAqD,IAArD;AACD;AACF;AACF,iBATD,MASO,IAAI,CAAC,QAAQ,UAAR,GAAkB,CAAnB,CAAmB,uBAAnB,MAAuD,CAA3D,EAA8D;AACnE;AACA;AACA;AACA,qBAAK,QAAQ,UAAb;AACD;AACF;AACF;AAED,aAAA,wBAAA,CACI,IADJ,EACoB,OADpB,EACsC,EADtC,EACgD,EADhD,EAC0D,EAD1D,EACoE,EADpE,EAC8E,EAD9E,EACwF,EADxF,EAEI,EAFJ,EAEc,EAFd,EAEwB,EAFxB,EAEkC,EAFlC,EAE0C;AACxC,gBAAQ,QAAQ,KAAR,GAAa,SAArB,CAAqB,WAArB,GACE,KAAA,CAAA,CAAA,iBAAA;AACE,uBAAO,4BAA4B,IAA5B,EAAkC,OAAlC,EAA2C,EAA3C,EAA+C,EAA/C,EAAmD,EAAnD,EAAuD,EAAvD,EAA2D,EAA3D,EAA+D,EAA/D,EAAmE,EAAnE,EAAuE,EAAvE,EAA2E,EAA3E,EAA+E,EAA/E,CAAP;AACF,iBAAA,CAAA,CAAA,cAAA;AACE,uBAAO,yBAAyB,IAAzB,EAA+B,OAA/B,EAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,EAA5D,EAAgE,EAAhE,EAAoE,EAApE,EAAwE,EAAxE,EAA4E,EAA5E,CAAP;AACF,iBAAA,KAAA,CAAA,mBAAA;AACE,uBAAO,8BAA8B,IAA9B,EAAoC,OAApC,EAA6C,EAA7C,EAAiD,EAAjD,EAAqD,EAArD,EAAyD,EAAzD,EAA6D,EAA7D,EAAiE,EAAjE,EAAqE,EAArE,EAAyE,EAAzE,EAA6E,EAA7E,EAAiF,EAAjF,CAAP;AACF,iBAAA,EAAA,CAAA,mBAAA;AACA,iBAAA,EAAA,CAAA,oBAAA;AACA,iBAAA,GAAA,CAAA,kBAAA;AACE,uBAAO,mCACH,IADG,EACG,OADH,EACY,EADZ,EACgB,EADhB,EACoB,EADpB,EACwB,EADxB,EAC4B,EAD5B,EACgC,EADhC,EACoC,EADpC,EACwC,EADxC,EAC4C,EAD5C,EACgD,EADhD,CAAP;AAEF;AACE,sBAAM,aAAN;AAbJ;AAeD;AAED,aAAA,yBAAA,CAAmC,IAAnC,EAAmD,OAAnD,EAAqE,MAArE,EAAkF;AAChF,gBAAQ,QAAQ,KAAR,GAAa,SAArB,CAAqB,WAArB,GACE,KAAA,CAAA,CAAA,iBAAA;AACE,uBAAO,6BAA6B,IAA7B,EAAmC,OAAnC,EAA4C,MAA5C,CAAP;AACF,iBAAA,CAAA,CAAA,cAAA;AACE,uBAAO,0BAA0B,IAA1B,EAAgC,OAAhC,EAAyC,MAAzC,CAAP;AACF,iBAAA,KAAA,CAAA,mBAAA;AACE,uBAAO,+BAA+B,IAA/B,EAAqC,OAArC,EAA8C,MAA9C,CAAP;AACF,iBAAA,EAAA,CAAA,mBAAA;AACA,iBAAA,EAAA,CAAA,oBAAA;AACA,iBAAA,GAAA,CAAA,kBAAA;AACE,uBAAO,oCAAoC,IAApC,EAA0C,OAA1C,EAAmD,MAAnD,CAAP;AACF;AACE,sBAAM,aAAN;AAZJ;AAcD;AAED,WAAM,SAAA,kBAAA,CACF,IADE,EACc,OADd,EACgC,QADhC,EACwD,EADxD,EACkE,EADlE,EAC4E,EAD5E,EAEF,EAFE,EAEQ,EAFR,EAEkB,EAFlB,EAE4B,EAF5B,EAEsC,EAFtC,EAEgD,EAFhD,EAE0D,EAF1D,EAEkE;AACtE,YAAI,aAAQ,CAAZ,CAAY,YAAZ,EAAsC;AACpC,yCAAyB,IAAzB,EAA+B,OAA/B,EAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,EAAoD,EAApD,EAAwD,EAAxD,EAA4D,EAA5D,EAAgE,EAAhE,EAAoE,EAApE,EAAwE,EAAxE,EAA4E,EAA5E;AACD,aAFD,MAEO;AACL,sCAA0B,IAA1B,EAAgC,OAAhC,EAAyC,EAAzC;AACD;AACD;AACA,eAAO,KAAP;AACD;AAED,aAAA,wBAAA,CACI,IADJ,EACoB,OADpB,EACsC,EADtC,EAC+C,EAD/C,EACwD,EADxD,EACiE,EADjE,EAC0E,EAD1E,EACmF,EADnF,EAC4F,EAD5F,EAEI,EAFJ,EAEa,EAFb,EAEsB,EAFtB,EAE6B;AAC3B,YAAM,UAAU,QAAQ,QAAR,CAAiB,MAAjC;AACA,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AACjB,YAAI,UAAU,CAAd,EAAiB,sBAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,EAAxC;AAClB;AAED,aAAA,yBAAA,CAAmC,IAAnC,EAAmD,OAAnD,EAAqE,MAArE,EAAkF;AAChF,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,OAAO,MAA3B,EAAmC,GAAnC,EAAwC;AACtC,kCAAsB,IAAtB,EAA4B,OAA5B,EAAqC,CAArC,EAAwC,OAAO,CAAP,CAAxC;AACD;AACF;AAED;;;;AAIA,aAAA,mBAAA,CAA6B,IAA7B,EAA6C,OAA7C,EAA6D;AAC3D,YAAM,YAAY,YAAY,IAAZ,EAAkB,QAAQ,SAA1B,CAAlB;AACA,YAAI,UAAU,KAAd,EAAqB;AACnB,kBAAM,4CACF,SAAS,kBAAT,CAA4B,IAA5B,EAAkC,QAAQ,SAA1C,CADE,EAEF,WAAS,QAAQ,KAAR,CAAe,EAAxB,GAA0B,YAFxB,EAEsC,WAAS,QAAQ,KAAR,CAAe,EAAxB,GAA0B,QAFhE,EAGF,CAAC,KAAK,KAAL,GAAU,CAAX,CAAW,sBAAX,MAA8C,CAH5C,CAAN;AAID;AACF;AAED,WAAM,SAAA,WAAA,CAAsB,IAAtB,EAAoC;AACxC,YAAI,KAAK,KAAL,GAAU,GAAd,CAAc,eAAd,EAAsC;AACpC;AACD;AACD,gCAAwB,IAAxB,EAA8B,WAAW,OAAzC;AACA,iCAAyB,IAAzB,EAA+B,WAAW,OAA1C;AACA,wCAAgC,IAAhC,EAAoC,MAApC,CAAoC,eAApC;AACA,YAAI,KAAK,WAAT,EAAsB;AACpB,iBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,KAAK,WAAL,CAAiB,MAArC,EAA6C,GAA7C,EAAkD;AAChD,qBAAK,WAAL,CAAiB,CAAjB;AACD;AACF;AACD,4BAAoB,IAApB;AACA,YAAI,KAAK,QAAL,CAAc,WAAlB,EAA+B;AAC7B,6BAAiB,IAAjB;AACD;AACD,YAAI,gBAAgB,IAAhB,CAAJ,EAA2B;AACzB,iBAAK,QAAL,CAAc,OAAd;AACD;AACD,aAAK,KAAL,IAAU,GAAV,CAAU,eAAV;AACD;AAED,aAAA,gBAAA,CAA0B,IAA1B,EAAwC;AACtC,YAAM,MAAM,KAAK,GAAL,CAAS,KAAT,CAAe,MAA3B;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,GAApB,EAAyB,GAAzB,EAA8B;AAC5B,gBAAM,MAAM,KAAK,GAAL,CAAS,KAAT,CAAe,CAAf,CAAZ;AACA,gBAAI,IAAI,KAAJ,GAAS,CAAb,CAAa,iBAAb,EAAuC;AACrC,yBAAK,QAAL,CAAc,WAAd,CAA4B,cAAc,IAAd,EAAoB,CAApB,EAAuB,aAAnD;AACD,iBAFD,MAEO,IAAI,IAAI,KAAJ,GAAS,CAAb,CAAa,cAAb,EAAoC;AACzC,yBAAK,QAAL,CAAc,WAAd,CAA4B,WAAW,IAAX,EAAiB,CAAjB,EAAoB,UAAhD;AACD,iBAFM,MAEA,IAAI,IAAI,KAAJ,GAAS,QAAT,CAAS,sBAAT,IAA0C,IAAI,KAAJ,GAAS,SAAvD,CAAuD,mBAAvD,EAAmF;AACxF,gCAAY,IAAZ,EAAkB,CAAlB,EAAqB,OAArB;AACD;AACF;AACF;AAED,QAAK,UAAL;AAAA,KAAA,UAAK,UAAL,EAAe;AACb,mBAAA,WAAA,iBAAA,IAAA,CAAA,IAAA,iBAAA;AACA,mBAAA,WAAA,gBAAA,IAAA,CAAA,IAAA,gBAAA;AACA,mBAAA,WAAA,8BAAA,IAAA,CAAA,IAAA,8BAAA;AACA,mBAAA,WAAA,gBAAA,IAAA,CAAA,IAAA,gBAAA;AACA,mBAAA,WAAA,8BAAA,IAAA,CAAA,IAAA,8BAAA;AACA,mBAAA,WAAA,SAAA,IAAA,CAAA,IAAA,SAAA;AACD,KAPD,EAAK,eAAA,aAAU,EAAV,CAAL;AASA,aAAA,wBAAA,CAAkC,IAAlC,EAAkD,MAAlD,EAAoE;AAClE,YAAM,MAAM,KAAK,GAAjB;AACA,YAAI,EAAE,IAAI,SAAJ,GAAa,QAAf,CAAe,mBAAf,CAAJ,EAAgD;AAC9C;AACD;AACD,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,KAAJ,CAAU,MAA9B,EAAsC,GAAtC,EAA2C;AACzC,gBAAM,UAAU,IAAI,KAAJ,CAAU,CAAV,CAAhB;AACA,gBAAI,QAAQ,KAAR,GAAa,QAAjB,CAAiB,mBAAjB,EAA6C;AAC3C;AACA,mCAAe,cAAc,IAAd,EAAoB,CAApB,EAAuB,aAAtC,EAAqD,MAArD;AACD,iBAHD,MAGO,IAAI,CAAC,QAAQ,UAAR,GAAkB,QAAnB,CAAmB,mBAAnB,MAAmD,CAAvD,EAA0D;AAC/D;AACA;AACA;AACA,qBAAK,QAAQ,UAAb;AACD;AACF;AACF;AAED,aAAA,uBAAA,CAAiC,IAAjC,EAAiD,MAAjD,EAAmE;AACjE,YAAM,MAAM,KAAK,GAAjB;AACA,YAAI,EAAE,IAAI,SAAJ,GAAa,QAAf,CAAe,mBAAf,CAAJ,EAAgD;AAC9C;AACD;AACD,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,IAAI,KAAJ,CAAU,MAA9B,EAAsC,GAAtC,EAA2C;AACzC,gBAAM,UAAU,IAAI,KAAJ,CAAU,CAAV,CAAhB;AACA,gBAAI,QAAQ,KAAR,GAAa,QAAjB,CAAiB,mBAAjB,EAA6C;AAC3C;AACA,wBAAM,gBAAgB,cAAc,IAAd,EAAoB,CAApB,EAAuB,aAAvB,CAAuC,cAA7D;AACA,yBAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,cAAc,MAAlC,EAA0C,GAA1C,EAA+C;AAC7C,uCAAe,cAAc,CAAd,CAAf,EAAiC,MAAjC;AACD;AACF,iBAND,MAMO,IAAI,CAAC,QAAQ,UAAR,GAAkB,QAAnB,CAAmB,mBAAnB,MAAmD,CAAvD,EAA0D;AAC/D;AACA;AACA;AACA,qBAAK,QAAQ,UAAb;AACD;AACF;AACF;AAED,aAAA,cAAA,CAAwB,IAAxB,EAAwC,MAAxC,EAA0D;AACxD,YAAM,YAAY,KAAK,KAAvB;AACA,gBAAQ,MAAR;AACE,iBAAK,WAAW,cAAhB;AACE,oBAAI,CAAC,YAAS,GAAV,CAAU,eAAV,MAAsC,CAA1C,EAA6C;AAC3C,wBAAI,CAAC,YAAS,EAAV,CAAU,sBAAV,MAAwC,EAA5C,CAA4C,sBAA5C,EAA6E;AAC3E,+CAAmB,IAAnB;AACD,yBAFD,MAEO,IAAI,YAAS,EAAb,CAAa,yBAAb,EAA+C;AACpD,qDAAyB,IAAzB,EAA+B,WAAW,4BAA1C;AACD;AACF;AACD;AACF,iBAAK,WAAW,4BAAhB;AACE,oBAAI,CAAC,YAAS,GAAV,CAAU,eAAV,MAAsC,CAA1C,EAA6C;AAC3C,wBAAI,YAAS,EAAb,CAAa,wBAAb,EAA8C;AAC5C,+CAAmB,IAAnB;AACD,yBAFD,MAEO,IAAI,YAAS,EAAb,CAAa,yBAAb,EAA+C;AACpD,qDAAyB,IAAzB,EAA+B,MAA/B;AACD;AACF;AACD;AACF,iBAAK,WAAW,cAAhB;AACE,oBAAI,CAAC,YAAS,GAAV,CAAU,eAAV,MAAsC,CAA1C,EAA6C;AAC3C,wBAAI,CAAC,YAAS,EAAV,CAAU,sBAAV,MAAwC,EAA5C,CAA4C,sBAA5C,EAA6E;AAC3E,+CAAmB,IAAnB;AACD,yBAFD,MAEO,IAAI,YAAS,EAAb,CAAa,yBAAb,EAA+C;AACpD,qDAAyB,IAAzB,EAA+B,WAAW,4BAA1C;AACD;AACF;AACD;AACF,iBAAK,WAAW,4BAAhB;AACE,oBAAI,CAAC,YAAS,GAAV,CAAU,eAAV,MAAsC,CAA1C,EAA6C;AAC3C,wBAAI,YAAS,EAAb,CAAa,wBAAb,EAA8C;AAC5C,+CAAmB,IAAnB;AACD,yBAFD,MAEO,IAAI,YAAS,EAAb,CAAa,yBAAb,EAA+C;AACpD,qDAAyB,IAAzB,EAA+B,MAA/B;AACD;AACF;AACD;AACF,iBAAK,WAAW,OAAhB;AACE;AACA;AACA,4BAAY,IAAZ;AACA;AACF,iBAAK,WAAW,eAAhB;AACE,gCAAgB,IAAhB;AACA;AA5CJ;AA8CD;AAED,aAAA,wBAAA,CAAkC,IAAlC,EAAkD,MAAlD,EAAoE;AAClE,gCAAwB,IAAxB,EAA8B,MAA9B;AACA,iCAAyB,IAAzB,EAA+B,MAA/B;AACD;AAED,aAAA,iBAAA,CACI,IADJ,EACoB,UADpB,EAC2C,sBAD3C,EAEI,SAFJ,EAEwB;AACtB,YAAI,EAAE,KAAK,GAAL,CAAS,SAAT,GAAqB,UAAvB,KAAsC,EAAE,KAAK,GAAL,CAAS,SAAT,GAAqB,sBAAvB,CAA1C,EAA0F;AACxF;AACD;AACD,YAAM,YAAY,KAAK,GAAL,CAAS,KAAT,CAAe,MAAjC;AACA,aAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,SAApB,EAA+B,GAA/B,EAAoC;AAClC,gBAAM,UAAU,KAAK,GAAL,CAAS,KAAT,CAAe,CAAf,CAAhB;AACA,gBAAK,QAAQ,KAAR,GAAgB,UAAjB,IAAiC,QAAQ,KAAR,GAAgB,sBAArD,EAA8E;AAC5E,yBAAS,cAAT,CAAwB,IAAxB,EAA8B,QAAQ,SAAtC;AACA,wBAAQ,SAAR;AACE,yBAAA,CAAA,CAAA,oBAAA;AACE,4CAAoB,IAApB,EAA0B,OAA1B;AACA;AACF,yBAAA,CAAA,CAAA,oBAAA;AACE,4CAAoB,IAApB,EAA0B,OAA1B;AACA;AANJ;AAQD;AACD,gBAAI,EAAE,QAAQ,UAAR,GAAqB,UAAvB,KAAsC,EAAE,QAAQ,UAAR,GAAqB,sBAAvB,CAA1C,EAA0F;AACxF;AACA;AACA,qBAAK,QAAQ,UAAb;AACD;AACF;AACF","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Renderer2} from '../render/api';\n\nimport {checkAndUpdateElementDynamic, checkAndUpdateElementInline, createElement, listenToElementOutputs} from './element';\nimport {expressionChangedAfterItHasBeenCheckedError} from './errors';\nimport {appendNgContent} from './ng_content';\nimport {callLifecycleHooksChildrenFirst, checkAndUpdateDirectiveDynamic, checkAndUpdateDirectiveInline, createDirectiveInstance, createPipeInstance, createProviderInstance} from './provider';\nimport {checkAndUpdatePureExpressionDynamic, checkAndUpdatePureExpressionInline, createPureExpression} from './pure_expression';\nimport {checkAndUpdateQuery, createQuery} from './query';\nimport {createTemplateData, createViewContainerData} from './refs';\nimport {checkAndUpdateTextDynamic, checkAndUpdateTextInline, createText} from './text';\nimport {ArgumentType, CheckType, ElementData, NodeData, NodeDef, NodeFlags, ProviderData, RootData, Services, ViewData, ViewDefinition, ViewFlags, ViewHandleEventFn, ViewState, ViewUpdateFn, asElementData, asQueryList, asTextData, shiftInitState} from './types';\nimport {NOOP, checkBindingNoChanges, isComponentView, markParentViewsForCheckProjectedViews, resolveDefinition, tokenKey} from './util';\nimport {detachProjectedView} from './view_attach';\n\nexport function viewDef(\n    flags: ViewFlags, nodes: NodeDef[], updateDirectives?: null | ViewUpdateFn,\n    updateRenderer?: null | ViewUpdateFn): ViewDefinition {\n  // clone nodes and set auto calculated values\n  let viewBindingCount = 0;\n  let viewDisposableCount = 0;\n  let viewNodeFlags = 0;\n  let viewRootNodeFlags = 0;\n  let viewMatchedQueries = 0;\n  let currentParent: NodeDef|null = null;\n  let currentRenderParent: NodeDef|null = null;\n  let currentElementHasPublicProviders = false;\n  let currentElementHasPrivateProviders = false;\n  let lastRenderRootNode: NodeDef|null = null;\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    node.nodeIndex = i;\n    node.parent = currentParent;\n    node.bindingIndex = viewBindingCount;\n    node.outputIndex = viewDisposableCount;\n    node.renderParent = currentRenderParent;\n\n    viewNodeFlags |= node.flags;\n    viewMatchedQueries |= node.matchedQueryIds;\n\n    if (node.element) {\n      const elDef = node.element;\n      elDef.publicProviders =\n          currentParent ? currentParent.element !.publicProviders : Object.create(null);\n      elDef.allProviders = elDef.publicProviders;\n      // Note: We assume that all providers of an element are before any child element!\n      currentElementHasPublicProviders = false;\n      currentElementHasPrivateProviders = false;\n\n      if (node.element.template) {\n        viewMatchedQueries |= node.element.template.nodeMatchedQueries;\n      }\n    }\n    validateNode(currentParent, node, nodes.length);\n\n\n    viewBindingCount += node.bindings.length;\n    viewDisposableCount += node.outputs.length;\n\n    if (!currentRenderParent && (node.flags & NodeFlags.CatRenderNode)) {\n      lastRenderRootNode = node;\n    }\n\n    if (node.flags & NodeFlags.CatProvider) {\n      if (!currentElementHasPublicProviders) {\n        currentElementHasPublicProviders = true;\n        // Use prototypical inheritance to not get O(n^2) complexity...\n        currentParent !.element !.publicProviders =\n            Object.create(currentParent !.element !.publicProviders);\n        currentParent !.element !.allProviders = currentParent !.element !.publicProviders;\n      }\n      const isPrivateService = (node.flags & NodeFlags.PrivateProvider) !== 0;\n      const isComponent = (node.flags & NodeFlags.Component) !== 0;\n      if (!isPrivateService || isComponent) {\n        currentParent !.element !.publicProviders ![tokenKey(node.provider !.token)] = node;\n      } else {\n        if (!currentElementHasPrivateProviders) {\n          currentElementHasPrivateProviders = true;\n          // Use prototypical inheritance to not get O(n^2) complexity...\n          currentParent !.element !.allProviders =\n              Object.create(currentParent !.element !.publicProviders);\n        }\n        currentParent !.element !.allProviders ![tokenKey(node.provider !.token)] = node;\n      }\n      if (isComponent) {\n        currentParent !.element !.componentProvider = node;\n      }\n    }\n\n    if (currentParent) {\n      currentParent.childFlags |= node.flags;\n      currentParent.directChildFlags |= node.flags;\n      currentParent.childMatchedQueries |= node.matchedQueryIds;\n      if (node.element && node.element.template) {\n        currentParent.childMatchedQueries |= node.element.template.nodeMatchedQueries;\n      }\n    } else {\n      viewRootNodeFlags |= node.flags;\n    }\n\n    if (node.childCount > 0) {\n      currentParent = node;\n\n      if (!isNgContainer(node)) {\n        currentRenderParent = node;\n      }\n    } else {\n      // When the current node has no children, check if it is the last children of its parent.\n      // When it is, propagate the flags up.\n      // The loop is required because an element could be the last transitive children of several\n      // elements. We loop to either the root or the highest opened element (= with remaining\n      // children)\n      while (currentParent && i === currentParent.nodeIndex + currentParent.childCount) {\n        const newParent: NodeDef|null = currentParent.parent;\n        if (newParent) {\n          newParent.childFlags |= currentParent.childFlags;\n          newParent.childMatchedQueries |= currentParent.childMatchedQueries;\n        }\n        currentParent = newParent;\n        // We also need to update the render parent & account for ng-container\n        if (currentParent && isNgContainer(currentParent)) {\n          currentRenderParent = currentParent.renderParent;\n        } else {\n          currentRenderParent = currentParent;\n        }\n      }\n    }\n  }\n\n  const handleEvent: ViewHandleEventFn = (view, nodeIndex, eventName, event) =>\n      nodes[nodeIndex].element !.handleEvent !(view, eventName, event);\n\n  return {\n    // Will be filled later...\n    factory: null,\n    nodeFlags: viewNodeFlags,\n    rootNodeFlags: viewRootNodeFlags,\n    nodeMatchedQueries: viewMatchedQueries, flags,\n    nodes: nodes,\n    updateDirectives: updateDirectives || NOOP,\n    updateRenderer: updateRenderer || NOOP, handleEvent,\n    bindingCount: viewBindingCount,\n    outputCount: viewDisposableCount, lastRenderRootNode\n  };\n}\n\nfunction isNgContainer(node: NodeDef): boolean {\n  return (node.flags & NodeFlags.TypeElement) !== 0 && node.element !.name === null;\n}\n\nfunction validateNode(parent: NodeDef | null, node: NodeDef, nodeCount: number) {\n  const template = node.element && node.element.template;\n  if (template) {\n    if (!template.lastRenderRootNode) {\n      throw new Error(`Illegal State: Embedded templates without nodes are not allowed!`);\n    }\n    if (template.lastRenderRootNode &&\n        template.lastRenderRootNode.flags & NodeFlags.EmbeddedViews) {\n      throw new Error(\n          `Illegal State: Last root node of a template can't have embedded views, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.flags & NodeFlags.CatProvider) {\n    const parentFlags = parent ? parent.flags : 0;\n    if ((parentFlags & NodeFlags.TypeElement) === 0) {\n      throw new Error(\n          `Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.query) {\n    if (node.flags & NodeFlags.TypeContentQuery &&\n        (!parent || (parent.flags & NodeFlags.TypeDirective) === 0)) {\n      throw new Error(\n          `Illegal State: Content Query nodes need to be children of directives, at index ${node.nodeIndex}!`);\n    }\n    if (node.flags & NodeFlags.TypeViewQuery && parent) {\n      throw new Error(\n          `Illegal State: View Query nodes have to be top level nodes, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.childCount) {\n    const parentEnd = parent ? parent.nodeIndex + parent.childCount : nodeCount - 1;\n    if (node.nodeIndex <= parentEnd && node.nodeIndex + node.childCount > parentEnd) {\n      throw new Error(\n          `Illegal State: childCount of node leads outside of parent, at index ${node.nodeIndex}!`);\n    }\n  }\n}\n\nexport function createEmbeddedView(\n    parent: ViewData, anchorDef: NodeDef, viewDef: ViewDefinition, context?: any): ViewData {\n  // embedded views are seen as siblings to the anchor, so we need\n  // to get the parent of the anchor and use it as parentIndex.\n  const view = createView(parent.root, parent.renderer, parent, anchorDef, viewDef);\n  initView(view, parent.component, context);\n  createViewNodes(view);\n  return view;\n}\n\nexport function createRootView(root: RootData, def: ViewDefinition, context?: any): ViewData {\n  const view = createView(root, root.renderer, null, null, def);\n  initView(view, context, context);\n  createViewNodes(view);\n  return view;\n}\n\nexport function createComponentView(\n    parentView: ViewData, nodeDef: NodeDef, viewDef: ViewDefinition, hostElement: any): ViewData {\n  const rendererType = nodeDef.element !.componentRendererType;\n  let compRenderer: Renderer2;\n  if (!rendererType) {\n    compRenderer = parentView.root.renderer;\n  } else {\n    compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);\n  }\n  return createView(\n      parentView.root, compRenderer, parentView, nodeDef.element !.componentProvider, viewDef);\n}\n\nfunction createView(\n    root: RootData, renderer: Renderer2, parent: ViewData | null, parentNodeDef: NodeDef | null,\n    def: ViewDefinition): ViewData {\n  const nodes: NodeData[] = new Array(def.nodes.length);\n  const disposables = def.outputCount ? new Array(def.outputCount) : null;\n  const view: ViewData = {\n    def,\n    parent,\n    viewContainerParent: null, parentNodeDef,\n    context: null,\n    component: null, nodes,\n    state: ViewState.CatInit, root, renderer,\n    oldValues: new Array(def.bindingCount), disposables,\n    initIndex: -1\n  };\n  return view;\n}\n\nfunction initView(view: ViewData, component: any, context: any) {\n  view.component = component;\n  view.context = context;\n}\n\nfunction createViewNodes(view: ViewData) {\n  let renderHost: any;\n  if (isComponentView(view)) {\n    const hostDef = view.parentNodeDef;\n    renderHost = asElementData(view.parent !, hostDef !.parent !.nodeIndex).renderElement;\n  }\n  const def = view.def;\n  const nodes = view.nodes;\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    Services.setCurrentNode(view, i);\n    let nodeData: any;\n    switch (nodeDef.flags & NodeFlags.Types) {\n      case NodeFlags.TypeElement:\n        const el = createElement(view, renderHost, nodeDef) as any;\n        let componentView: ViewData = undefined !;\n        if (nodeDef.flags & NodeFlags.ComponentView) {\n          const compViewDef = resolveDefinition(nodeDef.element !.componentView !);\n          componentView = Services.createComponentView(view, nodeDef, compViewDef, el);\n        }\n        listenToElementOutputs(view, componentView, nodeDef, el);\n        nodeData = <ElementData>{\n          renderElement: el,\n          componentView,\n          viewContainer: null,\n          template: nodeDef.element !.template ? createTemplateData(view, nodeDef) : undefined\n        };\n        if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n          nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);\n        }\n        break;\n      case NodeFlags.TypeText:\n        nodeData = createText(view, renderHost, nodeDef) as any;\n        break;\n      case NodeFlags.TypeClassProvider:\n      case NodeFlags.TypeFactoryProvider:\n      case NodeFlags.TypeUseExistingProvider:\n      case NodeFlags.TypeValueProvider: {\n        nodeData = nodes[i];\n        if (!nodeData && !(nodeDef.flags & NodeFlags.LazyProvider)) {\n          const instance = createProviderInstance(view, nodeDef);\n          nodeData = <ProviderData>{instance};\n        }\n        break;\n      }\n      case NodeFlags.TypePipe: {\n        const instance = createPipeInstance(view, nodeDef);\n        nodeData = <ProviderData>{instance};\n        break;\n      }\n      case NodeFlags.TypeDirective: {\n        nodeData = nodes[i];\n        if (!nodeData) {\n          const instance = createDirectiveInstance(view, nodeDef);\n          nodeData = <ProviderData>{instance};\n        }\n        if (nodeDef.flags & NodeFlags.Component) {\n          const compView = asElementData(view, nodeDef.parent !.nodeIndex).componentView;\n          initView(compView, nodeData.instance, nodeData.instance);\n        }\n        break;\n      }\n      case NodeFlags.TypePureArray:\n      case NodeFlags.TypePureObject:\n      case NodeFlags.TypePurePipe:\n        nodeData = createPureExpression(view, nodeDef) as any;\n        break;\n      case NodeFlags.TypeContentQuery:\n      case NodeFlags.TypeViewQuery:\n        nodeData = createQuery() as any;\n        break;\n      case NodeFlags.TypeNgContent:\n        appendNgContent(view, renderHost, nodeDef);\n        // no runtime data needed for NgContent...\n        nodeData = undefined;\n        break;\n    }\n    nodes[i] = nodeData;\n  }\n  // Create the ViewData.nodes of component views after we created everything else,\n  // so that e.g. ng-content works\n  execComponentViewsAction(view, ViewAction.CreateViewNodes);\n\n  // fill static content and view queries\n  execQueriesAction(\n      view, NodeFlags.TypeContentQuery | NodeFlags.TypeViewQuery, NodeFlags.StaticQuery,\n      CheckType.CheckAndUpdate);\n}\n\nexport function checkNoChangesView(view: ViewData) {\n  markProjectedViewsForCheck(view);\n  Services.updateDirectives(view, CheckType.CheckNoChanges);\n  execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);\n  Services.updateRenderer(view, CheckType.CheckNoChanges);\n  execComponentViewsAction(view, ViewAction.CheckNoChanges);\n  // Note: We don't check queries for changes as we didn't do this in v2.x.\n  // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.\n  view.state &= ~(ViewState.CheckProjectedViews | ViewState.CheckProjectedView);\n}\n\nexport function checkAndUpdateView(view: ViewData) {\n  if (view.state & ViewState.BeforeFirstCheck) {\n    view.state &= ~ViewState.BeforeFirstCheck;\n    view.state |= ViewState.FirstCheck;\n  } else {\n    view.state &= ~ViewState.FirstCheck;\n  }\n  shiftInitState(view, ViewState.InitState_BeforeInit, ViewState.InitState_CallingOnInit);\n  markProjectedViewsForCheck(view);\n  Services.updateDirectives(view, CheckType.CheckAndUpdate);\n  execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);\n  execQueriesAction(\n      view, NodeFlags.TypeContentQuery, NodeFlags.DynamicQuery, CheckType.CheckAndUpdate);\n  let callInit = shiftInitState(\n      view, ViewState.InitState_CallingOnInit, ViewState.InitState_CallingAfterContentInit);\n  callLifecycleHooksChildrenFirst(\n      view, NodeFlags.AfterContentChecked | (callInit ? NodeFlags.AfterContentInit : 0));\n\n  Services.updateRenderer(view, CheckType.CheckAndUpdate);\n\n  execComponentViewsAction(view, ViewAction.CheckAndUpdate);\n  execQueriesAction(\n      view, NodeFlags.TypeViewQuery, NodeFlags.DynamicQuery, CheckType.CheckAndUpdate);\n  callInit = shiftInitState(\n      view, ViewState.InitState_CallingAfterContentInit, ViewState.InitState_CallingAfterViewInit);\n  callLifecycleHooksChildrenFirst(\n      view, NodeFlags.AfterViewChecked | (callInit ? NodeFlags.AfterViewInit : 0));\n\n  if (view.def.flags & ViewFlags.OnPush) {\n    view.state &= ~ViewState.ChecksEnabled;\n  }\n  view.state &= ~(ViewState.CheckProjectedViews | ViewState.CheckProjectedView);\n  shiftInitState(view, ViewState.InitState_CallingAfterViewInit, ViewState.InitState_AfterInit);\n}\n\nexport function checkAndUpdateNode(\n    view: ViewData, nodeDef: NodeDef, argStyle: ArgumentType, v0?: any, v1?: any, v2?: any,\n    v3?: any, v4?: any, v5?: any, v6?: any, v7?: any, v8?: any, v9?: any): boolean {\n  if (argStyle === ArgumentType.Inline) {\n    return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n  } else {\n    return checkAndUpdateNodeDynamic(view, nodeDef, v0);\n  }\n}\n\nfunction markProjectedViewsForCheck(view: ViewData) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.ProjectedTemplate)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.ProjectedTemplate) {\n      const projectedViews = asElementData(view, i).template._projectedViews;\n      if (projectedViews) {\n        for (let i = 0; i < projectedViews.length; i++) {\n          const projectedView = projectedViews[i];\n          projectedView.state |= ViewState.CheckProjectedView;\n          markParentViewsForCheckProjectedViews(projectedView, view);\n        }\n      }\n    } else if ((nodeDef.childFlags & NodeFlags.ProjectedTemplate) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction checkAndUpdateNodeInline(\n    view: ViewData, nodeDef: NodeDef, v0?: any, v1?: any, v2?: any, v3?: any, v4?: any, v5?: any,\n    v6?: any, v7?: any, v8?: any, v9?: any): boolean {\n  switch (nodeDef.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypeText:\n      return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypeDirective:\n      return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypePureArray:\n    case NodeFlags.TypePureObject:\n    case NodeFlags.TypePurePipe:\n      return checkAndUpdatePureExpressionInline(\n          view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    default:\n      throw 'unreachable';\n  }\n}\n\nfunction checkAndUpdateNodeDynamic(view: ViewData, nodeDef: NodeDef, values: any[]): boolean {\n  switch (nodeDef.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return checkAndUpdateElementDynamic(view, nodeDef, values);\n    case NodeFlags.TypeText:\n      return checkAndUpdateTextDynamic(view, nodeDef, values);\n    case NodeFlags.TypeDirective:\n      return checkAndUpdateDirectiveDynamic(view, nodeDef, values);\n    case NodeFlags.TypePureArray:\n    case NodeFlags.TypePureObject:\n    case NodeFlags.TypePurePipe:\n      return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);\n    default:\n      throw 'unreachable';\n  }\n}\n\nexport function checkNoChangesNode(\n    view: ViewData, nodeDef: NodeDef, argStyle: ArgumentType, v0?: any, v1?: any, v2?: any,\n    v3?: any, v4?: any, v5?: any, v6?: any, v7?: any, v8?: any, v9?: any): any {\n  if (argStyle === ArgumentType.Inline) {\n    checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n  } else {\n    checkNoChangesNodeDynamic(view, nodeDef, v0);\n  }\n  // Returning false is ok here as we would have thrown in case of a change.\n  return false;\n}\n\nfunction checkNoChangesNodeInline(\n    view: ViewData, nodeDef: NodeDef, v0: any, v1: any, v2: any, v3: any, v4: any, v5: any, v6: any,\n    v7: any, v8: any, v9: any): void {\n  const bindLen = nodeDef.bindings.length;\n  if (bindLen > 0) checkBindingNoChanges(view, nodeDef, 0, v0);\n  if (bindLen > 1) checkBindingNoChanges(view, nodeDef, 1, v1);\n  if (bindLen > 2) checkBindingNoChanges(view, nodeDef, 2, v2);\n  if (bindLen > 3) checkBindingNoChanges(view, nodeDef, 3, v3);\n  if (bindLen > 4) checkBindingNoChanges(view, nodeDef, 4, v4);\n  if (bindLen > 5) checkBindingNoChanges(view, nodeDef, 5, v5);\n  if (bindLen > 6) checkBindingNoChanges(view, nodeDef, 6, v6);\n  if (bindLen > 7) checkBindingNoChanges(view, nodeDef, 7, v7);\n  if (bindLen > 8) checkBindingNoChanges(view, nodeDef, 8, v8);\n  if (bindLen > 9) checkBindingNoChanges(view, nodeDef, 9, v9);\n}\n\nfunction checkNoChangesNodeDynamic(view: ViewData, nodeDef: NodeDef, values: any[]): void {\n  for (let i = 0; i < values.length; i++) {\n    checkBindingNoChanges(view, nodeDef, i, values[i]);\n  }\n}\n\n/**\n * Workaround https://github.com/angular/tsickle/issues/497\n * @suppress {misplacedTypeAnnotation}\n */\nfunction checkNoChangesQuery(view: ViewData, nodeDef: NodeDef) {\n  const queryList = asQueryList(view, nodeDef.nodeIndex);\n  if (queryList.dirty) {\n    throw expressionChangedAfterItHasBeenCheckedError(\n        Services.createDebugContext(view, nodeDef.nodeIndex),\n        `Query ${nodeDef.query!.id} not dirty`, `Query ${nodeDef.query!.id} dirty`,\n        (view.state & ViewState.BeforeFirstCheck) !== 0);\n  }\n}\n\nexport function destroyView(view: ViewData) {\n  if (view.state & ViewState.Destroyed) {\n    return;\n  }\n  execEmbeddedViewsAction(view, ViewAction.Destroy);\n  execComponentViewsAction(view, ViewAction.Destroy);\n  callLifecycleHooksChildrenFirst(view, NodeFlags.OnDestroy);\n  if (view.disposables) {\n    for (let i = 0; i < view.disposables.length; i++) {\n      view.disposables[i]();\n    }\n  }\n  detachProjectedView(view);\n  if (view.renderer.destroyNode) {\n    destroyViewNodes(view);\n  }\n  if (isComponentView(view)) {\n    view.renderer.destroy();\n  }\n  view.state |= ViewState.Destroyed;\n}\n\nfunction destroyViewNodes(view: ViewData) {\n  const len = view.def.nodes.length;\n  for (let i = 0; i < len; i++) {\n    const def = view.def.nodes[i];\n    if (def.flags & NodeFlags.TypeElement) {\n      view.renderer.destroyNode !(asElementData(view, i).renderElement);\n    } else if (def.flags & NodeFlags.TypeText) {\n      view.renderer.destroyNode !(asTextData(view, i).renderText);\n    } else if (def.flags & NodeFlags.TypeContentQuery || def.flags & NodeFlags.TypeViewQuery) {\n      asQueryList(view, i).destroy();\n    }\n  }\n}\n\nenum ViewAction {\n  CreateViewNodes,\n  CheckNoChanges,\n  CheckNoChangesProjectedViews,\n  CheckAndUpdate,\n  CheckAndUpdateProjectedViews,\n  Destroy\n}\n\nfunction execComponentViewsAction(view: ViewData, action: ViewAction) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.ComponentView)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.ComponentView) {\n      // a leaf\n      callViewAction(asElementData(view, i).componentView, action);\n    } else if ((nodeDef.childFlags & NodeFlags.ComponentView) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction execEmbeddedViewsAction(view: ViewData, action: ViewAction) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.EmbeddedViews)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n      // a leaf\n      const embeddedViews = asElementData(view, i).viewContainer !._embeddedViews;\n      for (let k = 0; k < embeddedViews.length; k++) {\n        callViewAction(embeddedViews[k], action);\n      }\n    } else if ((nodeDef.childFlags & NodeFlags.EmbeddedViews) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction callViewAction(view: ViewData, action: ViewAction) {\n  const viewState = view.state;\n  switch (action) {\n    case ViewAction.CheckNoChanges:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if ((viewState & ViewState.CatDetectChanges) === ViewState.CatDetectChanges) {\n          checkNoChangesView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);\n        }\n      }\n      break;\n    case ViewAction.CheckNoChangesProjectedViews:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if (viewState & ViewState.CheckProjectedView) {\n          checkNoChangesView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, action);\n        }\n      }\n      break;\n    case ViewAction.CheckAndUpdate:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if ((viewState & ViewState.CatDetectChanges) === ViewState.CatDetectChanges) {\n          checkAndUpdateView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);\n        }\n      }\n      break;\n    case ViewAction.CheckAndUpdateProjectedViews:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if (viewState & ViewState.CheckProjectedView) {\n          checkAndUpdateView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, action);\n        }\n      }\n      break;\n    case ViewAction.Destroy:\n      // Note: destroyView recurses over all views,\n      // so we don't need to special case projected views here.\n      destroyView(view);\n      break;\n    case ViewAction.CreateViewNodes:\n      createViewNodes(view);\n      break;\n  }\n}\n\nfunction execProjectedViewsAction(view: ViewData, action: ViewAction) {\n  execEmbeddedViewsAction(view, action);\n  execComponentViewsAction(view, action);\n}\n\nfunction execQueriesAction(\n    view: ViewData, queryFlags: NodeFlags, staticDynamicQueryFlag: NodeFlags,\n    checkType: CheckType) {\n  if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {\n    return;\n  }\n  const nodeCount = view.def.nodes.length;\n  for (let i = 0; i < nodeCount; i++) {\n    const nodeDef = view.def.nodes[i];\n    if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {\n      Services.setCurrentNode(view, nodeDef.nodeIndex);\n      switch (checkType) {\n        case CheckType.CheckAndUpdate:\n          checkAndUpdateQuery(view, nodeDef);\n          break;\n        case CheckType.CheckNoChanges:\n          checkNoChangesQuery(view, nodeDef);\n          break;\n      }\n    }\n    if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {\n      // no child has a matching query\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n"],"sourceRoot":""}