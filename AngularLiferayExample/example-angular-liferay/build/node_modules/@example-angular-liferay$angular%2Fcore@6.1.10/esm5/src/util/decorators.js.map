{"version":3,"sources":["../../../../../../../../../../packages/core/src/util/decorators.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Type} from '../type';\n\n/**\n * An interface implemented by all Angular type decorators, which allows them to be used as ES7\n * decorators as well as\n * Angular DSL syntax.\n *\n * ES7 syntax:\n *\n * ```\n * @ng.Component({...})\n * class MyClass {...}\n * ```\n *\n */\nexport interface TypeDecorator {\n  /**\n   * Invoke as ES7 decorator.\n   */\n  <T extends Type<any>>(type: T): T;\n\n  // Make TypeDecorator assignable to built-in ParameterDecorator type.\n  // ParameterDecorator is declared in lib.d.ts as a `declare type`\n  // so we cannot declare this interface as a subtype.\n  // see https://github.com/angular/angular/issues/3379#issuecomment-126169417\n  (target: Object, propertyKey?: string|symbol, parameterIndex?: number): void;\n}\n\nexport const ANNOTATIONS = '__annotations__';\nexport const PARAMETERS = '__parameters__';\nexport const PROP_METADATA = '__prop__metadata__';\n\n/**\n * @suppress {globalThis}\n */\nexport function makeDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any,\n    chainFn?: (fn: Function) => void, typeFn?: (type: Type<any>, ...args: any[]) => void):\n    {new (...args: any[]): any; (...args: any[]): any; (...args: any[]): (cls: any) => any;} {\n  const metaCtor = makeMetadataCtor(props);\n\n  function DecoratorFactory(...args: any[]): (cls: any) => any {\n    if (this instanceof DecoratorFactory) {\n      metaCtor.call(this, ...args);\n      return this;\n    }\n\n    const annotationInstance = new (<any>DecoratorFactory)(...args);\n    const TypeDecorator: TypeDecorator = <TypeDecorator>function TypeDecorator(cls: Type<any>) {\n      typeFn && typeFn(cls, ...args);\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const annotations = cls.hasOwnProperty(ANNOTATIONS) ?\n          (cls as any)[ANNOTATIONS] :\n          Object.defineProperty(cls, ANNOTATIONS, {value: []})[ANNOTATIONS];\n      annotations.push(annotationInstance);\n      return cls;\n    };\n    if (chainFn) chainFn(TypeDecorator);\n    return TypeDecorator;\n  }\n\n  if (parentClass) {\n    DecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n\n  DecoratorFactory.prototype.ngMetadataName = name;\n  (<any>DecoratorFactory).annotationCls = DecoratorFactory;\n  return DecoratorFactory as any;\n}\n\nfunction makeMetadataCtor(props?: (...args: any[]) => any): any {\n  return function ctor(...args: any[]) {\n    if (props) {\n      const values = props(...args);\n      for (const propName in values) {\n        this[propName] = values[propName];\n      }\n    }\n  };\n}\n\nexport function makeParamDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any): any {\n  const metaCtor = makeMetadataCtor(props);\n  function ParamDecoratorFactory(...args: any[]): any {\n    if (this instanceof ParamDecoratorFactory) {\n      metaCtor.apply(this, args);\n      return this;\n    }\n    const annotationInstance = new (<any>ParamDecoratorFactory)(...args);\n\n    (<any>ParamDecorator).annotation = annotationInstance;\n    return ParamDecorator;\n\n    function ParamDecorator(cls: any, unusedKey: any, index: number): any {\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const parameters = cls.hasOwnProperty(PARAMETERS) ?\n          (cls as any)[PARAMETERS] :\n          Object.defineProperty(cls, PARAMETERS, {value: []})[PARAMETERS];\n\n      // there might be gaps if some in between parameters do not have annotations.\n      // we pad with nulls.\n      while (parameters.length <= index) {\n        parameters.push(null);\n      }\n\n      (parameters[index] = parameters[index] || []).push(annotationInstance);\n      return cls;\n    }\n  }\n  if (parentClass) {\n    ParamDecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n  ParamDecoratorFactory.prototype.ngMetadataName = name;\n  (<any>ParamDecoratorFactory).annotationCls = ParamDecoratorFactory;\n  return ParamDecoratorFactory;\n}\n\nexport function makePropDecorator(\n    name: string, props?: (...args: any[]) => any, parentClass?: any): any {\n  const metaCtor = makeMetadataCtor(props);\n\n  function PropDecoratorFactory(...args: any[]): any {\n    if (this instanceof PropDecoratorFactory) {\n      metaCtor.apply(this, args);\n      return this;\n    }\n\n    const decoratorInstance = new (<any>PropDecoratorFactory)(...args);\n\n    return function PropDecorator(target: any, name: string) {\n      const constructor = target.constructor;\n      // Use of Object.defineProperty is important since it creates non-enumerable property which\n      // prevents the property is copied during subclassing.\n      const meta = constructor.hasOwnProperty(PROP_METADATA) ?\n          (constructor as any)[PROP_METADATA] :\n          Object.defineProperty(constructor, PROP_METADATA, {value: {}})[PROP_METADATA];\n      meta[name] = meta.hasOwnProperty(name) && meta[name] || [];\n      meta[name].unshift(decoratorInstance);\n    };\n  }\n\n  if (parentClass) {\n    PropDecoratorFactory.prototype = Object.create(parentClass.prototype);\n  }\n\n  PropDecoratorFactory.prototype.ngMetadataName = name;\n  (<any>PropDecoratorFactory).annotationCls = PropDecoratorFactory;\n  return PropDecoratorFactory;\n}\n"],"sourceRoot":""}