{"version":3,"sources":["../../../../../../../../../packages/core/src/application_ref.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Observable, Observer, Subscription, merge} from 'rxjs';\nimport {share} from 'rxjs/operators';\n\nimport {ErrorHandler} from '../src/error_handler';\nimport {scheduleMicroTask, stringify} from '../src/util';\nimport {isPromise} from '../src/util/lang';\n\nimport {ApplicationInitStatus} from './application_init';\nimport {APP_BOOTSTRAP_LISTENER, PLATFORM_INITIALIZER} from './application_tokens';\nimport {Console} from './console';\nimport {Injectable, InjectionToken, Injector, StaticProvider} from './di';\nimport {CompilerFactory, CompilerOptions} from './linker/compiler';\nimport {ComponentFactory, ComponentRef} from './linker/component_factory';\nimport {ComponentFactoryBoundToModule, ComponentFactoryResolver} from './linker/component_factory_resolver';\nimport {InternalNgModuleRef, NgModuleFactory, NgModuleRef} from './linker/ng_module_factory';\nimport {InternalViewRef, ViewRef} from './linker/view_ref';\nimport {WtfScopeFn, wtfCreateScope, wtfLeave} from './profile/profile';\nimport {Testability, TestabilityRegistry} from './testability/testability';\nimport {Type} from './type';\nimport {NgZone, NoopNgZone} from './zone/ng_zone';\n\nlet _devMode: boolean = true;\nlet _runModeLocked: boolean = false;\nlet _platform: PlatformRef;\n\nexport const ALLOW_MULTIPLE_PLATFORMS = new InjectionToken<boolean>('AllowMultipleToken');\n\n/**\n * Disable Angular's development mode, which turns off assertions and other\n * checks within the framework.\n *\n * One important assertion this disables verifies that a change detection pass\n * does not result in additional changes to any bindings (also known as\n * unidirectional data flow).\n *\n *\n */\nexport function enableProdMode(): void {\n  if (_runModeLocked) {\n    throw new Error('Cannot enable prod mode after platform setup.');\n  }\n  _devMode = false;\n}\n\n/**\n * Returns whether Angular is in development mode. After called once,\n * the value is locked and won't change any more.\n *\n * By default, this is true, unless a user calls `enableProdMode` before calling this.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function isDevMode(): boolean {\n  _runModeLocked = true;\n  return _devMode;\n}\n\n/**\n * A token for third-party components that can register themselves with NgProbe.\n *\n * @experimental\n */\nexport class NgProbeToken {\n  constructor(public name: string, public token: any) {}\n}\n\n/**\n * Creates a platform.\n * Platforms have to be eagerly created via this function.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function createPlatform(injector: Injector): PlatformRef {\n  if (_platform && !_platform.destroyed &&\n      !_platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n    throw new Error(\n        'There can be only one platform. Destroy the previous one to create a new one.');\n  }\n  _platform = injector.get(PlatformRef);\n  const inits = injector.get(PLATFORM_INITIALIZER, null);\n  if (inits) inits.forEach((init: any) => init());\n  return _platform;\n}\n\n/**\n * Creates a factory for a platform\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function createPlatformFactory(\n    parentPlatformFactory: ((extraProviders?: StaticProvider[]) => PlatformRef) | null,\n    name: string, providers: StaticProvider[] = []): (extraProviders?: StaticProvider[]) =>\n    PlatformRef {\n  const desc = `Platform: ${name}`;\n  const marker = new InjectionToken(desc);\n  return (extraProviders: StaticProvider[] = []) => {\n    let platform = getPlatform();\n    if (!platform || platform.injector.get(ALLOW_MULTIPLE_PLATFORMS, false)) {\n      if (parentPlatformFactory) {\n        parentPlatformFactory(\n            providers.concat(extraProviders).concat({provide: marker, useValue: true}));\n      } else {\n        const injectedProviders: StaticProvider[] =\n            providers.concat(extraProviders).concat({provide: marker, useValue: true});\n        createPlatform(Injector.create({providers: injectedProviders, name: desc}));\n      }\n    }\n    return assertPlatform(marker);\n  };\n}\n\n/**\n * Checks that there currently is a platform which contains the given token as a provider.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function assertPlatform(requiredToken: any): PlatformRef {\n  const platform = getPlatform();\n\n  if (!platform) {\n    throw new Error('No platform exists!');\n  }\n\n  if (!platform.injector.get(requiredToken, null)) {\n    throw new Error(\n        'A platform with a different configuration has been created. Please destroy it first.');\n  }\n\n  return platform;\n}\n\n/**\n * Destroy the existing platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function destroyPlatform(): void {\n  if (_platform && !_platform.destroyed) {\n    _platform.destroy();\n  }\n}\n\n/**\n * Returns the current platform.\n *\n * @experimental APIs related to application bootstrap are currently under review.\n */\nexport function getPlatform(): PlatformRef|null {\n  return _platform && !_platform.destroyed ? _platform : null;\n}\n\n/**\n * Provides additional options to the bootstraping process.\n *\n *\n */\nexport interface BootstrapOptions {\n  /**\n   * Optionally specify which `NgZone` should be used.\n   *\n   * - Provide your own `NgZone` instance.\n   * - `zone.js` - Use default `NgZone` which requires `Zone.js`.\n   * - `noop` - Use `NoopNgZone` which does nothing.\n   */\n  ngZone?: NgZone|'zone.js'|'noop';\n}\n\n/**\n * The Angular platform is the entry point for Angular on a web page. Each page\n * has exactly one platform, and services (such as reflection) which are common\n * to every Angular application running on the page are bound in its scope.\n *\n * A page's platform is initialized implicitly when a platform is created via a platform factory\n * (e.g. {@link platformBrowser}), or explicitly by calling the {@link createPlatform} function.\n */\n@Injectable()\nexport class PlatformRef {\n  private _modules: NgModuleRef<any>[] = [];\n  private _destroyListeners: Function[] = [];\n  private _destroyed: boolean = false;\n\n  /** @internal */\n  constructor(private _injector: Injector) {}\n\n  /**\n   * Creates an instance of an `@NgModule` for the given platform\n   * for offline compilation.\n   *\n   * @usageNotes\n   * ### Simple Example\n   *\n   * ```typescript\n   * my_module.ts:\n   *\n   * @NgModule({\n   *   imports: [BrowserModule]\n   * })\n   * class MyModule {}\n   *\n   * main.ts:\n   * import {MyModuleNgFactory} from './my_module.ngfactory';\n   * import {platformBrowser} from '@angular/platform-browser';\n   *\n   * let moduleRef = platformBrowser().bootstrapModuleFactory(MyModuleNgFactory);\n   * ```\n   *\n   * @experimental APIs related to application bootstrap are currently under review.\n   */\n  bootstrapModuleFactory<M>(moduleFactory: NgModuleFactory<M>, options?: BootstrapOptions):\n      Promise<NgModuleRef<M>> {\n    // Note: We need to create the NgZone _before_ we instantiate the module,\n    // as instantiating the module creates some providers eagerly.\n    // So we create a mini parent injector that just contains the new NgZone and\n    // pass that as parent to the NgModuleFactory.\n    const ngZoneOption = options ? options.ngZone : undefined;\n    const ngZone = getNgZone(ngZoneOption);\n    const providers: StaticProvider[] = [{provide: NgZone, useValue: ngZone}];\n    // Attention: Don't use ApplicationRef.run here,\n    // as we want to be sure that all possible constructor calls are inside `ngZone.run`!\n    return ngZone.run(() => {\n      const ngZoneInjector = Injector.create(\n          {providers: providers, parent: this.injector, name: moduleFactory.moduleType.name});\n      const moduleRef = <InternalNgModuleRef<M>>moduleFactory.create(ngZoneInjector);\n      const exceptionHandler: ErrorHandler = moduleRef.injector.get(ErrorHandler, null);\n      if (!exceptionHandler) {\n        throw new Error('No ErrorHandler. Is platform module (BrowserModule) included?');\n      }\n      moduleRef.onDestroy(() => remove(this._modules, moduleRef));\n      ngZone !.runOutsideAngular(\n          () => ngZone !.onError.subscribe(\n              {next: (error: any) => { exceptionHandler.handleError(error); }}));\n      return _callAndReportToErrorHandler(exceptionHandler, ngZone !, () => {\n        const initStatus: ApplicationInitStatus = moduleRef.injector.get(ApplicationInitStatus);\n        initStatus.runInitializers();\n        return initStatus.donePromise.then(() => {\n          this._moduleDoBootstrap(moduleRef);\n          return moduleRef;\n        });\n      });\n    });\n  }\n\n  /**\n   * Creates an instance of an `@NgModule` for a given platform using the given runtime compiler.\n   *\n   * @usageNotes\n   * ### Simple Example\n   *\n   * ```typescript\n   * @NgModule({\n   *   imports: [BrowserModule]\n   * })\n   * class MyModule {}\n   *\n   * let moduleRef = platformBrowser().bootstrapModule(MyModule);\n   * ```\n   *\n   */\n  bootstrapModule<M>(\n      moduleType: Type<M>, compilerOptions: (CompilerOptions&BootstrapOptions)|\n      Array<CompilerOptions&BootstrapOptions> = []): Promise<NgModuleRef<M>> {\n    const compilerFactory: CompilerFactory = this.injector.get(CompilerFactory);\n    const options = optionsReducer({}, compilerOptions);\n    const compiler = compilerFactory.createCompiler([options]);\n\n    return compiler.compileModuleAsync(moduleType)\n        .then((moduleFactory) => this.bootstrapModuleFactory(moduleFactory, options));\n  }\n\n  private _moduleDoBootstrap(moduleRef: InternalNgModuleRef<any>): void {\n    const appRef = moduleRef.injector.get(ApplicationRef) as ApplicationRef;\n    if (moduleRef._bootstrapComponents.length > 0) {\n      moduleRef._bootstrapComponents.forEach(f => appRef.bootstrap(f));\n    } else if (moduleRef.instance.ngDoBootstrap) {\n      moduleRef.instance.ngDoBootstrap(appRef);\n    } else {\n      throw new Error(\n          `The module ${stringify(moduleRef.instance.constructor)} was bootstrapped, but it does not declare \"@NgModule.bootstrap\" components nor a \"ngDoBootstrap\" method. ` +\n          `Please define one of these.`);\n    }\n    this._modules.push(moduleRef);\n  }\n\n  /**\n   * Register a listener to be called when the platform is disposed.\n   */\n  onDestroy(callback: () => void): void { this._destroyListeners.push(callback); }\n\n  /**\n   * Retrieve the platform {@link Injector}, which is the parent injector for\n   * every Angular application on the page and provides singleton providers.\n   */\n  get injector(): Injector { return this._injector; }\n\n  /**\n   * Destroy the Angular platform and all Angular applications on the page.\n   */\n  destroy() {\n    if (this._destroyed) {\n      throw new Error('The platform has already been destroyed!');\n    }\n    this._modules.slice().forEach(module => module.destroy());\n    this._destroyListeners.forEach(listener => listener());\n    this._destroyed = true;\n  }\n\n  get destroyed() { return this._destroyed; }\n}\n\nfunction getNgZone(ngZoneOption?: NgZone | 'zone.js' | 'noop'): NgZone {\n  let ngZone: NgZone;\n\n  if (ngZoneOption === 'noop') {\n    ngZone = new NoopNgZone();\n  } else {\n    ngZone = (ngZoneOption === 'zone.js' ? undefined : ngZoneOption) ||\n        new NgZone({enableLongStackTrace: isDevMode()});\n  }\n  return ngZone;\n}\n\nfunction _callAndReportToErrorHandler(\n    errorHandler: ErrorHandler, ngZone: NgZone, callback: () => any): any {\n  try {\n    const result = callback();\n    if (isPromise(result)) {\n      return result.catch((e: any) => {\n        ngZone.runOutsideAngular(() => errorHandler.handleError(e));\n        // rethrow as the exception handler might not do it\n        throw e;\n      });\n    }\n\n    return result;\n  } catch (e) {\n    ngZone.runOutsideAngular(() => errorHandler.handleError(e));\n    // rethrow as the exception handler might not do it\n    throw e;\n  }\n}\n\nfunction optionsReducer<T extends Object>(dst: any, objs: T | T[]): T {\n  if (Array.isArray(objs)) {\n    dst = objs.reduce(optionsReducer, dst);\n  } else {\n    dst = {...dst, ...(objs as any)};\n  }\n  return dst;\n}\n\n/**\n * A reference to an Angular application running on a page.\n */\n@Injectable()\nexport class ApplicationRef {\n  /** @internal */\n  static _tickScope: WtfScopeFn = wtfCreateScope('ApplicationRef#tick()');\n  private _bootstrapListeners: ((compRef: ComponentRef<any>) => void)[] = [];\n  private _views: InternalViewRef[] = [];\n  private _runningTick: boolean = false;\n  private _enforceNoNewChanges: boolean = false;\n  private _stable = true;\n\n  /**\n   * Get a list of component types registered to this application.\n   * This list is populated even before the component is created.\n   */\n  public readonly componentTypes: Type<any>[] = [];\n\n  /**\n   * Get a list of components registered to this application.\n   */\n  public readonly components: ComponentRef<any>[] = [];\n\n  /**\n   * Returns an Observable that indicates when the application is stable or unstable.\n   */\n  // TODO(issue/24571): remove '!'.\n  public readonly isStable !: Observable<boolean>;\n\n  /** @internal */\n  constructor(\n      private _zone: NgZone, private _console: Console, private _injector: Injector,\n      private _exceptionHandler: ErrorHandler,\n      private _componentFactoryResolver: ComponentFactoryResolver,\n      private _initStatus: ApplicationInitStatus) {\n    this._enforceNoNewChanges = isDevMode();\n\n    this._zone.onMicrotaskEmpty.subscribe(\n        {next: () => { this._zone.run(() => { this.tick(); }); }});\n\n    const isCurrentlyStable = new Observable<boolean>((observer: Observer<boolean>) => {\n      this._stable = this._zone.isStable && !this._zone.hasPendingMacrotasks &&\n          !this._zone.hasPendingMicrotasks;\n      this._zone.runOutsideAngular(() => {\n        observer.next(this._stable);\n        observer.complete();\n      });\n    });\n\n    const isStable = new Observable<boolean>((observer: Observer<boolean>) => {\n      // Create the subscription to onStable outside the Angular Zone so that\n      // the callback is run outside the Angular Zone.\n      let stableSub: Subscription;\n      this._zone.runOutsideAngular(() => {\n        stableSub = this._zone.onStable.subscribe(() => {\n          NgZone.assertNotInAngularZone();\n\n          // Check whether there are no pending macro/micro tasks in the next tick\n          // to allow for NgZone to update the state.\n          scheduleMicroTask(() => {\n            if (!this._stable && !this._zone.hasPendingMacrotasks &&\n                !this._zone.hasPendingMicrotasks) {\n              this._stable = true;\n              observer.next(true);\n            }\n          });\n        });\n      });\n\n      const unstableSub: Subscription = this._zone.onUnstable.subscribe(() => {\n        NgZone.assertInAngularZone();\n        if (this._stable) {\n          this._stable = false;\n          this._zone.runOutsideAngular(() => { observer.next(false); });\n        }\n      });\n\n      return () => {\n        stableSub.unsubscribe();\n        unstableSub.unsubscribe();\n      };\n    });\n\n    (this as{isStable: Observable<boolean>}).isStable =\n        merge(isCurrentlyStable, isStable.pipe(share()));\n  }\n\n  /**\n   * Bootstrap a new component at the root level of the application.\n   *\n   * @usageNotes\n   * ### Bootstrap process\n   *\n   * When bootstrapping a new root component into an application, Angular mounts the\n   * specified application component onto DOM elements identified by the componentType's\n   * selector and kicks off automatic change detection to finish initializing the component.\n   *\n   * Optionally, a component can be mounted onto a DOM element that does not match the\n   * componentType's selector.\n   *\n   * ### Example\n   * {@example core/ts/platform/platform.ts region='longform'}\n   */\n  bootstrap<C>(componentOrFactory: ComponentFactory<C>|Type<C>, rootSelectorOrNode?: string|any):\n      ComponentRef<C> {\n    if (!this._initStatus.done) {\n      throw new Error(\n          'Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.');\n    }\n    let componentFactory: ComponentFactory<C>;\n    if (componentOrFactory instanceof ComponentFactory) {\n      componentFactory = componentOrFactory;\n    } else {\n      componentFactory =\n          this._componentFactoryResolver.resolveComponentFactory(componentOrFactory) !;\n    }\n    this.componentTypes.push(componentFactory.componentType);\n\n    // Create a factory associated with the current module if it's not bound to some other\n    const ngModule = componentFactory instanceof ComponentFactoryBoundToModule ?\n        null :\n        this._injector.get(NgModuleRef);\n    const selectorOrNode = rootSelectorOrNode || componentFactory.selector;\n    const compRef = componentFactory.create(Injector.NULL, [], selectorOrNode, ngModule);\n\n    compRef.onDestroy(() => { this._unloadComponent(compRef); });\n    const testability = compRef.injector.get(Testability, null);\n    if (testability) {\n      compRef.injector.get(TestabilityRegistry)\n          .registerApplication(compRef.location.nativeElement, testability);\n    }\n\n    this._loadComponent(compRef);\n    if (isDevMode()) {\n      this._console.log(\n          `Angular is running in the development mode. Call enableProdMode() to enable the production mode.`);\n    }\n    return compRef;\n  }\n\n  /**\n   * Invoke this method to explicitly process change detection and its side-effects.\n   *\n   * In development mode, `tick()` also performs a second change detection cycle to ensure that no\n   * further changes are detected. If additional changes are picked up during this second cycle,\n   * bindings in the app have side-effects that cannot be resolved in a single change detection\n   * pass.\n   * In this case, Angular throws an error, since an Angular application can only have one change\n   * detection pass during which all change detection must complete.\n   */\n  tick(): void {\n    if (this._runningTick) {\n      throw new Error('ApplicationRef.tick is called recursively');\n    }\n\n    const scope = ApplicationRef._tickScope();\n    try {\n      this._runningTick = true;\n      this._views.forEach((view) => view.detectChanges());\n      if (this._enforceNoNewChanges) {\n        this._views.forEach((view) => view.checkNoChanges());\n      }\n    } catch (e) {\n      // Attention: Don't rethrow as it could cancel subscriptions to Observables!\n      this._zone.runOutsideAngular(() => this._exceptionHandler.handleError(e));\n    } finally {\n      this._runningTick = false;\n      wtfLeave(scope);\n    }\n  }\n\n  /**\n   * Attaches a view so that it will be dirty checked.\n   * The view will be automatically detached when it is destroyed.\n   * This will throw if the view is already attached to a ViewContainer.\n   */\n  attachView(viewRef: ViewRef): void {\n    const view = (viewRef as InternalViewRef);\n    this._views.push(view);\n    view.attachToAppRef(this);\n  }\n\n  /**\n   * Detaches a view from dirty checking again.\n   */\n  detachView(viewRef: ViewRef): void {\n    const view = (viewRef as InternalViewRef);\n    remove(this._views, view);\n    view.detachFromAppRef();\n  }\n\n  private _loadComponent(componentRef: ComponentRef<any>): void {\n    this.attachView(componentRef.hostView);\n    this.tick();\n    this.components.push(componentRef);\n    // Get the listeners lazily to prevent DI cycles.\n    const listeners =\n        this._injector.get(APP_BOOTSTRAP_LISTENER, []).concat(this._bootstrapListeners);\n    listeners.forEach((listener) => listener(componentRef));\n  }\n\n  private _unloadComponent(componentRef: ComponentRef<any>): void {\n    this.detachView(componentRef.hostView);\n    remove(this.components, componentRef);\n  }\n\n  /** @internal */\n  ngOnDestroy() {\n    // TODO(alxhub): Dispose of the NgZone.\n    this._views.slice().forEach((view) => view.destroy());\n  }\n\n  /**\n   * Returns the number of attached views.\n   */\n  get viewCount() { return this._views.length; }\n}\n\nfunction remove<T>(list: T[], el: T): void {\n  const index = list.indexOf(el);\n  if (index > -1) {\n    list.splice(index, 1);\n  }\n}\n"],"sourceRoot":""}