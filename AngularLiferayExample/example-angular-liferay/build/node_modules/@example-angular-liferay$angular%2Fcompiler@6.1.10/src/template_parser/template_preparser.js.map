{"version":3,"sources":["../../../../../../../packages/compiler/src/template_parser/template_preparser.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport * as html from '../ml_parser/ast';\nimport {isNgContent} from '../ml_parser/tags';\n\nconst NG_CONTENT_SELECT_ATTR = 'select';\nconst LINK_ELEMENT = 'link';\nconst LINK_STYLE_REL_ATTR = 'rel';\nconst LINK_STYLE_HREF_ATTR = 'href';\nconst LINK_STYLE_REL_VALUE = 'stylesheet';\nconst STYLE_ELEMENT = 'style';\nconst SCRIPT_ELEMENT = 'script';\nconst NG_NON_BINDABLE_ATTR = 'ngNonBindable';\nconst NG_PROJECT_AS = 'ngProjectAs';\n\nexport function preparseElement(ast: html.Element): PreparsedElement {\n  let selectAttr: string = null !;\n  let hrefAttr: string = null !;\n  let relAttr: string = null !;\n  let nonBindable = false;\n  let projectAs = '';\n  ast.attrs.forEach(attr => {\n    const lcAttrName = attr.name.toLowerCase();\n    if (lcAttrName == NG_CONTENT_SELECT_ATTR) {\n      selectAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_HREF_ATTR) {\n      hrefAttr = attr.value;\n    } else if (lcAttrName == LINK_STYLE_REL_ATTR) {\n      relAttr = attr.value;\n    } else if (attr.name == NG_NON_BINDABLE_ATTR) {\n      nonBindable = true;\n    } else if (attr.name == NG_PROJECT_AS) {\n      if (attr.value.length > 0) {\n        projectAs = attr.value;\n      }\n    }\n  });\n  selectAttr = normalizeNgContentSelect(selectAttr);\n  const nodeName = ast.name.toLowerCase();\n  let type = PreparsedElementType.OTHER;\n  if (isNgContent(nodeName)) {\n    type = PreparsedElementType.NG_CONTENT;\n  } else if (nodeName == STYLE_ELEMENT) {\n    type = PreparsedElementType.STYLE;\n  } else if (nodeName == SCRIPT_ELEMENT) {\n    type = PreparsedElementType.SCRIPT;\n  } else if (nodeName == LINK_ELEMENT && relAttr == LINK_STYLE_REL_VALUE) {\n    type = PreparsedElementType.STYLESHEET;\n  }\n  return new PreparsedElement(type, selectAttr, hrefAttr, nonBindable, projectAs);\n}\n\nexport enum PreparsedElementType {\n  NG_CONTENT,\n  STYLE,\n  STYLESHEET,\n  SCRIPT,\n  OTHER\n}\n\nexport class PreparsedElement {\n  constructor(\n      public type: PreparsedElementType, public selectAttr: string, public hrefAttr: string,\n      public nonBindable: boolean, public projectAs: string) {}\n}\n\n\nfunction normalizeNgContentSelect(selectAttr: string): string {\n  if (selectAttr === null || selectAttr.length === 0) {\n    return '*';\n  }\n  return selectAttr;\n}\n"],"sourceRoot":""}