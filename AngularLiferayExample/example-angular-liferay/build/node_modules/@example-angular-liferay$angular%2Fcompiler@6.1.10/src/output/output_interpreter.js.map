{"version":3,"sources":["../../../../../../../packages/compiler/src/output/output_interpreter.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\n\nimport {CompileReflector} from '../compile_reflector';\n\nimport * as o from './output_ast';\nimport {debugOutputAstAsTypeScript} from './ts_emitter';\n\nexport function interpretStatements(\n    statements: o.Statement[], reflector: CompileReflector): {[key: string]: any} {\n  const ctx = new _ExecutionContext(null, null, null, new Map<string, any>());\n  const visitor = new StatementInterpreter(reflector);\n  visitor.visitAllStatements(statements, ctx);\n  const result: {[key: string]: any} = {};\n  ctx.exports.forEach((exportName) => { result[exportName] = ctx.vars.get(exportName); });\n  return result;\n}\n\nfunction _executeFunctionStatements(\n    varNames: string[], varValues: any[], statements: o.Statement[], ctx: _ExecutionContext,\n    visitor: StatementInterpreter): any {\n  const childCtx = ctx.createChildWihtLocalVars();\n  for (let i = 0; i < varNames.length; i++) {\n    childCtx.vars.set(varNames[i], varValues[i]);\n  }\n  const result = visitor.visitAllStatements(statements, childCtx);\n  return result ? result.value : null;\n}\n\nclass _ExecutionContext {\n  exports: string[] = [];\n\n  constructor(\n      public parent: _ExecutionContext|null, public instance: any, public className: string|null,\n      public vars: Map<string, any>) {}\n\n  createChildWihtLocalVars(): _ExecutionContext {\n    return new _ExecutionContext(this, this.instance, this.className, new Map<string, any>());\n  }\n}\n\nclass ReturnValue {\n  constructor(public value: any) {}\n}\n\nfunction createDynamicClass(\n    _classStmt: o.ClassStmt, _ctx: _ExecutionContext, _visitor: StatementInterpreter): Function {\n  const propertyDescriptors: {[key: string]: any} = {};\n\n  _classStmt.getters.forEach((getter: o.ClassGetter) => {\n    // Note: use `function` instead of arrow function to capture `this`\n    propertyDescriptors[getter.name] = {\n      configurable: false,\n      get: function() {\n        const instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);\n        return _executeFunctionStatements([], [], getter.body, instanceCtx, _visitor);\n      }\n    };\n  });\n  _classStmt.methods.forEach(function(method: o.ClassMethod) {\n    const paramNames = method.params.map(param => param.name);\n    // Note: use `function` instead of arrow function to capture `this`\n    propertyDescriptors[method.name !] = {\n      writable: false,\n      configurable: false,\n      value: function(...args: any[]) {\n        const instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);\n        return _executeFunctionStatements(paramNames, args, method.body, instanceCtx, _visitor);\n      }\n    };\n  });\n\n  const ctorParamNames = _classStmt.constructorMethod.params.map(param => param.name);\n  // Note: use `function` instead of arrow function to capture `this`\n  const ctor = function(...args: any[]) {\n    const instanceCtx = new _ExecutionContext(_ctx, this, _classStmt.name, _ctx.vars);\n    _classStmt.fields.forEach((field) => { this[field.name] = undefined; });\n    _executeFunctionStatements(\n        ctorParamNames, args, _classStmt.constructorMethod.body, instanceCtx, _visitor);\n  };\n  const superClass = _classStmt.parent ? _classStmt.parent.visitExpression(_visitor, _ctx) : Object;\n  ctor.prototype = Object.create(superClass.prototype, propertyDescriptors);\n  return ctor;\n}\n\nclass StatementInterpreter implements o.StatementVisitor, o.ExpressionVisitor {\n  constructor(private reflector: CompileReflector) {}\n  debugAst(ast: o.Expression|o.Statement|o.Type): string { return debugOutputAstAsTypeScript(ast); }\n\n  visitDeclareVarStmt(stmt: o.DeclareVarStmt, ctx: _ExecutionContext): any {\n    const initialValue = stmt.value ? stmt.value.visitExpression(this, ctx) : undefined;\n    ctx.vars.set(stmt.name, initialValue);\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.exports.push(stmt.name);\n    }\n    return null;\n  }\n  visitWriteVarExpr(expr: o.WriteVarExpr, ctx: _ExecutionContext): any {\n    const value = expr.value.visitExpression(this, ctx);\n    let currCtx = ctx;\n    while (currCtx != null) {\n      if (currCtx.vars.has(expr.name)) {\n        currCtx.vars.set(expr.name, value);\n        return value;\n      }\n      currCtx = currCtx.parent !;\n    }\n    throw new Error(`Not declared variable ${expr.name}`);\n  }\n  visitWrappedNodeExpr(ast: o.WrappedNodeExpr<any>, ctx: _ExecutionContext): never {\n    throw new Error('Cannot interpret a WrappedNodeExpr.');\n  }\n  visitTypeofExpr(ast: o.TypeofExpr, ctx: _ExecutionContext): never {\n    throw new Error('Cannot interpret a TypeofExpr');\n  }\n  visitReadVarExpr(ast: o.ReadVarExpr, ctx: _ExecutionContext): any {\n    let varName = ast.name !;\n    if (ast.builtin != null) {\n      switch (ast.builtin) {\n        case o.BuiltinVar.Super:\n          return ctx.instance.__proto__;\n        case o.BuiltinVar.This:\n          return ctx.instance;\n        case o.BuiltinVar.CatchError:\n          varName = CATCH_ERROR_VAR;\n          break;\n        case o.BuiltinVar.CatchStack:\n          varName = CATCH_STACK_VAR;\n          break;\n        default:\n          throw new Error(`Unknown builtin variable ${ast.builtin}`);\n      }\n    }\n    let currCtx = ctx;\n    while (currCtx != null) {\n      if (currCtx.vars.has(varName)) {\n        return currCtx.vars.get(varName);\n      }\n      currCtx = currCtx.parent !;\n    }\n    throw new Error(`Not declared variable ${varName}`);\n  }\n  visitWriteKeyExpr(expr: o.WriteKeyExpr, ctx: _ExecutionContext): any {\n    const receiver = expr.receiver.visitExpression(this, ctx);\n    const index = expr.index.visitExpression(this, ctx);\n    const value = expr.value.visitExpression(this, ctx);\n    receiver[index] = value;\n    return value;\n  }\n  visitWritePropExpr(expr: o.WritePropExpr, ctx: _ExecutionContext): any {\n    const receiver = expr.receiver.visitExpression(this, ctx);\n    const value = expr.value.visitExpression(this, ctx);\n    receiver[expr.name] = value;\n    return value;\n  }\n\n  visitInvokeMethodExpr(expr: o.InvokeMethodExpr, ctx: _ExecutionContext): any {\n    const receiver = expr.receiver.visitExpression(this, ctx);\n    const args = this.visitAllExpressions(expr.args, ctx);\n    let result: any;\n    if (expr.builtin != null) {\n      switch (expr.builtin) {\n        case o.BuiltinMethod.ConcatArray:\n          result = receiver.concat(...args);\n          break;\n        case o.BuiltinMethod.SubscribeObservable:\n          result = receiver.subscribe({next: args[0]});\n          break;\n        case o.BuiltinMethod.Bind:\n          result = receiver.bind(...args);\n          break;\n        default:\n          throw new Error(`Unknown builtin method ${expr.builtin}`);\n      }\n    } else {\n      result = receiver[expr.name !].apply(receiver, args);\n    }\n    return result;\n  }\n  visitInvokeFunctionExpr(stmt: o.InvokeFunctionExpr, ctx: _ExecutionContext): any {\n    const args = this.visitAllExpressions(stmt.args, ctx);\n    const fnExpr = stmt.fn;\n    if (fnExpr instanceof o.ReadVarExpr && fnExpr.builtin === o.BuiltinVar.Super) {\n      ctx.instance.constructor.prototype.constructor.apply(ctx.instance, args);\n      return null;\n    } else {\n      const fn = stmt.fn.visitExpression(this, ctx);\n      return fn.apply(null, args);\n    }\n  }\n  visitReturnStmt(stmt: o.ReturnStatement, ctx: _ExecutionContext): any {\n    return new ReturnValue(stmt.value.visitExpression(this, ctx));\n  }\n  visitDeclareClassStmt(stmt: o.ClassStmt, ctx: _ExecutionContext): any {\n    const clazz = createDynamicClass(stmt, ctx, this);\n    ctx.vars.set(stmt.name, clazz);\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.exports.push(stmt.name);\n    }\n    return null;\n  }\n  visitExpressionStmt(stmt: o.ExpressionStatement, ctx: _ExecutionContext): any {\n    return stmt.expr.visitExpression(this, ctx);\n  }\n  visitIfStmt(stmt: o.IfStmt, ctx: _ExecutionContext): any {\n    const condition = stmt.condition.visitExpression(this, ctx);\n    if (condition) {\n      return this.visitAllStatements(stmt.trueCase, ctx);\n    } else if (stmt.falseCase != null) {\n      return this.visitAllStatements(stmt.falseCase, ctx);\n    }\n    return null;\n  }\n  visitTryCatchStmt(stmt: o.TryCatchStmt, ctx: _ExecutionContext): any {\n    try {\n      return this.visitAllStatements(stmt.bodyStmts, ctx);\n    } catch (e) {\n      const childCtx = ctx.createChildWihtLocalVars();\n      childCtx.vars.set(CATCH_ERROR_VAR, e);\n      childCtx.vars.set(CATCH_STACK_VAR, e.stack);\n      return this.visitAllStatements(stmt.catchStmts, childCtx);\n    }\n  }\n  visitThrowStmt(stmt: o.ThrowStmt, ctx: _ExecutionContext): any {\n    throw stmt.error.visitExpression(this, ctx);\n  }\n  visitCommentStmt(stmt: o.CommentStmt, context?: any): any { return null; }\n  visitJSDocCommentStmt(stmt: o.JSDocCommentStmt, context?: any): any { return null; }\n  visitInstantiateExpr(ast: o.InstantiateExpr, ctx: _ExecutionContext): any {\n    const args = this.visitAllExpressions(ast.args, ctx);\n    const clazz = ast.classExpr.visitExpression(this, ctx);\n    return new clazz(...args);\n  }\n  visitLiteralExpr(ast: o.LiteralExpr, ctx: _ExecutionContext): any { return ast.value; }\n  visitExternalExpr(ast: o.ExternalExpr, ctx: _ExecutionContext): any {\n    return this.reflector.resolveExternalReference(ast.value);\n  }\n  visitConditionalExpr(ast: o.ConditionalExpr, ctx: _ExecutionContext): any {\n    if (ast.condition.visitExpression(this, ctx)) {\n      return ast.trueCase.visitExpression(this, ctx);\n    } else if (ast.falseCase != null) {\n      return ast.falseCase.visitExpression(this, ctx);\n    }\n    return null;\n  }\n  visitNotExpr(ast: o.NotExpr, ctx: _ExecutionContext): any {\n    return !ast.condition.visitExpression(this, ctx);\n  }\n  visitAssertNotNullExpr(ast: o.AssertNotNull, ctx: _ExecutionContext): any {\n    return ast.condition.visitExpression(this, ctx);\n  }\n  visitCastExpr(ast: o.CastExpr, ctx: _ExecutionContext): any {\n    return ast.value.visitExpression(this, ctx);\n  }\n  visitFunctionExpr(ast: o.FunctionExpr, ctx: _ExecutionContext): any {\n    const paramNames = ast.params.map((param) => param.name);\n    return _declareFn(paramNames, ast.statements, ctx, this);\n  }\n  visitDeclareFunctionStmt(stmt: o.DeclareFunctionStmt, ctx: _ExecutionContext): any {\n    const paramNames = stmt.params.map((param) => param.name);\n    ctx.vars.set(stmt.name, _declareFn(paramNames, stmt.statements, ctx, this));\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.exports.push(stmt.name);\n    }\n    return null;\n  }\n  visitBinaryOperatorExpr(ast: o.BinaryOperatorExpr, ctx: _ExecutionContext): any {\n    const lhs = () => ast.lhs.visitExpression(this, ctx);\n    const rhs = () => ast.rhs.visitExpression(this, ctx);\n\n    switch (ast.operator) {\n      case o.BinaryOperator.Equals:\n        return lhs() == rhs();\n      case o.BinaryOperator.Identical:\n        return lhs() === rhs();\n      case o.BinaryOperator.NotEquals:\n        return lhs() != rhs();\n      case o.BinaryOperator.NotIdentical:\n        return lhs() !== rhs();\n      case o.BinaryOperator.And:\n        return lhs() && rhs();\n      case o.BinaryOperator.Or:\n        return lhs() || rhs();\n      case o.BinaryOperator.Plus:\n        return lhs() + rhs();\n      case o.BinaryOperator.Minus:\n        return lhs() - rhs();\n      case o.BinaryOperator.Divide:\n        return lhs() / rhs();\n      case o.BinaryOperator.Multiply:\n        return lhs() * rhs();\n      case o.BinaryOperator.Modulo:\n        return lhs() % rhs();\n      case o.BinaryOperator.Lower:\n        return lhs() < rhs();\n      case o.BinaryOperator.LowerEquals:\n        return lhs() <= rhs();\n      case o.BinaryOperator.Bigger:\n        return lhs() > rhs();\n      case o.BinaryOperator.BiggerEquals:\n        return lhs() >= rhs();\n      default:\n        throw new Error(`Unknown operator ${ast.operator}`);\n    }\n  }\n  visitReadPropExpr(ast: o.ReadPropExpr, ctx: _ExecutionContext): any {\n    let result: any;\n    const receiver = ast.receiver.visitExpression(this, ctx);\n    result = receiver[ast.name];\n    return result;\n  }\n  visitReadKeyExpr(ast: o.ReadKeyExpr, ctx: _ExecutionContext): any {\n    const receiver = ast.receiver.visitExpression(this, ctx);\n    const prop = ast.index.visitExpression(this, ctx);\n    return receiver[prop];\n  }\n  visitLiteralArrayExpr(ast: o.LiteralArrayExpr, ctx: _ExecutionContext): any {\n    return this.visitAllExpressions(ast.entries, ctx);\n  }\n  visitLiteralMapExpr(ast: o.LiteralMapExpr, ctx: _ExecutionContext): any {\n    const result: {[k: string]: any} = {};\n    ast.entries.forEach(entry => result[entry.key] = entry.value.visitExpression(this, ctx));\n    return result;\n  }\n  visitCommaExpr(ast: o.CommaExpr, context: any): any {\n    const values = this.visitAllExpressions(ast.parts, context);\n    return values[values.length - 1];\n  }\n  visitAllExpressions(expressions: o.Expression[], ctx: _ExecutionContext): any {\n    return expressions.map((expr) => expr.visitExpression(this, ctx));\n  }\n\n  visitAllStatements(statements: o.Statement[], ctx: _ExecutionContext): ReturnValue|null {\n    for (let i = 0; i < statements.length; i++) {\n      const stmt = statements[i];\n      const val = stmt.visitStatement(this, ctx);\n      if (val instanceof ReturnValue) {\n        return val;\n      }\n    }\n    return null;\n  }\n}\n\nfunction _declareFn(\n    varNames: string[], statements: o.Statement[], ctx: _ExecutionContext,\n    visitor: StatementInterpreter): Function {\n  return (...args: any[]) => _executeFunctionStatements(varNames, args, statements, ctx, visitor);\n}\n\nconst CATCH_ERROR_VAR = 'error';\nconst CATCH_STACK_VAR = 'stack';\n"],"sourceRoot":""}