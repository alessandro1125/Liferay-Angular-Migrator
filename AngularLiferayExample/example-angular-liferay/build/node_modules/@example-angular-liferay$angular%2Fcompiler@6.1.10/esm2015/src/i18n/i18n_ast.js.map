{"version":3,"sources":["../../../../../../../packages/compiler/src/i18n/i18n_ast.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ParseSourceSpan} from '../parse_util';\n\nexport class Message {\n  sources: MessageSpan[];\n\n  /**\n   * @param nodes message AST\n   * @param placeholders maps placeholder names to static content\n   * @param placeholderToMessage maps placeholder names to messages (used for nested ICU messages)\n   * @param meaning\n   * @param description\n   * @param id\n   */\n  constructor(\n      public nodes: Node[], public placeholders: {[phName: string]: string},\n      public placeholderToMessage: {[phName: string]: Message}, public meaning: string,\n      public description: string, public id: string) {\n    if (nodes.length) {\n      this.sources = [{\n        filePath: nodes[0].sourceSpan.start.file.url,\n        startLine: nodes[0].sourceSpan.start.line + 1,\n        startCol: nodes[0].sourceSpan.start.col + 1,\n        endLine: nodes[nodes.length - 1].sourceSpan.end.line + 1,\n        endCol: nodes[0].sourceSpan.start.col + 1\n      }];\n    } else {\n      this.sources = [];\n    }\n  }\n}\n\n// line and columns indexes are 1 based\nexport interface MessageSpan {\n  filePath: string;\n  startLine: number;\n  startCol: number;\n  endLine: number;\n  endCol: number;\n}\n\nexport interface Node {\n  sourceSpan: ParseSourceSpan;\n  visit(visitor: Visitor, context?: any): any;\n}\n\nexport class Text implements Node {\n  constructor(public value: string, public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitText(this, context); }\n}\n\n// TODO(vicb): do we really need this node (vs an array) ?\nexport class Container implements Node {\n  constructor(public children: Node[], public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitContainer(this, context); }\n}\n\nexport class Icu implements Node {\n  // TODO(issue/24571): remove '!'.\n  public expressionPlaceholder !: string;\n  constructor(\n      public expression: string, public type: string, public cases: {[k: string]: Node},\n      public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitIcu(this, context); }\n}\n\nexport class TagPlaceholder implements Node {\n  constructor(\n      public tag: string, public attrs: {[k: string]: string}, public startName: string,\n      public closeName: string, public children: Node[], public isVoid: boolean,\n      public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitTagPlaceholder(this, context); }\n}\n\nexport class Placeholder implements Node {\n  constructor(public value: string, public name: string, public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitPlaceholder(this, context); }\n}\n\nexport class IcuPlaceholder implements Node {\n  constructor(public value: Icu, public name: string, public sourceSpan: ParseSourceSpan) {}\n\n  visit(visitor: Visitor, context?: any): any { return visitor.visitIcuPlaceholder(this, context); }\n}\n\nexport interface Visitor {\n  visitText(text: Text, context?: any): any;\n  visitContainer(container: Container, context?: any): any;\n  visitIcu(icu: Icu, context?: any): any;\n  visitTagPlaceholder(ph: TagPlaceholder, context?: any): any;\n  visitPlaceholder(ph: Placeholder, context?: any): any;\n  visitIcuPlaceholder(ph: IcuPlaceholder, context?: any): any;\n}\n\n// Clone the AST\nexport class CloneVisitor implements Visitor {\n  visitText(text: Text, context?: any): Text { return new Text(text.value, text.sourceSpan); }\n\n  visitContainer(container: Container, context?: any): Container {\n    const children = container.children.map(n => n.visit(this, context));\n    return new Container(children, container.sourceSpan);\n  }\n\n  visitIcu(icu: Icu, context?: any): Icu {\n    const cases: {[k: string]: Node} = {};\n    Object.keys(icu.cases).forEach(key => cases[key] = icu.cases[key].visit(this, context));\n    const msg = new Icu(icu.expression, icu.type, cases, icu.sourceSpan);\n    msg.expressionPlaceholder = icu.expressionPlaceholder;\n    return msg;\n  }\n\n  visitTagPlaceholder(ph: TagPlaceholder, context?: any): TagPlaceholder {\n    const children = ph.children.map(n => n.visit(this, context));\n    return new TagPlaceholder(\n        ph.tag, ph.attrs, ph.startName, ph.closeName, children, ph.isVoid, ph.sourceSpan);\n  }\n\n  visitPlaceholder(ph: Placeholder, context?: any): Placeholder {\n    return new Placeholder(ph.value, ph.name, ph.sourceSpan);\n  }\n\n  visitIcuPlaceholder(ph: IcuPlaceholder, context?: any): IcuPlaceholder {\n    return new IcuPlaceholder(ph.value, ph.name, ph.sourceSpan);\n  }\n}\n\n// Visit all the nodes recursively\nexport class RecurseVisitor implements Visitor {\n  visitText(text: Text, context?: any): any {}\n\n  visitContainer(container: Container, context?: any): any {\n    container.children.forEach(child => child.visit(this));\n  }\n\n  visitIcu(icu: Icu, context?: any): any {\n    Object.keys(icu.cases).forEach(k => { icu.cases[k].visit(this); });\n  }\n\n  visitTagPlaceholder(ph: TagPlaceholder, context?: any): any {\n    ph.children.forEach(child => child.visit(this));\n  }\n\n  visitPlaceholder(ph: Placeholder, context?: any): any {}\n\n  visitIcuPlaceholder(ph: IcuPlaceholder, context?: any): any {}\n}\n"],"sourceRoot":""}