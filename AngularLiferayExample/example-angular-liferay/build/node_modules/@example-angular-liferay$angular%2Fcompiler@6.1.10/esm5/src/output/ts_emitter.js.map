{"version":3,"sources":["../../../../../../../../../../packages/compiler/src/output/ts_emitter.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nimport {StaticSymbol} from '../aot/static_symbol';\nimport {CompileIdentifierMetadata} from '../compile_metadata';\n\nimport {AbstractEmitterVisitor, CATCH_ERROR_VAR, CATCH_STACK_VAR, EmitterVisitorContext, OutputEmitter} from './abstract_emitter';\nimport * as o from './output_ast';\n\nconst _debugFilePath = '/debug/lib';\n\nexport function debugOutputAstAsTypeScript(ast: o.Statement | o.Expression | o.Type | any[]):\n    string {\n  const converter = new _TsEmitterVisitor();\n  const ctx = EmitterVisitorContext.createRoot();\n  const asts: any[] = Array.isArray(ast) ? ast : [ast];\n\n  asts.forEach((ast) => {\n    if (ast instanceof o.Statement) {\n      ast.visitStatement(converter, ctx);\n    } else if (ast instanceof o.Expression) {\n      ast.visitExpression(converter, ctx);\n    } else if (ast instanceof o.Type) {\n      ast.visitType(converter, ctx);\n    } else {\n      throw new Error(`Don't know how to print debug info for ${ast}`);\n    }\n  });\n  return ctx.toSource();\n}\n\nexport type ReferenceFilter = (reference: o.ExternalReference) => boolean;\n\nexport class TypeScriptEmitter implements OutputEmitter {\n  emitStatementsAndContext(\n      genFilePath: string, stmts: o.Statement[], preamble: string = '',\n      emitSourceMaps: boolean = true, referenceFilter?: ReferenceFilter,\n      importFilter?: ReferenceFilter): {sourceText: string, context: EmitterVisitorContext} {\n    const converter = new _TsEmitterVisitor(referenceFilter, importFilter);\n\n    const ctx = EmitterVisitorContext.createRoot();\n\n    converter.visitAllStatements(stmts, ctx);\n\n    const preambleLines = preamble ? preamble.split('\\n') : [];\n    converter.reexports.forEach((reexports, exportedModuleName) => {\n      const reexportsCode =\n          reexports.map(reexport => `${reexport.name} as ${reexport.as}`).join(',');\n      preambleLines.push(`export {${reexportsCode}} from '${exportedModuleName}';`);\n    });\n\n    converter.importsWithPrefixes.forEach((prefix, importedModuleName) => {\n      // Note: can't write the real word for import as it screws up system.js auto detection...\n      preambleLines.push(\n          `imp` +\n          `ort * as ${prefix} from '${importedModuleName}';`);\n    });\n\n    const sm = emitSourceMaps ?\n        ctx.toSourceMapGenerator(genFilePath, preambleLines.length).toJsComment() :\n        '';\n    const lines = [...preambleLines, ctx.toSource(), sm];\n    if (sm) {\n      // always add a newline at the end, as some tools have bugs without it.\n      lines.push('');\n    }\n    ctx.setPreambleLineCount(preambleLines.length);\n    return {sourceText: lines.join('\\n'), context: ctx};\n  }\n\n  emitStatements(genFilePath: string, stmts: o.Statement[], preamble: string = '') {\n    return this.emitStatementsAndContext(genFilePath, stmts, preamble).sourceText;\n  }\n}\n\n\nclass _TsEmitterVisitor extends AbstractEmitterVisitor implements o.TypeVisitor {\n  private typeExpression = 0;\n\n  constructor(private referenceFilter?: ReferenceFilter, private importFilter?: ReferenceFilter) {\n    super(false);\n  }\n\n  importsWithPrefixes = new Map<string, string>();\n  reexports = new Map<string, {name: string, as: string}[]>();\n\n  visitType(t: o.Type|null, ctx: EmitterVisitorContext, defaultType: string = 'any') {\n    if (t) {\n      this.typeExpression++;\n      t.visitType(this, ctx);\n      this.typeExpression--;\n    } else {\n      ctx.print(null, defaultType);\n    }\n  }\n\n  visitLiteralExpr(ast: o.LiteralExpr, ctx: EmitterVisitorContext): any {\n    const value = ast.value;\n    if (value == null && ast.type != o.INFERRED_TYPE) {\n      ctx.print(ast, `(${value} as any)`);\n      return null;\n    }\n    return super.visitLiteralExpr(ast, ctx);\n  }\n\n\n  // Temporary workaround to support strictNullCheck enabled consumers of ngc emit.\n  // In SNC mode, [] have the type never[], so we cast here to any[].\n  // TODO: narrow the cast to a more explicit type, or use a pattern that does not\n  // start with [].concat. see https://github.com/angular/angular/pull/11846\n  visitLiteralArrayExpr(ast: o.LiteralArrayExpr, ctx: EmitterVisitorContext): any {\n    if (ast.entries.length === 0) {\n      ctx.print(ast, '(');\n    }\n    const result = super.visitLiteralArrayExpr(ast, ctx);\n    if (ast.entries.length === 0) {\n      ctx.print(ast, ' as any[])');\n    }\n    return result;\n  }\n\n  visitExternalExpr(ast: o.ExternalExpr, ctx: EmitterVisitorContext): any {\n    this._visitIdentifier(ast.value, ast.typeParams, ctx);\n    return null;\n  }\n\n  visitAssertNotNullExpr(ast: o.AssertNotNull, ctx: EmitterVisitorContext): any {\n    const result = super.visitAssertNotNullExpr(ast, ctx);\n    ctx.print(ast, '!');\n    return result;\n  }\n\n  visitDeclareVarStmt(stmt: o.DeclareVarStmt, ctx: EmitterVisitorContext): any {\n    if (stmt.hasModifier(o.StmtModifier.Exported) && stmt.value instanceof o.ExternalExpr &&\n        !stmt.type) {\n      // check for a reexport\n      const {name, moduleName} = stmt.value.value;\n      if (moduleName) {\n        let reexports = this.reexports.get(moduleName);\n        if (!reexports) {\n          reexports = [];\n          this.reexports.set(moduleName, reexports);\n        }\n        reexports.push({name: name !, as: stmt.name});\n        return null;\n      }\n    }\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.print(stmt, `export `);\n    }\n    if (stmt.hasModifier(o.StmtModifier.Final)) {\n      ctx.print(stmt, `const`);\n    } else {\n      ctx.print(stmt, `var`);\n    }\n    ctx.print(stmt, ` ${stmt.name}`);\n    this._printColonType(stmt.type, ctx);\n    if (stmt.value) {\n      ctx.print(stmt, ` = `);\n      stmt.value.visitExpression(this, ctx);\n    }\n    ctx.println(stmt, `;`);\n    return null;\n  }\n\n  visitWrappedNodeExpr(ast: o.WrappedNodeExpr<any>, ctx: EmitterVisitorContext): never {\n    throw new Error('Cannot visit a WrappedNodeExpr when outputting Typescript.');\n  }\n\n  visitCastExpr(ast: o.CastExpr, ctx: EmitterVisitorContext): any {\n    ctx.print(ast, `(<`);\n    ast.type !.visitType(this, ctx);\n    ctx.print(ast, `>`);\n    ast.value.visitExpression(this, ctx);\n    ctx.print(ast, `)`);\n    return null;\n  }\n\n  visitInstantiateExpr(ast: o.InstantiateExpr, ctx: EmitterVisitorContext): any {\n    ctx.print(ast, `new `);\n    this.typeExpression++;\n    ast.classExpr.visitExpression(this, ctx);\n    this.typeExpression--;\n    ctx.print(ast, `(`);\n    this.visitAllExpressions(ast.args, ctx, ',');\n    ctx.print(ast, `)`);\n    return null;\n  }\n\n  visitDeclareClassStmt(stmt: o.ClassStmt, ctx: EmitterVisitorContext): any {\n    ctx.pushClass(stmt);\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.print(stmt, `export `);\n    }\n    ctx.print(stmt, `class ${stmt.name}`);\n    if (stmt.parent != null) {\n      ctx.print(stmt, ` extends `);\n      this.typeExpression++;\n      stmt.parent.visitExpression(this, ctx);\n      this.typeExpression--;\n    }\n    ctx.println(stmt, ` {`);\n    ctx.incIndent();\n    stmt.fields.forEach((field) => this._visitClassField(field, ctx));\n    if (stmt.constructorMethod != null) {\n      this._visitClassConstructor(stmt, ctx);\n    }\n    stmt.getters.forEach((getter) => this._visitClassGetter(getter, ctx));\n    stmt.methods.forEach((method) => this._visitClassMethod(method, ctx));\n    ctx.decIndent();\n    ctx.println(stmt, `}`);\n    ctx.popClass();\n    return null;\n  }\n\n  private _visitClassField(field: o.ClassField, ctx: EmitterVisitorContext) {\n    if (field.hasModifier(o.StmtModifier.Private)) {\n      // comment out as a workaround for #10967\n      ctx.print(null, `/*private*/ `);\n    }\n    if (field.hasModifier(o.StmtModifier.Static)) {\n      ctx.print(null, 'static ');\n    }\n    ctx.print(null, field.name);\n    this._printColonType(field.type, ctx);\n    if (field.initializer) {\n      ctx.print(null, ' = ');\n      field.initializer.visitExpression(this, ctx);\n    }\n    ctx.println(null, `;`);\n  }\n\n  private _visitClassGetter(getter: o.ClassGetter, ctx: EmitterVisitorContext) {\n    if (getter.hasModifier(o.StmtModifier.Private)) {\n      ctx.print(null, `private `);\n    }\n    ctx.print(null, `get ${getter.name}()`);\n    this._printColonType(getter.type, ctx);\n    ctx.println(null, ` {`);\n    ctx.incIndent();\n    this.visitAllStatements(getter.body, ctx);\n    ctx.decIndent();\n    ctx.println(null, `}`);\n  }\n\n  private _visitClassConstructor(stmt: o.ClassStmt, ctx: EmitterVisitorContext) {\n    ctx.print(stmt, `constructor(`);\n    this._visitParams(stmt.constructorMethod.params, ctx);\n    ctx.println(stmt, `) {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.constructorMethod.body, ctx);\n    ctx.decIndent();\n    ctx.println(stmt, `}`);\n  }\n\n  private _visitClassMethod(method: o.ClassMethod, ctx: EmitterVisitorContext) {\n    if (method.hasModifier(o.StmtModifier.Private)) {\n      ctx.print(null, `private `);\n    }\n    ctx.print(null, `${method.name}(`);\n    this._visitParams(method.params, ctx);\n    ctx.print(null, `)`);\n    this._printColonType(method.type, ctx, 'void');\n    ctx.println(null, ` {`);\n    ctx.incIndent();\n    this.visitAllStatements(method.body, ctx);\n    ctx.decIndent();\n    ctx.println(null, `}`);\n  }\n\n  visitFunctionExpr(ast: o.FunctionExpr, ctx: EmitterVisitorContext): any {\n    if (ast.name) {\n      ctx.print(ast, 'function ');\n      ctx.print(ast, ast.name);\n    }\n    ctx.print(ast, `(`);\n    this._visitParams(ast.params, ctx);\n    ctx.print(ast, `)`);\n    this._printColonType(ast.type, ctx, 'void');\n    if (!ast.name) {\n      ctx.print(ast, ` => `);\n    }\n    ctx.println(ast, '{');\n    ctx.incIndent();\n    this.visitAllStatements(ast.statements, ctx);\n    ctx.decIndent();\n    ctx.print(ast, `}`);\n\n    return null;\n  }\n\n  visitDeclareFunctionStmt(stmt: o.DeclareFunctionStmt, ctx: EmitterVisitorContext): any {\n    if (stmt.hasModifier(o.StmtModifier.Exported)) {\n      ctx.print(stmt, `export `);\n    }\n    ctx.print(stmt, `function ${stmt.name}(`);\n    this._visitParams(stmt.params, ctx);\n    ctx.print(stmt, `)`);\n    this._printColonType(stmt.type, ctx, 'void');\n    ctx.println(stmt, ` {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.statements, ctx);\n    ctx.decIndent();\n    ctx.println(stmt, `}`);\n    return null;\n  }\n\n  visitTryCatchStmt(stmt: o.TryCatchStmt, ctx: EmitterVisitorContext): any {\n    ctx.println(stmt, `try {`);\n    ctx.incIndent();\n    this.visitAllStatements(stmt.bodyStmts, ctx);\n    ctx.decIndent();\n    ctx.println(stmt, `} catch (${CATCH_ERROR_VAR.name}) {`);\n    ctx.incIndent();\n    const catchStmts =\n        [<o.Statement>CATCH_STACK_VAR.set(CATCH_ERROR_VAR.prop('stack', null)).toDeclStmt(null, [\n          o.StmtModifier.Final\n        ])].concat(stmt.catchStmts);\n    this.visitAllStatements(catchStmts, ctx);\n    ctx.decIndent();\n    ctx.println(stmt, `}`);\n    return null;\n  }\n\n  visitBuiltinType(type: o.BuiltinType, ctx: EmitterVisitorContext): any {\n    let typeStr: string;\n    switch (type.name) {\n      case o.BuiltinTypeName.Bool:\n        typeStr = 'boolean';\n        break;\n      case o.BuiltinTypeName.Dynamic:\n        typeStr = 'any';\n        break;\n      case o.BuiltinTypeName.Function:\n        typeStr = 'Function';\n        break;\n      case o.BuiltinTypeName.Number:\n        typeStr = 'number';\n        break;\n      case o.BuiltinTypeName.Int:\n        typeStr = 'number';\n        break;\n      case o.BuiltinTypeName.String:\n        typeStr = 'string';\n        break;\n      case o.BuiltinTypeName.None:\n        typeStr = 'never';\n        break;\n      default:\n        throw new Error(`Unsupported builtin type ${type.name}`);\n    }\n    ctx.print(null, typeStr);\n    return null;\n  }\n\n  visitExpressionType(ast: o.ExpressionType, ctx: EmitterVisitorContext): any {\n    ast.value.visitExpression(this, ctx);\n    if (ast.typeParams !== null) {\n      ctx.print(null, '<');\n      this.visitAllObjects(type => this.visitType(type, ctx), ast.typeParams, ctx, ',');\n      ctx.print(null, '>');\n    }\n    return null;\n  }\n\n  visitArrayType(type: o.ArrayType, ctx: EmitterVisitorContext): any {\n    this.visitType(type.of, ctx);\n    ctx.print(null, `[]`);\n    return null;\n  }\n\n  visitMapType(type: o.MapType, ctx: EmitterVisitorContext): any {\n    ctx.print(null, `{[key: string]:`);\n    this.visitType(type.valueType, ctx);\n    ctx.print(null, `}`);\n    return null;\n  }\n\n  getBuiltinMethodName(method: o.BuiltinMethod): string {\n    let name: string;\n    switch (method) {\n      case o.BuiltinMethod.ConcatArray:\n        name = 'concat';\n        break;\n      case o.BuiltinMethod.SubscribeObservable:\n        name = 'subscribe';\n        break;\n      case o.BuiltinMethod.Bind:\n        name = 'bind';\n        break;\n      default:\n        throw new Error(`Unknown builtin method: ${method}`);\n    }\n    return name;\n  }\n\n  private _visitParams(params: o.FnParam[], ctx: EmitterVisitorContext): void {\n    this.visitAllObjects(param => {\n      ctx.print(null, param.name);\n      this._printColonType(param.type, ctx);\n    }, params, ctx, ',');\n  }\n\n  private _visitIdentifier(\n      value: o.ExternalReference, typeParams: o.Type[]|null, ctx: EmitterVisitorContext): void {\n    const {name, moduleName} = value;\n    if (this.referenceFilter && this.referenceFilter(value)) {\n      ctx.print(null, '(null as any)');\n      return;\n    }\n    if (moduleName && (!this.importFilter || !this.importFilter(value))) {\n      let prefix = this.importsWithPrefixes.get(moduleName);\n      if (prefix == null) {\n        prefix = `i${this.importsWithPrefixes.size}`;\n        this.importsWithPrefixes.set(moduleName, prefix);\n      }\n      ctx.print(null, `${prefix}.`);\n    }\n    ctx.print(null, name !);\n\n    if (this.typeExpression > 0) {\n      // If we are in a type expression that refers to a generic type then supply\n      // the required type parameters. If there were not enough type parameters\n      // supplied, supply any as the type. Outside a type expression the reference\n      // should not supply type parameters and be treated as a simple value reference\n      // to the constructor function itself.\n      const suppliedParameters = typeParams || [];\n      if (suppliedParameters.length > 0) {\n        ctx.print(null, `<`);\n        this.visitAllObjects(type => type.visitType(this, ctx), typeParams !, ctx, ',');\n        ctx.print(null, `>`);\n      }\n    }\n  }\n\n  private _printColonType(type: o.Type|null, ctx: EmitterVisitorContext, defaultType?: string) {\n    if (type !== o.INFERRED_TYPE) {\n      ctx.print(null, ':');\n      this.visitType(type, ctx, defaultType);\n    }\n  }\n}\n"],"sourceRoot":""}